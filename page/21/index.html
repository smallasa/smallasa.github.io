<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  

  
  <title>smallasa</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="smallasa">
<meta property="og:url" content="http://www.smallasa.com/page/21/index.html">
<meta property="og:site_name" content="smallasa">
<meta property="og:locale" content="zh-CN">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="smallasa">
  
    <link rel="alternate" href="/atom.xml" title="smallasa" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">smallasa</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">I known what i do !</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="搜索"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://www.smallasa.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-RabbitMQ-install" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/03/12/RabbitMQ-install/" class="article-date">
  <time datetime="2017-03-12T04:04:38.000Z" itemprop="datePublished">2017-03-12</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/hadoop/">hadoop</a>►<a class="article-category-link" href="/categories/hadoop/RabbitMQ/">RabbitMQ</a>►<a class="article-category-link" href="/categories/hadoop/RabbitMQ/RabbitMQ-install/">RabbitMQ install</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/03/12/RabbitMQ-install/">RabbitMQ install</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="Java-安装"><a href="#Java-安装" class="headerlink" title="Java 安装"></a>Java 安装</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost app]<span class="comment"># tar xzf jdk-8u111-linux-x64.tar.gz</span></span><br><span class="line">[root@localhost app]<span class="comment"># mv jdk1.8.0_111 /mnt/app/java</span></span><br><span class="line">[root@localhost app]<span class="comment"># echo 'JAVA_HOME=/mnt/app/java' | tee /etc/profile.d/java.sh</span></span><br><span class="line">[root@localhost app]<span class="comment"># echo 'JRE_HOME=$&#123;JAVA_HOME&#125;/jre' | tee -a /etc/profile.d/java.sh</span></span><br><span class="line">[root@localhost app]<span class="comment"># echo 'CLASSPATH=.:$&#123;JAVA_HOME&#125;/lib:$&#123;JRE_HOME&#125;/lib' | tee -a /etc/profile.d/java.sh</span></span><br><span class="line">[root@localhost app]<span class="comment"># echo 'export PATH=$&#123;JAVA_HOME&#125;/bin:$PATH' | tee -a /etc/profile.d/java.sh</span></span><br><span class="line">[root@localhost app]<span class="comment"># source  /etc/profile</span></span><br><span class="line">[root@localhost app]<span class="comment"># java -version</span></span><br></pre></td></tr></table></figure>
<h3 id="Erlang-安装"><a href="#Erlang-安装" class="headerlink" title="Erlang 安装"></a>Erlang 安装</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost app]<span class="comment"># tar xzf otp_src_19.2.tar.gz</span></span><br><span class="line">[root@localhost app]<span class="comment"># cd otp_src_19.2</span></span><br><span class="line">[root@localhost otp_src_19.2]<span class="comment"># ./configure --prefix=/mnt/app/erlang</span></span><br><span class="line">[root@localhost otp_src_19.2]<span class="comment"># make</span></span><br><span class="line">[root@localhost otp_src_19.2]<span class="comment"># make install</span></span><br><span class="line"></span><br><span class="line">[root@localhost otp_src_19.2]<span class="comment"># echo 'export ERLANG_HOME=/mnt/app/erlang' | tee /etc/profile.d/erlang.sh</span></span><br><span class="line">[root@localhost otp_src_19.2]<span class="comment"># echo 'export ERLANG_BIN=$&#123;ERLANG_HOME&#125;/bin' | tee -a /etc/profile.d/erlang.sh</span></span><br><span class="line">[root@localhost otp_src_19.2]<span class="comment"># echo 'export PATH=$&#123;ERLANG_BIN&#125;:$PATH' | tee -a /etc/profile.d/erlang.sh  </span></span><br><span class="line">[root@localhost otp_src_19.2]<span class="comment"># source /etc/profile</span></span><br></pre></td></tr></table></figure>
<h3 id="RabbitMQ-standard-install"><a href="#RabbitMQ-standard-install" class="headerlink" title="RabbitMQ standard install"></a>RabbitMQ standard install</h3><ol>
<li><p>RabbitMQ 设置主机名</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost app]<span class="comment"># echo rabbitmq188 | tee /etc/hostname</span></span><br><span class="line">[root@localhost app]<span class="comment"># echo '192.168.13.188 rabbitmq188' |tee -a /etc/hosts</span></span><br><span class="line">[root@localhost app]<span class="comment"># hostname rabbitmq188</span></span><br><span class="line">[root@localhost app]<span class="comment"># $SHELL</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>RabbitMQ 安装</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost app]<span class="comment"># xz -d rabbitmq-server-generic-unix-3.6.10.tar.xz</span></span><br><span class="line">[root@localhost app]<span class="comment"># tar xf rabbitmq-server-generic-unix-3.6.10.tar</span></span><br><span class="line">[root@localhost app]<span class="comment"># mv rabbitmq_server-3.6.10 /mnt/app/rabbitmq</span></span><br><span class="line">[root@localhost app]<span class="comment"># chown -R wisdom.wisdom /mnt/app/rabbitmq</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>RabbitMQ 环境变量</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost app]<span class="comment"># echo 'export RABBITMQ_HOME=/mnt/app/rabbitmq' |tee /etc/profile.d/rabbitmq.sh</span></span><br><span class="line">[root@localhost app]<span class="comment"># echo 'export RABBITMQ_BIN=$RABBITMQ_HOME/sbin' |tee -a /etc/profile.d/rabbitmq.sh                     </span></span><br><span class="line">[root@localhost app]<span class="comment"># echo 'export PATH=$RABBITMQ_BIN:$PATH' |tee -a /etc/profile.d/rabbitmq.sh                                </span></span><br><span class="line">[root@localhost app]<span class="comment"># source /etc/profile</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>RabbitMQ 配置文件</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">[wisdom@localhost ~]$ cat &gt; /mnt/app/rabbitmq/etc/rabbitmq/rabbitmq-env.conf &lt;&lt;EOF</span><br><span class="line">RABBITMQ_MNESIA_BASE=/mnt/data/rabbitmq/mnesia</span><br><span class="line">RABBITMQ_LOG_BASE=/mnt/<span class="built_in">log</span>/rabbitmq</span><br><span class="line">EOF</span><br><span class="line"></span><br><span class="line">[wisdom@localhost ~]$ cat &gt; /mnt/app/rabbitmq/etc/rabbitmq/rabbitmq.config &lt;&lt;EOF</span><br><span class="line">[</span><br><span class="line">  &#123;rabbit,</span><br><span class="line">    [</span><br><span class="line">      &#123;vm_memory_high_watermark, 0.6&#125;,</span><br><span class="line">      &#123;vm_memory_high_watermark_paging_ratio, 0.3&#125;,</span><br><span class="line">      &#123;disk_free_limit, <span class="string">"10GB"</span>&#125;,</span><br><span class="line">      &#123;hipe_compile, <span class="literal">true</span>&#125;,</span><br><span class="line">      &#123;queue_index_embed_msgs_below, 4096&#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br><span class="line">].</span><br><span class="line">EOF</span><br><span class="line"></span><br><span class="line">[root@localhost app]<span class="comment"># mkdir -p /mnt/data/rabbitmq/mnesia</span></span><br><span class="line">[root@localhost app]<span class="comment"># mkdir -p /mnt/log/rabbitmq</span></span><br><span class="line">[root@localhost app]<span class="comment"># chown -R wisdom.wisdom /mnt/data/rabbitmq</span></span><br><span class="line">[root@localhost app]<span class="comment"># chown -R wisdom.wisdom /mnt/log/rabbitmq</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>RabbitMQ 启动</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[wisdom@localhost ~]$ /mnt/app/rabbitmq/sbin/rabbitmq-server -detached</span><br><span class="line">or:</span><br><span class="line">[wisdom@localhost ~]$ /mnt/app/rabbitmq/sbin/rabbitmq-server &amp;</span><br><span class="line"></span><br><span class="line">[wisdom@localhost ~]$ /mnt/app/rabbitmq/sbin/rabbitmqctl stop</span><br></pre></td></tr></table></figure>
</li>
<li><p>RabbitMQ 安装插件rabbitmq_management(web控制台)</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost app]<span class="comment"># su - wisdom</span></span><br><span class="line">[wisdom@localhost ~]$ /mnt/app/rabbitmq/sbin/rabbitmq-plugins list</span><br><span class="line">[wisdom@localhost ~]$ /mnt/app/rabbitmq/sbin/rabbitmq-plugins <span class="built_in">enable</span> rabbitmq_management</span><br></pre></td></tr></table></figure>
</li>
<li><p>RabbitMQ 创建vhost</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[wisdom@localhost ~]$ /mnt/app/rabbitmq/sbin/rabbitmqctl list_vhosts</span><br><span class="line">[wisdom@localhost ~]$ /mnt/app/rabbitmq/sbin/rabbitmqctl add_vhost /zabbix</span><br></pre></td></tr></table></figure>
</li>
<li><p>RabbitMQ 高可用方案</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[wisdom@localhost ~]$ /mnt/app/rabbitmq/sbin/rabbitmqctl set_policy -p /zabbix ha-all <span class="string">"^"</span> <span class="string">'&#123;"ha-mode":"all"&#125;'</span></span><br><span class="line">[wisdom@localhost ~]$ /mnt/app/rabbitmq/sbin/rabbitmqctl list_policies -p /zabbix</span><br></pre></td></tr></table></figure>
</li>
<li><p>RabbitMQ 用户创建</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[wisdom@localhost ~]$ /mnt/app/rabbitmq/sbin/rabbitmqctl list_users</span><br><span class="line">[wisdom@localhost ~]$ /mnt/app/rabbitmq/sbin/rabbitmqctl delete_user guest</span><br><span class="line"></span><br><span class="line">[wisdom@localhost ~]$ /mnt/app/rabbitmq/sbin/rabbitmqctl add_user zabbix zabbix123</span><br><span class="line"></span><br><span class="line">[wisdom@localhost ~]$ /mnt/app/rabbitmq/sbin/rabbitmqctl set_user_tags zabbix administrator monitoring</span><br><span class="line"></span><br><span class="line">[wisdom@localhost ~]$ /mnt/app/rabbitmq/sbin/rabbitmqctl list_permissions</span><br><span class="line">[wisdom@localhost ~]$ /mnt/app/rabbitmq/sbin/rabbitmqctl list_user_permissions zabbix</span><br><span class="line">[wisdom@localhost ~]$ /mnt/app/rabbitmq/sbin/rabbitmqctl set_permissions -p /zabbix zabbix <span class="string">'.*'</span> <span class="string">'.*'</span> <span class="string">'.*'</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>RabbitMQ 用户操作</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line">* vhost管理</span><br><span class="line">//查看vhost</span><br><span class="line">[wisdom@rabbitmq188 ~]$ /mnt/app/rabbitmq/sbin/rabbitmqctl list_vhosts</span><br><span class="line"></span><br><span class="line">//创建vhost</span><br><span class="line">[wisdom@rabbitmq188 ~]$ /mnt/app/rabbitmq/sbin/rabbitmqctl add_vhost /zabbix  </span><br><span class="line"></span><br><span class="line">//删除vhost</span><br><span class="line">[wisdom@rabbitmq188 ~]$ /mnt/app/rabbitmq/sbin/rabbitmqctl delete_vhost /zabbix</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">* 用户管理</span><br><span class="line">//创建用户</span><br><span class="line">[wisdom@localhost ~]$ /mnt/app/rabbitmq/sbin/rabbitmqctl add_user xroot xroot123</span><br><span class="line"></span><br><span class="line">//删除用户</span><br><span class="line">[wisdom@localhost ~]$ /mnt/app/rabbitmq/sbin/rabbitmqctl delete_user guest</span><br><span class="line"></span><br><span class="line">//修改密码</span><br><span class="line">[wisdom@localhost ~]$ /mnt/app/rabbitmq/sbin/rabbitmqctl change_password Username Newpassword</span><br><span class="line"></span><br><span class="line">//查看用户列表</span><br><span class="line">[wisdom@localhost ~]$ /mnt/app/rabbitmq/sbin/rabbitmqctl list_users</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">* 用户角色管理</span><br><span class="line">  1. 超级管理员(administrator)</span><br><span class="line">     可登陆管理控制台(启用management plugin的情况下),可查看所有的信息,并且可以对用户,策略(policy)进行操作</span><br><span class="line">  2. 监控者(monitoring)</span><br><span class="line">     可登陆管理控制台(启用management plugin的情况下),同时可以查看rabbitmq节点的相关信息(进程数,内存使用情况,磁盘使用情况等)</span><br><span class="line">  3. 策略制定者(policymaker)</span><br><span class="line">     可登陆管理控制台(启用management plugin的情况下),同时可以对policy进行管理.但无法查看节点的相关信息(上图红框标识的部分)</span><br><span class="line">  4. 普通管理者(management)</span><br><span class="line">     仅可登陆管理控制台(启用management plugin的情况下),无法看到节点信息,也无法对策略进行管理</span><br><span class="line">  5. 其他</span><br><span class="line">     无法登陆管理控制台,通常就是普通的生产者和消费者</span><br><span class="line"></span><br><span class="line">//修改用户角色</span><br><span class="line">[wisdom@localhost ~]$ /mnt/app/rabbitmq/sbin/rabbitmqctl set_user_tags xroot administrator</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">* 用户权限</span><br><span class="line">//查看指定vhost权限</span><br><span class="line">[wisdom@rabbitmq188 ~]$ /mnt/app/rabbitmq/sbin/rabbitmqctl list_permissions -p /</span><br><span class="line"></span><br><span class="line">//查看指定用户权限</span><br><span class="line">[wisdom@localhost ~]$ /mnt/app/rabbitmq/sbin/rabbitmqctl list_user_permissions  xroot</span><br><span class="line"></span><br><span class="line">//为用户设置权限</span><br><span class="line">[wisdom@localhost ~]$ /mnt/app/rabbitmq/sbin/rabbitmqctl set_permissions -p / xnroot <span class="string">'.*'</span> <span class="string">'.*'</span> <span class="string">'.*'</span></span><br><span class="line"></span><br><span class="line">//清空所有权限</span><br><span class="line">[wisdom@localhost ~]$ /mnt/app/rabbitmq/sbin/rabbitmqctl clear_permissions</span><br></pre></td></tr></table></figure>
</li>
<li><p>rabbitmq 优化</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">[wisdom@localhost ~]$ cat /mnt/app/rabbitmq/etc/rabbitmq/rabbitmq.config</span><br><span class="line">[</span><br><span class="line">  &#123;rabbit,</span><br><span class="line">    [</span><br><span class="line">      &#123;vm_memory_high_watermark, 0.6&#125;,</span><br><span class="line">      &#123;vm_memory_high_watermark_paging_ratio, 0.3&#125;,</span><br><span class="line">      &#123;disk_free_limit, <span class="string">"10GB"</span>&#125;,</span><br><span class="line">      &#123;hipe_compile, <span class="literal">true</span>&#125;,</span><br><span class="line">      &#123;queue_index_embed_msgs_below, 4096&#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br><span class="line">].</span><br><span class="line"></span><br><span class="line">[wisdom@localhost ~]$ cat /mnt/app/rabbitmq/sbin/rabbitmq-defaults</span><br><span class="line">PLUGINS_DIR=<span class="string">"<span class="variable">$&#123;RABBITMQ_HOME&#125;</span>/plugins"</span></span><br><span class="line">IO_THREAD_POOL_SIZE=16</span><br></pre></td></tr></table></figure>
</li>
<li><p>RabbitMQ 启动脚本</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">[wisdom@rabbit67 ~]$ cat /etc/init.d/rabbitmq</span><br><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line">STATUS=<span class="variable">$1</span></span><br><span class="line">ROLE=<span class="string">'rabbitmq'</span></span><br><span class="line">RBSERVER=<span class="string">"/mnt/app/<span class="variable">$&#123;ROLE&#125;</span>/sbin/rabbitmq-server "</span></span><br><span class="line">RBCTL=<span class="string">"/mnt/app/<span class="variable">$&#123;ROLE&#125;</span>/sbin/rabbitmqctl "</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> [ <span class="variable">$STATUS</span> == <span class="string">"start"</span> ];<span class="keyword">then</span></span><br><span class="line">  <span class="variable">$RBSERVER</span> &amp;</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> [ <span class="variable">$STATUS</span> == <span class="string">"stop"</span> ];<span class="keyword">then</span></span><br><span class="line">  NUM=$(ps -ef|grep -w rabbitmq-server|grep -v grep|awk <span class="string">'&#123;print $2&#125;'</span>|wc -l)</span><br><span class="line">  <span class="keyword">if</span> [ <span class="variable">$NUM</span> != 1 ];<span class="keyword">then</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"Please check <span class="variable">$ROLE</span>, There are <span class="variable">$NUM</span> processes."</span></span><br><span class="line">    <span class="built_in">exit</span> 0</span><br><span class="line">  <span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line">  <span class="variable">$RBCTL</span> stop</span><br><span class="line">  <span class="keyword">if</span> [ $? == 0 ];<span class="keyword">then</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"<span class="variable">$ROLE</span> stoped success."</span></span><br><span class="line">  <span class="keyword">else</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"<span class="variable">$ROLE</span> stoped fail."</span></span><br><span class="line">  <span class="keyword">fi</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> [ <span class="variable">$STATUS</span> == <span class="string">"status"</span> ];<span class="keyword">then</span></span><br><span class="line">  NUM=$(ps -ef|grep -w rabbitmq-server|grep -v grep|awk <span class="string">'&#123;print $2&#125;'</span>|wc -l)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> [ <span class="variable">$NUM</span> == 0 ];<span class="keyword">then</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"<span class="variable">$ROLE</span> is stopped."</span></span><br><span class="line">    <span class="built_in">exit</span> 0</span><br><span class="line">  <span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> [ <span class="variable">$NUM</span> != 1 ];<span class="keyword">then</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"Please check <span class="variable">$ROLE</span>, There are <span class="variable">$NUM</span> processes."</span></span><br><span class="line">  <span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line">  PID=$(ps -ef|grep -w rabbitmq-server|grep -v grep|awk <span class="string">'&#123;print $2&#125;'</span>)</span><br><span class="line">  <span class="built_in">echo</span> <span class="string">"<span class="variable">$ROLE</span> is running. PID: <span class="variable">$PID</span>"</span></span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure>
</li>
</ol>
<h3 id="RabbitMQ-cluster-install"><a href="#RabbitMQ-cluster-install" class="headerlink" title="RabbitMQ cluster install"></a>RabbitMQ cluster install</h3><ol>
<li><p>RabbitMQ 安装</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost app]<span class="comment"># xz -d rabbitmq-server-generic-unix-3.6.6.tar.xz</span></span><br><span class="line">[root@localhost app]<span class="comment"># tar xf rabbitmq-server-generic-unix-3.6.6.tar</span></span><br><span class="line">[root@localhost app]<span class="comment"># mv rabbitmq_server-3.6.6 /mnt/app/rabbitmq</span></span><br><span class="line">[root@localhost app]<span class="comment"># chown -R root.root /mnt/app/rabbitmq</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>RabbitMQ 安装rabbitmq_management插件</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost app]<span class="comment"># /mnt/app/rabbitmq/sbin/rabbitmq-plugins enable rabbitmq_management</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>RabbitMQ 环境变量</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost app]<span class="comment"># echo 'export RABBITMQ_HOME=/mnt/app/rabbitmq' | tee /etc/profile.d/rabbitmq.sh</span></span><br><span class="line">[root@localhost app]<span class="comment"># echo 'export RABBITMQ_BIN=$&#123;RABBITMQ_HOME&#125;/sbin' | tee -a /etc/profile.d/rabbitmq.sh                    </span></span><br><span class="line">[root@localhost app]<span class="comment"># echo 'export PATH=$&#123;RABBITMQ_BIN&#125;:$PATH' | tee -a /etc/profile.d/rabbitmq.sh                     </span></span><br><span class="line">[root@localhost app]<span class="comment"># source /etc/profile</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>RabbitMQ 创建配置文件和目录(数据+日志)</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost app]<span class="comment"># touch /mnt/app/rabbitmq/etc/rabbitmq/rabbitmq-env.conf</span></span><br><span class="line">[root@localhost app]<span class="comment"># touch /mnt/app/rabbitmq/etc/rabbitmq/rabbitmq.config</span></span><br><span class="line">[root@localhost app]<span class="comment"># chown -R wisdom.wisdom /mnt/app/rabbitmq/etc/</span></span><br><span class="line"></span><br><span class="line">[root@localhost app]<span class="comment"># mkdir -p /mnt/&#123;data,log&#125;/rabbitmq</span></span><br><span class="line">[root@localhost app]<span class="comment"># mkdir -p /mnt/data/rabbitmq/mnesia</span></span><br><span class="line">[root@localhost app]<span class="comment"># chown -R wisdom.wisdom /mnt/&#123;data,log&#125;/rabbitmq</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>RabbitMQ 集群主机名设置</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">RabbitMQ cluster-1:</span><br><span class="line">[root@localhost app]<span class="comment"># hostname rabbit228</span></span><br><span class="line">[root@localhost app]<span class="comment"># echo 'rabbit228' |tee /etc/hostname</span></span><br><span class="line">[root@localhost app]<span class="comment"># echo '192.168.18.228  rabbit228' |tee -a /etc/hosts</span></span><br><span class="line">[root@localhost app]<span class="comment"># echo '192.168.18.229  rabbit229' |tee -a /etc/hosts  </span></span><br><span class="line">[root@localhost app]<span class="comment"># echo '192.168.18.230  rabbit230' |tee -a /etc/hosts</span></span><br><span class="line"></span><br><span class="line">RabbitMQ cluster-2:</span><br><span class="line">[root@localhost app]<span class="comment"># hostname rabbit229</span></span><br><span class="line">[root@localhost app]<span class="comment"># echo 'rabbit229' |tee /etc/hostname</span></span><br><span class="line">[root@localhost app]<span class="comment"># echo '192.168.18.228  rabbit228' |tee -a /etc/hosts</span></span><br><span class="line">[root@localhost app]<span class="comment"># echo '192.168.18.229  rabbit229' |tee -a /etc/hosts  </span></span><br><span class="line">[root@localhost app]<span class="comment"># echo '192.168.18.230  rabbit230' |tee -a /etc/hosts</span></span><br><span class="line"></span><br><span class="line">RabbitMQ cluster-3:</span><br><span class="line">[root@localhost app]<span class="comment"># hostname rabbit230</span></span><br><span class="line">[root@localhost app]<span class="comment"># echo 'rabbit230' |tee /etc/hostname</span></span><br><span class="line">[root@localhost app]<span class="comment"># echo '192.168.18.228  rabbit228' |tee -a /etc/hosts</span></span><br><span class="line">[root@localhost app]<span class="comment"># echo '192.168.18.229  rabbit229' |tee -a /etc/hosts  </span></span><br><span class="line">[root@localhost app]<span class="comment"># echo '192.168.18.230  rabbit230' |tee -a /etc/hosts</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>RabbitMQ 集群配置</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">//cluster-X:(三台机器都要执行)</span><br><span class="line">[root@localhost app]<span class="comment"># su - wisdom</span></span><br><span class="line">[wisdom@localhost ~]$ cat &gt; /mnt/app/rabbitmq/etc/rabbitmq/rabbitmq-env.conf &lt;&lt;EOF</span><br><span class="line">&gt; RABBITMQ_NODE_IP_ADDRESS=</span><br><span class="line">&gt; RABBITMQ_NODE_PORT=5672</span><br><span class="line">&gt; RABBITMQ_DIST_PORT=25672</span><br><span class="line">&gt; RABBITMQ_NODENAME=rabbit@\<span class="variable">$HOSTNAME</span></span><br><span class="line">&gt; RABBITMQ_MNESIA_BASE=/mnt/data/rabbitmq/mnesia</span><br><span class="line">&gt; RABBITMQ_LOG_BASE=/mnt/<span class="built_in">log</span>/rabbitmq</span><br><span class="line">&gt; EOF</span><br><span class="line"></span><br><span class="line">[wisdom@rabbitX ~]$ cat &gt; /mnt/app/rabbitmq/etc/rabbitmq/rabbitmq.config &lt;&lt;EOF</span><br><span class="line">&gt; [</span><br><span class="line">&gt;  &#123;rabbit,</span><br><span class="line">&gt;   [</span><br><span class="line">&gt;   ]&#125;,</span><br><span class="line">&gt;  &#123;kernel,</span><br><span class="line">&gt;   [</span><br><span class="line">&gt;   ]&#125;,</span><br><span class="line">&gt;  &#123;rabbitmq_management,</span><br><span class="line">&gt;   [</span><br><span class="line">&gt;   ]&#125;,</span><br><span class="line">&gt;  &#123;rabbitmq_shovel,</span><br><span class="line">&gt;   [&#123;shovels,</span><br><span class="line">&gt;     [</span><br><span class="line">&gt;     ]&#125;</span><br><span class="line">&gt;   ]&#125;,</span><br><span class="line">&gt;  &#123;rabbitmq_stomp,</span><br><span class="line">&gt;   [</span><br><span class="line">&gt;   ]&#125;,</span><br><span class="line">&gt;  &#123;rabbitmq_mqtt,</span><br><span class="line">&gt;   [</span><br><span class="line">&gt;   ]&#125;,</span><br><span class="line">&gt;  &#123;rabbitmq_amqp1_0,</span><br><span class="line">&gt;   [</span><br><span class="line">&gt;   ]&#125;,</span><br><span class="line">&gt;  &#123;rabbitmq_auth_backend_ldap,</span><br><span class="line">&gt;   [</span><br><span class="line">&gt;   ]&#125;</span><br><span class="line">&gt; ].</span><br><span class="line">&gt; EOF</span><br></pre></td></tr></table></figure>
</li>
<li><p>RabbitMQ 启动所有服务</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[wisdom@rabbitX ~]$ /mnt/app/rabbitmq/sbin/rabbitmq-server &amp;</span><br><span class="line">[wisdom@rabbitX ~]$ /mnt/app/rabbitmq/sbin/rabbitmqctl stop</span><br><span class="line">[wisdom@rabbitX ~]$ /mnt/app/rabbitmq/sbin/rabbitmqctl status</span><br></pre></td></tr></table></figure>
</li>
<li><p>RabbitMQ 集群操作:将要加入集群的机器都使用一个cookie(在三台机器中任选一台)</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line">//在228上找到elang.cookie</span><br><span class="line">[wisdom@rabbit228 ~]$ cat ~/.erlang.cookie</span><br><span class="line">HBSJBDVPUCEITCQZQQDB</span><br><span class="line"></span><br><span class="line">//将.erlang.cookie内容copy到229和230这两台机器的~/.erlang.cookie文件中</span><br><span class="line">[wisdom@rabbit229 ~]$ /mnt/app/rabbitmq/sbin/rabbitmqctl stop</span><br><span class="line">[wisdom@rabbit229 ~]$ chmod 600 ~/.erlang.cookie</span><br><span class="line">[wisdom@rabbit229 ~]$ <span class="built_in">echo</span> HBSJBDVPUCEITCQZQQDB | tee ~/.erlang.cookie</span><br><span class="line">[wisdom@rabbit229 ~]$ chmod 400 ~/.erlang.cookie  </span><br><span class="line"></span><br><span class="line">[wisdom@rabbit230 ~]$ /mnt/app/rabbitmq/sbin/rabbitmqctl stop</span><br><span class="line">[wisdom@rabbit230 ~]$ chmod 600 ~/.erlang.cookie</span><br><span class="line">[wisdom@rabbit230 ~]$ <span class="built_in">echo</span> HBSJBDVPUCEITCQZQQDB | tee ~/.erlang.cookie</span><br><span class="line">[wisdom@rabbit230 ~]$ chmod 400 ~/.erlang.cookie</span><br><span class="line"></span><br><span class="line">//修改完~/.erlang.cookie后,启动RabbitMQ服务</span><br><span class="line">[wisdom@rabbit229 ~]$ /mnt/app/rabbitmq/sbin/rabbitmq-server &amp;</span><br><span class="line">[wisdom@rabbit230 ~]$ /mnt/app/rabbitmq/sbin/rabbitmq-server &amp;</span><br><span class="line"></span><br><span class="line">9. RabbitMQ 集群操作: 将229节点加入到228 RabbitMQ集群中(磁盘存储)</span><br><span class="line">```bash</span><br><span class="line">//查看228节点的集群状态</span><br><span class="line">[wisdom@rabbit229 ~]$ /mnt/app/rabbitmq/sbin/rabbitmqctl -n rabbit@rabbit228 cluster_status</span><br><span class="line">Cluster status of node rabbit@rabbit228 ...</span><br><span class="line">[&#123;nodes,[&#123;disc,[rabbit@rabbit228,rabbit@rabbit229]&#125;]&#125;,</span><br><span class="line"> &#123;running_nodes,[rabbit@rabbit228]&#125;,</span><br><span class="line"> &#123;cluster_name,&lt;&lt;<span class="string">"rabbit@rabbit228"</span>&gt;&gt;&#125;,</span><br><span class="line"> &#123;partitions,[]&#125;,</span><br><span class="line"> &#123;alarms,[&#123;rabbit@rabbit228,[]&#125;]&#125;]</span><br><span class="line"></span><br><span class="line">//停止229节点的Rabbitmq服务</span><br><span class="line">[wisdom@rabbit229 ~]$ /mnt/app/rabbitmq/sbin/rabbitmqctl stop_app</span><br><span class="line"></span><br><span class="line">//清空229 Rabbit元数据</span><br><span class="line">[wisdom@rabbit229 ~]$ /mnt/app/rabbitmq/sbin/rabbitmqctl -n rabbit@rabbit229 reset</span><br><span class="line"></span><br><span class="line">//将229 Rabbit加入到228集群中</span><br><span class="line">[wisdom@rabbit229 ~]$ /mnt/app/rabbitmq/sbin/rabbitmqctl join_cluster rabbit@rabbit228</span><br><span class="line"></span><br><span class="line">//启动229 Rabbit服务</span><br><span class="line">[wisdom@rabbit229 ~]$ /mnt/app/rabbitmq/sbin/rabbitmqctl start_app</span><br><span class="line"></span><br><span class="line">//查看集群状态</span><br><span class="line">[wisdom@rabbit229 ~]$ /mnt/app/rabbitmq/sbin/rabbitmqctl -n rabbit@rabbit228 cluster_status</span><br><span class="line">Cluster status of node rabbit@rabbit228 ...</span><br><span class="line">[&#123;nodes,[&#123;disc,[rabbit@rabbit228,rabbit@rabbit229]&#125;]&#125;,</span><br><span class="line"> &#123;running_nodes,[rabbit@rabbit228]&#125;,</span><br><span class="line"> &#123;cluster_name,&lt;&lt;<span class="string">"rabbit@rabbit228"</span>&gt;&gt;&#125;,</span><br><span class="line"> &#123;partitions,[]&#125;,</span><br><span class="line"> &#123;alarms,[&#123;rabbit@rabbit228,[]&#125;]&#125;]</span><br></pre></td></tr></table></figure>
</li>
<li><p>RabbitMQ 集群操作: 将230 RabbitMQ加入到228 RabbitMQ集群中(内存存储)</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">//停止230节点的Rabbitmq服务</span><br><span class="line">[wisdom@rabbit230 ~]$ /mnt/app/rabbitmq/sbin/rabbitmqctl stop_app</span><br><span class="line"></span><br><span class="line">//清空230 Rabbit元数据</span><br><span class="line">[wisdom@rabbit230 ~]$ /mnt/app/rabbitmq/sbin/rabbitmqctl -n rabbit@rabbit230 reset</span><br><span class="line"></span><br><span class="line">//将230 Rabbit加入到228集群中,内存存储</span><br><span class="line">[wisdom@rabbit230 ~]$ /mnt/app/rabbitmq/sbin/rabbitmqctl join_cluster rabbit@rabbit228 --ram</span><br><span class="line"></span><br><span class="line">//启动230 Rabbit服务</span><br><span class="line">[wisdom@rabbit230 ~]$ /mnt/app/rabbitmq/sbin/rabbitmqctl start_app</span><br><span class="line"></span><br><span class="line">////查看集群状态</span><br><span class="line">[wisdom@rabbit229 ~]$ /mnt/app/rabbitmq/sbin/rabbitmqctl -n rabbit@rabbit228 cluster_status</span><br><span class="line">Cluster status of node rabbit@rabbit228 ...</span><br><span class="line">[&#123;nodes,[&#123;disc,[rabbit@rabbit228,rabbit@rabbit229]&#125;,&#123;ram,[rabbit@rabbit230]&#125;]&#125;,</span><br><span class="line"> &#123;running_nodes,[rabbit@rabbit230,rabbit@rabbit229,rabbit@rabbit228]&#125;,</span><br><span class="line"> &#123;cluster_name,&lt;&lt;<span class="string">"rabbit@rabbit228"</span>&gt;&gt;&#125;,</span><br><span class="line"> &#123;partitions,[]&#125;,</span><br><span class="line"> &#123;alarms,[&#123;rabbit@rabbit230,[]&#125;,&#123;rabbit@rabbit229,[]&#125;,&#123;rabbit@rabbit228,[]&#125;]&#125;]</span><br></pre></td></tr></table></figure>
</li>
<li><p>设置集群中所有的队列为镜像队列(任意一台机器上执行)</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[wisdom@rabbit228 ~]$ /mnt/app/rabbitmq/sbin/rabbitmqctl set_policy ha-all <span class="string">"^"</span> <span class="string">'&#123;"ha-mode":"all"&#125;'</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>设置用户权限</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[wisdom@rabbit228 ~]$ /mnt/app/rabbitmq/sbin/rabbitmqctl add_user <span class="built_in">test</span> test123  </span><br><span class="line">[wisdom@rabbit229 ~]$ /mnt/app/rabbitmq/sbin/rabbitmqctl set_user_tags <span class="built_in">test</span> administrator</span><br><span class="line">[wisdom@rabbit228 ~]$ /mnt/app/rabbitmq/sbin/rabbitmqctl set_permissions -p / <span class="built_in">test</span> <span class="string">".\*"</span> <span class="string">".\*"</span> <span class="string">".\*"</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>安装haproxy,作为反向代理</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line">//haproxy 安装</span><br><span class="line">[root@localhost app]<span class="comment"># useradd -s /sbin/nologin haproxy</span></span><br><span class="line"></span><br><span class="line">[root@localhost app]<span class="comment"># tar xzf haproxy-1.7.2.tar.gz</span></span><br><span class="line">[root@localhost app]<span class="comment"># cd haproxy-1.7.2</span></span><br><span class="line">[root@localhost haproxy-1.7.2]<span class="comment"># make TARGET=generic PREFIX=/mnt/app/haproxy</span></span><br><span class="line">[root@localhost haproxy-1.7.2]<span class="comment"># make install PREFIX=/mnt/app/haproxy</span></span><br><span class="line"></span><br><span class="line">//haproxy 环境变量设置</span><br><span class="line">[root@localhost haproxy-1.7.2]<span class="comment"># echo 'export HAPROXY_HOME=/mnt/app/haproxy' | tee /etc/profile.d/haproxy.sh   </span></span><br><span class="line">[root@localhost haproxy-1.7.2]<span class="comment"># echo 'export HAPROXY_BIN=$&#123;HAPROXY_HOME&#125;/sbin' | tee -a /etc/profile.d/haproxy.sh</span></span><br><span class="line">[root@localhost haproxy-1.7.2]<span class="comment"># echo 'export PATH=$&#123;HAPROXY_BIN&#125;:$PATH' | tee -a /etc/profile.d/haproxy.sh       </span></span><br><span class="line">[root@localhost haproxy-1.7.2]<span class="comment"># source /etc/profile</span></span><br><span class="line"></span><br><span class="line">//haproxy 创建配置文件</span><br><span class="line">[root@localhost haproxy-1.7.2]<span class="comment"># mkdir -p /mnt/app/haproxy/conf</span></span><br><span class="line">[root@localhost haproxy-1.7.2]<span class="comment"># touch /mnt/app/haproxy/conf/haproxy.cfg</span></span><br><span class="line"></span><br><span class="line">//haproxy 配置</span><br><span class="line">[root@localhost app]<span class="comment"># vim /mnt/app/haproxy/conf/haproxy.cfg</span></span><br><span class="line">global</span><br><span class="line">    <span class="built_in">log</span> /mnt/<span class="built_in">log</span>/haproxy 127.0.0.1 local0</span><br><span class="line">    <span class="built_in">log</span> /mnt/<span class="built_in">log</span>/haproxy 127.0.0.1 local1 notice</span><br><span class="line">    stats socket /mnt/<span class="built_in">log</span>/haproxy/haproxy.socket mode 770 level admin</span><br><span class="line">    pidfile /mnt/<span class="built_in">log</span>/haproxy/haproxy.pid</span><br><span class="line">    maxconn 5000</span><br><span class="line">    user haproxy</span><br><span class="line">    group haproxy</span><br><span class="line">    deamon</span><br><span class="line"></span><br><span class="line">defaults</span><br><span class="line">    <span class="built_in">log</span> global</span><br><span class="line">    mode tcp</span><br><span class="line">    option tcplog</span><br><span class="line">    option dontlognull</span><br><span class="line">    retries 3</span><br><span class="line">    option redispatch</span><br><span class="line">    timeout connect 5s</span><br><span class="line">    timeout client  120s</span><br><span class="line">    timeout server  120s</span><br><span class="line"></span><br><span class="line">listen haproxy_stats</span><br><span class="line">    <span class="built_in">bind</span> 0.0.0.0:8080</span><br><span class="line">    stats refresh 30s</span><br><span class="line">    stats uri /haproxy?stats</span><br><span class="line">    stats realm Haproxy Manager</span><br><span class="line">    stats auth admin:admin</span><br><span class="line">    stats hide-version</span><br><span class="line"></span><br><span class="line">listen rabbitmq_admin</span><br><span class="line">    <span class="built_in">bind</span> 0.0.0.0:8090</span><br><span class="line">    server rabbit228 192.168.18.228:15672</span><br><span class="line">    server rabbit229 192.168.18.229:15672</span><br><span class="line">    server rabbit230 192.168.18.230:15672</span><br><span class="line"></span><br><span class="line">listen rabbitmq_cluster</span><br><span class="line">    <span class="built_in">bind</span> 0.0.0.0:5672</span><br><span class="line">    mode tcp</span><br><span class="line">    option tcplog</span><br><span class="line">    option clitcpka</span><br><span class="line">    timeout client  3h</span><br><span class="line">    timeout server  3h</span><br><span class="line">    balance roundrobin</span><br><span class="line">    server rabbit228 192.168.18.228:15672 check inter 5s rise 2 fall 3</span><br><span class="line">    server rabbit229 192.168.18.229:15672 check inter 5s rise 2 fall 3</span><br><span class="line">    server rabbit230 192.168.18.230:15672 check inter 5s rise 2 fall 3</span><br><span class="line"></span><br><span class="line">//haproxy 启动</span><br><span class="line">[root@localhost haproxy-1.7.2]<span class="comment"># /mnt/app/haproxy/sbin/haproxy -f /mnt/app/haproxy/conf/haproxy.cfg</span></span><br><span class="line"></span><br><span class="line">//通过haproxy查看RabbitMQ状态</span><br><span class="line">在浏览器中打开:</span><br><span class="line">http://192.168.18.223:8090</span><br></pre></td></tr></table></figure>
</li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.smallasa.com/2017/03/12/RabbitMQ-install/" data-id="cjavy9jtp000n0coq905psj1b" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-flume-install" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/03/12/flume-install/" class="article-date">
  <time datetime="2017-03-12T03:27:34.000Z" itemprop="datePublished">2017-03-12</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/hadoop/">hadoop</a>►<a class="article-category-link" href="/categories/hadoop/flume/">flume</a>►<a class="article-category-link" href="/categories/hadoop/flume/flume-install/">flume install</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/03/12/flume-install/">flume install</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="flume-install"><a href="#flume-install" class="headerlink" title="flume install"></a>flume install</h3><ol>
<li><p>flume 安装</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@10 app]<span class="comment"># tar xzf apache-flume-1.7.0-bin.tar.gz</span></span><br><span class="line">[root@10 app]<span class="comment"># mv apache-flume-1.7.0-bin /mnt/app/flume</span></span><br><span class="line">[root@10 app]<span class="comment"># chown -R wisdom.wisdom /mnt/app/flume</span></span><br><span class="line"></span><br><span class="line">[root@10 app]<span class="comment">#  mkdir -p /mnt/&#123;data,log&#125;/flume</span></span><br><span class="line">[root@10 app]<span class="comment"># chown -R wisdom.wisdom /mnt/&#123;data,log&#125;/flume</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>flume 环境参数配置</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">[root@10 app]<span class="comment"># cp /mnt/app/flume/conf/&#123;flume-env.sh,flume-env.sh.bak&#125;</span></span><br><span class="line">[root@10 app]<span class="comment"># cat &gt; /mnt/app/flume/conf/flume-env.sh &lt;&lt;EOF</span></span><br><span class="line">&gt; <span class="built_in">export</span> JAVA_HOME=/mnt/app/java</span><br><span class="line">&gt; <span class="built_in">export</span> JAVA_OPTS=<span class="string">"-Xms100m -Xmx2000m -Dcom.sun.management.jmxremote"</span></span><br><span class="line">&gt; <span class="built_in">export</span> JAVA_OPTS=<span class="string">"<span class="variable">$JAVA_OPTS</span> -Dorg.apache.flume.log.rawdata=true -Dorg.apache.flume.log.printconfig=true "</span></span><br><span class="line">&gt; FLUME_CLASSPATH=<span class="string">"/home/flume/flume/lib"</span></span><br><span class="line">EOF</span><br><span class="line"></span><br><span class="line">3. flume <span class="built_in">log</span>配置</span><br><span class="line">```bash</span><br><span class="line">[root@10 ~]<span class="comment"># cat /mnt/app/flume/conf/log4j.properties |grep -v ^#|grep -v ^$</span></span><br><span class="line">flume.root.logger=INFO,LOGFILE</span><br><span class="line">flume.log.dir=/mnt/<span class="built_in">log</span>/flume    //主要是这里</span><br><span class="line">flume.log.file=flume.log</span><br><span class="line">log4j.logger.org.apache.flume.lifecycle = INFO</span><br><span class="line">log4j.logger.org.jboss = WARN</span><br><span class="line">log4j.logger.org.mortbay = INFO</span><br><span class="line">log4j.logger.org.apache.avro.ipc.NettyTransceiver = WARN</span><br><span class="line">log4j.logger.org.apache.hadoop = INFO</span><br><span class="line">log4j.logger.org.apache.hadoop.hive = ERROR</span><br><span class="line">log4j.rootLogger=<span class="variable">$&#123;flume.root.logger&#125;</span></span><br><span class="line">log4j.appender.LOGFILE=org.apache.log4j.RollingFileAppender</span><br><span class="line">log4j.appender.LOGFILE.MaxFileSize=100MB</span><br><span class="line">log4j.appender.LOGFILE.MaxBackupIndex=10</span><br><span class="line">log4j.appender.LOGFILE.File=<span class="variable">$&#123;flume.log.dir&#125;</span>/<span class="variable">$&#123;flume.log.file&#125;</span></span><br><span class="line">log4j.appender.LOGFILE.layout=org.apache.log4j.PatternLayout</span><br><span class="line">log4j.appender.LOGFILE.layout.ConversionPattern=%d&#123;dd MMM yyyy HH:mm:ss,SSS&#125; %-5p [%t] (%C.%M:%L) %x - %m%n</span><br><span class="line">log4j.appender.DAILY=org.apache.log4j.rolling.RollingFileAppender</span><br><span class="line">log4j.appender.DAILY.rollingPolicy=org.apache.log4j.rolling.TimeBasedRollingPolicy</span><br><span class="line">log4j.appender.DAILY.rollingPolicy.ActiveFileName=<span class="variable">$&#123;flume.log.dir&#125;</span>/<span class="variable">$&#123;flume.log.file&#125;</span></span><br><span class="line">log4j.appender.DAILY.rollingPolicy.FileNamePattern=<span class="variable">$&#123;flume.log.dir&#125;</span>/<span class="variable">$&#123;flume.log.file&#125;</span>.%d&#123;yyyy-MM-dd&#125;</span><br><span class="line">log4j.appender.DAILY.layout=org.apache.log4j.PatternLayout</span><br><span class="line">log4j.appender.DAILY.layout.ConversionPattern=%d&#123;dd MMM yyyy HH:mm:ss,SSS&#125; %-5p [%t] (%C.%M:%L) %x - %m%n</span><br><span class="line">log4j.appender.console=org.apache.log4j.ConsoleAppender</span><br><span class="line">log4j.appender.console.target=System.err</span><br><span class="line">log4j.appender.console.layout=org.apache.log4j.PatternLayout</span><br><span class="line">log4j.appender.console.layout.ConversionPattern=%d (%t) [%p - %l] %m%n</span><br></pre></td></tr></table></figure>
</li>
<li><p>flume 配置文件参数<br>[root@10 app]# su - wisdom<br>[wisdom@10 ~]$ vim /mnt/app/flume/conf/test.conf</p>
<h1 id="定义参数"><a href="#定义参数" class="headerlink" title="定义参数"></a>定义参数</h1><p>producer.sources  = s_test<br>producer.channels = c_test<br>producer.sinks    = r_test</p>
</li>
</ol>
<h1 id="定义通道"><a href="#定义通道" class="headerlink" title="定义通道"></a>定义通道</h1><p>producer.channels.c_test.type                         = file<br>producer.channels.c_test.checkpointDir                = /mnt/data/flume/test/filechannel/checkpointDir<br>producer.channels.c_test.dataDirs                     = /mnt/data/flume/test/filechannel/dataDirs<br>producer.channels.c_test.transactionCapacity          = 40000<br>producer.channels.c_test.capacity                     = 2000000<br>producer.channels.c_test.maxFileSize                  = 2146435071<br>producer.channels.c_test.minimumRequiredSpace         = 524288000<br>producer.channels.c_test.checkpointInterval           = 20000</p>
<h1 id="定义输出到kafka"><a href="#定义输出到kafka" class="headerlink" title="定义输出到kafka"></a>定义输出到kafka</h1><p>producer.sinks.r_test.type                            = org.apache.flume.sink.kafka.KafkaSink<br>producer.sinks.r_test.kafka.bootstrap.servers         = 10.0.3.40:9092,10.0.3.41:9092,10.0.3.42:9092<br>producer.sinks.r_test.kafka.topic                     = index-test<br>producer.sinks.r_test.kafka.flumeBatchSize            = 100<br>producer.sinks.r_test.kafka.producer.acks             = 1<br>producer.sinks.r_test.kafka.producer.compression.type = snappy<br>producer.sinks.r_test.kafka.producer.max.request.size = 10000000</p>
<h1 id="定义源数据库"><a href="#定义源数据库" class="headerlink" title="定义源数据库"></a>定义源数据库</h1><p>producer.sources.s_test.type                          = TAILDIR<br>producer.sources.s_test.filegroups                    = f1<br>producer.sources.s_test.filegroups.f1                 = /mnt/log/test/^test.log$<br>producer.sources.s_test.positionFile                  = /mnt/data/flume/test/filesource/test.json</p>
<h1 id="sources-和-sinks-绑定-channel-实现一条通道"><a href="#sources-和-sinks-绑定-channel-实现一条通道" class="headerlink" title="sources 和 sinks 绑定 channel,实现一条通道"></a>sources 和 sinks 绑定 channel,实现一条通道</h1><p>producer.sinks.r_test.channel                         = c_test<br>producer.sources.s_test.channels                      = c_test<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">5. flume 执行任务</span><br><span class="line">```bash</span><br><span class="line">[wisdom@10 ~]$ /mnt/app/flume/bin/flume-ng agent -n producer --conf /mnt/app/flume/conf -f /mnt/app/flume/conf/service.properties &amp;</span><br></pre></td></tr></table></figure></p>
<ol>
<li>补充<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/mnt/app/flume2es/bin/flume-ng agent -n producer -f /mnt/app/flume2es/conf/test2.properties  --conf /mnt/app/flume2es/conf -Dflume.root.logger=debug,console</span><br></pre></td></tr></table></figure>
</li>
</ol>
<hr>
<h3 id="通过flume-从kafka读取数据写入ES"><a href="#通过flume-从kafka读取数据写入ES" class="headerlink" title="通过flume 从kafka读取数据写入ES"></a>通过flume 从kafka读取数据写入ES</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">使用flume经验:</span><br><span class="line">* 使用flume(apache-flume-1.7.0-bin.tar.gz)可以将本地的日志文件读取写入到kafka(kafka_2.11-0.9.0.0.tgz)</span><br><span class="line">*使用flume(apache-flume-1.7.0-bin.tar.gz)从kafka(kafka_2.11-0.9.0.0.tgz)读取写入elasticsearch(elasticsearch-2.3.3.tar.gz)会发生报错.</span><br><span class="line">  解决方法:</span><br><span class="line">  1. 将flume(apache-flume-1.7.0-bin.tar.gz)解压</span><br><span class="line">  2. 将elasticsearch(elasticsearch-2.3.3.tar.gz)解压</span><br><span class="line">  3. 将zookeeper(zookeeper-3.4.6.tar.gz)解压</span><br><span class="line">  4. 将elasticsearch(elasticsearch-2.3.3.tar.gz)解压后的&quot;elasticsearch-2.3.3/lib/&quot; lib目录下的所有jar包拷贝到&quot;apache-flume-1.7.0-bin/lib&quot;目录下</span><br><span class="line">  5. 将zookeeper(zookeeper-3.4.6.tar.gz)解压后的&quot;zookeeper-3.4.6/zookeeper-3.4.6.jar&quot;拷贝到&quot;apache-flume-1.7.0-bin/lib&quot;下,并删除原有的&quot;zookeeper-*jar&quot;</span><br><span class="line">  6. 删除&quot;elasticsearch-2.3.3/lib/&quot;下的&quot;guava-*.jar&quot;和&quot;jackson-core-*.jar&quot;</span><br><span class="line">  7. 下载elasticsearch-sink2-1.0.jar(https://github.com/lucidfrontier45/ElasticsearchSink2/releases),并上传到&quot;apache-flume-1.7.0-bin/lib&quot;下</span><br><span class="line"></span><br><span class="line">  或者:</span><br><span class="line">  如果自己有能力,可以尝试重写elasticsearch-sink2.jar包</span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.smallasa.com/2017/03/12/flume-install/" data-id="cjavy9jvx002p0coq55k5zf8g" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-logstash-conf-file" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/03/12/logstash-conf-file/" class="article-date">
  <time datetime="2017-03-12T03:17:13.000Z" itemprop="datePublished">2017-03-12</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/hadoop/">hadoop</a>►<a class="article-category-link" href="/categories/hadoop/logstash/">logstash</a>►<a class="article-category-link" href="/categories/hadoop/logstash/logstash-config-file/">logstash config file</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/03/12/logstash-conf-file/">logstash conf file</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="logstash-通过log4j收集日志-写入ES"><a href="#logstash-通过log4j收集日志-写入ES" class="headerlink" title="logstash 通过log4j收集日志,写入ES"></a>logstash 通过log4j收集日志,写入ES</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">// log4j-4501</span><br><span class="line">input&#123;</span><br><span class="line">  log4j&#123;</span><br><span class="line">    mode =&gt; <span class="string">"server"</span></span><br><span class="line">    host =&gt; <span class="string">"10.0.3.41"</span></span><br><span class="line">    port =&gt; 4501</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">filter&#123;</span><br><span class="line">  urldecode &#123;</span><br><span class="line">    all_fields =&gt; <span class="literal">true</span></span><br><span class="line">  &#125;</span><br><span class="line">  mutate &#123;</span><br><span class="line">    remove_field =&gt; [ <span class="string">"tags"</span>,<span class="string">"timestamp"</span> ]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">output&#123;</span><br><span class="line">  elasticsearch&#123;</span><br><span class="line">    action =&gt; <span class="string">"index"</span></span><br><span class="line">    index =&gt; <span class="string">"xxx-%&#123;[application]&#125;-%&#123;+YYYY.MM&#125;"</span></span><br><span class="line">    hosts =&gt; [<span class="string">"10.0.3.40:9200"</span>,<span class="string">"10.0.3.41:9200"</span>,<span class="string">"10.0.3.42:9200"</span>]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">//log4j-4502</span><br><span class="line">input&#123;</span><br><span class="line">  log4j&#123;</span><br><span class="line">    mode =&gt; <span class="string">"server"</span></span><br><span class="line">    host =&gt; <span class="string">"10.0.3.42"</span></span><br><span class="line">    port =&gt; 4502</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">filter&#123;</span><br><span class="line">  json &#123;</span><br><span class="line">    <span class="built_in">source</span> =&gt; <span class="string">"message"</span></span><br><span class="line">  &#125;</span><br><span class="line">  urldecode &#123;</span><br><span class="line">    all_fields =&gt; <span class="literal">true</span></span><br><span class="line">  &#125;</span><br><span class="line">  mutate &#123;</span><br><span class="line">    remove_field =&gt; [ <span class="string">"tags"</span> ]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">output&#123;</span><br><span class="line">  elasticsearch&#123;</span><br><span class="line">    action =&gt; <span class="string">"index"</span></span><br><span class="line">    index =&gt; <span class="string">"xxx-%&#123;[application]&#125;-%&#123;+yyyy.MM&#125;"</span></span><br><span class="line">    document_type =&gt; <span class="string">"%&#123;[key]&#125;"</span></span><br><span class="line">    hosts =&gt; [<span class="string">"10.0.3.40:9200"</span>,<span class="string">"10.0.3.41:9200"</span>,<span class="string">"10.0.3.42:9200"</span>]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.smallasa.com/2017/03/12/logstash-conf-file/" data-id="cjavy9jzs005t0coqyej5byxj" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-logstash-install" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/03/12/logstash-install/" class="article-date">
  <time datetime="2017-03-12T03:07:46.000Z" itemprop="datePublished">2017-03-12</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/hadoop/">hadoop</a>►<a class="article-category-link" href="/categories/hadoop/logstash/">logstash</a>►<a class="article-category-link" href="/categories/hadoop/logstash/logstash-install/">logstash install</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/03/12/logstash-install/">logstash install</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="logstash-install"><a href="#logstash-install" class="headerlink" title="logstash install"></a>logstash install</h3><ol>
<li><p>logstash安装</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@10 app]<span class="comment"># tar xzf logstash-all-plugins-2.4.0.tar.gz</span></span><br><span class="line">[root@10 app]<span class="comment"># mv logstash-2.4.0 /mnt/app/logstash</span></span><br><span class="line">[root@10 app]<span class="comment"># chown -R wisdom.wisdom /mnt/app/elasticsearch</span></span><br><span class="line"></span><br><span class="line">[root@10 app]<span class="comment">#  mkdir /mnt/app/logstash/conf</span></span><br><span class="line">[root@10 app]<span class="comment">#  mkdir /mnt/log/logstash</span></span><br><span class="line">[root@10 app]<span class="comment"># chown -R wisdom.wisdom /mnt/app/logstash/conf</span></span><br><span class="line">[root@10 app]<span class="comment"># chown -R wisdom.wisdom /mnt/log/logstash</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>logstash 配置</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@10 app]<span class="comment"># su - wisdom</span></span><br><span class="line">[wisdom@10 ~]$ cat &gt;/mnt/app/logstash/conf/test.conf &lt;&lt;EOF</span><br><span class="line">&gt; input &#123; stdin &#123; &#125; &#125;</span><br><span class="line">&gt; output &#123; stdout &#123;&#125; &#125;</span><br><span class="line">&gt; EOF</span><br></pre></td></tr></table></figure>
</li>
<li><p>logstash 配置检查</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[wisdom@10 ~]$ /mnt/app/logstash/bin/logstash -f /mnt/app/logstash/conf/test.conf --configtest</span><br><span class="line">Configuration OK</span><br></pre></td></tr></table></figure>
</li>
<li><p>logstash 测试</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[wisdom@10 ~]$ /mnt/app/logstash/bin/logstash -f /mnt/app/logstash/conf/test.conf</span><br><span class="line">Settings: Default pipeline workers: 1</span><br><span class="line">Pipeline main started</span><br><span class="line">hello world  =&gt;输入字符串</span><br><span class="line">2016-10-12T09:16:18.058Z ubuntu hello world</span><br></pre></td></tr></table></figure>
</li>
<li><p>logstash 设置启动需要的内存大小</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[wisdom@10 ~]$ vim /mnt/app/logstash/bin/logstash</span><br><span class="line">LS_HEAP_SIZE=<span class="string">"8G"</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>logstash 后台执行</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[wisdom@10 ~]$ /mnt/app/logstash/bin/logstash -f /mnt/app/logstash/conf/test.conf -l /mnt/<span class="built_in">log</span>/logstash/test.log -w 8 -b 125 -u 5 --auto-reload --reload-interval 3 &amp;</span><br></pre></td></tr></table></figure>
<p>```bash</p>
</li>
</ol>
<ul>
<li>The –pipeline-workers or -w parameter determines how many threads to run for filter and output processing.If you find that events are backing up, or that the CPU is not saturated, consider increasing the value of this parameter to make better use of available processing power.</li>
<li>The –pipeline-batch-size or -b parameter defines the maximum number of events an individual worker thread collects before attempting to execute filters and outputs. Larger batch sizes are generally more efficient, but increase memory overhead.</li>
<li>The –pipeline-batch-delay option rarely needs to be tuned. Pipeline batch delay is the maximum amount of time in milliseconds that Logstash waits for new messages after receiving an event in the current pipeline worker thread. After this time elapses, Logstash begins to execute filters and outputs.<br>``</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.smallasa.com/2017/03/12/logstash-install/" data-id="cjavy9jzv005w0coq5ogwr0cw" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-kibana-install" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/03/12/kibana-install/" class="article-date">
  <time datetime="2017-03-12T02:53:45.000Z" itemprop="datePublished">2017-03-12</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/hadoop/">hadoop</a>►<a class="article-category-link" href="/categories/hadoop/kibana/">kibana</a>►<a class="article-category-link" href="/categories/hadoop/kibana/kibana-install/">kibana install</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/03/12/kibana-install/">kibana install</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="kibana-install"><a href="#kibana-install" class="headerlink" title="kibana install"></a>kibana install</h3><ol>
<li><p>kibana 安装</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@10 ~]<span class="comment"># cd /mnt/ops/app/</span></span><br><span class="line">[root@10 app]<span class="comment"># tar xzf kibana-4.5.4-linux-x64.tar.gz</span></span><br><span class="line">[root@10 app]<span class="comment"># mv kibana-4.5.4-linux-x64 /mnt/app/kibana</span></span><br><span class="line">[root@10 app]<span class="comment"># chown -R wisdom.wisdom /mnt/app/kibana</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>kibana 配置文件</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">[root@10 app]<span class="comment"># cp /mnt/app/kibana/config/&#123;kibana.yml,kibana.yml.bak&#125;</span></span><br><span class="line">[root@10 app]<span class="comment"># vim /mnt/app/kibana/config/kibana.yml</span></span><br><span class="line">server.port: 5601</span><br><span class="line">server.host: <span class="string">"0.0.0.0"</span></span><br><span class="line">server.maxPayloadBytes: 1048576</span><br><span class="line">elasticsearch.url: <span class="string">"http://10.0.3.40:9200"</span></span><br><span class="line">elasticsearch.preserveHost: <span class="literal">true</span></span><br><span class="line">kibana.index: <span class="string">".kibana"</span></span><br><span class="line">kibana.defaultAppId: <span class="string">"discover"</span></span><br><span class="line">elasticsearch.pingTimeout: 1500</span><br><span class="line">elasticsearch.requestTimeout: 30000</span><br><span class="line">elasticsearch.shardTimeout: 0</span><br><span class="line">elasticsearch.startupTimeout: 5000</span><br><span class="line">pid.file: /mnt/app/kibana/kibana.pid</span><br><span class="line">logging.dest: stdout</span><br><span class="line">logging.silent: <span class="literal">true</span></span><br><span class="line">ops.interval: 5000</span><br></pre></td></tr></table></figure>
</li>
<li><p>kibana 启动</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@10 ~]<span class="comment"># su - wisdom</span></span><br><span class="line">[wisdom@10 ~]$ /mnt/app/kibana/bin/kibana -c /mnt/app/kibana/config/kibana.yml &amp;</span><br></pre></td></tr></table></figure>
</li>
<li><p>kibana 查看</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">//浏览器中打开</span><br><span class="line">http://&#123;IP&#125;:5601</span><br><span class="line"></span><br><span class="line">注意: kibana的状态跟随elasticsearch的变化而变化.比如: elasticsearch 出现异常,kibana web展示页面会报错</span><br></pre></td></tr></table></figure>
</li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.smallasa.com/2017/03/12/kibana-install/" data-id="cjavy9jyx00540coqrukokmx1" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-grafana-install" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/03/12/grafana-install/" class="article-date">
  <time datetime="2017-03-12T02:47:45.000Z" itemprop="datePublished">2017-03-12</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/hadoop/">hadoop</a>►<a class="article-category-link" href="/categories/hadoop/grafana/">grafana</a>►<a class="article-category-link" href="/categories/hadoop/grafana/grafana-install/">grafana install</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/03/12/grafana-install/">grafana install</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="mysql-install"><a href="#mysql-install" class="headerlink" title="mysql install"></a>mysql install</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql 已经安装</span><br></pre></td></tr></table></figure>
<h3 id="grafana-install"><a href="#grafana-install" class="headerlink" title="grafana install"></a>grafana install</h3><ol>
<li><p>在数据库创建grafana库</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@10 ~]<span class="comment"># /mnt/app/mysql/bin/mysql -S /mnt/data/mysql/mysql.sock</span></span><br><span class="line">mysql&gt; create database grafana DEFAULT CHARACTER SET utf8;</span><br><span class="line">mysql&gt; GRANT ALL ON grafana.* TO <span class="string">'grafana'</span>@<span class="string">'10.0.2.113'</span> IDENTIFIED BY <span class="string">"grafana123"</span>;            </span><br><span class="line">mysql&gt; flush privileges;</span><br></pre></td></tr></table></figure>
</li>
<li><p>grafana 安装</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@10 ~]<span class="comment"># cd /mnt/ops/app/</span></span><br><span class="line">[root@10 app]<span class="comment"># tar xzf grafana-4.0.1-1480694114.linux-x64.tar.gz</span></span><br><span class="line">[root@10 app]<span class="comment"># mv grafana-4.0.1-1480694114 /mnt/app/grafana</span></span><br><span class="line">[root@10 app]<span class="comment"># chown -R wisdom.wisdom /mnt/app/grafana</span></span><br><span class="line"></span><br><span class="line">[root@10 ~]<span class="comment"># mkdir -p /mnt/&#123;data,log&#125;/grafana</span></span><br><span class="line">[root@10 ~]<span class="comment"># chown -R wisdom.wisdom /mnt/&#123;data,log&#125;/grafana</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>grafana 配置文件</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">[root@10 ~]<span class="comment"># cp /mnt/app/grafana/conf/&#123;defaults.ini,grafana.ini&#125;</span></span><br><span class="line">[root@10 ~]<span class="comment"># vim /mnt/app/grafana/conf/grafana.ini</span></span><br><span class="line">instance_name = 10.0.2.113</span><br><span class="line">[paths]</span><br><span class="line">data = /mnt/data/grafana</span><br><span class="line">logs = /mnt/<span class="built_in">log</span>/grafana</span><br><span class="line">plugins = /mnt/app/grafana/data/plugins</span><br><span class="line">[database]</span><br><span class="line"><span class="built_in">type</span> = mysql</span><br><span class="line">host = 10.0.2.113:3306</span><br><span class="line">name = grafana</span><br><span class="line">user = grafana</span><br><span class="line">password = grafana123</span><br><span class="line">url = mysql://grafana:grafana123@10.0.2.113:3306/grafana</span><br><span class="line">ssl_mode = <span class="built_in">disable</span></span><br><span class="line">ca_cert_path =</span><br><span class="line">client_key_path =</span><br><span class="line">client_cert_path =</span><br><span class="line">server_cert_name =</span><br><span class="line">path = grafana.db</span><br><span class="line">[session]</span><br><span class="line">provider = file</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">数据库选择:sqlit3</span><br><span class="line">[root@10 app]# mkdir /mnt/data/sqlite3</span><br><span class="line">[root@10 app]# chown -R wisdom.wisdom /mnt/data/sqlite3</span><br><span class="line">[database]</span><br><span class="line">type = sqlite3</span><br><span class="line">path = /mnt/data/sqlite3/grafana.db</span><br><span class="line">name = grafana</span><br></pre></td></tr></table></figure>
</li>
<li><p>grafana 启动</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@10 ~]<span class="comment"># su - wisdom</span></span><br><span class="line">[wisdom@10 ~]$ /mnt/app/grafana/bin/grafana-server -homepath /mnt/app/grafana/ -config /mnt/app/grafana/conf/grafana.ini -pidfile /mnt/data/grafana/grafana.pid &amp;</span><br></pre></td></tr></table></figure>
</li>
<li><p>grafana 登录和配置</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">//浏览器中输入,进行配置</span><br><span class="line">http://101.200.45.206:3000/login    admin:admin</span><br></pre></td></tr></table></figure>
</li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.smallasa.com/2017/03/12/grafana-install/" data-id="cjavy9jwu003n0coqke720rta" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-elasticsearch-install" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/03/12/elasticsearch-install/" class="article-date">
  <time datetime="2017-03-12T02:25:45.000Z" itemprop="datePublished">2017-03-12</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/hadoop/">hadoop</a>►<a class="article-category-link" href="/categories/hadoop/elasticsearch/">elasticsearch</a>►<a class="article-category-link" href="/categories/hadoop/elasticsearch/elasticsearch-install/">elasticsearch install</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/03/12/elasticsearch-install/">elasticsearch install</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="elasticsearch-cluster-install"><a href="#elasticsearch-cluster-install" class="headerlink" title="elasticsearch cluster install"></a>elasticsearch cluster install</h3><ol>
<li><p>elasticsearch安装</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@10 ~]<span class="comment"># cd /mnt/ops/app/</span></span><br><span class="line">[root@10 app]<span class="comment"># tar xzf elasticsearch-2.3.3.tar.gz</span></span><br><span class="line">[root@10 app]<span class="comment"># mv elasticsearch-2.3.3 /mnt/app/elasticsearch</span></span><br><span class="line">[root@10 app]<span class="comment"># chown -R wisdom.wisdom /mnt/app/elasticsearch</span></span><br><span class="line"></span><br><span class="line">[root@10 app]<span class="comment"># mkdir -p /mnt/&#123;data,log&#125;/elasticsearch</span></span><br><span class="line">[root@10 app]<span class="comment"># chown -R wisdom.wisdom mkdir -p /mnt/&#123;data,log&#125;/elasticsearch</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>elasticsearch web插件安装</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@10 app]<span class="comment"># /mnt/app/elasticsearch/bin/plugin install mobz/elasticsearch-head</span></span><br><span class="line">[root@10 app]<span class="comment"># chown -R wisdom.wisdom /mnt/app/elasticsearch</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>elasticsearch cluster 配置</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line">[root@10 app]<span class="comment"># cp /mnt/app/elasticsearch/config/&#123;elasticsearch.yml,elasticsearch.yml.bak&#125;</span></span><br><span class="line"></span><br><span class="line">//cluster-1:</span><br><span class="line">[root@10 app]<span class="comment"># cat &gt; /mnt/app/elasticsearch/config/elasticsearch.yml &lt;&lt;EOF</span></span><br><span class="line">&gt; cluster.name: ssp</span><br><span class="line">&gt; node.name: 10.0.3.40</span><br><span class="line">&gt; path.data: /mnt/data/elasticsearch</span><br><span class="line">&gt; path.repo: /mnt/ops/elasticsearch</span><br><span class="line">&gt; path.logs: /mnt/<span class="built_in">log</span>/elasticsearch</span><br><span class="line">&gt; bootstrap.mlockall: <span class="literal">true</span></span><br><span class="line">&gt; network.host: 0.0.0.0</span><br><span class="line">&gt; http.port: 9200</span><br><span class="line">&gt; transport.tcp.port: 9300</span><br><span class="line">&gt; transport.tcp.compress: <span class="literal">true</span></span><br><span class="line">&gt; gateway.recover_after_nodes: 2</span><br><span class="line">&gt; node.max_local_storage_nodes: 1</span><br><span class="line">&gt; action.destructive_requires_name: <span class="literal">true</span></span><br><span class="line">&gt; action.auto_create_index: <span class="literal">true</span></span><br><span class="line">&gt; action.disable_delete_all_indices: <span class="literal">true</span></span><br><span class="line">&gt; index.number_of_shards: 5</span><br><span class="line">&gt; index.number_of_replicas: 1</span><br><span class="line">&gt; discovery.zen.ping.multicast.enabled: <span class="literal">false</span></span><br><span class="line">&gt; discovery.zen.fd.ping_timeout: 100s</span><br><span class="line">&gt; discovery.zen.ping.timeout: 100s</span><br><span class="line">&gt; discovery.zen.minimum_master_nodes: 2</span><br><span class="line">&gt; discovery.zen.ping.unicast.hosts: [<span class="string">"10.0.3.40:9300"</span>,<span class="string">"10.0.3.41:9300"</span>,<span class="string">"10.0.3.42:9300"</span>]</span><br><span class="line">&gt; EOF</span><br><span class="line"></span><br><span class="line">//cluster-2:</span><br><span class="line">[root@10 app]<span class="comment"># cat &gt; /mnt/app/elasticsearch/config/elasticsearch.yml &lt;&lt;EOF</span></span><br><span class="line">&gt; cluster.name: ssp</span><br><span class="line">&gt; node.name: 10.0.3.41</span><br><span class="line">&gt; path.data: /mnt/data/elasticsearch</span><br><span class="line">&gt; path.repo: /mnt/ops/elasticsearch</span><br><span class="line">&gt; path.logs: /mnt/<span class="built_in">log</span>/elasticsearch</span><br><span class="line">&gt; bootstrap.mlockall: <span class="literal">true</span></span><br><span class="line">&gt; network.host: 0.0.0.0</span><br><span class="line">&gt; http.port: 9200</span><br><span class="line">&gt; transport.tcp.port: 9300</span><br><span class="line">&gt; transport.tcp.compress: <span class="literal">true</span></span><br><span class="line">&gt; gateway.recover_after_nodes: 2</span><br><span class="line">&gt; node.max_local_storage_nodes: 1</span><br><span class="line">&gt; action.destructive_requires_name: <span class="literal">true</span></span><br><span class="line">&gt; action.auto_create_index: <span class="literal">true</span></span><br><span class="line">&gt; action.disable_delete_all_indices: <span class="literal">true</span></span><br><span class="line">&gt; index.number_of_shards: 5</span><br><span class="line">&gt; index.number_of_replicas: 1</span><br><span class="line">&gt; discovery.zen.ping.multicast.enabled: <span class="literal">false</span></span><br><span class="line">&gt; discovery.zen.fd.ping_timeout: 100s</span><br><span class="line">&gt; discovery.zen.ping.timeout: 100s</span><br><span class="line">&gt; discovery.zen.minimum_master_nodes: 2</span><br><span class="line">&gt; discovery.zen.ping.unicast.hosts: [<span class="string">"10.0.3.40:9300"</span>,<span class="string">"10.0.3.41:9300"</span>,<span class="string">"10.0.3.42:9300"</span>]</span><br><span class="line">&gt; EOF</span><br><span class="line"></span><br><span class="line">//cluster-3:</span><br><span class="line">[root@10 app]<span class="comment"># cat &gt; /mnt/app/elasticsearch/config/elasticsearch.yml &lt;&lt;EOF</span></span><br><span class="line">&gt; cluster.name: ssp</span><br><span class="line">&gt; node.name: 10.0.3.42</span><br><span class="line">&gt; path.data: /mnt/data/elasticsearch</span><br><span class="line">&gt; path.repo: /mnt/ops/elasticsearch</span><br><span class="line">&gt; path.logs: /mnt/<span class="built_in">log</span>/elasticsearch</span><br><span class="line">&gt; bootstrap.mlockall: <span class="literal">true</span></span><br><span class="line">&gt; network.host: 0.0.0.0</span><br><span class="line">&gt; http.port: 9200</span><br><span class="line">&gt; transport.tcp.port: 9300</span><br><span class="line">&gt; transport.tcp.compress: <span class="literal">true</span></span><br><span class="line">&gt; gateway.recover_after_nodes: 2</span><br><span class="line">&gt; node.max_local_storage_nodes: 1</span><br><span class="line">&gt; action.destructive_requires_name: <span class="literal">true</span></span><br><span class="line">&gt; action.auto_create_index: <span class="literal">true</span></span><br><span class="line">&gt; action.disable_delete_all_indices: <span class="literal">true</span></span><br><span class="line">&gt; index.number_of_shards: 5</span><br><span class="line">&gt; index.number_of_replicas: 1</span><br><span class="line">&gt; discovery.zen.ping.multicast.enabled: <span class="literal">false</span></span><br><span class="line">&gt; discovery.zen.fd.ping_timeout: 100s</span><br><span class="line">&gt; discovery.zen.ping.timeout: 100s</span><br><span class="line">&gt; discovery.zen.minimum_master_nodes: 2</span><br><span class="line">&gt; discovery.zen.ping.unicast.hosts: [<span class="string">"10.0.3.40:9300"</span>,<span class="string">"10.0.3.41:9300"</span>,<span class="string">"10.0.3.42:9300"</span>]</span><br><span class="line">&gt; EOF</span><br></pre></td></tr></table></figure>
</li>
<li><p>elasticsearch 启动参数</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">[root@10 app]<span class="comment"># vim /mnt/app/elasticsearch/bin/elasticsearch</span></span><br><span class="line">ES_HEAP_SIZE=4g</span><br><span class="line"></span><br><span class="line">或者:</span><br><span class="line"></span><br><span class="line">[root@10 app]<span class="comment"># cat &gt; /mnt/app/elasticsearch/config/jvm.options &lt;&lt;EOF</span></span><br><span class="line">&gt; -Xms4g</span><br><span class="line">&gt; -Xmx4g</span><br><span class="line">&gt; –XX:+UseG1GC</span><br><span class="line">&gt; -XX:+UseStringDeduplication</span><br><span class="line">&gt; -XX:+DisableExplicitGC</span><br><span class="line">&gt; -XX:+AlwaysPreTouch</span><br><span class="line">&gt; -server</span><br><span class="line">&gt; -Djava.awt.headless=<span class="literal">true</span></span><br><span class="line">&gt; -Dfile.encoding=UTF-8</span><br><span class="line">&gt; -Djna.nosys=<span class="literal">true</span></span><br><span class="line">&gt; -Dio.netty.noUnsafe=<span class="literal">true</span></span><br><span class="line">&gt; -Dio.netty.noKeySetOptimization=<span class="literal">true</span></span><br><span class="line">&gt; -Dlog4j.shutdownHookEnabled=<span class="literal">false</span></span><br><span class="line">&gt; -Dlog4j2.disable.jmx=<span class="literal">true</span></span><br><span class="line">&gt; -Dlog4j.skipJansi=<span class="literal">true</span></span><br><span class="line">&gt; -XX:+HeapDumpOnOutOfMemoryError</span><br><span class="line">&gt; EOF</span><br></pre></td></tr></table></figure>
</li>
<li><p>elasticsearch 启动</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@10 app]<span class="comment"># su - wisdom</span></span><br><span class="line">[wisdom@10 ~]$ /mnt/app/elasticsearch/bin/elasticsearch -d -p /mnt/data/elasticsearch/elasticsearch.pid</span><br></pre></td></tr></table></figure>
</li>
<li><p>查看集群</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">//浏览器中查看集群</span><br><span class="line">http://&#123;IP&#125;:9200/_plugin/head</span><br><span class="line"></span><br><span class="line">//命令输出</span><br><span class="line">curl <span class="string">'10.0.3.40:9200/_cat/health?v'</span>  </span><br><span class="line">curl <span class="string">'10.0.3.40:9200/_cat/nodes?v'</span></span><br></pre></td></tr></table></figure>
</li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.smallasa.com/2017/03/12/elasticsearch-install/" data-id="cjavy9jvk002c0coq560zu6ag" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-elasticsearch-command" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/03/11/elasticsearch-command/" class="article-date">
  <time datetime="2017-03-11T08:42:48.000Z" itemprop="datePublished">2017-03-11</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/hadoop/">hadoop</a>►<a class="article-category-link" href="/categories/hadoop/elasticsearch/">elasticsearch</a>►<a class="article-category-link" href="/categories/hadoop/elasticsearch/elasticsearch-command/">elasticsearch command</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/03/11/elasticsearch-command/">elasticsearch command</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <ol>
<li><p>查看ES健康状态</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@10 ~]<span class="comment"># curl '10.0.3.40:9200/_cat/health?v'  </span></span><br><span class="line">epoch      timestamp cluster status node.total node.data shards pri relo init unassign pending_tasks max_task_wait_time active_shards_percent</span><br><span class="line">1489221736 16:42:16  ssp     green           3         3    662 331    0    0        0             0                  -                100.0%</span><br></pre></td></tr></table></figure>
</li>
<li><p>查看集群节点</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@10 ~]<span class="comment"># curl '10.0.3.40:9200/_cat/nodes?v'  </span></span><br><span class="line">host      ip        heap.percent ram.percent load node.role master name      </span><br><span class="line">10.0.3.40 10.0.3.40           49          97 0.89 d         m      10.0.3.40</span><br><span class="line">10.0.3.41 10.0.3.41           58          98 0.71 d         m      10.0.3.41</span><br><span class="line">10.0.3.42 10.0.3.42           61          97 1.09 d         *      10.0.3.42</span><br></pre></td></tr></table></figure>
</li>
<li><p>查看集群索引信息</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@10 ~]<span class="comment"># curl '10.0.3.40:9200/_cat/indices?v'  </span></span><br><span class="line">health status index                          pri rep docs.count docs.deleted store.size pri.store.size</span><br><span class="line">green  open   index_1                          5   1   12935206            0     10.5gb          5.2gb</span><br><span class="line">green  open   index_2                          5   1   21408160            0     16.6gb          8.3gb</span><br></pre></td></tr></table></figure>
</li>
<li><p>查看单条索引</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@10 soft]<span class="comment"># curl -XGET http://10.0.3.40:9200/new-index?v</span></span><br><span class="line">[root@10 soft]<span class="comment"># curl -XGET http://10.0.3.40:9200/new-index?pretty</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>关闭和打开索引</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">curl -XPOST http://10.0.3.40:9200/new-index/_open</span><br><span class="line">curl -XPOST http://10.0.3.40:9200/new-index/_close</span><br></pre></td></tr></table></figure>
</li>
<li><p>删除索引</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -XDELETE http://10.0.3.40:9200/new-index</span><br></pre></td></tr></table></figure>
</li>
<li><p>创建索引</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">//简单方法</span><br><span class="line">curl -XPUT http://10.0.3.40:9200/new-index</span><br><span class="line"></span><br><span class="line">//创建索引加参数</span><br><span class="line">curl -XPUT http://10.0.3.40:9200/new-index -d <span class="string">'</span></span><br><span class="line"><span class="string">&#123;</span></span><br><span class="line"><span class="string">  "settings":&#123;</span></span><br><span class="line"><span class="string">    "index":&#123;</span></span><br><span class="line"><span class="string">      "number_of_shards":3,</span></span><br><span class="line"><span class="string">      "number_of_replicas":2</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">  &#125;</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string">'</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>查看分片</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">[wisdom@10 ~]$ curl -XGET <span class="string">'10.0.3.41:9200/_cat/shards'</span>|grep v2-inbound-request-2017.03</span><br><span class="line">  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current</span><br><span class="line">                                 Dload  Upload   Total   Spent    Left  Speed</span><br><span class="line">100 26082  100 26082    0     0  61893      0 --:--:-- --:--:-- --:--:-- 61952</span><br><span class="line">v2-inbound-request-2017.03     1 r STARTED 25071632  35.2gb 10.0.3.41 10.0.3.41</span><br><span class="line">v2-inbound-request-2017.03     1 p STARTED 25071643  35.2gb 10.0.3.40 10.0.3.40</span><br><span class="line">v2-inbound-request-2017.03     3 p STARTED 25107804  35.3gb 10.0.3.41 10.0.3.41</span><br><span class="line">v2-inbound-request-2017.03     3 r STARTED 25107796  35.3gb 10.0.3.42 10.0.3.42</span><br><span class="line">v2-inbound-request-2017.03     2 r STARTED 25098807  35.2gb 10.0.3.42 10.0.3.42</span><br><span class="line">v2-inbound-request-2017.03     2 p STARTED 25098799  35.2gb 10.0.3.40 10.0.3.40</span><br><span class="line">v2-inbound-request-2017.03     4 p STARTED 25108295  35.3gb 10.0.3.41 10.0.3.41</span><br><span class="line">v2-inbound-request-2017.03     4 r STARTED 25108301  35.3gb 10.0.3.42 10.0.3.42</span><br><span class="line">v2-inbound-request-2017.03     0 r STARTED 25105055  35.3gb 10.0.3.42 10.0.3.42</span><br><span class="line">v2-inbound-request-2017.03     0 p STARTED 25105050  35.3gb 10.0.3.40 10.0.3.40</span><br></pre></td></tr></table></figure>
</li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.smallasa.com/2017/03/11/elasticsearch-command/" data-id="cjavy9jv5001x0coq71bkzq81" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-samba-conf" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/03/11/samba-conf/" class="article-date">
  <time datetime="2017-03-11T08:10:52.000Z" itemprop="datePublished">2017-03-11</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/system-service/">system service</a>►<a class="article-category-link" href="/categories/system-service/Samba/">Samba</a>►<a class="article-category-link" href="/categories/system-service/Samba/samba-conf/">samba conf</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/03/11/samba-conf/">samba conf</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="samba-全局设置变量"><a href="#samba-全局设置变量" class="headerlink" title="samba 全局设置变量"></a>samba 全局设置变量</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br></pre></td><td class="code"><pre><span class="line">[global]</span><br><span class="line">samba服务器的全局设置，对整个服务器有效。</span><br><span class="line"></span><br><span class="line">workgroup</span><br><span class="line">语法：workgtoup = &lt;工作组群&gt;;</span><br><span class="line">预设：workgroup = MYGROUP</span><br><span class="line">说明：设定 Samba Server 的工作组</span><br><span class="line">例：workgroup = workgroup 和WIN2000S设为一个组，可在网上邻居可中看到共享。</span><br><span class="line"></span><br><span class="line">server string</span><br><span class="line">语法：server string = &lt;说明&gt;;</span><br><span class="line">预设：sarver string = Samba Server</span><br><span class="line">说明：设定 Samba Server 的注释</span><br><span class="line">其他：支持变量 t%-访问时间 I%-客户端IP m%-客户端主机名 M%-客户端域名 S%-客户端用户名</span><br><span class="line">例：server string = this is a Samba Server 设定出现在Windows网上邻居的 Samba Server 注释为 this is a Samba Server</span><br><span class="line"></span><br><span class="line">hosts allow</span><br><span class="line">语法：hosts aoolw = &lt;IP地址&gt;; ...</span><br><span class="line">预设：; host allow = 192.168.1. 192.168.2. 127.</span><br><span class="line">说明：限制允许连接到 Samba Server 的机器，多个参数以空格隔开。表示方法可以为完整的IP地址，如 192.168.0.1 网段，如 192.168.0.</span><br><span class="line">例：hosts allow = 192.168.1. 192.168.0.1 表示允许 192.168.1 网段的机器网址为 192.168.0.1 的机器连接到自己的 samba server</span><br><span class="line"></span><br><span class="line">printcap name</span><br><span class="line">语法：printcap name = &lt;打印机配置文件&gt;;</span><br><span class="line">预设：printcap name = /etc/printcap</span><br><span class="line">说明：设定 samba srever 打印机的配置文件</span><br><span class="line">例：printcap name = /etc/printcap 设定 samba srever 参考 /etc/printcap 档的打印机设定。</span><br><span class="line"></span><br><span class="line">load printers</span><br><span class="line">语法：load printers = &lt;yes/no&gt;;</span><br><span class="line">预设：load printers = yes</span><br><span class="line">说明：是否在开启 samba server 时即共享打印机。</span><br><span class="line"></span><br><span class="line">printing</span><br><span class="line">语法：printing = &lt;打印机类型&gt;;</span><br><span class="line">预设：printing = lprng</span><br><span class="line">说明：设定 samba server 打印机所使用的类型，为目前所支持的类型。</span><br><span class="line"></span><br><span class="line">guest account</span><br><span class="line">语法：guert account = &lt;帐户名称&gt;;</span><br><span class="line">预设：guert account = pcguest</span><br><span class="line">说明：设定访问 samba server 的来宾帐户(即访问时不用输入用户名和密码的帐户)，若设为pcguest的话则为默认为&quot;nobody&quot;用户。</span><br><span class="line">例：guert account = andy 设定设定访问 samba server 的来宾帐户以andy用户登陆，则此登陆帐户享有andy用户的所有权限。</span><br><span class="line"></span><br><span class="line">log file</span><br><span class="line">语法：log file = &lt;日志文件&gt;;</span><br><span class="line">预设：log file = /var/log/samba/%m.log</span><br><span class="line">说明：设定 samba server 日志文件的储存位置和文件名(%m代表客户端主机名)</span><br><span class="line"></span><br><span class="line">max log size</span><br><span class="line">语法：max log size = &lt;??KB&gt;;</span><br><span class="line">预设：max log size = 0</span><br><span class="line">说明：设定日子文件的最大容量，单位KB 这里的预设值0代表不做限制。</span><br><span class="line"></span><br><span class="line">security</span><br><span class="line">语法：security = &lt;等级&gt;;</span><br><span class="line">预设：security = user</span><br><span class="line">说明：设定访问 samba server 的安全级别共有四种：</span><br><span class="line">share---不需要提供用户名和密码。</span><br><span class="line">user----需要提供用户名和密码，而且身份验证由 samba server 负责。</span><br><span class="line">server--需要提供用户名和密码，可指定其他机器(winNT/2000/XP)或另一台 samba server作身份验证。</span><br><span class="line">domain--需要提供用户名和密码，指定winNT/2000/XP域服务器作身份验证。</span><br><span class="line"></span><br><span class="line">password server</span><br><span class="line">语法：password server = &lt;IP地址/主机名&gt;;</span><br><span class="line">预设：password server = &lt;NT-Server-Name&gt;;</span><br><span class="line">说明：指定某台服务器(包括windows 和 linux)的密码，作为用户登入时验证的密码。</span><br><span class="line">其他：此项需配合 security = server时，才可设定本参数。</span><br><span class="line"></span><br><span class="line">password level</span><br><span class="line">语法：password level = &lt;位数&gt;;</span><br><span class="line">username level = &lt;位数&gt;;</span><br><span class="line">预设：password level = 8</span><br><span class="line"></span><br><span class="line">username level</span><br><span class="line">username level = 8</span><br><span class="line">说明：设定用户名和密码的位数，预设为8位字符。</span><br><span class="line"></span><br><span class="line">encrypt passwords</span><br><span class="line">语法：encrypt passwords = &lt;yes/no&gt;;</span><br><span class="line">预设：encrypt passwords = yse</span><br><span class="line">说明：设定是否对samba的密码加密。</span><br><span class="line"></span><br><span class="line">smb passwd file</span><br><span class="line">语法：smb passwd file = &lt;密码文件&gt;;</span><br><span class="line">预设：smb passwd file = /etc/samba/smbpasswd</span><br><span class="line">说明：设定samba的密码文件。</span><br><span class="line"></span><br><span class="line">local master</span><br><span class="line">语法：local master = &lt;yes/no&gt;;</span><br><span class="line">预设：local master = no</span><br><span class="line">说明：设定 samba server 是否要担当LMB角色(LMB负责收集本地网络的Browse List资源)，通常无特殊原因设为no</span><br><span class="line"></span><br><span class="line">os level</span><br><span class="line">语法：os level = &lt;数字&gt;;</span><br><span class="line">预设：os level = 33</span><br><span class="line">说明：设定 samba server的os level. os level从 0 到 255 . winNT的os level为33, win95/98的os level 是 1 .若要拿samba server 当LMB或DMB则它的os level至少要大于NT的33以上。</span><br><span class="line"></span><br><span class="line">domain master</span><br><span class="line">语法：domain master = &lt;yes/no&gt;;</span><br><span class="line">预设：domain master = yes</span><br><span class="line">说明：设定 samba server 是否要担当DMB角色(DMB会负责收集其他子网的Browse List资源)，通常无特殊原因设为no</span><br><span class="line"></span><br><span class="line">preferred master</span><br><span class="line">语法：preferred master = &lt;yes/no&gt;;</span><br><span class="line">预设：preferred master = yes</span><br><span class="line">说明：设定 samba server 是否要担当PDC角色(PDC会负责追踪网络帐户进行的一切变更)，通常无特殊原因设为no，(同一网段内不可有两个PDC,他们会每5分钟抢主控权一次)</span><br><span class="line"></span><br><span class="line">wins support</span><br><span class="line">语法：wins support = &lt;yes/no&gt;;</span><br><span class="line">预设：wins support = yes</span><br><span class="line">说明：设定samba server 是否想网络提供WINS服务，通常无特殊原因设为no。除非所处网络上没有主机提供WINS服务且需要此台samba server提供WINS服务是才设yes，其他 wins support 和 wins server 只能选择一个</span><br><span class="line"></span><br><span class="line">wins server</span><br><span class="line">语法：wins server = &lt;IP地址&gt;;</span><br><span class="line">预设：wins server = w.x.y.z</span><br><span class="line">说明：设定samba server 是否要使用别台主机提供的WINS服务，通常无特殊原因设为no。除非所处网络上有一台主机提供WINS服务才要设yes，其他 wins support 和 wins server</span><br><span class="line">例：wins server = 192.168.0.1 表示samba server要使用192.168.0.1提供的WINS服务</span><br></pre></td></tr></table></figure>
<h3 id="samba-共享目录设置"><a href="#samba-共享目录设置" class="headerlink" title="samba 共享目录设置"></a>samba 共享目录设置</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">[homes]</span><br><span class="line">        comment = Home Directories</span><br><span class="line">        browseable = no</span><br><span class="line">        writable = yes</span><br><span class="line">        valid users = %S</span><br><span class="line"></span><br><span class="line">使用者本身的&quot;家&quot;目录,当使用者以samba使用者身份登入samba server后,samba server底下会看到自己的家目录,目录名称是使用者自己的帐号</span><br><span class="line"></span><br><span class="line">[printers]</span><br><span class="line">        comment = All Printers</span><br><span class="line">        path = /var/spool/samba</span><br><span class="line">        browseable = no</span><br><span class="line">        guest ok = no</span><br><span class="line">        writable = no</span><br><span class="line">        printable = yes</span><br><span class="line">设置了samba服务器中打印共享资源的属性,samba服务器除了可以提供文件共享,还可以提供打印共享</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">[分享的资源名称]</span><br><span class="line">&lt;指令1&gt;; = (参数)</span><br><span class="line">&lt;指令2&gt;; = (参数)</span><br><span class="line">要提供分享资源时,须先把欲分享的资源以 [ ] 符号括住,底下通常会带指令和参数来表示此资源的设定和存取权限等,详情如下:</span><br><span class="line"></span><br><span class="line">comment---------注释说明</span><br><span class="line">path------------分享资源的完整路径名称，除了路径要正确外，目录的权限也要设对</span><br><span class="line">browseable------是yes/否no在浏览资源中显示共享目录，若为否则必须指定共享路径才能存取</span><br><span class="line">printable-------是yes/否no允许打印</span><br><span class="line">hide dot ftles--是yes/否no隐藏隐藏文件</span><br><span class="line">public----------是yes/否no公开共享，若为否则进行身份验证(只有当security = share 时此项才起作用)</span><br><span class="line">guest ok--------是yes/否no公开共享，若为否则进行身份验证(只有当security = share 时此项才起作用)</span><br><span class="line">read only-------是yes/否no以只读方式共享当与writable发生冲突时也writable为准</span><br><span class="line">writable--------是yes/否no不以只读方式共享当与read only发生冲突时，无视read only</span><br><span class="line">vaild users-----设定只有此名单内的用户才能访问共享资源(拒绝优先)(用户名/@组名)</span><br><span class="line">invalid users---设定只有此名单内的用户不能访问共享资源(拒绝优先)(用户名/@组名)</span><br><span class="line">read list-------设定此名单内的成员为只读(用户名/@组名)</span><br><span class="line">write list------若设定为只读时，则只有此设定的名单内的成员才可作写入动作(用户名/@组名)</span><br><span class="line">create mask-----建立文件时所给的权限</span><br><span class="line">directory mask--建立目录时所给的权限</span><br><span class="line">force group-----指定存取资源时须以此设定的群组使用者进入才能存取(用户名/@组名)</span><br><span class="line">force user------指定存取资源时须以此设定的使用者进入才能存取(用户名/@组名)</span><br><span class="line">allow hosts-----设定只有此网段/IP的用户才能访问共享资源,allow hosts = 网段 except IP</span><br><span class="line">deny hosts------设定只有此网段/IP的用户不能访问共享资源</span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.smallasa.com/2017/03/11/samba-conf/" data-id="cjavy9k7200ap0coqhsdf5cfw" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-mysql-index-options" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/03/10/mysql-index-options/" class="article-date">
  <time datetime="2017-03-10T09:44:27.000Z" itemprop="datePublished">2017-03-10</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/database/">database</a>►<a class="article-category-link" href="/categories/database/Mysql/">Mysql</a>►<a class="article-category-link" href="/categories/database/Mysql/mysql-index-options/">mysql index options</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/03/10/mysql-index-options/">mysql index options</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <ol>
<li><p>删除索引</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; DROP INDEX index_name ON talbe_name</span><br><span class="line">mysql&gt; ALTER TABLE table_name DROP INDEX index_name</span><br><span class="line">mysql&gt; ALTER TABLE table_name DROP PRIMARY KEY</span><br></pre></td></tr></table></figure>
</li>
<li><p>查看索引</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; show index from tblname;</span><br><span class="line">mysql&gt; show keys from tblname;</span><br></pre></td></tr></table></figure>
</li>
<li><p>索引类型</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">在创建索引时,可以规定索引能否包含重复值.如果不包含,则索引应该创建为PRIMARY KEY或UNIQUE索引.对于单列惟一性索引,这保证单列不包含重复的值.对于多列惟一性索引,保证多个值的组合不重复.</span><br><span class="line"></span><br><span class="line">PRIMARY KEY索引和UNIQUE索引非常类似.事实上,PRIMARY KEY索引仅是一个具有名称PRIMARY的UNIQUE索引.这表示一个表只能包含一个PRIMARY KEY,因为一个表中不可能具有两个同名的索引.</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ALTER TABLE students ADD PRIMARY KEY (sid)</span><br></pre></td></tr></table></figure>
</li>
<li><p>创建索引</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">//ALTER TABLE用来创建普通索引、UNIQUE索引或PRIMARY KEY索引</span><br><span class="line">ALTER TABLE table_name ADD INDEX index_name (column_list)</span><br><span class="line">ALTER TABLE table_name ADD UNIQUE (column_list)</span><br><span class="line">ALTER TABLE table_name ADD PRIMARY KEY (column_list)</span><br><span class="line"></span><br><span class="line">//CREATE INDEX可对表增加普通索引或UNIQUE索引</span><br><span class="line">CREATE INDEX index_name ON table_name (column_list)</span><br><span class="line">CREATE UNIQUE INDEX index_name ON table_name (column_list)</span><br></pre></td></tr></table></figure>
</li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.smallasa.com/2017/03/10/mysql-index-options/" data-id="cjavy9k0o006i0coq41isiok9" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  


  <nav id="page-nav">
    
    <a class="extend prev" rel="prev" href="/page/20/">&laquo; 上一页</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/19/">19</a><a class="page-number" href="/page/20/">20</a><span class="page-number current">21</span><a class="page-number" href="/page/22/">22</a><a class="page-number" href="/page/23/">23</a><span class="space">&hellip;</span><a class="page-number" href="/page/29/">29</a><a class="extend next" rel="next" href="/page/22/">下一页 &raquo;</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">分类</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/AliCloud/">AliCloud</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/AliCloud/SDK/">SDK</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/AliCloud/SDK/Python-SDK/">Python SDK</a></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Android/">Android</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Android/Android-install/">Android install</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Android/Android-install/Android-studio-install/">Android studio install</a></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Development/">Development</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Development/Doc/">Doc</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Development/Doc/HTTP-严格传输安全HSTS/">HTTP 严格传输安全HSTS</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Development/Doc/HTTP协议/">HTTP协议</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Development/Doc/TCP-协议详解/">TCP 协议详解</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Development/Doc/TCP与socket区别/">TCP与socket区别</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Development/Doc/linux-文件描述符与打开文件之间的关系/">linux 文件描述符与打开文件之间的关系</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Development/Doc/linux-文件系统inode/">linux 文件系统inode</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Development/Doc/一次完整的HTTP请求/">一次完整的HTTP请求</a></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Disk/">Disk</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Disk/disk-io-performance/">disk io performance</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Disk/disk-iostat/">disk iostat</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Distributed-storage/">Distributed storage</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Distributed-storage/GlusterFS/">GlusterFS</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Distributed-storage/GlusterFS/GlusterFS-architecture/">GlusterFS architecture</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Distributed-storage/GlusterFS/GlusterFS-info/">GlusterFS info</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Distributed-storage/GlusterFS/GlusterFS-install/">GlusterFS install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Distributed-storage/GlusterFS/GlusterFS-workflow/">GlusterFS workflow</a></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/HA/">HA</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/HA/DRBD/">DRBD</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/HA/DRBD/DRBD-install/">DRBD install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/HA/keepalived/">keepalived</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/HA/keepalived/keepalived-install/">keepalived install</a></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/IDE/">IDE</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/IDE/Intellij/">Intellij</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/IDE/Intellij/Intellij-setting/">Intellij setting</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/IDE/vim/">vim</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/IDE/vim/vim-shortcut-key/">vim shortcut key</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/IDE/vim/vim-vimrc/">vim vimrc</a></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Kernel/">Kernel</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Kernel/kernel-memory/">kernel memory</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Kernel/kernel-memory/kernel-共享内存/">kernel 共享内存</a></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/">Monitor</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/ganglia/">ganglia</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/ganglia/ganglia-install/">ganglia install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/hmonitor/">hmonitor</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/hmonitor/hmonitor-install/">hmonitor install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/htmonitor/">htmonitor</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/htmonitor/htmonitor-install/">htmonitor install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/smokeping/">smokeping</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/smokeping/smokeping-install/">smokeping install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/zabbix/">zabbix</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/zabbix/monitor/">monitor</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/zabbix/monitor/zabbix-monitor-cpu/">zabbix monitor cpu</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/zabbix/monitor/zabbix-monitor-mem/">zabbix monitor mem</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/zabbix/zabbix-auto-discover/">zabbix auto discover</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/zabbix/zabbix-grafana-install/">zabbix grafana install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/zabbix/zabbix-install/">zabbix install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/zabbix/zabbix-install-distributed/">zabbix install distributed</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/zabbix/zabbix-item-and-tigger/">zabbix item and tigger</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/zabbix/zabbix-java-gateway/">zabbix java gateway</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/zabbix/zabbix-modify-login-user-passwd/">zabbix modify login user passwd</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/zabbix/zabbix-optimization/">zabbix optimization</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/zabbix/zabbix-proxy-install/">zabbix proxy install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/zabbix/zabbix-server-support-chinese/">zabbix server support chinese</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/zabbix/zabbix-windows-agent/">zabbix windows agent</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/树莓派/">树莓派</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/树莓派/树莓派-GSM-语音短信报警/">树莓派 GSM 语音短信报警</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/监控/">监控</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/监控/监控知识体系/">监控知识体系</a></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/">Python</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-Framework/">Python Framework</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-Framework/Python-Django/">Python Django</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-Framework/Python-Django-setting/">Python Django setting</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-Framework/Python-tornado-install/">Python tornado install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-Learn/">Python Learn</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-Learn/python-上下文管理器/">python 上下文管理器</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-Learn/python-内存管理/">python 内存管理</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-Learn/python-函数编程/">python 函数编程</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-Learn/python-变量/">python 变量</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-Learn/python-对象使用/">python 对象使用</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-Learn/python-对象的属性/">python 对象的属性</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-Learn/python-对象编程/">python 对象编程</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-Learn/python-数据类型/">python 数据类型</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-Learn/python-流程控制/">python 流程控制</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-Learn/python-爬虫/">python 爬虫</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-Learn/python-特殊方法/">python 特殊方法</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-Learn/python-特殊说明/">python 特殊说明</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-Learn/python-装饰器/">python 装饰器</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-Learn/python-过程编程/">python 过程编程</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-Learn/python-进阶/">python 进阶</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-Learn/python-闭包/">python 闭包</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-install/">Python install</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-install/python-error-info/">python error info</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-install/python-pip-source-image/">python pip source image</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-install/python-pip-use/">python pip use</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-install/python-pyenv-install/">python pyenv install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-install/python-setup-py/">python setup.py</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-install/python-source-install/">python source install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-install/python-virtualenv/">python virtualenv</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-library/">Python library</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-library/MySQLdb/">MySQLdb</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-library/memory-profiler/">memory_profiler</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-library/time-datetime-calendar/">time datetime calendar</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-modules/">Python modules</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-modules/python-modules-path/">python modules path</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-modules/python-modules-pylint-and-ipython/">python modules pylint and ipython</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-other/">Python other</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-other/python-import-and-reload/">python import and reload</a></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Ruby/">Ruby</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Ruby/Ruby-install/">Ruby install</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Ruby/Ruby-install/Ruby-install/">Ruby install</a></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/TCP-IP/">TCP.IP</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/TCP-IP/TCP-状态/">TCP 状态</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/TCP-IP/TCP-IP模型/">TCP/IP模型</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/TCP-IP/Wireshark-use/">Wireshark use</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/WeChat/">WeChat</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/WeChat/WeChat-enterprise/">WeChat enterprise</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/WeChat/WeChat-enterprise/WeChat-enterprise-API/">WeChat enterprise API</a></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/">automation</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/automation/git/">git</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/automation/git/git-command/">git command</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/git/git-error/">git error</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/git/git-gitlab/">git gitlab</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/git/git-gitolite/">git gitolite</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/git/git-gogs/">git gogs</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/git/git-gogs-source-install/">git gogs source install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/git/git-init/">git init</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/git/git-workflow/">git workflow</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/jenkins/">jenkins</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/automation/jenkins/jenkins-info/">jenkins info</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/jenkins/jenkins-install/">jenkins install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/kvm/">kvm</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/automation/kvm/kvm-install/">kvm install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/maven/">maven</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/automation/maven/maven-install/">maven install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/nexus/">nexus</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/automation/nexus/nexus-install/">nexus install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/nexus/nexus-proxy-maven/">nexus proxy maven</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/rpm/">rpm</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/automation/rpm/rpm-package-build/">rpm package build</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/rpm/rpmbuild-spec/">rpmbuild spec</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/salt/">salt</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/automation/salt/salt-advanced-topic/">salt advanced topic</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/salt/salt-highstate/">salt highstate</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/salt/salt-info/">salt info</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/salt/salt-install/">salt install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/salt/salt-install-HA/">salt install HA</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/salt/salt-install-distributed/">salt install distributed</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/salt/salt-install-standard/">salt install standard</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/salt/salt-jinja2-grain-pillar-module/">salt jinja2 grain pillar module</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/salt/salt-manage-event-reactor/">salt manage event reactor</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/salt/salt-manage-grains/">salt manage grains</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/salt/salt-manage-job/">salt manage job</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/salt/salt-manage-module/">salt manage module</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/salt/salt-manage-pillar/">salt manage pillar</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/salt/salt-manage-return/">salt manage return</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/salt/salt-manage-states/">salt manage states</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/salt/salt-manage-target/">salt manage target</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/salt/salt-master-syndic-install/">salt master syndic install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/salt/salt-master-conf/">salt master.conf</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/salt/salt-minion-conf/">salt minion.conf</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/salt/salt-raet/">salt raet</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/salt/salt-state-module/">salt state module</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/salt/salt-syndic-conf/">salt syndic.conf</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/salt/salt-write-module-code/">salt write module code</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/svn/">svn</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/automation/svn/svn-auto-update/">svn auto update</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/yum/">yum</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/automation/yum/yum-server-install/">yum server install</a></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/">database</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/database/Mongo/">Mongo</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/database/Mongo/mongo-auth/">mongo auth</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Mongo/mongo-error/">mongo error</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Mongo/mongo-replication-auth-install/">mongo replication auth install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Mongo/mongo-replication-standard-install/">mongo replication standard install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Mongo/mongo-standard-install/">mongo standard install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Mysql/">Mysql</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/database/Mysql/mysql-command/">mysql command</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Mysql/mysql-error-info/">mysql error info</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Mysql/mysql-explain/">mysql explain</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Mysql/mysql-grant/">mysql grant</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Mysql/mysql-index-options/">mysql index options</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Mysql/mysql-innodb-buffer-pool-flush/">mysql innodb buffer pool flush</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Mysql/mysql-master-slave/">mysql master slave</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Mysql/mysql-master-slave-switch/">mysql master slave switch</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Mysql/mysql-partition/">mysql partition</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Mysql/mysql-select-join/">mysql select join</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Mysql/mysql-slow-log/">mysql slow log</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Mysql/mysql-standard/">mysql standard</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Mysql/mysql-table-size/">mysql table size</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Mysql/mysql-use-memory-as-disk/">mysql use memory as disk</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Postgresql/">Postgresql</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/database/Postgresql/postgresql-book-use/">postgresql book use</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Postgresql/postgresql-master-slave-info/">postgresql master slave info</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Postgresql/postgresql-master-slave/">postgresql master/slave</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Postgresql/postgresql-plugin-install/">postgresql plugin install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Postgresql/postgresql-standard/">postgresql standard</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Postgresql/postgresql-tablespace-database-schema-table-user-role-relation/">postgresql tablespace database schema table user role relation</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Postgresql/postgresql-yum-install/">postgresql yum install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Postgresql/postgresql-常用命令/">postgresql 常用命令</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Postgresql/postgresql-数据库对象/">postgresql 数据库对象</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Postgresql/postgresql-数据库管理/">postgresql 数据库管理</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Redis/">Redis</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/database/Redis/redis-error/">redis error</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Redis/redis-install/">redis install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Redis/redis-redis-trib-rb/">redis redis-trib.rb</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Redis/redis-status/">redis status</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Redis/redis-use/">redis use</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/influxDB/">influxDB</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/database/influxDB/influxDB-install/">influxDB install</a></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/golang/">golang</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/golang/go-env/">go env</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/">hadoop</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/RabbitMQ/">RabbitMQ</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/RabbitMQ/RabbitMQ-cluster/">RabbitMQ cluster</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/RabbitMQ/RabbitMQ-high-availability/">RabbitMQ high availability</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/RabbitMQ/RabbitMQ-info/">RabbitMQ info</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/RabbitMQ/RabbitMQ-install/">RabbitMQ install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/RabbitMQ/RabbitMQ-python-pika/">RabbitMQ python pika</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/RabbitMQ/RabbitMQ-user-and-grant/">RabbitMQ user and grant</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/RabbitMQ/RabbitMQ-working-principle/">RabbitMQ working principle</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/beats/">beats</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/beats/beats-install/">beats install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/datax/">datax</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/datax/datax-info/">datax info</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/datax/datax-install/">datax install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/datax/datax-job/">datax job</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/elasticsearch/">elasticsearch</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/elasticsearch/elasticsearch-backup-and-restore/">elasticsearch backup and restore</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/elasticsearch/elasticsearch-command/">elasticsearch command</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/elasticsearch/elasticsearch-core-component/">elasticsearch core component</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/elasticsearch/elasticsearch-exploring-your-cluster/">elasticsearch exploring your cluster</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/elasticsearch/elasticsearch-exploring-your-data/">elasticsearch exploring your data</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/elasticsearch/elasticsearch-four-search-type/">elasticsearch four search type</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/elasticsearch/elasticsearch-full-cluster-restart-upgrade/">elasticsearch full cluster restart upgrade</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/elasticsearch/elasticsearch-install/">elasticsearch install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/elasticsearch/elasticsearch-modifying-your-data/">elasticsearch modifying your data</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/elasticsearch/elasticsearch-rolling-upgrades/">elasticsearch rolling upgrades</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/elasticsearch/elasticsearch-safe-restart/">elasticsearch safe restart</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/elasticsearch/elasticsearch-shard/">elasticsearch shard</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/elasticsearch/how-to-tune-for-indexing-speed/">how to tune for indexing speed</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/elasticsearch/how-to-tune-for-search-speed/">how to tune for search speed</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/flume/">flume</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/flume/flume-info/">flume info</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/flume/flume-install/">flume install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/grafana/">grafana</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/grafana/grafana-install/">grafana install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/hadoop/">hadoop</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/hadoop/hadoop-简介/">hadoop 简介</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/kafka/">kafka</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/kafka/kafka-add-topic-partition/">kafka add topic partition</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/kafka/kafka-add-topic-replicats/">kafka add topic replicats</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/kafka/kafka-broker-config/">kafka broker config</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/kafka/kafka-high-throughput/">kafka high throughput</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/kafka/kafka-info/">kafka info</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/kafka/kafka-install/">kafka install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/kafka/kafka-manage-web/">kafka manage web</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/kafka/kafka-migrate-and-scale/">kafka migrate and scale</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/kafka/kafka-offset-monitor/">kafka offset monitor</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/kafka/kafka-optimize/">kafka optimize</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/kafka/kafka-use/">kafka use</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/kafka/kafka-web-console/">kafka web console</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/kafka/kafka-with-zookeeper/">kafka with zookeeper</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/kibana/">kibana</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/kibana/kibana-install/">kibana install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/logstash/">logstash</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/logstash/logstash-config-file/">logstash config file</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/logstash/logstash-filter-grok/">logstash filter grok</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/logstash/logstash-info/">logstash info</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/logstash/logstash-install/">logstash install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/mycat/">mycat</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/mycat/mycat-jvm-optimize/">mycat jvm optimize</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/mycat/mycat-web-install/">mycat web install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/nsq/">nsq</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/nsq/nsq-command/">nsq command</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/nsq/nsq-info/">nsq info</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/nsq/nsq-install/">nsq install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/zookeeper/">zookeeper</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/zookeeper/zookeeper-install/">zookeeper install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/zookeeper/zookeeper-monitor/">zookeeper monitor</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/zookeeper/zookeeper-optimize/">zookeeper optimize</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/zookeeper/zookeeper-use/">zookeeper use</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/zookeeper/zookeeper-zab-protocol/">zookeeper zab protocol</a></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/java/">java</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/java/java-env/">java env</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/java/java-jvm-optimize/">java jvm optimize</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/java/java-jvm-opts/">java jvm opts</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/java/java-jvm-原理/">java jvm 原理</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/java/java-learn/">java learn</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/java/java-learn/java-学习笔记/">java 学习笔记</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/java/java-log4j/">java log4j</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/java/java-performance-analysis/">java performance analysis</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/java/java-performance-analysis/jps/">jps</a></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/k8s/">k8s</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/k8s/k8s-dashboard-install/">k8s dashboard install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/k8s/k8s-install/">k8s install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/k8s/k8s-registry-install/">k8s registry install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/node/">node</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/node/node-install/">node install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/other/">other</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/other/ACID/">ACID</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/other/分布式二阶段和三阶段提交协议/">分布式二阶段和三阶段提交协议</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/other/开源许可协议/">开源许可协议</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/other/网络带宽/">网络带宽</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/">system service</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/Atlassian/">Atlassian</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/Atlassian/confluence-https/">confluence https</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/Atlassian/confluence-install/">confluence install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/Atlassian/confluence-reset-passwd/">confluence reset passwd</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/Atlassian/confluence-update/">confluence update</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/Atlassian/jira-https/">jira https</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/Atlassian/jira-install/">jira install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/Atlassian/jira-update/">jira update</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/Atlassian/mariadb-install/">mariadb install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/CentOS/">CentOS</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/CentOS/Base-env/">Base env</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/CentOS/linux-common-use-scripts/">linux common use scripts</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/CentOS/linux-history-info-setting/">linux history info setting</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/CentOS/linux-login-info/">linux login info</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/CentOS/linux-nginx-install/">linux nginx install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/CentOS/linux-skill/">linux skill</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/CentOS/linux-system-init/">linux system init</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/CentOS/linux-内存插槽-内存信息/">linux 内存插槽 内存信息</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/CentOS/linux-扩容swap分区/">linux 扩容swap分区</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/CentOS/linux-物理CPU-CPU核数-逻辑CPU/">linux 物理CPU CPU核数 逻辑CPU</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/CentOS/linux-磁盘系统block区别/">linux 磁盘系统block区别</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/CentOS/linux-设置-包含头文件路径-和-动态库链接路径/">linux 设置 包含头文件路径 和 动态库链接路径</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/CentOS/make提高源码编译速度/">make提高源码编译速度</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/NFS/">NFS</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/NFS/nfs-exports-command/">nfs exports command</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/NFS/nfs-install/">nfs install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/Samba/">Samba</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/Samba/samba-conf/">samba conf</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/Samba/samba-install/">samba install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/command/">command</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/command/grep/">grep</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/command/linux/">linux</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/command/pigz/">pigz</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/command/sed/">sed</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/command/split/">split</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/command/tr/">tr</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/haproxy/">haproxy</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/haproxy/haproxy-install/">haproxy install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/nginx/">nginx</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/nginx/nginx-install/">nginx install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/nginx/nginx-location/">nginx location</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/nginx/nginx-rewrite/">nginx rewrite</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/nginx/nginx-status/">nginx status</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/ntpd/">ntpd</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/ntpd/ntpd-install/">ntpd install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/openssl/">openssl</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/openssl/openssl-certificate/">openssl certificate</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/openvpn/">openvpn</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/openvpn/openvpn-install/">openvpn install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/rsync/">rsync</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/rsync/rsync-install/">rsync install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/supersord/">supersord</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/supersord/supersord-install/">supersord install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/vsftpd/">vsftpd</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/vsftpd/ftp-proxy/">ftp proxy</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/vsftpd/vsftpd-error/">vsftpd error</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/vsftpd/vsftpd-info/">vsftpd info</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/vsftpd/vsftpd-install/">vsftpd install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/windows/">windows</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/windows/cygwin-install/">cygwin install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/windows/ipsec-set/">ipsec set</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/windows/windows-modify-hosts/">windows modify hosts</a></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/web/">web</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/web/SSL/">SSL</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/web/SSL/SSL-certificate/">SSL certificate</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/web/angular/">angular</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/web/angular/angular-install/">angular install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/web/hexo/">hexo</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/web/hexo/hexo-install/">hexo install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/web/sass/">sass</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/web/sass/sass-install/">sass install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/web/xml/">xml</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/web/xml/xml-format/">xml format</a></li></ul></li></ul></li></ul>
    </div>
  </div>


  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">归档</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/01/">一月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/11/">十一月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/10/">十月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/09/">九月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/08/">八月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/07/">七月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/06/">六月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/05/">五月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/04/">四月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/03/">三月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/02/">二月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/01/">一月 2017</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">最新文章</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2020/01/01/hello-everyone/">Hello Everyone</a>
          </li>
        
          <li>
            <a href="/2017/11/28/kafka-web-console/">kafka web console</a>
          </li>
        
          <li>
            <a href="/2017/11/27/svn-auto-update/">svn auto update</a>
          </li>
        
          <li>
            <a href="/2017/11/15/salt-manage-event-reactor/">salt manage event reactor</a>
          </li>
        
          <li>
            <a href="/2017/11/15/salt-manage-job/">salt manage job</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2017 penn<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>



  </div>
</body>
</html>