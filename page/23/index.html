<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  

  
  <title>smallasa</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="smallasa">
<meta property="og:url" content="http://www.smallasa.com/page/23/index.html">
<meta property="og:site_name" content="smallasa">
<meta property="og:locale" content="zh-CN">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="smallasa">
  
    <link rel="alternate" href="/atom.xml" title="smallasa" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">smallasa</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">I known what i do !</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="搜索"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://www.smallasa.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-kafka-optimize" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/03/08/kafka-optimize/" class="article-date">
  <time datetime="2017-03-07T16:34:39.000Z" itemprop="datePublished">2017-03-08</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/hadoop/">hadoop</a>►<a class="article-category-link" href="/categories/hadoop/kafka/">kafka</a>►<a class="article-category-link" href="/categories/hadoop/kafka/kafka-optimize/">kafka optimize</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/03/08/kafka-optimize/">kafka optimize</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="主要优化原理和思路"><a href="#主要优化原理和思路" class="headerlink" title="主要优化原理和思路"></a>主要优化原理和思路</h3><ol>
<li><p>磁盘优化</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">kafka是一个高吞吐量分布式消息系统,并且提供了持久化.</span><br><span class="line">其高性能的有两个重要特点:</span><br><span class="line">* 利用了磁盘连续读写性能远远高于随机读写的特点</span><br><span class="line">* 并发,将一个topic拆分多个partition</span><br><span class="line">要充分发挥kafka的性能,就需要满足这两个条件</span><br><span class="line"></span><br><span class="line">kafka读写的单位是partition.因此,将一个topic拆分为多个partition可以提高吞吐量.但是,这里有个前提,就是不同partition需要位于不同的磁盘（可以在同一个机器).如果多个partition位于同一个磁盘,那么意味着有多个进程同时对一个磁盘的多个文件进行读写,使得操作系统会对磁盘读写进行频繁调度,也就是破坏了磁盘读写的连续性.</span><br><span class="line"></span><br><span class="line">具体配置上,是将不同磁盘的多个目录配置到broker的log.dirs,例如:</span><br><span class="line">log.dirs=/disk1/kafka-logs,/disk2/kafka-logs,/disk3/kafka-logs</span><br><span class="line"></span><br><span class="line">kafka会在新建partition的时候,将新partition分布在partition最少的目录上,因此,一般不能将同一个磁盘的多个目录设置到log.dirs.</span><br><span class="line">同一个ConsumerGroup内的Consumer和Partition在同一时间内必须保证是一对一的消费关系.任意Partition在某一个时刻只能被一个Consumer Group内的一个Consumer消费(反过来一个Consumer则可以同时消费多个Partition)</span><br></pre></td></tr></table></figure>
</li>
<li><p>JVM参数配置</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">推荐使用最新的G1来代替CMS作为垃圾回收器,推荐JDK最低版本为1.7u51</span><br><span class="line"></span><br><span class="line">-Xms30g -Xmx30g -XX:PermSize=48m -XX:MaxPermSize=48m -XX:+UseG1GC -XX:MaxGCPauseMillis=20 -XX:InitiatingHeapOccupancyPercent=35</span><br><span class="line"></span><br><span class="line">G1相比较于CMS的优势:</span><br><span class="line">* G1是一种适用于服务器端的垃圾回收器,很好的平衡了吞吐量和响应能力</span><br><span class="line">* 对于内存的划分方法不同,Eden,Survivor,Old区域不再固定,使用内存会更高效.G1通过对内存进行Region的划分,有效避免了内存碎片问题</span><br><span class="line">* G1可以指定GC时可用于暂停线程的时间(不保证严格遵守)而CMS并不提供可控选项</span><br><span class="line">* CMS只有在FullGC之后会重新合并压缩内存,而G1把回收和合并集合在一起</span><br><span class="line">* CMS只能使用在Old区,在清理Young时一般是配合使用ParNew,而G1可以统一两类分区的回收算法</span><br><span class="line"></span><br><span class="line">G1的适用场景：</span><br><span class="line">* JVM占用内存较大(At least 4G)</span><br><span class="line">* 应用本身频繁申请,释放内存,进而产生大量内存碎片时。</span><br><span class="line">* 对于GC时间较为敏感的应用</span><br></pre></td></tr></table></figure>
</li>
<li><p>Broker参数配置</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">//网络和io操作线程配置优化</span><br><span class="line"># broker处理消息的最大线程数</span><br><span class="line">num.network.threads=xxx</span><br><span class="line"></span><br><span class="line"># broker处理磁盘IO的线程数</span><br><span class="line">num.io.threads=xxx</span><br><span class="line"></span><br><span class="line">说明:</span><br><span class="line">num.network.threads用于接收并处理网络请求的线程数,默认为3.其内部实现是采用Selector模型.启动一个线程作为Acceptor来负责建立连接,再配合启动num.network.threads个线程来轮流负责从Sockets里读取请求,一般无需改动,除非上下游并发请求量过大.一般num.network.threads主要处理网络io,读写缓冲区数据,基本没有io等待,配置线程数量为cpu核数加1.</span><br><span class="line"></span><br><span class="line">num.io.threads主要进行磁盘io操作,高峰期可能有些io等待,因此配置需要大些.配置线程数量为cpu核数2倍,最大不超过3倍.</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">//log数据文件刷盘策略</span><br><span class="line">为了大幅度提高producer写入吞吐量,需要定期批量写文件:</span><br><span class="line"># 每当producer写入10000条消息时,刷数据到磁盘 log.flush.interval.messages=10000</span><br><span class="line"># 每间隔1秒钟时间,刷数据到磁盘</span><br><span class="line">log.flush.interval.ms=1000</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">//日志保留策略配置</span><br><span class="line">当kafka server被写入海量消息后,会生成很多数据文件,且占用大量磁盘空间,如果不及时清理,可能磁盘空间不够用,kafka默认是保留7天.</span><br><span class="line">建议配置：</span><br><span class="line"># 保留三天，也可以更短</span><br><span class="line">log.retention.hours=72</span><br><span class="line"></span><br><span class="line"># 段文件配置1GB,有利于快速回收磁盘空间,重启kafka加载也会加快(如果文件过小,则文件数量比较多,kafka启动时是单线程扫描目录(log.dir)下所有数据文件)</span><br><span class="line">log.segment.bytes=1073741824</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Kafka官方并不建议通过Broker端的log.flush.interval.messages和log.flush.interval.ms来强制写盘,认为数据的可靠性应该通过Replica来保证,而强制Flush数据到磁盘会对整体性能产生影响.</span><br><span class="line"></span><br><span class="line">可以通过调整/proc/sys/vm/dirty_background_ratio和/proc/sys/vm/dirty_ratio来调优性能:</span><br><span class="line">* 脏页率超过第一个指标会启动pdflush开始Flush Dirty PageCache</span><br><span class="line">* 脏页率超过第二个指标会阻塞所有的写操作来进行Flush</span><br><span class="line">* 根据不同的业务需求可以适当的降低dirty_background_ratio和提高dirty_ratio</span><br><span class="line">* 如果topic的数据量较小可以考虑减少log.flush.interval.ms和log.flush.interval.messages来强制刷写数据,减少可能由于缓存数据未写盘带来的不一致</span><br></pre></td></tr></table></figure>
</li>
<li><p>配置jmx</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[penn@root kafka_2.10-0.8.1]$ vim bin/kafka-run-class.sh</span><br><span class="line"><span class="comment">#最前面添加一行</span></span><br><span class="line">JMX_PORT=8060</span><br></pre></td></tr></table></figure>
</li>
<li><p>Replica相关配置</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">replica.lag.time.max.ms:10000</span><br><span class="line">replica.lag.max.messages:4000</span><br><span class="line"></span><br><span class="line">num.replica.fetchers:1</span><br><span class="line">#在Replica上会启动若干Fetch线程把对应的数据同步到本地,而num.replica.fetchers这个参数是用来控制Fetch线程的数量.</span><br><span class="line">#每个Partition启动的多个Fetcher,通过共享offset既保证了同一时间内Consumer和Partition之间的一对一关系,又允许我们通过增多Fetch线程来提高效率</span><br><span class="line"></span><br><span class="line">default.replication.factor:1</span><br><span class="line">#这个参数指新创建一个topic时,默认的Replica数量</span><br><span class="line">#Replica过少会影响数据的可用性,太多则会白白浪费存储资源,一般建议在2~3为宜</span><br></pre></td></tr></table></figure>
</li>
<li><p>purgatory</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">fetch.purgatory.purge.interval.requests:1000</span><br><span class="line">producer.purgatory.purge.interval.requests:1000</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p><a href="http://blog.csdn.net/vegetable_bird_001/article/details/51858915" target="_blank" rel="noopener">http://blog.csdn.net/vegetable_bird_001/article/details/51858915</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.smallasa.com/2017/03/08/kafka-optimize/" data-id="cjavy9jyj004v0coqz0ziekhb" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-kafka-install" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/03/08/kafka-install/" class="article-date">
  <time datetime="2017-03-07T16:34:07.000Z" itemprop="datePublished">2017-03-08</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/hadoop/">hadoop</a>►<a class="article-category-link" href="/categories/hadoop/kafka/">kafka</a>►<a class="article-category-link" href="/categories/hadoop/kafka/kafka-install/">kafka install</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/03/08/kafka-install/">kafka install</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="java-install"><a href="#java-install" class="headerlink" title="java install"></a>java install</h3><p><em>参考java 环境安装</em></p>
<h3 id="zookeeper-install"><a href="#zookeeper-install" class="headerlink" title="zookeeper install"></a>zookeeper install</h3><p><em>参考zookeeper install</em></p>
<h3 id="kafka-standard-install"><a href="#kafka-standard-install" class="headerlink" title="kafka standard install"></a>kafka standard install</h3><ol>
<li><p>kafka安装</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@10 ~]<span class="comment"># cd /mnt/ops/app/</span></span><br><span class="line">[root@10 app]<span class="comment"># tar xzf kafka_2.11-0.9.0.0.tgz</span></span><br><span class="line">[root@10 app]<span class="comment"># mv kafka_2.11-0.9.0.0 /mnt/app/kafka</span></span><br><span class="line">[root@10 app]<span class="comment"># chown -R wisdom.wisdom /mnt/app/kafka</span></span><br><span class="line"></span><br><span class="line">[root@10 app]<span class="comment"># mkdir -p /mnt/&#123;data,log&#125;/kafka</span></span><br><span class="line">[root@10 app]<span class="comment"># chown -R wisdom.wisdom /mnt/&#123;data,log&#125;/kafka</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>kafka配置文件</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">[root@10 app]<span class="comment"># cp /mnt/app/kafka/config/&#123;server.properties,server.properties.bak&#125;</span></span><br><span class="line">[root@10 app]<span class="comment"># cat &gt; /mnt/app/kafka/config/server.properties &lt;&lt;EOF</span></span><br><span class="line">&gt; broker.id=113</span><br><span class="line">&gt; advertised.host.name=10.0.2.113</span><br><span class="line">&gt; advertised.port=9092</span><br><span class="line">&gt; delete.topic.enable=<span class="literal">true</span></span><br><span class="line">&gt; listeners=PLAINTEXT://:9092</span><br><span class="line">&gt; num.network.threads=9</span><br><span class="line">&gt; num.io.threads=16</span><br><span class="line">&gt; socket.send.buffer.bytes=102400</span><br><span class="line">&gt; socket.receive.buffer.bytes=102400</span><br><span class="line">&gt; socket.request.max.bytes=104857600</span><br><span class="line">&gt; log.dirs=/mnt/data/kafka</span><br><span class="line">&gt; num.partitions=3</span><br><span class="line">&gt; num.recovery.threads.per.data.dir=2</span><br><span class="line">&gt; default.replication.factor = 1</span><br><span class="line">&gt; replica.fetch.max.bytes=20000000</span><br><span class="line">&gt; num.replica.fetchers=2</span><br><span class="line">&gt; message.max.bytes=10000000</span><br><span class="line">&gt; log.flush.interval.messages=10000</span><br><span class="line">&gt; log.flush.interval.ms=1000</span><br><span class="line">&gt; log.retention.hours=48</span><br><span class="line">&gt; log.segment.bytes=1073741824</span><br><span class="line">&gt; log.retention.check.interval.ms=300000</span><br><span class="line">&gt; zookeeper.connect=10.0.2.113:2181</span><br><span class="line">&gt; zookeeper.connection.timeout.ms=6000</span><br><span class="line">&gt; EOF</span><br></pre></td></tr></table></figure>
</li>
<li><p>kafka log存放位置</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[root@10 app]<span class="comment"># vim /mnt/app/kafka/bin/kafka-run-class.sh</span></span><br><span class="line"><span class="comment"># Log directory to use</span></span><br><span class="line"><span class="keyword">if</span> [ <span class="string">"x<span class="variable">$LOG_DIR</span>"</span> = <span class="string">"x"</span> ]; <span class="keyword">then</span></span><br><span class="line">  LOG_DIR=<span class="string">"/mnt/log/kafka"</span></span><br><span class="line">  JMX_PORT=8092</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">  LOG_DIR=<span class="string">"/mnt/log/kafka"</span></span><br><span class="line">  JMX_PORT=8092</span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>kafka jvm修改</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@10 app]<span class="comment"># vim /mnt/app/kafka/bin/kafka-server-start.sh</span></span><br><span class="line"><span class="keyword">if</span> [ <span class="string">"x<span class="variable">$KAFKA_HEAP_OPTS</span>"</span> = <span class="string">"x"</span> ]; <span class="keyword">then</span></span><br><span class="line">    <span class="built_in">export</span> KAFKA_HEAP_OPTS=<span class="string">"-Xmx4G -Xms4G -Xmn2G -XX:PermSize=64m -XX:MaxPermSize=128m -XX:SurvivorRatio=6 -XX:CMSInitiatingOccupancyFraction=70 -XX:+UseCMSInitiatingOccupancyOnly"</span></span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>kafka 启动</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@10 app]<span class="comment"># su - wisdom</span></span><br><span class="line">[wisdom@10 ~]$ /mnt/app/kafka/bin/kafka-server-start.sh -daemon /mnt/app/kafka/config/server.properties</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h3 id="kafka-cluster-install"><a href="#kafka-cluster-install" class="headerlink" title="kafka cluster install"></a>kafka cluster install</h3><ol>
<li><p>kafka安装</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@10 ~]<span class="comment"># cd /mnt/ops/app/</span></span><br><span class="line">[root@10 app]<span class="comment"># tar xzf kafka_2.11-0.9.0.0.tgz</span></span><br><span class="line">[root@10 app]<span class="comment"># mv kafka_2.11-0.9.0.0 /mnt/app/kafka</span></span><br><span class="line">[root@10 app]<span class="comment"># chown -R wisdom.wisdom /mnt/app/kafka</span></span><br><span class="line"></span><br><span class="line">[root@10 app]<span class="comment"># mkdir -p /mnt/&#123;data,log&#125;/kafka</span></span><br><span class="line">[root@10 app]<span class="comment"># chown -R wisdom.wisdom /mnt/&#123;data,log&#125;/kafka</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>kafka配置文件</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br></pre></td><td class="code"><pre><span class="line">[root@10 app]<span class="comment"># cp /mnt/app/kafka/config/&#123;server.properties,server.properties.bak&#125;</span></span><br><span class="line"></span><br><span class="line">kafka cluster-1:</span><br><span class="line">[root@10 app]<span class="comment"># cat &gt; /mnt/app/kafka/config/server.properties &lt;&lt;EOF</span></span><br><span class="line">&gt; broker.id=113</span><br><span class="line">&gt; advertised.host.name=10.0.2.113</span><br><span class="line">&gt; advertised.port=9092</span><br><span class="line">&gt; delete.topic.enable=<span class="literal">true</span></span><br><span class="line">&gt; listeners=PLAINTEXT://:9092</span><br><span class="line">&gt; num.network.threads=4</span><br><span class="line">&gt; num.io.threads=8</span><br><span class="line">&gt; socket.send.buffer.bytes=102400</span><br><span class="line">&gt; socket.receive.buffer.bytes=102400</span><br><span class="line">&gt; socket.request.max.bytes=104857600</span><br><span class="line">&gt; log.dirs=/mnt/data/kafka</span><br><span class="line">&gt; num.partitions=3</span><br><span class="line">&gt; num.recovery.threads.per.data.dir=2</span><br><span class="line">&gt; default.replication.factor = 1</span><br><span class="line">&gt; replica.fetch.max.bytes=20000000</span><br><span class="line">&gt; num.replica.fetchers=2</span><br><span class="line">&gt; message.max.bytes=10000000</span><br><span class="line">&gt; log.flush.interval.messages=10000</span><br><span class="line">&gt; log.flush.interval.ms=1000</span><br><span class="line">&gt; log.retention.hours=48</span><br><span class="line">&gt; log.segment.bytes=1073741824</span><br><span class="line">&gt; log.retention.check.interval.ms=300000</span><br><span class="line">&gt; zookeeper.connect=10.0.2.113:2181,10.0.2.114:2181,10.0.2.115:2181</span><br><span class="line">&gt; zookeeper.connection.timeout.ms=6000</span><br><span class="line">&gt; EOF</span><br><span class="line"></span><br><span class="line">kafka cluster-2:</span><br><span class="line">[root@10 app]<span class="comment"># cat &gt; /mnt/app/kafka/config/server.properties &lt;&lt;EOF</span></span><br><span class="line">&gt; broker.id=114</span><br><span class="line">&gt; advertised.host.name=10.0.2.114</span><br><span class="line">&gt; advertised.port=9092</span><br><span class="line">&gt; delete.topic.enable=<span class="literal">true</span></span><br><span class="line">&gt; listeners=PLAINTEXT://:9092</span><br><span class="line">&gt; num.network.threads=4</span><br><span class="line">&gt; num.io.threads=8</span><br><span class="line">&gt; socket.send.buffer.bytes=102400</span><br><span class="line">&gt; socket.receive.buffer.bytes=102400</span><br><span class="line">&gt; socket.request.max.bytes=104857600</span><br><span class="line">&gt; log.dirs=/mnt/data/kafka</span><br><span class="line">&gt; num.partitions=5</span><br><span class="line">&gt; num.recovery.threads.per.data.dir=2</span><br><span class="line">&gt; default.replication.factor = 1</span><br><span class="line">&gt; replica.fetch.max.bytes=20000000</span><br><span class="line">&gt; num.replica.fetchers=2</span><br><span class="line">&gt; message.max.bytes=10000000</span><br><span class="line">&gt; log.flush.interval.messages=10000</span><br><span class="line">&gt; log.flush.interval.ms=1000</span><br><span class="line">&gt; log.retention.hours=48</span><br><span class="line">&gt; log.segment.bytes=1073741824</span><br><span class="line">&gt; log.retention.check.interval.ms=300000</span><br><span class="line">&gt; zookeeper.connect=10.0.2.113:2181,10.0.2.114:2181,10.0.2.115:2181</span><br><span class="line">&gt; zookeeper.connection.timeout.ms=6000</span><br><span class="line">&gt; EOF</span><br><span class="line"></span><br><span class="line">kafka cluster-3:</span><br><span class="line">[root@10 app]<span class="comment"># cat &gt; /mnt/app/kafka/config/server.properties &lt;&lt;EOF</span></span><br><span class="line">&gt; broker.id=115</span><br><span class="line">&gt; advertised.host.name=10.0.2.115</span><br><span class="line">&gt; advertised.port=9092</span><br><span class="line">&gt; delete.topic.enable=<span class="literal">true</span></span><br><span class="line">&gt; listeners=PLAINTEXT://:9092</span><br><span class="line">&gt; num.network.threads=4</span><br><span class="line">&gt; num.io.threads=8</span><br><span class="line">&gt; socket.send.buffer.bytes=102400</span><br><span class="line">&gt; socket.receive.buffer.bytes=102400</span><br><span class="line">&gt; socket.request.max.bytes=104857600</span><br><span class="line">&gt; log.dirs=/mnt/data/kafka</span><br><span class="line">&gt; num.partitions=5</span><br><span class="line">&gt; num.recovery.threads.per.data.dir=2</span><br><span class="line">&gt; default.replication.factor = 1</span><br><span class="line">&gt; replica.fetch.max.bytes=20000000</span><br><span class="line">&gt; num.replica.fetchers=2</span><br><span class="line">&gt; message.max.bytes=10000000</span><br><span class="line">&gt; log.flush.interval.messages=10000</span><br><span class="line">&gt; log.flush.interval.ms=1000</span><br><span class="line">&gt; log.retention.hours=48</span><br><span class="line">&gt; log.segment.bytes=1073741824</span><br><span class="line">&gt; log.retention.check.interval.ms=300000</span><br><span class="line">&gt; zookeeper.connect=10.0.2.113:2181,10.0.2.114:2181,10.0.2.115:2181</span><br><span class="line">&gt; zookeeper.connection.timeout.ms=6000</span><br><span class="line">&gt; EOF</span><br></pre></td></tr></table></figure>
</li>
<li><p>kafka log存放位置</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[root@10 app]<span class="comment"># vim /mnt/app/kafka/bin/kafka-run-class.sh</span></span><br><span class="line"><span class="comment"># Log directory to use</span></span><br><span class="line"><span class="keyword">if</span> [ <span class="string">"x<span class="variable">$LOG_DIR</span>"</span> = <span class="string">"x"</span> ]; <span class="keyword">then</span></span><br><span class="line">  LOG_DIR=<span class="string">"/mnt/log/kafka"</span></span><br><span class="line">  JMX_PORT=8092</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">  LOG_DIR=<span class="string">"/mnt/log/kafka"</span></span><br><span class="line">  JMX_PORT=8092</span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>kafka jvm修改</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@10 app]<span class="comment"># vim /mnt/app/kafka/bin/kafka-server-start.sh</span></span><br><span class="line"><span class="keyword">if</span> [ <span class="string">"x<span class="variable">$KAFKA_HEAP_OPTS</span>"</span> = <span class="string">"x"</span> ]; <span class="keyword">then</span></span><br><span class="line">    <span class="built_in">export</span> KAFKA_HEAP_OPTS=<span class="string">"-Xmx4G -Xms4G -Xmn2G -XX:PermSize=64m -XX:MaxPermSize=128m -XX:SurvivorRatio=6 -XX:CMSInitiatingOccupancyFraction=70 -XX:+UseCMSInitiatingOccupancyOnly"</span></span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>kafka 启动</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@10 app]<span class="comment"># su - wisdom</span></span><br><span class="line">[wisdom@10 ~]$ /mnt/app/kafka/bin/kafka-server-start.sh -daemon /mnt/app/kafka/config/server.properties</span><br></pre></td></tr></table></figure>
</li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.smallasa.com/2017/03/08/kafka-install/" data-id="cjavy9jy9004p0coqm3hs3qj2" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-java-performance-analysis" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/03/07/java-performance-analysis/" class="article-date">
  <time datetime="2017-03-07T06:44:44.000Z" itemprop="datePublished">2017-03-07</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/java/">java</a>►<a class="article-category-link" href="/categories/java/java-performance-analysis/">java performance analysis</a>►<a class="article-category-link" href="/categories/java/java-performance-analysis/jps/">jps</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/03/07/java-performance-analysis/">java performance analysis</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="jps-分析"><a href="#jps-分析" class="headerlink" title="jps 分析"></a>jps 分析</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line">* jps位于jdk的bin目录下,其作用是显示当前系统的java进程情况,及其id号</span><br><span class="line">* jps并不使用应用程序名来查找JVM实例,因此,它查找所有的Java应用程序(包括即使没有使用java执行体的那种(例如:定制的启动器))</span><br><span class="line">* jps仅查找当前用户的Java进程,而不是当前系统中的所有进程</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">JDK中的jps命令可以显示当前运行的java进程以及相关参数,它的实现机制如下：</span><br><span class="line">java程序在启动以后,会在&quot;java.io.tmpdir&quot;指定的目录下,就是临时文件夹里,生成一个类似于&quot;hsperfdata_User&quot;的文件夹,在这个文件夹里(Linux中为/tmp/hsperfdata_&#123;userName&#125;/),有几个文件,名字就是java进程的pid,因此列出当前运行的java进程,只是把这个目录里的文件名列一下而已.</span><br><span class="line">例如:</span><br><span class="line">[wisdom@10 ~]$ ls -ld /tmp/hsperfdata_*</span><br><span class="line">drwxr-xr-x 2 root   root   4096 Mar  7 14:47 /tmp/hsperfdata_root</span><br><span class="line">drwxr-xr-x 2 wisdom wisdom 4096 Mar  7 14:49 /tmp/hsperfdata_wisdom</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">例如:</span><br><span class="line">[wisdom@10 ~]$ jps</span><br><span class="line">1347 Elasticsearch</span><br><span class="line">12662 Jps</span><br><span class="line">16731 QuorumPeerMain</span><br><span class="line">17084 Kafka</span><br><span class="line">21790 Main</span><br><span class="line"></span><br><span class="line"># -q 只显示pid，不显示class名称,jar文件名和传递给main 方法的参数</span><br><span class="line">[wisdom@10 ~]$ jps -q</span><br><span class="line">1347</span><br><span class="line">16731</span><br><span class="line">17084</span><br><span class="line">14093</span><br><span class="line">21790</span><br><span class="line"></span><br><span class="line"># -m 输出传递给main方法的参数,在嵌入式jvm上可能是null,在这里,在启动main方法的时候,我给String[] args传递两个参数</span><br><span class="line">[wisdom@10 ~]$ jps -m</span><br><span class="line">1347 Elasticsearch start -d -p /mnt/app/elasticsearch/elasticsearch.pid</span><br><span class="line">16731 QuorumPeerMain /mnt/app/zookeeper/bin/../conf/zoo.cfg</span><br><span class="line">17084 Kafka /mnt/app/kafka/config/server.properties</span><br><span class="line">21790 Main --1.9 /mnt/app/logstash/lib/bootstrap/environment.rb logstash/runner.rb agent -f /mnt/app/logstash/config/logstash-ssp-4502.conf -l /mnt/log/logstash/logstash-4502.log</span><br><span class="line">14287 Jps -m</span><br><span class="line"></span><br><span class="line"># -l 输出应用程序main class的完整package名 或者 应用程序的jar文件完整路径名</span><br><span class="line">[wisdom@10 ~]$ jps -l</span><br><span class="line">1347 org.elasticsearch.bootstrap.Elasticsearch</span><br><span class="line">16731 org.apache.zookeeper.server.quorum.QuorumPeerMain</span><br><span class="line">17084 kafka.Kafka</span><br><span class="line">16094 sun.tools.jps.Jps</span><br><span class="line">21790 org.jruby.Main</span><br><span class="line"></span><br><span class="line"># -v 输出传递给JVM的参数</span><br><span class="line">[wisdom@10 ~]$ jps -v</span><br><span class="line">1347 Elasticsearch -Xms5g -Xmx5g -Djava.awt.headless=true -XX:+UseParNewGC -XX:+UseConcMarkSweepGC -XX:CMSInitiatingOccupancyFraction=75 -XX:+UseCMSInitiatingOccupancyOnly -XX:+HeapDumpOnOutOfMemoryError -XX:+DisableExplicitGC -Dfile.encoding=UTF-8 -Djna.nosys=true -Des.path.home=/mnt/app/elasticsearch</span><br><span class="line">16731 QuorumPeerMain -Dzookeeper.log.dir=/mnt/log/zookeeper -Dzookeeper.root.logger=INFO,CONSOLE -Dcom.sun.management.jmxremote -Dcom.sun.management.jmxremote.local.only=false</span><br><span class="line">17084 Kafka -Xmx1G -Xms1G -XX:+UseG1GC -XX:MaxGCPauseMillis=20 -XX:InitiatingHeapOccupancyPercent=35 -XX:+DisableExplicitGC -Djava.awt.headless=true -Xloggc:/mnt/log/kafka/kafkaServer-gc.log -verbose:gc -XX:+PrintGCDetails -XX:+PrintGCDateStamps -XX:+PrintGCTimeStamps -Dcom.sun.management.jmxremote -Dcom.sun.management.jmxremote.authenticate=false -Dcom.sun.management.jmxremote.ssl=false -Dkafka.logs.dir=/mnt/log/kafka -Dlog4j.configuration=file:/mnt/app/kafka/bin/../config/log4j.properties</span><br><span class="line">16637 Jps -Denv.class.path=.:/mnt/app/java/lib:/mnt/app/java/jre/lib -Dapplication.home=/mnt/app/java -Xms8m</span><br><span class="line">21790 Main -XX:+UseParNewGC -XX:+UseConcMarkSweepGC -Djava.awt.headless=true -XX:CMSInitiatingOccupancyFraction=75 -XX:+UseCMSInitiatingOccupancyOnly -XX:+HeapDumpOnOutOfMemoryError -Xmx1g -Xss2048k -Djffi.boot.library.path=/mnt/app/logstash/vendor/jruby/lib/jni -XX:+UseParNewGC -XX:+UseConcMarkSweepGC -Djava.awt.headless=true -XX:CMSInitiatingOccupancyFraction=75 -XX:+UseCMSInitiatingOccupancyOnly -XX:+HeapDumpOnOutOfMemoryError -XX:HeapDumpPath=/mnt/app/logstash/heapdump.hprof -Xbootclasspath/a:/mnt/app/logstash/vendor/jruby/lib/jruby.jar -Djruby.home=/mnt/app/logstash/vendor/jruby -Djruby.lib=/mnt/app/logstash/vendor/jruby/lib -Djruby.script=jruby -Djruby.shell=/bin/sh</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">拓展:JPS失效处理</span><br><span class="line">现象: 用&quot;ps -ef|grep java&quot;能看到启动的java进程,但是用jps查看却不存在该进程的id.jconsole,jvisualvm可能无法监控该进程,其他java自带工具也可能无法使用</span><br><span class="line">分析: jps,jconsole,jvisualvm等工具的数据来源就是这个文件(/tmp/hsperfdata_&#123;username&#125;/pid).所以当该文件不存在或是无法读取时就会出现jps无法查看该进程号,jconsole无法监控等问题</span><br><span class="line">原因：</span><br><span class="line">1.磁盘读写,目录权限问题</span><br><span class="line">  若该用户没有权限写/tmp目录或是磁盘已满,则无法创建/tmp/hsperfdata_&#123;username&#125;/pid文件.或该文件已经生成,但用户没有读权限</span><br><span class="line">2.临时文件丢失,被删除或是定期清理</span><br><span class="line">  对于linux机器,一般都会存在定时任务对临时文件夹进行清理,导致/tmp目录被清空.常用的可能定时删除临时目录的工具为crontab,redhat的tmpwatch,ubuntu的tmpreaper等.这个导致的现象可能会是这样,用jconsole监控进程,发现在某一时段后进程仍然存在,但是却没有监控信息了</span><br><span class="line">3.java进程信息文件存储地址被设置不在/tmp目录下</span><br><span class="line">  java默认会在/tmp/hsperfdata_&#123;username&#125;目录保存进程信息,但由于以上1,2所述原因,可能导致该文件无法生成或是丢失,所以java启动时提供了参数(-Djava.io.tmpdir),可以对这个文件的位置进行设置,而jps,jconsole都只会从&quot;/tmp&quot;目录读取,而无法从设置后的目录读物信息</span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.smallasa.com/2017/03/07/java-performance-analysis/" data-id="cjavy9jxd00460coqgp58c0ga" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-zookeeper-optimize" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/03/07/zookeeper-optimize/" class="article-date">
  <time datetime="2017-03-07T06:09:38.000Z" itemprop="datePublished">2017-03-07</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/hadoop/">hadoop</a>►<a class="article-category-link" href="/categories/hadoop/zookeeper/">zookeeper</a>►<a class="article-category-link" href="/categories/hadoop/zookeeper/zookeeper-optimize/">zookeeper optimize</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/03/07/zookeeper-optimize/">zookeeper optimize</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="zookeeper参数说明"><a href="#zookeeper参数说明" class="headerlink" title="zookeeper参数说明"></a>zookeeper参数说明</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">1.tickTime：Client-Server通信心跳时间</span><br><span class="line">   Zookeeper服务器之间或客户端与服务器之间维持心跳的时间间隔,也就是每个tickTime时间就会发送一个心跳.tickTime以毫秒为单位</span><br><span class="line">   tickTime=2000</span><br><span class="line"></span><br><span class="line">2.initLimit：Leader-Follower初始通信时限</span><br><span class="line">  集群中的follower服务器(F)与leader服务器(L)之间初始连接时能容忍的最多心跳数(tickTime的数量)</span><br><span class="line">  initLimit=5</span><br><span class="line"></span><br><span class="line">3.syncLimit：Leader-Follower同步通信时限</span><br><span class="line">  集群中的follower服务器与leader服务器之间请求和应答之间能容忍的最多心跳数(tickTime的数量)</span><br><span class="line">  syncLimit=2</span><br><span class="line"></span><br><span class="line">4.dataDir：数据文件目录</span><br><span class="line">  Zookeeper保存数据的目录,默认情况下,Zookeeper将写数据的日志文件也保存在这个目录里</span><br><span class="line">  dataDir=/mnt/data/zookeeper</span><br><span class="line"></span><br><span class="line">5.dataLogDir: 日志存放位置</span><br><span class="line">  Zookeeper保存日志存放位置,默认情况下,Zookeeper将写数据的日志文件放在dataDir目录里</span><br><span class="line">  dataLogDir=/mnt/log/zookeeper</span><br><span class="line"></span><br><span class="line">6.clientPort：客户端连接端口</span><br><span class="line">  客户端连接Zookeeper服务器的端口,Zookeeper会监听这个端口,接受客户端的访问请求</span><br><span class="line">  clientPort=2181</span><br><span class="line"></span><br><span class="line">7.globalOutstandingLimit: 最大请求堆积数.默认是1000.ZK运行的时候,尽管server已经没有空闲来处理更多的客户端请求了,但是还是允许客户端将请求提交到服务器上来,以提高吞吐性能.</span><br><span class="line">  globalOutstandingLimit=1000</span><br><span class="line"></span><br><span class="line">8.preAllocSize:预先开辟磁盘空间,用于后续写入事务日志.默认是64M,每个事务日志大小就是64M.如果ZK的快照频率较大的话,建议适当减小这个参数</span><br><span class="line"></span><br><span class="line">9.snapCount:每进行snapCount次事务日志输出后,触发一次快照(snapshot),此时,ZK会生成一个snapshot.*文件,同时创建一个新的事务日志文件log.*.默认是100000.</span><br><span class="line"></span><br><span class="line">10.autopurge.snapRetainCount:指定了需要保留的文件数目</span><br><span class="line">  autopurge.snapRetainCount=3</span><br><span class="line"></span><br><span class="line">7.服务器名称与地址：集群信息(服务器编号,服务器地址,LF通信端口,选举端口)</span><br><span class="line">  这个配置项的书写格式比较特殊,规则如下：</span><br><span class="line">  server.N=YYYY:A:B</span><br><span class="line"></span><br><span class="line">  N     表示服务器编号,需要在dataDir目录下创建myid文件,将N写入到myid文件内</span><br><span class="line">  YYYY  表示服务器地址</span><br><span class="line">  A     表示数据同步端口</span><br><span class="line">  B     表示选举端口</span><br><span class="line"></span><br><span class="line">8.zookeeper集群为什么设置为奇数？</span><br><span class="line">  zookeeper有这样一个特性: 集群中只要有过半的机器是正常工作的,那么整个集群对外就是可用的.也就是说如果有2个zookeeper,那么只要有一个死了zookeeper就不能用了,因为一没有过半,所以2个zookeeper的死亡容忍度为0;同理,要是有3个zookeeper,一个死了,还剩下两个正常的,过半了,所以三个zookeeper的容忍度为1;同理你多列举几个(2 -&gt; 0; 3 -&gt; 1; 4 - &gt;1; 5 -&gt; 2; 6 -&gt; 2):你会发现一个规律,2n和2n-1的容忍度是一样的,都是n-1,所以为了更加高效,何必增加那一个不必要的zookeeper呢.</span><br></pre></td></tr></table></figure>
<h3 id="zookeeper-参数调优"><a href="#zookeeper-参数调优" class="headerlink" title="zookeeper 参数调优"></a>zookeeper 参数调优</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">1.zookeeper默认jvm没有配置Xmx,Xms等信息,可以在conf目录下创建java.env文件</span><br><span class="line">[root@10 ~]# cat &gt; /mnt/app/zookeeper/conf/java.env &lt;&lt;EOF</span><br><span class="line">&gt; export JAVA_HOME=/mnt/app/java</span><br><span class="line">&gt; export JVMFLAGS=&quot;-Xms1024m -Xmx1024m $JVMFLAGS&quot;   </span><br><span class="line">&gt; EOF</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">2.log4j配置,由于zookeeper是通过nohup启动的,会有一个zookeeper.out日志文件,该文件中记录的是输出到console的日志.log4j中只要配置输出到console即可,zookeeper.out会日积月累不断变大,要放在容量大的磁盘上.</span><br><span class="line"></span><br><span class="line">3.zoo.cfg配置,dataDir是存放快照数据的,dataLogDir是存放写前日志的.这两个目录不要配置成一个路径,要配置到不同的磁盘上.如果磁盘是使用了raid,系统就一块磁盘,那配置到一块磁盘上也可以.写前日志的部分对写请求的性能影响很大,保证dataLogDir所在磁盘性能良好</span><br><span class="line"></span><br><span class="line">4.zoo.cfg配置中skipACL=yes,忽略ACL验证,可以减少权限验证的相关操作,提升一点性能.</span><br><span class="line"></span><br><span class="line">5.zoo.cfg配置中forceSync=no,这个对写请求的性能提升很有帮助,是指每次写请求的数据都要从pagecache中固化到磁盘上,才算是写成功返回.当写请求数量到达一定程度的时候,后续写请求会等待前面写请求的forceSync操作,造成一定延时.如果追求低延时的写请求,配置forceSync=no,数据写到pagecache后就返回.但是机器断电的时候,pagecache中的数据有可能丢失.</span><br><span class="line"></span><br><span class="line">6.zookeeper的dataDir和dataLogDir路径下,如果没有配置zk自动清理,会不断的新增数据文件.可配置成zk系统自动清理数据文件,但是要求系统最高性能的话,建议人工手动清理文件:zkCleanup.sh -n 3</span><br><span class="line"></span><br><span class="line">7.查看zk节点状态.重新启动zk节点前后,一定要查看状态</span><br><span class="line"></span><br><span class="line">8.配置fsync.warningthresholdms=20,单位是毫秒,在forceSync=yes的时候,如果数据固化到磁盘的操作fsync超过20ms的时候,将会在zookeeper.out中输出一条warn日志.这个目前zk的3.4.5和3.5版本有bug,在zoo.cfg中配置不生效.我的做法是在conf/java.env中添加java系统属性：、</span><br><span class="line">export JVMFLAGS=&quot;-Dfsync.warningthresholdms=20 $JVMFLAGS&quot;</span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.smallasa.com/2017/03/07/zookeeper-optimize/" data-id="cjavy9k8t00c80coqrvpllohg" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-command-split" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/03/07/command-split/" class="article-date">
  <time datetime="2017-03-07T05:20:40.000Z" itemprop="datePublished">2017-03-07</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/system-service/">system service</a>►<a class="article-category-link" href="/categories/system-service/command/">command</a>►<a class="article-category-link" href="/categories/system-service/command/split/">split</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/03/07/command-split/">command split</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <ol>
<li>split 分割文件<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># split -l 10000 ccc -d -a 2 num_</span></span><br><span class="line"></span><br><span class="line">说明:</span><br><span class="line">-l  表示按照多少行进行分割</span><br><span class="line">-d  表示分割后的文件名以数字结尾</span><br><span class="line">-a 2 表示结尾是2个字符,文件后缀</span><br><span class="line">-d -a 2 表示分割后的文件以2个数字为后缀</span><br><span class="line">num_ 表示分割后的文件名</span><br></pre></td></tr></table></figure>
</li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.smallasa.com/2017/03/07/command-split/" data-id="cjavy9jun001g0coqe3s71ha4" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-postgresql-plugin-install" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/03/06/postgresql-plugin-install/" class="article-date">
  <time datetime="2017-03-06T09:30:58.000Z" itemprop="datePublished">2017-03-06</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/database/">database</a>►<a class="article-category-link" href="/categories/database/Postgresql/">Postgresql</a>►<a class="article-category-link" href="/categories/database/Postgresql/postgresql-plugin-install/">postgresql plugin install</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/03/06/postgresql-plugin-install/">postgresql plugin install</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="1-pg-安装本地插件库-all"><a href="#1-pg-安装本地插件库-all" class="headerlink" title="1. pg 安装本地插件库(all)"></a>1. pg 安装本地插件库(all)</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost app]<span class="comment"># tar xzf postgresql-9.6.1.tar.gz</span></span><br><span class="line">[root@localhost app]<span class="comment"># cd postgresql-9.6.1/contrib/</span></span><br><span class="line">[root@localhost contrib]<span class="comment"># make install</span></span><br></pre></td></tr></table></figure>
<h3 id="2-pg-pathman-download-https-pgxn-org-dist-pg-pathman"><a href="#2-pg-pathman-download-https-pgxn-org-dist-pg-pathman" class="headerlink" title="2. pg_pathman download(https://pgxn.org/dist/pg_pathman/)"></a>2. pg_pathman download(<a href="https://pgxn.org/dist/pg_pathman/" target="_blank" rel="noopener">https://pgxn.org/dist/pg_pathman/</a>)</h3><ol>
<li><p>pg_pathman download</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># git clone https://github.com/postgrespro/pg_pathman /mnt/ops/app/postgresql-9.6.1/contrib/pg_pathman</span></span><br><span class="line"></span><br><span class="line">说明: 我将pg_pathman下载到postgresql源码的插件目录contrib目录下</span><br></pre></td></tr></table></figure>
</li>
<li><p>pg_pathman install</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># cd /mnt/ops/app/postgresql-9.6.1/contrib/pg_pathman</span></span><br><span class="line">[root@localhost pg_pathman]<span class="comment"># make</span></span><br><span class="line">[root@localhost pg_pathman]<span class="comment"># make install</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>在配置文件中添加pg_pathman参数</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost pg_pathman]<span class="comment"># su - wisdom</span></span><br><span class="line">[wisdom@localhost ~]$ vim /mnt/data/pgsql/postgresql.conf</span><br><span class="line">shared_preload_libraries = <span class="string">'pg_pathman,pg_stat_statements'</span></span><br><span class="line">[wisdom@localhost ~]$ /mnt/app/pgsql/bin/pg_ctl -D /mnt/data/pgsql/ -l /mnt/<span class="built_in">log</span>/pgsql/pgsql.log restart</span><br></pre></td></tr></table></figure>
</li>
<li><p>pg_pathman use</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost pg_pathman]<span class="comment"># su - wisdom</span></span><br><span class="line">[wisdom@localhost ~]$ /mnt/app/pgsql/bin/psql -d postgres</span><br><span class="line">postgres=<span class="comment"># create extension pg_pathman;</span></span><br><span class="line">CREATE EXTENSION</span><br></pre></td></tr></table></figure>
</li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.smallasa.com/2017/03/06/postgresql-plugin-install/" data-id="cjavy9k2n007q0coqoyq2ocka" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-command-sed" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/03/06/command-sed/" class="article-date">
  <time datetime="2017-03-06T08:20:47.000Z" itemprop="datePublished">2017-03-06</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/system-service/">system service</a>►<a class="article-category-link" href="/categories/system-service/command/">command</a>►<a class="article-category-link" href="/categories/system-service/command/sed/">sed</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/03/06/command-sed/">command sed</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <ol>
<li><p>删除行首空格</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">sed &apos;s/^[ \t]*//g&apos;</span><br><span class="line"></span><br><span class="line">说明：</span><br><span class="line">第一个/的左边是s表示替换,即将空格替换为空</span><br><span class="line">第一个/的右边是表示后面的以xx开头中括号表示“或”，空格或tab中的任意一种。</span><br><span class="line">这是正则表达式的规范。 中括号右边是*，表示一个或多个。</span><br><span class="line">第二个和第三个\中间没有东西，表示空 g表示替换原来buffer中的，sed在处理字符串的时候并不对源文件进行直接处理，先创建一个buffer，但是加g表示对原buffer进行替换 整体的意思是：用空字符去替换一个或多个用空格或tab开头的本体字符串</span><br></pre></td></tr></table></figure>
</li>
<li><p>删除行末空格</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sed &apos;s/[ \t]*$//g&apos;</span><br><span class="line"></span><br><span class="line">和上面稍微有些不同是前面删除了^符,在后面加上了美元符,这表示以xx结尾的字符串为对象。</span><br><span class="line">但是要注意在KSH中，Tab并不是\t而是直接打入一个Tab就可以了。</span><br></pre></td></tr></table></figure>
</li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.smallasa.com/2017/03/06/command-sed/" data-id="cjavy9jul001d0coqs7t0h6xy" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-nginx-install" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/03/06/nginx-install/" class="article-date">
  <time datetime="2017-03-06T07:50:22.000Z" itemprop="datePublished">2017-03-06</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/system-service/">system service</a>►<a class="article-category-link" href="/categories/system-service/nginx/">nginx</a>►<a class="article-category-link" href="/categories/system-service/nginx/nginx-install/">nginx install</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/03/06/nginx-install/">nginx install</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="Base-library"><a href="#Base-library" class="headerlink" title="Base library"></a>Base library</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># yum -y install epel-release</span></span><br><span class="line">[root@localhost ~]<span class="comment"># yum makecache</span></span><br><span class="line">[root@localhost ~]<span class="comment"># yum -y install gcc gcc-c++ make cmake bison libtool autoconf automake zip unzip bzip2 zlib zlib-devel openssl openssl-devel pcre pcre-devel bison-devel ncurses-devel tcl tcl-devel perl-Digest-SHA1 GeoIP GeoIP-devel gperftools gperftools-devel libatomic_ops-devel gtest gtest-devel glibc-devel unixODBC-devel fop libperl libpython readline readline-devel python2-pip libxml2 libxml2-devel libxslt-devel gd gd-devel jemalloc jemalloc-devel</span></span><br><span class="line">[root@localhost ~]<span class="comment"># yum -y install git lftp ntpdate vim wget telnet dstat tree lrzsz net-tools nmap-ncat</span></span><br></pre></td></tr></table></figure>
<h3 id="nginx-install"><a href="#nginx-install" class="headerlink" title="nginx install"></a>nginx install</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost app]<span class="comment"># useradd -s /sbin/nologin nginx</span></span><br><span class="line"></span><br><span class="line">[root@localhost app]<span class="comment"># tar xzf nginx-1.10.2.tar.gz</span></span><br><span class="line">[root@localhost app]<span class="comment"># cd nginx-1.10.2</span></span><br><span class="line">[root@localhost nginx-1.10.2]<span class="comment"># ./configure \</span></span><br><span class="line">&gt; --prefix=/mnt/app/nginx \</span><br><span class="line">&gt; --user=nginx \</span><br><span class="line">&gt; --group=nginx \</span><br><span class="line">&gt; --with-select_module \</span><br><span class="line">&gt; --with-poll_module \</span><br><span class="line">&gt; --with-threads \</span><br><span class="line">&gt; --with-file-aio \</span><br><span class="line">&gt; --with-stream \</span><br><span class="line">&gt; --with-stream_ssl_module \</span><br><span class="line">&gt; --with-http_ssl_module \</span><br><span class="line">&gt; --with-http_stub_status_module \</span><br><span class="line">&gt; --with-http_v2_module \</span><br><span class="line">&gt; --with-http_realip_module \</span><br><span class="line">&gt; --with-http_addition_module \</span><br><span class="line">&gt; --with-http_geoip_module \</span><br><span class="line">&gt; --with-http_gunzip_module \</span><br><span class="line">&gt; --with-http_gzip_static_module \</span><br><span class="line">&gt; --with-http_auth_request_module \</span><br><span class="line">&gt; --with-http_degradation_module \</span><br><span class="line">&gt; --with-google_perftools_module \</span><br><span class="line">&gt; --with-pcre \</span><br><span class="line">&gt; --with-libatomic</span><br><span class="line">[root@localhost nginx-1.10.2]<span class="comment"># make</span></span><br><span class="line">[root@localhost nginx-1.10.2]<span class="comment"># make install</span></span><br><span class="line"></span><br><span class="line">[root@localhost app]<span class="comment"># mkdir -p /mnt/log/nginx</span></span><br><span class="line">[root@localhost app]<span class="comment"># chown -R nginx.nginx /mnt/log/nginx</span></span><br></pre></td></tr></table></figure>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">./configure \</span><br><span class="line">--prefix=/mnt/app/nginx \</span><br><span class="line">--user=nginx \</span><br><span class="line">--group=nginx \</span><br><span class="line">--with-select_module \</span><br><span class="line">--with-poll_module \</span><br><span class="line">--with-threads \</span><br><span class="line">--with-file-aio \</span><br><span class="line">--with-stream \</span><br><span class="line">--with-stream_ssl_module \</span><br><span class="line">--with-http_ssl_module \</span><br><span class="line">--with-http_stub_status_module \</span><br><span class="line">--with-http_v2_module \</span><br><span class="line">--with-http_realip_module \</span><br><span class="line">--with-http_addition_module \</span><br><span class="line">--with-http_geoip_module \</span><br><span class="line">--with-http_gunzip_module \</span><br><span class="line">--with-http_gzip_static_module \</span><br><span class="line">--with-http_auth_request_module \</span><br><span class="line">--with-http_degradation_module \</span><br><span class="line">--with-google_perftools_module \</span><br><span class="line">--with-pcre \</span><br><span class="line">--with-libatomic</span><br></pre></td></tr></table></figure>
<h3 id="tengine-install"><a href="#tengine-install" class="headerlink" title="tengine install"></a>tengine install</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br></pre></td><td class="code"><pre><span class="line">[root@192 app]<span class="comment"># useradd -s /sbin/nologin nginx</span></span><br><span class="line">[root@192 app]<span class="comment"># tar xzf tengine-2.2.0.tar.gz</span></span><br><span class="line">[root@192 app]<span class="comment"># cd tengine-2.2.0</span></span><br><span class="line">[root@192 tengine-2.2.0]<span class="comment"># ./configure \</span></span><br><span class="line">&gt; --prefix=/mnt/app/nginx \</span><br><span class="line">&gt; --user=nginx \</span><br><span class="line">&gt; --group=nginx \</span><br><span class="line">&gt; --with-rtsig_module \</span><br><span class="line">&gt; --with-select_module \</span><br><span class="line">&gt; --with-poll_module \</span><br><span class="line">&gt; --with-threads \</span><br><span class="line">&gt; --with-file-aio \</span><br><span class="line">&gt; --with-ipv6 \</span><br><span class="line">&gt; --with-force-exit \</span><br><span class="line">&gt; --with-http_v2_module \</span><br><span class="line">&gt; --with-http_realip_module \</span><br><span class="line">&gt; --with-http_addition_module \</span><br><span class="line">&gt; --with-http_xslt_module \</span><br><span class="line">&gt; --with-http_image_filter_module \</span><br><span class="line">&gt; --with-http_geoip_module \</span><br><span class="line">&gt; --with-http_sub_module \</span><br><span class="line">&gt; --with-http_dav_module \</span><br><span class="line">&gt; --with-http_flv_module \</span><br><span class="line">&gt; --with-http_slice_module \</span><br><span class="line">&gt; --with-http_mp4_module \</span><br><span class="line">&gt; --with-http_gunzip_module \</span><br><span class="line">&gt; --with-http_gzip_static_module \</span><br><span class="line">&gt; --with-http_auth_request_module \</span><br><span class="line">&gt; --with-http_concat_module \</span><br><span class="line">&gt; --with-http_random_index_module \</span><br><span class="line">&gt; --with-http_secure_link_module \</span><br><span class="line">&gt; --with-http_degradation_module \</span><br><span class="line">&gt; --with-http_sysguard_module \</span><br><span class="line">&gt; --with-http_addition_module=shared \</span><br><span class="line">&gt; --with-http_xslt_module=shared \</span><br><span class="line">&gt; --with-http_image_filter_module=shared \</span><br><span class="line">&gt; --with-http_geoip_module=shared \</span><br><span class="line">&gt; --with-http_sub_module=shared \</span><br><span class="line">&gt; --with-http_flv_module=shared \</span><br><span class="line">&gt; --with-http_slice_module=shared \</span><br><span class="line">&gt; --with-http_mp4_module=shared \</span><br><span class="line">&gt; --with-http_concat_module=shared \</span><br><span class="line">&gt; --with-http_random_index_module=shared \</span><br><span class="line">&gt; --with-http_secure_link_module=shared \</span><br><span class="line">&gt; --with-http_sysguard_module=shared \</span><br><span class="line">&gt; --with-http_charset_filter_module=shared \</span><br><span class="line">&gt; --with-http_userid_filter_module=shared \</span><br><span class="line">&gt; --with-http_footer_filter_module=shared \</span><br><span class="line">&gt; --with-http_trim_filter_module=shared \</span><br><span class="line">&gt; --with-http_access_module=shared \</span><br><span class="line">&gt; --with-http_autoindex_module=shared \</span><br><span class="line">&gt; --with-http_map_module=shared \</span><br><span class="line">&gt; --with-http_split_clients_module=shared \</span><br><span class="line">&gt; --with-http_referer_module=shared \</span><br><span class="line">&gt; --with-http_rewrite_module=shared \</span><br><span class="line">&gt; --with-http_fastcgi_module=shared \</span><br><span class="line">&gt; --with-http_uwsgi_module=shared \</span><br><span class="line">&gt; --with-http_scgi_module=shared \</span><br><span class="line">&gt; --with-http_memcached_module=shared \</span><br><span class="line">&gt; --with-http_limit_conn_module=shared \</span><br><span class="line">&gt; --with-http_limit_req_module=shared \</span><br><span class="line">&gt; --with-http_empty_gif_module=shared \</span><br><span class="line">&gt; --with-http_browser_module=shared \</span><br><span class="line">&gt; --with-http_user_agent_module=shared \</span><br><span class="line">&gt; --with-http_upstream_hash_module=shared \</span><br><span class="line">&gt; --with-http_upstream_ip_hash_module=shared \</span><br><span class="line">&gt; --with-http_upstream_least_conn_module=shared \</span><br><span class="line">&gt; --with-http_upstream_session_sticky_module=shared \</span><br><span class="line">&gt; --with-http_reqstat_module=shared \</span><br><span class="line">&gt; --with-http_dyups_module \</span><br><span class="line">&gt; --with-mail \</span><br><span class="line">&gt; --with-mail_ssl_module \</span><br><span class="line">&gt; --with-google_perftools_module \</span><br><span class="line">&gt; --with-cpp_test_module \</span><br><span class="line">&gt; --with-backtrace_module \</span><br><span class="line">&gt; --with-pcre \</span><br><span class="line">&gt; --with-pcre-jit \</span><br><span class="line">&gt; --with-libatomic \</span><br><span class="line">&gt; --with-jemalloc</span><br><span class="line">[root@192 tengine-2.2.0]<span class="comment"># make -j 2</span></span><br><span class="line">[root@192 tengine-2.2.0]<span class="comment"># make -j 2 install</span></span><br></pre></td></tr></table></figure>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line">./configure \</span><br><span class="line">--prefix=/mnt/app/nginx \</span><br><span class="line">--user=nginx \</span><br><span class="line">--group=nginx \</span><br><span class="line">--with-rtsig_module \</span><br><span class="line">--with-select_module \</span><br><span class="line">--with-poll_module \</span><br><span class="line">--with-threads \</span><br><span class="line">--with-file-aio \</span><br><span class="line">--with-ipv6 \</span><br><span class="line">--with-force-exit \</span><br><span class="line">--with-http_v2_module \</span><br><span class="line">--with-http_realip_module \</span><br><span class="line">--with-http_addition_module \</span><br><span class="line">--with-http_xslt_module \</span><br><span class="line">--with-http_image_filter_module \</span><br><span class="line">--with-http_geoip_module \</span><br><span class="line">--with-http_sub_module \</span><br><span class="line">--with-http_dav_module \</span><br><span class="line">--with-http_flv_module \</span><br><span class="line">--with-http_slice_module \</span><br><span class="line">--with-http_mp4_module \</span><br><span class="line">--with-http_gunzip_module \</span><br><span class="line">--with-http_gzip_static_module \</span><br><span class="line">--with-http_auth_request_module \</span><br><span class="line">--with-http_concat_module \</span><br><span class="line">--with-http_random_index_module \</span><br><span class="line">--with-http_secure_link_module \</span><br><span class="line">--with-http_degradation_module \</span><br><span class="line">--with-http_sysguard_module \</span><br><span class="line">--with-http_addition_module=shared \</span><br><span class="line">--with-http_xslt_module=shared \</span><br><span class="line">--with-http_image_filter_module=shared \</span><br><span class="line">--with-http_geoip_module=shared \</span><br><span class="line">--with-http_sub_module=shared \</span><br><span class="line">--with-http_flv_module=shared \</span><br><span class="line">--with-http_slice_module=shared \</span><br><span class="line">--with-http_mp4_module=shared \</span><br><span class="line">--with-http_concat_module=shared \</span><br><span class="line">--with-http_random_index_module=shared \</span><br><span class="line">--with-http_secure_link_module=shared \</span><br><span class="line">--with-http_sysguard_module=shared \</span><br><span class="line">--with-http_charset_filter_module=shared \</span><br><span class="line">--with-http_userid_filter_module=shared \</span><br><span class="line">--with-http_footer_filter_module=shared \</span><br><span class="line">--with-http_trim_filter_module=shared \</span><br><span class="line">--with-http_access_module=shared \</span><br><span class="line">--with-http_autoindex_module=shared \</span><br><span class="line">--with-http_map_module=shared \</span><br><span class="line">--with-http_split_clients_module=shared \</span><br><span class="line">--with-http_referer_module=shared \</span><br><span class="line">--with-http_rewrite_module=shared \</span><br><span class="line">--with-http_fastcgi_module=shared \</span><br><span class="line">--with-http_uwsgi_module=shared \</span><br><span class="line">--with-http_scgi_module=shared \</span><br><span class="line">--with-http_memcached_module=shared \</span><br><span class="line">--with-http_limit_conn_module=shared \</span><br><span class="line">--with-http_limit_req_module=shared \</span><br><span class="line">--with-http_empty_gif_module=shared \</span><br><span class="line">--with-http_browser_module=shared \</span><br><span class="line">--with-http_user_agent_module=shared \</span><br><span class="line">--with-http_upstream_hash_module=shared \</span><br><span class="line">--with-http_upstream_ip_hash_module=shared \</span><br><span class="line">--with-http_upstream_least_conn_module=shared \</span><br><span class="line">--with-http_upstream_session_sticky_module=shared \</span><br><span class="line">--with-http_reqstat_module=shared \</span><br><span class="line">--with-http_dyups_module \</span><br><span class="line">--with-mail \</span><br><span class="line">--with-mail_ssl_module \</span><br><span class="line">--with-google_perftools_module \</span><br><span class="line">--with-cpp_test_module \</span><br><span class="line">--with-backtrace_module \</span><br><span class="line">--with-pcre \</span><br><span class="line">--with-pcre-jit \</span><br><span class="line">--with-libatomic \</span><br><span class="line">--with-jemalloc</span><br></pre></td></tr></table></figure>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br></pre></td><td class="code"><pre><span class="line">--prefix=指向安装目录</span><br><span class="line">--sbin-path=指向(执行)程序文件(nginx)</span><br><span class="line">--conf-path=指向配置文件(nginx.conf)</span><br><span class="line">--error-log-path=指向错误日志目录</span><br><span class="line">--pid-path=指向pid文件(nginx.pid)</span><br><span class="line">--lock-path=指向lock文件(nginx.lock)(安装文件锁定,防止安装文件被别人利用,或自己误操作)</span><br><span class="line">--user=指定程序运行时的非特权用户</span><br><span class="line">--group=指定程序运行时的非特权用户组</span><br><span class="line">--builddir=指向编译目录</span><br><span class="line"></span><br><span class="line">--with-rtsig_module</span><br><span class="line">启用rtsig模块支持（实时信号）</span><br><span class="line"></span><br><span class="line">--with-select_module</span><br><span class="line">启用select模块支持(一种轮询模式,不推荐在高载环境下使用)</span><br><span class="line">--without-select_module</span><br><span class="line">禁用select模块支持(一种轮询模式,不推荐在高载环境下使用)</span><br><span class="line"></span><br><span class="line">--with-poll_module</span><br><span class="line">启用poll模块支持(功能与select相同,与select特性相同,为一种轮询模式,不推荐在高载环境下使用)</span><br><span class="line"></span><br><span class="line">--with-file-aio</span><br><span class="line">启用file aio支持(一种APL文件传输格式)</span><br><span class="line"></span><br><span class="line">--with-ipv6</span><br><span class="line">启用ipv6支持</span><br><span class="line"></span><br><span class="line">--with-http_ssl_module</span><br><span class="line">启用ngx_http_ssl_module支持(使支持https请求,需已安装openssl)</span><br><span class="line"></span><br><span class="line">--with-http_realip_module</span><br><span class="line">启用ngx_http_realip_module支持(这个模块允许从请求标头更改客户端的IP地址值,默认为关)</span><br><span class="line"></span><br><span class="line">--with-http_addition_module</span><br><span class="line">启用ngx_http_addition_module支持(作为一个输出过滤器,支持不完全缓冲,分部分响应请求)</span><br><span class="line"></span><br><span class="line">--with-http_xslt_module</span><br><span class="line">启用ngx_http_xslt_module支持(过滤转换XML请求)</span><br><span class="line"></span><br><span class="line">--with-http_image_filter_module</span><br><span class="line">启用ngx_http_image_filter_module支持(传输JPEG/GIF/PNG 图片的一个过滤器)</span><br><span class="line">默认为不启用,要用到gd库</span><br><span class="line"></span><br><span class="line">--with-http_geoip_module</span><br><span class="line">启用ngx_http_geoip_module支持(该模块创建基于与MaxMind GeoIP二进制文件相配的客户端IP地址的ngx_http_geoip_module变量)</span><br><span class="line"></span><br><span class="line">--with-http_sub_module</span><br><span class="line">启用ngx_http_sub_module支持(允许用一些其他文本替换nginx响应中的一些文本)</span><br><span class="line"></span><br><span class="line">--with-http_dav_module</span><br><span class="line">启用ngx_http_dav_module支持(增加PUT,DELETE,MKCOL:创建集合,COPY和MOVE方法)</span><br><span class="line">默认情况下为关闭,需编译开启</span><br><span class="line"></span><br><span class="line">--with-http_flv_module</span><br><span class="line">启用ngx_http_flv_module支持(提供寻求内存使用基于时间的偏移量文件)</span><br><span class="line"></span><br><span class="line">--with-http_gzip_static_module</span><br><span class="line">启用ngx_http_gzip_static_module支持(在线实时压缩输出数据流)</span><br><span class="line"></span><br><span class="line">--with-http_random_index_module</span><br><span class="line">启用ngx_http_random_index_module支持(从目录中随机挑选一个目录索引)</span><br><span class="line"></span><br><span class="line">--with-http_secure_link_module</span><br><span class="line">启用ngx_http_secure_link_module支持(计算和检查要求所需的安全链接网址)</span><br><span class="line"></span><br><span class="line">--with-http_degradation_module</span><br><span class="line">启用ngx_http_degradation_module支持(允许在内存不足的情况下返回204或444码)</span><br><span class="line"></span><br><span class="line">--with-http_stub_status_module</span><br><span class="line">启用ngx_http_stub_status_module支持(获取nginx自上次启动以来的工作状态)</span><br><span class="line"></span><br><span class="line">--without-http_charset_module</span><br><span class="line">禁用ngx_http_charset_module支持(重新编码web页面,但只能是一个方向--服务器端到客户端,并且只有一个字节的编码可以被重新编码)</span><br><span class="line"></span><br><span class="line">--without-http_gzip_module</span><br><span class="line">禁用ngx_http_gzip_module支持(该模块同-with-http_gzip_static_module功能一样)</span><br><span class="line"></span><br><span class="line">--without-http_ssi_module</span><br><span class="line">禁用ngx_http_ssi_module支持(该模块提供了一个在输入端处理处理服务器包含文件（SSI）的过滤器,目前支持SSI命令的列表是不完整的)</span><br><span class="line"></span><br><span class="line">--without-http_userid_module</span><br><span class="line">禁用ngx_http_userid_module支持(该模块用来处理用来确定客户端后续请求的cookies)</span><br><span class="line"></span><br><span class="line">--without-http_access_module</span><br><span class="line">禁用ngx_http_access_module支持(该模块提供了一个简单的基于主机的访问控制.允许/拒绝基于ip地址)</span><br><span class="line"></span><br><span class="line">--without-http_auth_basic_module</span><br><span class="line">禁用ngx_http_auth_basic_module(该模块是可以使用用户名和密码基于http基本认证方法来保护你的站点或其部分内容)</span><br><span class="line"></span><br><span class="line">--without-http_autoindex_module</span><br><span class="line">禁用disable ngx_http_autoindex_module支持(该模块用于自动生成目录列表,只在ngx_http_index_module模块未找到索引文件时发出请求.)</span><br><span class="line"></span><br><span class="line">--without-http_geo_module</span><br><span class="line">禁用ngx_http_geo_module支持(创建一些变量,其值依赖于客户端的IP地址)</span><br><span class="line"></span><br><span class="line">--without-http_map_module</span><br><span class="line">禁用ngx_http_map_module支持(使用任意的键/值对设置配置变量)</span><br><span class="line"></span><br><span class="line">--without-http_split_clients_module</span><br><span class="line">禁用ngx_http_split_clients_module支持(该模块用来基于某些条件划分用户.条件如:ip地址,报头,cookies等等)</span><br><span class="line"></span><br><span class="line">--without-http_referer_module</span><br><span class="line">禁用disable ngx_http_referer_module支持(该模块用来过滤请求,拒绝报头中Referer值不正确的请求)</span><br><span class="line"></span><br><span class="line">--without-http_rewrite_module</span><br><span class="line">禁用ngx_http_rewrite_module支持(该模块允许使用正则表达式改变URI,并且根据变量来转向以及选择配置.如果在server级别设置该选项,那么他们将在 location之前生效.如果在location还有更进一步的重写规则,location部分的规则依然会被执行.如果这个URI重写是因为location部分的规则造成的,那么location部分会再次被执行作为新的URI.这个循环会执行10次,然后Nginx会返回一个500错误.)</span><br><span class="line"></span><br><span class="line">--without-http_proxy_module</span><br><span class="line">禁用ngx_http_proxy_module支持（有关代理服务器）</span><br><span class="line"></span><br><span class="line">--without-http_fastcgi_module</span><br><span class="line">禁用ngx_http_fastcgi_module支持(该模块允许Nginx与FastCGI进程交互,并通过传递参数来控制FastCGI 进程工作.).FastCGI一个常驻型的公共网关接口</span><br><span class="line"></span><br><span class="line">--without-http_uwsgi_module</span><br><span class="line">禁用ngx_http_uwsgi_module支持(该模块用来禁用uwsgi协议,uWSGI服务器相关)</span><br><span class="line"></span><br><span class="line">--without-http_scgi_module</span><br><span class="line">禁用ngx_http_scgi_module支持(该模块用来启用SCGI协议支持,SCGI协议是CGI协议的替代.它是一种应用程序与HTTP服务接口标准.它有些像FastCGI但他的设计更容易实现)</span><br><span class="line"></span><br><span class="line">--without-http_memcached_module</span><br><span class="line">禁用ngx_http_memcached_module支持(该模块用来提供简单的缓存,以提高系统效率)</span><br><span class="line"></span><br><span class="line">--without-http_limit_zone_module</span><br><span class="line">禁用ngx_http_limit_zone_module支持(该模块可以针对条件,进行会话的并发连接数控制)</span><br><span class="line"></span><br><span class="line">--without-http_limit_req_module</span><br><span class="line">禁用ngx_http_limit_req_module支持(该模块允许你对于一个地址进行请求数量的限制用一个给定的session或一个特定的事件)</span><br><span class="line"></span><br><span class="line">--without-http_empty_gif_module</span><br><span class="line">禁用ngx_http_empty_gif_module支持(该模块在内存中常驻了一个1*1的透明GIF图像,可以被非常快速的调用)</span><br><span class="line"></span><br><span class="line">--without-http_browser_module</span><br><span class="line">禁用ngx_http_browser_module支持(该模块用来创建依赖于请求报头的值.如果浏览器为modern,则$modern_browser等于modern_browser_value指令分配的值,如果浏览器为old,则$ancient_browser等于 ancient_browser_value指令分配的值；如果浏览器为 MSIE中的任意版本，则 $msie等于1)</span><br><span class="line"></span><br><span class="line">--without-http_upstream_ip_hash_module</span><br><span class="line">禁用ngx_http_upstream_ip_hash_module支持(该模块用于简单的负载均衡)</span><br><span class="line"></span><br><span class="line">--with-http_perl_module 启用ngx_http_perl_module支持(该模块使nginx可以直接使用perl或通过ssi调用perl)</span><br><span class="line">--with-perl_modules_path= 设定perl模块路径</span><br><span class="line">--with-perl= 设定perl库文件路径</span><br><span class="line"></span><br><span class="line">--http-log-path= 设定access log路径</span><br><span class="line">--http-client-body-temp-path= 设定http客户端请求临时文件路径</span><br><span class="line">--http-proxy-temp-path= 设定http代理临时文件路径</span><br><span class="line">--http-fastcgi-temp-path= 设定http fastcgi临时文件路径</span><br><span class="line">--http-uwsgi-temp-path= 设定http uwsgi临时文件路径</span><br><span class="line">--http-scgi-temp-path= 设定http scgi临时文件路径</span><br><span class="line">-without-http 禁用http server功能</span><br><span class="line">--without-http-cache 禁用http cache功能</span><br><span class="line">--with-mail 启用POP3/IMAP4/SMTP代理模块支持</span><br><span class="line">--with-mail_ssl_module 启用ngx_mail_ssl_module支持</span><br><span class="line">--without-mail_pop3_module 禁用pop3协议（POP3即邮局协议的第3个版本,它是规定个人计算机如何连接到互联网上的邮件服务器进行收发邮件的协议。是因特网电子邮件的第一个离线协议标 准,POP3协议允许用户从服务器上把邮件存储到本地主机上,同时根据客户端的操作删除或保存在邮件服务器上的邮件。POP3协议是TCP/IP协议族中的一员，主要用于 支持使用客户端远程管理在服务器上的电子邮件）</span><br><span class="line">--without-mail_imap_module 禁用imap协议（一种邮件获取协议。它的主要作用是邮件客户端可以通过这种协议从邮件服务器上获取邮件的信息，下载邮件等。IMAP协议运行在TCP/IP协议之上， 使用的端口是143。它与POP3协议的主要区别是用户可以不用把所有的邮件全部下载，可以通过客户端直接对服务器上的邮件进行操作。）</span><br><span class="line">--without-mail_smtp_module 禁用smtp协议（SMTP即简单邮件传输协议,它是一组用于由源地址到目的地址传送邮件的规则，由它来控制信件的中转方式。SMTP协议属于TCP/IP协议族，它帮助每台计算机在发送或中转信件时找到下一个目的地。）</span><br><span class="line">--with-google_perftools_module</span><br><span class="line">启用ngx_google_perftools_module支持（调试用,剖析程序性能瓶颈）</span><br><span class="line">--with-cpp_test_module 启用ngx_cpp_test_module支持</span><br><span class="line">--add-module= 启用外部模块支持</span><br><span class="line">--with-cc= 指向C编译器路径</span><br><span class="line">--with-cpp= 指向C预处理路径</span><br><span class="line">--with-cc-opt= 设置C编译器参数（PCRE库，需要指定–with-cc-opt=”-I /usr/local/include”，如果使用select()函数则需要同时增加文件描述符数量，可以通过–with-cc- opt=”-D FD_SETSIZE=2048”指定。）</span><br><span class="line">--with-ld-opt= 设置连接文件参数。（PCRE库，需要指定–with-ld-opt=”-L /usr/local/lib”。）</span><br><span class="line">--with-cpu-opt= 指定编译的CPU，可用的值为: pentium, pentiumpro, pentium3, pentium4, athlon, opteron, amd64, sparc32, sparc64, ppc64</span><br><span class="line">--without-pcre 禁用pcre库</span><br><span class="line">--with-pcre 启用pcre库</span><br><span class="line">--with-pcre= 指向pcre库文件目录</span><br><span class="line">--with-pcre-opt= 在编译时为pcre库设置附加参数</span><br><span class="line">--with-md5= 指向md5库文件目录（消息摘要算法第五版，用以提供消息的完整性保护）</span><br><span class="line">--with-md5-opt= 在编译时为md5库设置附加参数</span><br><span class="line">--with-md5-asm 使用md5汇编源</span><br><span class="line">--with-sha1= 指向sha1库目录（数字签名算法，主要用于数字签名）</span><br><span class="line">--with-sha1-opt= 在编译时为sha1库设置附加参数</span><br><span class="line">--with-sha1-asm 使用sha1汇编源</span><br><span class="line">--with-zlib= 指向zlib库目录</span><br><span class="line">--with-zlib-opt= 在编译时为zlib设置附加参数</span><br><span class="line">--with-zlib-asm= 为指定的CPU使用zlib汇编源进行优化，CPU类型为pentium, pentiumpro</span><br><span class="line">--with-libatomic 为原子内存的更新操作的实现提供一个架构</span><br><span class="line">--with-libatomic= 指向libatomic_ops安装目录</span><br><span class="line">--with-openssl= 指向openssl安装目录</span><br><span class="line">--with-openssl-opt 在编译时为openssl设置附加参数</span><br><span class="line">--with-debug 启用debug日志</span><br></pre></td></tr></table></figure>
<p>./configure \<br>–prefix=/mnt/app/nginx \<br>–user=nginx \<br>–group=nginx \<br>–with-select_module \<br>–with-poll_module  \<br>–with-file-aio \<br>–with-http_ssl_module \<br>–with-http_stub_status_module \<br>–with-http_v2_module \<br>–with-http_realip_module \<br>–with-http_addition_module \<br>–with-http_geoip_module \<br>–with-http_gunzip_module \<br>–with-http_gzip_static_module \<br>–with-http_auth_request_module \<br>–with-http_degradation_module \<br>–with-google_perftools_module \<br>–with-pcre \<br>–with-libatomic</p>
<p>make -j 2 &amp;&amp; make -j 2 install<br>kill -USR2 $(cat /mnt/app/nginx/logs/nginx.pid)<br>kill -QUIT $(cat /mnt/app/nginx/logs/nginx.pid.oldbin)</p>
<p>libxml2 libxml2-devel libxslt-devel gd gd-devel perl-ExtUtils-MakeMaker perl-ExtUtils-Embed lua lua-devel yajl yajl-devel jemalloc jemalloc-devel</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.smallasa.com/2017/03/06/nginx-install/" data-id="cjavy9k1q00730coq3ehmu4mk" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-nginx-status" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/03/06/nginx-status/" class="article-date">
  <time datetime="2017-03-06T07:50:00.000Z" itemprop="datePublished">2017-03-06</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/system-service/">system service</a>►<a class="article-category-link" href="/categories/system-service/nginx/">nginx</a>►<a class="article-category-link" href="/categories/system-service/nginx/nginx-status/">nginx status</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/03/06/nginx-status/">nginx status</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="nginx-开启监控"><a href="#nginx-开启监控" class="headerlink" title="nginx 开启监控"></a>nginx 开启监控</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">第一步: 编译Nginx的时候添加参数：--with-http_stub_status_module</span><br><span class="line"></span><br><span class="line">第二步: 启用nginx status配置</span><br><span class="line">[root@10 ~]# vim /mnt/app/nginx/conf/nginx.conf</span><br><span class="line">在server&#123;&#125;中添加配置:</span><br><span class="line">server &#123;</span><br><span class="line">  ... ...</span><br><span class="line">  location /nginx_status &#123;</span><br><span class="line">    stub_status on;</span><br><span class="line">    access_log off;</span><br><span class="line">  &#125;</span><br><span class="line">  ... ...</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">第三步: 重新加载nginx配置文件</span><br><span class="line">[root@10 ~]# /mnt/app/nginx/sbin/nginx -c /mnt/app/nginx/conf/nginx.conf -t</span><br><span class="line">[root@10 ~]# /mnt/app/nginx/sbin/nginx -c /mnt/app/nginx/conf/nginx.conf -s reload</span><br><span class="line"></span><br><span class="line">第四步: 打开浏览器访问</span><br><span class="line">http://IP/nginx_status</span><br><span class="line"></span><br><span class="line">第五步: 在服务器上操作</span><br><span class="line">curl -s http://IP/nginx_status</span><br></pre></td></tr></table></figure>
<h3 id="nginx-状态参数说明"><a href="#nginx-状态参数说明" class="headerlink" title="nginx 状态参数说明"></a>nginx 状态参数说明</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">[root@10 zabbix_agentd.d]# curl -s http://127.0.0.1/nginx_status</span><br><span class="line">Active connections: 37</span><br><span class="line">server accepts handled requests</span><br><span class="line"> 2777347 2777347 52733269</span><br><span class="line">Reading: 0 Writing: 4 Waiting: 33</span><br><span class="line"></span><br><span class="line">说明:</span><br><span class="line">active connections  表示对后端发起的连接数(活跃)</span><br><span class="line"></span><br><span class="line">server accepts handled requests 2777347 2777347 52733269</span><br><span class="line">表示总共处理了2777347个连接,成功创建了2777347次握手,总共处理了52733269请求</span><br><span class="line"></span><br><span class="line">Reading: 0 Writing: 4 Waiting: 33</span><br><span class="line">Reading 表示读取客户端的Header信息数.这个操作只是读取头部信息,读取完后马上进入writing状态,因此时间很短.</span><br><span class="line">Writing 表示响应数据到客户端的Header信息数.这个操作不仅读取头部,还要等待服务响应,因此时间比较长</span><br><span class="line">Waiting 表示开启keep-alive后等候下一次请求指令的驻留连接(这个值等于(active – (reading+writing)))</span><br><span class="line"></span><br><span class="line">注意:正常情况下waiting数量是比较多的,并不能说明性能差.反而如果reading+writing数量比较多说明服务并发有问题</span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.smallasa.com/2017/03/06/nginx-status/" data-id="cjavy9k1x00780coqkdi3uqd6" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-redis-status" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/03/06/redis-status/" class="article-date">
  <time datetime="2017-03-06T02:34:46.000Z" itemprop="datePublished">2017-03-06</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/database/">database</a>►<a class="article-category-link" href="/categories/database/Redis/">Redis</a>►<a class="article-category-link" href="/categories/database/Redis/redis-status/">redis status</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/03/06/redis-status/">redis status</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br></pre></td><td class="code"><pre><span class="line">[root@10 zabbix_agentd.d]<span class="comment"># redis-cli -h 10.0.3.35 -p 6379</span></span><br><span class="line">10.0.3.35:6379&gt; info                                 //查看状态信息命令</span><br><span class="line"><span class="comment"># Server</span></span><br><span class="line">redis_version:3.2.6                                  //redis版本             </span><br><span class="line">redis_git_sha1:00000000                              //Git SHA1</span><br><span class="line">redis_git_dirty:0                                    //Git dirty flag</span><br><span class="line">redis_build_id:c12acbf494828ff2                      //redis 版本ID</span><br><span class="line">redis_mode:standalone                                //redis 单机/集群</span><br><span class="line">os:Linux 3.10.0-123.9.3.el7.x86_64 x86_64            //系统版本</span><br><span class="line">arch_bits:64                                         //架构</span><br><span class="line">multiplexing_api:epoll                               //Redis 所使用的事件处理机制</span><br><span class="line">gcc_version:4.8.5                                    //GCC版本</span><br><span class="line">process_id:19961                                     //进程ID</span><br><span class="line">run_id:4f988936df5471d496e894057de080150fa2d8d1      //进程运行ID</span><br><span class="line">tcp_port:6379                                        //监听端口</span><br><span class="line">uptime_in_seconds:4097321                            //自 Redis 服务器启动以来，经过的秒数</span><br><span class="line">uptime_in_days:47                                    //自 Redis 服务器启动以来，经过的天数</span><br><span class="line">hz:10</span><br><span class="line">lru_clock:12372574                                   //以分钟为单位进行自增的时钟，用于 LRU 管理  </span><br><span class="line">executable:/mnt/app/redis/bin/redis-server           //执行脚本</span><br><span class="line">config_file:/mnt/app/redis/conf/6379.M.conf          //执行配置文件</span><br><span class="line"></span><br><span class="line"><span class="comment"># Clients</span></span><br><span class="line">connected_clients:32                                 //客户端连接数</span><br><span class="line">client_longest_output_list:0                         //当前连接的客户端当中,最长的输出列表</span><br><span class="line">client_biggest_input_buf:0                           //当前连接的客户端当中,最大输入缓存</span><br><span class="line">blocked_clients:0                                    //正在等待阻塞命令(BLPOP,BRPOP,BRPOPLPUSH)的客户端的数量</span><br><span class="line"></span><br><span class="line"><span class="comment"># Memory</span></span><br><span class="line">used_memory:940850496                               //由Redis分配器分配的内存总量,以字节(byte)为单位</span><br><span class="line">used_memory_human:897.26M                           //以人类可读的格式返回 Redis 分配的内存总量</span><br><span class="line">used_memory_rss:1066475520                          //从操作系统的角度,返回 Redis 已分配的内存总量（俗称常驻集大小）。这个值和 top 、 ps 等命令的输出一致</span><br><span class="line">used_memory_rss_human:1017.07M                      //以人类可读的格式返回从操作系统的角度分配的内存总量</span><br><span class="line">used_memory_peak:941091472                          //Redis 的内存消耗峰值（以字节为单位）</span><br><span class="line">used_memory_peak_human:897.49M                      //以人类可读的格式返回Redis 的内存消耗峰值</span><br><span class="line">total_system_memory:8204222464                      //系统内存大小(字节)</span><br><span class="line">total_system_memory_human:7.64G                     //以人类可读格式返回系统内存大小</span><br><span class="line">used_memory_lua:37888                               //Lua 引擎所使用的内存大小(以字节为单位)</span><br><span class="line">used_memory_lua_human:37.00K                        //以人类可读格式返回Lua 引擎所使用的内存大小</span><br><span class="line">maxmemory:0</span><br><span class="line">maxmemory_human:0B</span><br><span class="line">maxmemory_policy:noeviction</span><br><span class="line">mem_fragmentation_ratio:1.13                        //used_memory_rss 和 used_memory 之间的比率</span><br><span class="line">mem_allocator:libc                                  //在编译时指定的,Redis所使用的内存分配器:libc,jemalloc,tcmalloc</span><br><span class="line"></span><br><span class="line">//补充：</span><br><span class="line">//在理想情况下,used_memory_rss的值应该只比 used_memory 稍微高一点儿  </span><br><span class="line">//当 rss &gt; used ，且两者的值相差较大时，表示存在（内部或外部的）内存碎片.内存碎片的比率可以通过 mem_fragmentation_ratio 的值看出  </span><br><span class="line">//当 used &gt; rss 时，表示 Redis 的部分内存被操作系统换出到交换空间了,在这种情况下,操作可能会产生明显的延迟  </span><br><span class="line">//当 Redis 释放内存时，分配器可能会，也可能不会，将内存返还给操作系统  </span><br><span class="line">//如果 Redis 释放了内存，却没有将内存返还给操作系统，那么 used_memory 的值可能和操作系统显示的 Redis 内存占用并不一致</span><br><span class="line">//查看 used_memory_peak 的值可以验证这种情况是否发生</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># Persistence</span></span><br><span class="line">loading:0                             //是否正在 load of a dump file 的标记</span><br><span class="line">rdb_changes_since_last_save:6590      //自从上次save后rdb change的数量</span><br><span class="line">rdb_bgsave_in_progress:0              //是否正常进行bgsave</span><br><span class="line">rdb_last_save_time:1488767519         //上次save的unix时间戳</span><br><span class="line">rdb_last_bgsave_status:ok             //rdb上次bgsave的状态</span><br><span class="line">rdb_last_bgsave_time_sec:6            //上次bgsave的持续时间(s)</span><br><span class="line">rdb_current_bgsave_time_sec:-1        //正在bgsave的持续时间(s)</span><br><span class="line">aof_enabled:1                         //aof_enabled:启用AOF</span><br><span class="line">aof_rewrite_in_progress:0             //AOF rewrite operation是否正在进行</span><br><span class="line">aof_rewrite_scheduled:0               //Flag indicating an AOF rewrite operation will be scheduled once the on-going RDB save is complete.  </span><br><span class="line">aof_last_rewrite_time_sec:10          //上次AOF rewrite持续时间  </span><br><span class="line">aof_current_rewrite_time_sec:-1       //正在进行的AOF rewrite持续时间</span><br><span class="line">aof_last_bgrewrite_status:ok          //上次AOF rewrite状态</span><br><span class="line">aof_last_write_status:ok              //上次AOF write状态</span><br><span class="line">aof_current_size:2263046107           //AOF当前大小</span><br><span class="line">aof_base_size:523261598               //AOF file size on latest startup or rewrite</span><br><span class="line">aof_pending_rewrite:0                 //Flag indicating an AOF rewrite operation will be scheduled once the on-going RDB save is complete.  </span><br><span class="line">aof_buffer_length:0                   //Size of the AOF buffer</span><br><span class="line">aof_rewrite_buffer_length:0           //Size of the AOF rewrite buffer</span><br><span class="line">aof_pending_bio_fsync:0               //Number of fsync pending <span class="built_in">jobs</span> <span class="keyword">in</span> background I/O queue</span><br><span class="line">aof_delayed_fsync:35                  //Delayed fsync counter</span><br><span class="line"></span><br><span class="line"><span class="comment"># Stats</span></span><br><span class="line">total_connections_received:343061      //服务器已接受的连接请求数量</span><br><span class="line">total_commands_processed:3461425275    //服务器已执行的命令数量</span><br><span class="line">instantaneous_ops_per_sec:937          //服务器每秒钟执行的命令数量</span><br><span class="line">total_net_input_bytes:296078629521     //</span><br><span class="line">total_net_output_bytes:2953563739584</span><br><span class="line">instantaneous_input_kbps:174.82</span><br><span class="line">instantaneous_output_kbps:3536.63</span><br><span class="line">rejected_connections:0                 //因为最大客户端数量限制而被拒绝的连接请求数量</span><br><span class="line">sync_full:1</span><br><span class="line">sync_partial_ok:0</span><br><span class="line">sync_partial_err:0</span><br><span class="line">expired_keys:13400113                  //因为过期而被自动删除的数据库键数量</span><br><span class="line">evicted_keys:0                         //因为最大内存容量限制而被驱逐（evict）的键数量</span><br><span class="line">keyspace_hits:1184692014               //查找数据库键成功的次数</span><br><span class="line">keyspace_misses:17573169               //查找数据库键失败的次数</span><br><span class="line">pubsub_channels:0                      //目前被订阅的频道数量</span><br><span class="line">pubsub_patterns:0                      //目前被订阅的模式数量</span><br><span class="line">latest_fork_usec:22503                 //最近一次 fork() 操作耗费的毫秒数</span><br><span class="line">migrate_cached_sockets:0</span><br><span class="line"></span><br><span class="line"><span class="comment"># Replication</span></span><br><span class="line">role:master</span><br><span class="line">connected_slaves:1  //已连接的从服务器数量</span><br><span class="line">slave0:ip=10.0.3.36,port=6379,state=online,offset=217761475716,lag=0   //ID、IP 地址、端口号、连接状态</span><br><span class="line">master_repl_offset:217761633717   </span><br><span class="line">repl_backlog_active:1</span><br><span class="line">repl_backlog_size:209715200</span><br><span class="line">repl_backlog_first_byte_offset:217551918518</span><br><span class="line">repl_backlog_histlen:209715200</span><br><span class="line"></span><br><span class="line"><span class="comment"># CPU</span></span><br><span class="line">used_cpu_sys:86536.52            //System CPU consumed by the Redis server</span><br><span class="line">used_cpu_user:57295.42           //User CPU consumed by the Redis server(Redis主进程消耗)</span><br><span class="line">used_cpu_sys_children:13930.27    //System CPU consumed by the background processes</span><br><span class="line">used_cpu_user_children:107078.70  //User CPU consumed by the background processes(后台进程消耗（后台包括RDB文件的消耗，master，slave同步产生的消耗等等）)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Cluster</span></span><br><span class="line">cluster_enabled:0</span><br><span class="line"></span><br><span class="line"><span class="comment"># Keyspace</span></span><br><span class="line">db0:keys=224638,expires=92157,avg_ttl=22856280</span><br><span class="line">10.0.3.35:6379&gt; <span class="built_in">exit</span></span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.smallasa.com/2017/03/06/redis-status/" data-id="cjavy9k5h009f0coqbrkpvi3e" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  


  <nav id="page-nav">
    
    <a class="extend prev" rel="prev" href="/page/22/">&laquo; 上一页</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/21/">21</a><a class="page-number" href="/page/22/">22</a><span class="page-number current">23</span><a class="page-number" href="/page/24/">24</a><a class="page-number" href="/page/25/">25</a><span class="space">&hellip;</span><a class="page-number" href="/page/29/">29</a><a class="extend next" rel="next" href="/page/24/">下一页 &raquo;</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">分类</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/AliCloud/">AliCloud</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/AliCloud/SDK/">SDK</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/AliCloud/SDK/Python-SDK/">Python SDK</a></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Android/">Android</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Android/Android-install/">Android install</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Android/Android-install/Android-studio-install/">Android studio install</a></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Development/">Development</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Development/Doc/">Doc</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Development/Doc/HTTP-严格传输安全HSTS/">HTTP 严格传输安全HSTS</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Development/Doc/HTTP协议/">HTTP协议</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Development/Doc/TCP-协议详解/">TCP 协议详解</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Development/Doc/TCP与socket区别/">TCP与socket区别</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Development/Doc/linux-文件描述符与打开文件之间的关系/">linux 文件描述符与打开文件之间的关系</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Development/Doc/linux-文件系统inode/">linux 文件系统inode</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Development/Doc/一次完整的HTTP请求/">一次完整的HTTP请求</a></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Disk/">Disk</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Disk/disk-io-performance/">disk io performance</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Disk/disk-iostat/">disk iostat</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Distributed-storage/">Distributed storage</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Distributed-storage/GlusterFS/">GlusterFS</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Distributed-storage/GlusterFS/GlusterFS-architecture/">GlusterFS architecture</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Distributed-storage/GlusterFS/GlusterFS-info/">GlusterFS info</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Distributed-storage/GlusterFS/GlusterFS-install/">GlusterFS install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Distributed-storage/GlusterFS/GlusterFS-workflow/">GlusterFS workflow</a></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/HA/">HA</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/HA/DRBD/">DRBD</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/HA/DRBD/DRBD-install/">DRBD install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/HA/keepalived/">keepalived</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/HA/keepalived/keepalived-install/">keepalived install</a></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/IDE/">IDE</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/IDE/Intellij/">Intellij</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/IDE/Intellij/Intellij-setting/">Intellij setting</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/IDE/vim/">vim</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/IDE/vim/vim-shortcut-key/">vim shortcut key</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/IDE/vim/vim-vimrc/">vim vimrc</a></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Kernel/">Kernel</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Kernel/kernel-memory/">kernel memory</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Kernel/kernel-memory/kernel-共享内存/">kernel 共享内存</a></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/">Monitor</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/ganglia/">ganglia</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/ganglia/ganglia-install/">ganglia install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/hmonitor/">hmonitor</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/hmonitor/hmonitor-install/">hmonitor install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/htmonitor/">htmonitor</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/htmonitor/htmonitor-install/">htmonitor install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/smokeping/">smokeping</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/smokeping/smokeping-install/">smokeping install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/zabbix/">zabbix</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/zabbix/monitor/">monitor</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/zabbix/monitor/zabbix-monitor-cpu/">zabbix monitor cpu</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/zabbix/monitor/zabbix-monitor-mem/">zabbix monitor mem</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/zabbix/zabbix-auto-discover/">zabbix auto discover</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/zabbix/zabbix-grafana-install/">zabbix grafana install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/zabbix/zabbix-install/">zabbix install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/zabbix/zabbix-install-distributed/">zabbix install distributed</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/zabbix/zabbix-item-and-tigger/">zabbix item and tigger</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/zabbix/zabbix-java-gateway/">zabbix java gateway</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/zabbix/zabbix-modify-login-user-passwd/">zabbix modify login user passwd</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/zabbix/zabbix-optimization/">zabbix optimization</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/zabbix/zabbix-proxy-install/">zabbix proxy install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/zabbix/zabbix-server-support-chinese/">zabbix server support chinese</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/zabbix/zabbix-windows-agent/">zabbix windows agent</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/树莓派/">树莓派</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/树莓派/树莓派-GSM-语音短信报警/">树莓派 GSM 语音短信报警</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/监控/">监控</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/监控/监控知识体系/">监控知识体系</a></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/">Python</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-Framework/">Python Framework</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-Framework/Python-Django/">Python Django</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-Framework/Python-Django-setting/">Python Django setting</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-Framework/Python-tornado-install/">Python tornado install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-Learn/">Python Learn</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-Learn/python-上下文管理器/">python 上下文管理器</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-Learn/python-内存管理/">python 内存管理</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-Learn/python-函数编程/">python 函数编程</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-Learn/python-变量/">python 变量</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-Learn/python-对象使用/">python 对象使用</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-Learn/python-对象的属性/">python 对象的属性</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-Learn/python-对象编程/">python 对象编程</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-Learn/python-数据类型/">python 数据类型</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-Learn/python-流程控制/">python 流程控制</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-Learn/python-爬虫/">python 爬虫</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-Learn/python-特殊方法/">python 特殊方法</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-Learn/python-特殊说明/">python 特殊说明</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-Learn/python-装饰器/">python 装饰器</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-Learn/python-过程编程/">python 过程编程</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-Learn/python-进阶/">python 进阶</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-Learn/python-闭包/">python 闭包</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-install/">Python install</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-install/python-error-info/">python error info</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-install/python-pip-source-image/">python pip source image</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-install/python-pip-use/">python pip use</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-install/python-pyenv-install/">python pyenv install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-install/python-setup-py/">python setup.py</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-install/python-source-install/">python source install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-install/python-virtualenv/">python virtualenv</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-library/">Python library</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-library/MySQLdb/">MySQLdb</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-library/memory-profiler/">memory_profiler</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-library/time-datetime-calendar/">time datetime calendar</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-modules/">Python modules</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-modules/python-modules-path/">python modules path</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-modules/python-modules-pylint-and-ipython/">python modules pylint and ipython</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-other/">Python other</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-other/python-import-and-reload/">python import and reload</a></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Ruby/">Ruby</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Ruby/Ruby-install/">Ruby install</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Ruby/Ruby-install/Ruby-install/">Ruby install</a></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/TCP-IP/">TCP.IP</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/TCP-IP/TCP-状态/">TCP 状态</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/TCP-IP/TCP-IP模型/">TCP/IP模型</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/TCP-IP/Wireshark-use/">Wireshark use</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/WeChat/">WeChat</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/WeChat/WeChat-enterprise/">WeChat enterprise</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/WeChat/WeChat-enterprise/WeChat-enterprise-API/">WeChat enterprise API</a></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/">automation</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/automation/git/">git</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/automation/git/git-command/">git command</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/git/git-error/">git error</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/git/git-gitlab/">git gitlab</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/git/git-gitolite/">git gitolite</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/git/git-gogs/">git gogs</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/git/git-gogs-source-install/">git gogs source install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/git/git-init/">git init</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/git/git-workflow/">git workflow</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/jenkins/">jenkins</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/automation/jenkins/jenkins-info/">jenkins info</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/jenkins/jenkins-install/">jenkins install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/kvm/">kvm</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/automation/kvm/kvm-install/">kvm install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/maven/">maven</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/automation/maven/maven-install/">maven install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/nexus/">nexus</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/automation/nexus/nexus-install/">nexus install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/nexus/nexus-proxy-maven/">nexus proxy maven</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/rpm/">rpm</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/automation/rpm/rpm-package-build/">rpm package build</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/rpm/rpmbuild-spec/">rpmbuild spec</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/salt/">salt</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/automation/salt/salt-advanced-topic/">salt advanced topic</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/salt/salt-highstate/">salt highstate</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/salt/salt-info/">salt info</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/salt/salt-install/">salt install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/salt/salt-install-HA/">salt install HA</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/salt/salt-install-distributed/">salt install distributed</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/salt/salt-install-standard/">salt install standard</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/salt/salt-jinja2-grain-pillar-module/">salt jinja2 grain pillar module</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/salt/salt-manage-event-reactor/">salt manage event reactor</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/salt/salt-manage-grains/">salt manage grains</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/salt/salt-manage-job/">salt manage job</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/salt/salt-manage-module/">salt manage module</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/salt/salt-manage-pillar/">salt manage pillar</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/salt/salt-manage-return/">salt manage return</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/salt/salt-manage-states/">salt manage states</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/salt/salt-manage-target/">salt manage target</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/salt/salt-master-syndic-install/">salt master syndic install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/salt/salt-master-conf/">salt master.conf</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/salt/salt-minion-conf/">salt minion.conf</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/salt/salt-raet/">salt raet</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/salt/salt-state-module/">salt state module</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/salt/salt-syndic-conf/">salt syndic.conf</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/salt/salt-write-module-code/">salt write module code</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/svn/">svn</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/automation/svn/svn-auto-update/">svn auto update</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/yum/">yum</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/automation/yum/yum-server-install/">yum server install</a></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/">database</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/database/Mongo/">Mongo</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/database/Mongo/mongo-auth/">mongo auth</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Mongo/mongo-error/">mongo error</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Mongo/mongo-replication-auth-install/">mongo replication auth install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Mongo/mongo-replication-standard-install/">mongo replication standard install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Mongo/mongo-standard-install/">mongo standard install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Mysql/">Mysql</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/database/Mysql/mysql-command/">mysql command</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Mysql/mysql-error-info/">mysql error info</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Mysql/mysql-explain/">mysql explain</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Mysql/mysql-grant/">mysql grant</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Mysql/mysql-index-options/">mysql index options</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Mysql/mysql-innodb-buffer-pool-flush/">mysql innodb buffer pool flush</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Mysql/mysql-master-slave/">mysql master slave</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Mysql/mysql-master-slave-switch/">mysql master slave switch</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Mysql/mysql-partition/">mysql partition</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Mysql/mysql-select-join/">mysql select join</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Mysql/mysql-slow-log/">mysql slow log</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Mysql/mysql-standard/">mysql standard</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Mysql/mysql-table-size/">mysql table size</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Mysql/mysql-use-memory-as-disk/">mysql use memory as disk</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Postgresql/">Postgresql</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/database/Postgresql/postgresql-book-use/">postgresql book use</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Postgresql/postgresql-master-slave-info/">postgresql master slave info</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Postgresql/postgresql-master-slave/">postgresql master/slave</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Postgresql/postgresql-plugin-install/">postgresql plugin install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Postgresql/postgresql-standard/">postgresql standard</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Postgresql/postgresql-tablespace-database-schema-table-user-role-relation/">postgresql tablespace database schema table user role relation</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Postgresql/postgresql-yum-install/">postgresql yum install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Postgresql/postgresql-常用命令/">postgresql 常用命令</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Postgresql/postgresql-数据库对象/">postgresql 数据库对象</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Postgresql/postgresql-数据库管理/">postgresql 数据库管理</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Redis/">Redis</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/database/Redis/redis-error/">redis error</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Redis/redis-install/">redis install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Redis/redis-redis-trib-rb/">redis redis-trib.rb</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Redis/redis-status/">redis status</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Redis/redis-use/">redis use</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/influxDB/">influxDB</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/database/influxDB/influxDB-install/">influxDB install</a></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/golang/">golang</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/golang/go-env/">go env</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/">hadoop</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/RabbitMQ/">RabbitMQ</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/RabbitMQ/RabbitMQ-cluster/">RabbitMQ cluster</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/RabbitMQ/RabbitMQ-high-availability/">RabbitMQ high availability</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/RabbitMQ/RabbitMQ-info/">RabbitMQ info</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/RabbitMQ/RabbitMQ-install/">RabbitMQ install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/RabbitMQ/RabbitMQ-python-pika/">RabbitMQ python pika</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/RabbitMQ/RabbitMQ-user-and-grant/">RabbitMQ user and grant</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/RabbitMQ/RabbitMQ-working-principle/">RabbitMQ working principle</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/beats/">beats</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/beats/beats-install/">beats install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/datax/">datax</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/datax/datax-info/">datax info</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/datax/datax-install/">datax install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/datax/datax-job/">datax job</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/elasticsearch/">elasticsearch</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/elasticsearch/elasticsearch-backup-and-restore/">elasticsearch backup and restore</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/elasticsearch/elasticsearch-command/">elasticsearch command</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/elasticsearch/elasticsearch-core-component/">elasticsearch core component</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/elasticsearch/elasticsearch-exploring-your-cluster/">elasticsearch exploring your cluster</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/elasticsearch/elasticsearch-exploring-your-data/">elasticsearch exploring your data</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/elasticsearch/elasticsearch-four-search-type/">elasticsearch four search type</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/elasticsearch/elasticsearch-full-cluster-restart-upgrade/">elasticsearch full cluster restart upgrade</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/elasticsearch/elasticsearch-install/">elasticsearch install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/elasticsearch/elasticsearch-modifying-your-data/">elasticsearch modifying your data</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/elasticsearch/elasticsearch-rolling-upgrades/">elasticsearch rolling upgrades</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/elasticsearch/elasticsearch-safe-restart/">elasticsearch safe restart</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/elasticsearch/elasticsearch-shard/">elasticsearch shard</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/elasticsearch/how-to-tune-for-indexing-speed/">how to tune for indexing speed</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/elasticsearch/how-to-tune-for-search-speed/">how to tune for search speed</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/flume/">flume</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/flume/flume-info/">flume info</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/flume/flume-install/">flume install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/grafana/">grafana</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/grafana/grafana-install/">grafana install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/hadoop/">hadoop</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/hadoop/hadoop-简介/">hadoop 简介</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/kafka/">kafka</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/kafka/kafka-add-topic-partition/">kafka add topic partition</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/kafka/kafka-add-topic-replicats/">kafka add topic replicats</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/kafka/kafka-broker-config/">kafka broker config</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/kafka/kafka-high-throughput/">kafka high throughput</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/kafka/kafka-info/">kafka info</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/kafka/kafka-install/">kafka install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/kafka/kafka-manage-web/">kafka manage web</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/kafka/kafka-migrate-and-scale/">kafka migrate and scale</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/kafka/kafka-offset-monitor/">kafka offset monitor</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/kafka/kafka-optimize/">kafka optimize</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/kafka/kafka-use/">kafka use</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/kafka/kafka-web-console/">kafka web console</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/kafka/kafka-with-zookeeper/">kafka with zookeeper</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/kibana/">kibana</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/kibana/kibana-install/">kibana install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/logstash/">logstash</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/logstash/logstash-config-file/">logstash config file</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/logstash/logstash-filter-grok/">logstash filter grok</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/logstash/logstash-info/">logstash info</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/logstash/logstash-install/">logstash install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/mycat/">mycat</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/mycat/mycat-jvm-optimize/">mycat jvm optimize</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/mycat/mycat-web-install/">mycat web install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/nsq/">nsq</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/nsq/nsq-command/">nsq command</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/nsq/nsq-info/">nsq info</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/nsq/nsq-install/">nsq install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/zookeeper/">zookeeper</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/zookeeper/zookeeper-install/">zookeeper install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/zookeeper/zookeeper-monitor/">zookeeper monitor</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/zookeeper/zookeeper-optimize/">zookeeper optimize</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/zookeeper/zookeeper-use/">zookeeper use</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/zookeeper/zookeeper-zab-protocol/">zookeeper zab protocol</a></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/java/">java</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/java/java-env/">java env</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/java/java-jvm-optimize/">java jvm optimize</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/java/java-jvm-opts/">java jvm opts</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/java/java-jvm-原理/">java jvm 原理</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/java/java-learn/">java learn</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/java/java-learn/java-学习笔记/">java 学习笔记</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/java/java-log4j/">java log4j</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/java/java-performance-analysis/">java performance analysis</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/java/java-performance-analysis/jps/">jps</a></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/k8s/">k8s</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/k8s/k8s-dashboard-install/">k8s dashboard install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/k8s/k8s-install/">k8s install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/k8s/k8s-registry-install/">k8s registry install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/node/">node</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/node/node-install/">node install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/other/">other</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/other/ACID/">ACID</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/other/分布式二阶段和三阶段提交协议/">分布式二阶段和三阶段提交协议</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/other/开源许可协议/">开源许可协议</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/other/网络带宽/">网络带宽</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/">system service</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/Atlassian/">Atlassian</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/Atlassian/confluence-https/">confluence https</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/Atlassian/confluence-install/">confluence install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/Atlassian/confluence-reset-passwd/">confluence reset passwd</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/Atlassian/confluence-update/">confluence update</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/Atlassian/jira-https/">jira https</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/Atlassian/jira-install/">jira install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/Atlassian/jira-update/">jira update</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/Atlassian/mariadb-install/">mariadb install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/CentOS/">CentOS</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/CentOS/Base-env/">Base env</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/CentOS/linux-common-use-scripts/">linux common use scripts</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/CentOS/linux-history-info-setting/">linux history info setting</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/CentOS/linux-login-info/">linux login info</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/CentOS/linux-nginx-install/">linux nginx install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/CentOS/linux-skill/">linux skill</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/CentOS/linux-system-init/">linux system init</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/CentOS/linux-内存插槽-内存信息/">linux 内存插槽 内存信息</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/CentOS/linux-扩容swap分区/">linux 扩容swap分区</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/CentOS/linux-物理CPU-CPU核数-逻辑CPU/">linux 物理CPU CPU核数 逻辑CPU</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/CentOS/linux-磁盘系统block区别/">linux 磁盘系统block区别</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/CentOS/linux-设置-包含头文件路径-和-动态库链接路径/">linux 设置 包含头文件路径 和 动态库链接路径</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/CentOS/make提高源码编译速度/">make提高源码编译速度</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/NFS/">NFS</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/NFS/nfs-exports-command/">nfs exports command</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/NFS/nfs-install/">nfs install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/Samba/">Samba</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/Samba/samba-conf/">samba conf</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/Samba/samba-install/">samba install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/command/">command</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/command/grep/">grep</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/command/linux/">linux</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/command/pigz/">pigz</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/command/sed/">sed</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/command/split/">split</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/command/tr/">tr</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/haproxy/">haproxy</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/haproxy/haproxy-install/">haproxy install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/nginx/">nginx</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/nginx/nginx-install/">nginx install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/nginx/nginx-location/">nginx location</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/nginx/nginx-rewrite/">nginx rewrite</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/nginx/nginx-status/">nginx status</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/ntpd/">ntpd</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/ntpd/ntpd-install/">ntpd install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/openssl/">openssl</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/openssl/openssl-certificate/">openssl certificate</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/openvpn/">openvpn</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/openvpn/openvpn-install/">openvpn install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/rsync/">rsync</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/rsync/rsync-install/">rsync install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/supersord/">supersord</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/supersord/supersord-install/">supersord install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/vsftpd/">vsftpd</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/vsftpd/ftp-proxy/">ftp proxy</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/vsftpd/vsftpd-error/">vsftpd error</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/vsftpd/vsftpd-info/">vsftpd info</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/vsftpd/vsftpd-install/">vsftpd install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/windows/">windows</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/windows/cygwin-install/">cygwin install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/windows/ipsec-set/">ipsec set</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/windows/windows-modify-hosts/">windows modify hosts</a></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/web/">web</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/web/SSL/">SSL</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/web/SSL/SSL-certificate/">SSL certificate</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/web/angular/">angular</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/web/angular/angular-install/">angular install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/web/hexo/">hexo</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/web/hexo/hexo-install/">hexo install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/web/sass/">sass</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/web/sass/sass-install/">sass install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/web/xml/">xml</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/web/xml/xml-format/">xml format</a></li></ul></li></ul></li></ul>
    </div>
  </div>


  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">归档</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/01/">一月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/11/">十一月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/10/">十月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/09/">九月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/08/">八月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/07/">七月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/06/">六月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/05/">五月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/04/">四月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/03/">三月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/02/">二月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/01/">一月 2017</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">最新文章</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2020/01/01/hello-everyone/">Hello Everyone</a>
          </li>
        
          <li>
            <a href="/2017/11/28/kafka-web-console/">kafka web console</a>
          </li>
        
          <li>
            <a href="/2017/11/27/svn-auto-update/">svn auto update</a>
          </li>
        
          <li>
            <a href="/2017/11/15/salt-manage-event-reactor/">salt manage event reactor</a>
          </li>
        
          <li>
            <a href="/2017/11/15/salt-manage-job/">salt manage job</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2017 penn<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>



  </div>
</body>
</html>