<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  

  
  <title>smallasa</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="smallasa">
<meta property="og:url" content="http://www.smallasa.com/page/28/index.html">
<meta property="og:site_name" content="smallasa">
<meta property="og:locale" content="zh-CN">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="smallasa">
  
    <link rel="alternate" href="/atom.xml" title="smallasa" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">smallasa</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">I known what i do !</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="搜索"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://www.smallasa.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-vsftpd-error" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/02/03/vsftpd-error/" class="article-date">
  <time datetime="2017-02-03T07:03:18.000Z" itemprop="datePublished">2017-02-03</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/system-service/">system service</a>►<a class="article-category-link" href="/categories/system-service/vsftpd/">vsftpd</a>►<a class="article-category-link" href="/categories/system-service/vsftpd/vsftpd-error/">vsftpd error</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/02/03/vsftpd-error/">vsftpd error</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="错误记录"><a href="#错误记录" class="headerlink" title="错误记录:"></a>错误记录:</h2><ul>
<li><p>vsftpd start error</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># systemctl start vsftpd.service</span></span><br><span class="line">Job <span class="keyword">for</span> vsftpd.service failed because the control process exited with error code. See <span class="string">"systemctl status vsftpd.service"</span> and <span class="string">"journalctl -xe"</span> <span class="keyword">for</span> details.</span><br><span class="line">[root@localhost ~]<span class="comment"># journalctl -xe</span></span><br><span class="line">[root@localhost ~]<span class="comment"># journalctl -xe</span></span><br><span class="line">--</span><br><span class="line">-- Unit vsftpd.service has failed.</span><br><span class="line">--</span><br><span class="line">-- The result is failed.</span><br><span class="line">Nov 24 11:38:33 localhost.localdomain systemd[1]: Unit vsftpd.service entered failed state.</span><br><span class="line">Nov 24 11:38:33 localhost.localdomain systemd[1]: vsftpd.service failed.</span><br><span class="line">Nov 24 11:38:33 localhost.localdomain polkitd[503]: Unregistered Authentication Agent <span class="keyword">for</span> unix-process:21102:6146111 (system bus name :1.53, object path /org/freede</span><br><span class="line">Nov 24 11:39:09 localhost.localdomain polkitd[503]: Registered Authentication Agent <span class="keyword">for</span> unix-process:21111:6149749 (system bus name :1.54 [/usr/bin/pkttyagent --not</span><br><span class="line">Nov 24 11:39:09 localhost.localdomain systemd[1]: Starting Vsftpd ftp daemon...</span><br><span class="line">-- Subject: Unit vsftpd.service has begun start-up</span><br><span class="line">-- Defined-By: systemd</span><br><span class="line">-- Support: http://lists.freedesktop.org/mailman/listinfo/systemd-devel</span><br><span class="line">--</span><br><span class="line">-- Unit vsftpd.service has begun starting up.</span><br><span class="line">Nov 24 11:39:09 localhost.localdomain systemd[1]: vsftpd.service: control process exited, code=exited status=2</span><br><span class="line">Nov 24 11:39:09 localhost.localdomain systemd[1]: Failed to start Vsftpd ftp daemon.</span><br><span class="line">-- Subject: Unit vsftpd.service has failed</span><br><span class="line">-- Defined-By: systemd</span><br><span class="line">-- Support: http://lists.freedesktop.org/mailman/listinfo/systemd-devel</span><br><span class="line">--</span><br><span class="line">-- Unit vsftpd.service has failed.</span><br><span class="line">--</span><br><span class="line">-- The result is failed.</span><br><span class="line"></span><br><span class="line">解决方法:</span><br><span class="line">1.当前网络如果不支持IPV6</span><br><span class="line">[root@localhost ~]<span class="comment"># vim /etc/vsftpd/vsftpd.conf</span></span><br><span class="line">listen_ipv6=NO</span><br><span class="line">[root@localhost ~]<span class="comment"># systemctl start vsftpd.service</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>vsftp 553 error</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">是由于目录权限问题引起:</span><br><span class="line">[root@localhost ~]# ls -ld /mnt/ftpdata/</span><br><span class="line">drwxr-xr-x 4 root root 29 Jan 10 09:48 /mnt/ftpdata/</span><br><span class="line"></span><br><span class="line">[root@localhost ~]# ls -ld /mnt/ftpdata/ssp</span><br><span class="line">drwxr-xr-x 3 root root 21 Jan 10 10:13 /mnt/ftpdata/ssp</span><br><span class="line"></span><br><span class="line">[root@localhost ~]# ls -ld /mnt/ftpdata/ssp/20170110</span><br><span class="line">drwxrwxrwx 5 root root 41 Jan 10 10:12 /mnt/ftpdata/ssp/20170110</span><br><span class="line"></span><br><span class="line">[root@localhost ~]# ls -ld /mnt/ftpdata/ssp/20170110/*</span><br><span class="line">drwxr-xr-x 2 vsftpduser vsftpduser 6 Jan 10 10:12 /mnt/ftpdata/ssp/20170110/lttest</span><br><span class="line">drwxr-xr-x 2 vsftpduser vsftpduser 6 Jan 10 10:13 /mnt/ftpdata/ssp/20170110/prod</span><br><span class="line">drwxr-xr-x 2 vsftpduser vsftpduser 6 Jan 10 10:12 /mnt/ftpdata/ssp/20170110/test</span><br></pre></td></tr></table></figure>
</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.smallasa.com/2017/02/03/vsftpd-error/" data-id="cjavy9k7g00b40coq76ted49m" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-vsftpd-install" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/02/03/vsftpd-install/" class="article-date">
  <time datetime="2017-02-03T07:03:06.000Z" itemprop="datePublished">2017-02-03</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/system-service/">system service</a>►<a class="article-category-link" href="/categories/system-service/vsftpd/">vsftpd</a>►<a class="article-category-link" href="/categories/system-service/vsftpd/vsftpd-install/">vsftpd install</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/02/03/vsftpd-install/">vsftpd install</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="vsftpd安装"><a href="#vsftpd安装" class="headerlink" title="vsftpd安装"></a>vsftpd安装</h2><ol>
<li><p>查看系统版本</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># cat /etc/redhat-release</span></span><br><span class="line">CentOS Linux release 7.2.1511 (Core)</span><br></pre></td></tr></table></figure>
</li>
<li><p>安装vsftpd</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># yum -y install vsftpd* pam* db4*</span></span><br><span class="line">vsftp* //FTP服务</span><br><span class="line">pam*   //可插入认证模块</span><br><span class="line">db4*   //文件数据库</span><br></pre></td></tr></table></figure>
</li>
<li><p>创建用户</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">//创建服务的宿主用户</span><br><span class="line">[root@localhost ~]<span class="comment"># useradd -M -s /sbin/nologin vsftpd</span></span><br><span class="line"></span><br><span class="line">//创建虚拟宿主用户</span><br><span class="line">[root@localhost ~]<span class="comment"># useradd -s /sbin/nologin vsftpduser</span></span><br></pre></td></tr></table></figure>
<p><em>说明:</em></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">* Vsftpd服务宿主用户:</span><br><span class="line">  默认的Vsftpd的服务宿主用户是root,但是这不符合安全性的需要.</span><br><span class="line">  这里建立名字为vsftpd的用户,用他来作为支持Vsftpd的服务宿主用户.</span><br><span class="line">  由于该用户仅用来支持Vsftpd服务用,因此没有许可他登陆系统的必要,并设定他为不能登陆系统的用户*</span><br><span class="line">* Vsftpd虚拟宿主用户:</span><br><span class="line">  虚拟用户并不是系统用户,也就是说这些FTP的用户在系统中是不存在的</span><br><span class="line">  他们的总体权限其实是集中寄托在一个在系统中的某一个用户身上的,所谓Vsftpd的虚拟宿主用户,就是这样一个支持着所有虚拟用户的宿主用户.</span><br><span class="line">  由于他支撑了FTP的所有虚拟的用户,那么他本身的权限将会影响着这些虚拟的用户,因此,处于安全性的考虑,也要非常注意对该用户的权限的控制,该用户也绝对没有登陆系统的必要,这里也设定他为不能登陆系统的用户.</span><br></pre></td></tr></table></figure>
</li>
<li><p>修改vsftpd配置文件</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># cp /etc/vsftpd/vsftpd.conf /etc/vsftpd/vsftpd.conf.bak</span></span><br><span class="line">[root@localhost ~]<span class="comment"># vim /etc/vsftpd/vsftpd.conf</span></span><br><span class="line"><span class="comment">#不允许匿名访问</span></span><br><span class="line">anonymous_enable=NO</span><br><span class="line"><span class="comment"># 设定本地用户可以访问</span></span><br><span class="line"><span class="comment"># 注意: 主要是为虚拟宿主用户,如果该项目设定为NO那么所有虚拟用户将无法访问</span></span><br><span class="line">local_enable=YES</span><br><span class="line"><span class="comment"># 设定可以进行写操作</span></span><br><span class="line">write_enable=YES</span><br><span class="line"><span class="comment"># 设定上传后文件的权限掩码</span></span><br><span class="line">local_umask=022</span><br><span class="line"><span class="comment"># 禁止匿名用户上传</span></span><br><span class="line">anon_upload_enable=NO</span><br><span class="line"><span class="comment"># 禁止匿名用户建立目录</span></span><br><span class="line">anon_mkdir_write_enable=NO</span><br><span class="line"><span class="comment"># 设定开启目录标语功能</span></span><br><span class="line">dirmessage_enable=YES</span><br><span class="line"><span class="comment"># 设定开启日志记录功能</span></span><br><span class="line">xferlog_enable=YES</span><br><span class="line"><span class="comment"># 设定端口20进行数据连接</span></span><br><span class="line">connect_from_port_20=YES</span><br><span class="line"><span class="comment"># 设定禁止上传文件更改宿主</span></span><br><span class="line"><span class="comment"># 如果设定为YES,所有匿名上传的文件的所属用户将会被更改成chown_username</span></span><br><span class="line">chown_uploads=NO</span><br><span class="line"><span class="comment"># 匿名上传文件所属用户名</span></span><br><span class="line"><span class="comment">#chown_username=whoever</span></span><br><span class="line"><span class="comment"># 设定Vsftpd的服务日志保存路径</span></span><br><span class="line"><span class="comment"># 注意:该文件默认不存在,必须要手动touch出来,并且由于这里更改了Vsftpd的服务宿主用户为手动建立的Vsftpd.必须注意给与该用户对日志的写入权限,否则服务将启动失败</span></span><br><span class="line">xferlog_file=/var/<span class="built_in">log</span>/vsftpd.log</span><br><span class="line"><span class="comment"># 设定日志使用标准的记录格式</span></span><br><span class="line">xferlog_std_format=YES</span><br><span class="line"><span class="comment"># 设定空闲连接超时时间,这里使用默认</span></span><br><span class="line"><span class="comment"># 将具体数值留给每个具体用户具体指定,当然如果不指定的话,还是使用这里的默认值600,单位秒</span></span><br><span class="line">idle_session_timeout=600</span><br><span class="line"><span class="comment"># 设定单次最大连续传输时间,这里使用默认</span></span><br><span class="line"><span class="comment"># 将具体数值留给每个具体用户具体指定,当然如果不指定的话,还是使用这里的默认值120,单位秒</span></span><br><span class="line">data_connection_timeout=120</span><br><span class="line"><span class="comment"># 定支撑Vsftpd服务的宿主用户为手动建立的Vsftpd用户</span></span><br><span class="line"><span class="comment"># 注意:一旦做出更改宿主用户后,必须注意一起与该服务相关的读写文件的读写赋权问题:比如日志文件就必须给与该用户写入权限等</span></span><br><span class="line">nopriv_user=vsftpd</span><br><span class="line"><span class="comment"># 设定支持异步传输功能</span></span><br><span class="line">async_abor_enable=YES</span><br><span class="line"><span class="comment"># 设定支持ASCII模式的上传和下载功能</span></span><br><span class="line">ascii_upload_enable=YES</span><br><span class="line">ascii_download_enable=YES</span><br><span class="line"><span class="comment"># 设定Vsftpd的登陆标语</span></span><br><span class="line">ftpd_banner=Welcome to zhonghui FTP service</span><br><span class="line"><span class="comment"># 创建一个文件保存某些匿名电子邮件的黑名单,以防止这些人使用Dos攻击</span></span><br><span class="line"><span class="comment">#deny_email_enable=YES</span></span><br><span class="line"><span class="comment"># 当启用deny_email_enable功能时,所需的电子邮件黑名单保存路径</span></span><br><span class="line"><span class="comment">#banned_email_file=/etc/vsftpd/banned_emails</span></span><br><span class="line"><span class="comment"># 禁止用户登出自己的FTP主目录</span></span><br><span class="line">chroot_local_user=NO</span><br><span class="line"><span class="comment"># 如果启动这项功能,则所有列在chroot_list_file之中的使用者不能更改根目录</span></span><br><span class="line"><span class="comment">#chroot_list_enable=YES</span></span><br><span class="line"><span class="comment"># 指定限制的用户文件</span></span><br><span class="line"><span class="comment">#chroot_list_file=/etc/vsftpd/chroot_list</span></span><br><span class="line"><span class="comment"># 禁止用户登陆FTP后使用"ls -R"的命令.该命令会对服务器性能造成巨大开销</span></span><br><span class="line"><span class="comment"># 如果该项被允许,那么当多用户同时使用该命令时将会对该服务器造成威胁</span></span><br><span class="line">ls_recurse_enable=NO</span><br><span class="line"><span class="comment"># 设定该Vsftpd服务工作在StandAlone模式下,谓StandAlone模式就是该服务拥有自己的守护进程支持,在"ps -A"命令下我们将可用看到vsftpd的守护进程名</span></span><br><span class="line"><span class="comment"># 如果不想工作在StandAlone模式下,则可以选择SuperDaemon模式,在该模式下vsftpd将没有自己的守护进程,而是由超级守护进程Xinetd全权代理,与此同时,Vsftp服务的许多功能将得不到实现</span></span><br><span class="line">listen=YES</span><br><span class="line">listen_ipv6=YES</span><br><span class="line"><span class="comment"># 设定PAM服务下Vsftpd的验证配置文件名.因此,PAM验证将参考/etc/pam.d/下的vsftpd文件配置</span></span><br><span class="line">pam_service_name=vsftpd</span><br><span class="line"><span class="comment"># 设定userlist_file中的用户将不得使用FTP</span></span><br><span class="line">userlist_enable=YES</span><br><span class="line"><span class="comment"># 设定支持TCP Wrappers</span></span><br><span class="line"><span class="comment"># 如果启用,则vsftpd服务器会检查/etc/hosts.allow和/etc/hosts.deny中的设置,来决定请求连接的主机,是否允许访问该FTP服务器</span></span><br><span class="line">tcp_wrappers=YES</span><br><span class="line"><span class="comment"># 设定启用虚拟用户功能</span></span><br><span class="line">guest_enable=YES</span><br><span class="line"><span class="comment"># 指定虚拟用户的宿主用户</span></span><br><span class="line">guest_username=vsftpduser</span><br><span class="line"><span class="comment"># 设定虚拟用户的权限符合他们的宿主用户</span></span><br><span class="line">virtual_use_local_privs=YES</span><br><span class="line"><span class="comment"># 设定虚拟用户个人Vsftp的配置文件存放路径.也就是说,这个被指定的目录里,将存放每个Vsftp虚拟用户个性的配置文件,一个需要注意的地方就是这些配置文件名必须和虚拟用户名相同</span></span><br><span class="line">user_config_dir=/etc/vsftpd/vconf</span><br></pre></td></tr></table></figure>
<p><em>注意:</em> <strong>配置文件不能有空行,多余空格</strong></p>
</li>
<li><p>创建vsftpd日志文件</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># touch /var/log/vsftpd.log</span></span><br><span class="line">[root@localhost ~]<span class="comment"># chown vsftpd.vsftpd /var/log/vsftpd.log</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>创建vsftpd存放虚拟用户目录</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># mkdir /etc/vsftpd/vconf</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>创建虚拟用户数据库文件</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">//创建虚拟用户名单文件</span><br><span class="line">//这个文件就是来记录vsftpd虚拟用户的用户名和口令的数据文件</span><br><span class="line">[root@localhost ~]<span class="comment"># touch /etc/vsftpd/virtualuser</span></span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">//创建虚拟用户账号</span><br><span class="line">//用户的用户名和口令信息,格式很简单：<span class="string">"一行用户名,一行口令"</span></span><br><span class="line">[root@localhost ~]<span class="comment"># vim /etc/vsftpd/virtualuser</span></span><br><span class="line">penn</span><br><span class="line">^zqJu,S|P</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">//生成虚拟用户数据文件</span><br><span class="line">[root@localhost ~]<span class="comment"># db_load -T -t hash -f /etc/vsftpd/virtualuser /etc/vsftpd/virtualuser.db</span></span><br><span class="line"></span><br><span class="line">说明:</span><br><span class="line">选项-T允许应用程序能够将文本文件转译载入进数据库.由于我们之后是将虚拟用户的信息以文件方式存储在文件里的,为了让Vsftpd这个应用程序能够通过文本来载入用户数据,必须要使用这个选项.</span><br><span class="line">如果指定了选项-T,那么一定要追跟子选项-t.子选项-t,用来指定转译载入的数据库类型(Btree、Hash、Queue和Recon数据库)</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">//查看数据库文件权限</span><br><span class="line">[root@localhost ~]<span class="comment"># ls -l /etc/vsftpd/virtualuser.db</span></span><br><span class="line">-rw-r--r-- 1 root root 12288 Nov 24 10:45 /etc/vsftpd/virtualuser.db</span><br><span class="line"></span><br><span class="line">说明:</span><br><span class="line">需要特别注意的是,以后再要添加虚拟用户的时候,只需要按照<span class="string">"一行用户名,一行口令"</span>的格式将新用户名和口令添加进虚拟用户名单文件</span><br><span class="line">但是光这样做还不够,不会生效！还要再执行一遍<span class="string">"db_load -T -t hash -f 虚拟用户名单文件 虚拟用户数据库文件.db"</span>的命令使其生效才可以！</span><br></pre></td></tr></table></figure>
</li>
<li><p>设定PAM验证文件,并指定虚拟用户数据库文件进行读取</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># cp /etc/pam.d/vsftpd /etc/pam.d/vsftpd.bak</span></span><br><span class="line">[root@localhost ~]<span class="comment"># vim /etc/pam.d/vsftpd</span></span><br><span class="line"><span class="comment">#%PAM-1.0</span></span><br><span class="line">auth       sufficient   /usr/lib64/security/pam_userdb.so   db=/etc/vsftpd/virtualuser</span><br><span class="line">account    sufficient   /usr/lib64/security/pam_userdb.so   db=/etc/vsftpd/virtualuser</span><br><span class="line">session    optional     pam_keyinit.so    force revoke</span><br><span class="line">auth       required     pam_listfile.so item=user sense=deny file=/etc/vsftpd/ftpusers onerr=succeed</span><br><span class="line">auth       required     pam_shells.so</span><br><span class="line">auth       include      password-auth</span><br><span class="line">account    include      password-auth</span><br><span class="line">session    required     pam_loginuid.so</span><br><span class="line">session    include      password-auth</span><br><span class="line"></span><br><span class="line">说明:</span><br><span class="line">auth       sufficient   /usr/lib64/security/pam_userdb.so   db=/etc/vsftpd/virtualuser.db</span><br><span class="line">account    sufficient   /usr/lib64/security/pam_userdb.so   db=/etc/vsftpd/virtualuser.db</span><br><span class="line"></span><br><span class="line">auth是指对用户的用户名口令进行验证</span><br><span class="line">account是指对用户的帐户有哪些权限哪些限制进行验证</span><br><span class="line">sufficient表示充分条件,也就是说,一旦在这里通过了验证,那么也就不用经过下面剩下的验证步骤了.相反,如果没有通过的话,也不会被系统立即挡之门外,因为sufficient的失败不决定整个验证的失败,意味着用户还必须将经历剩下来的验证审核</span><br><span class="line">/usr/lib64/security/pam_userdb.so表示该条审核将调用pam_userdb.so这个库函数进行</span><br><span class="line">db=/etc/vsftpd/virtualuser.db指定了验证库函数将到这个指定的数据库中调用数据进行验证</span><br></pre></td></tr></table></figure>
</li>
<li><p>虚拟用户配置</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">//创建vsftpd主数据目录</span><br><span class="line">[root@localhost ~]<span class="comment"># mkdir -p /home/vsftpduser/ftpdata</span></span><br><span class="line">[root@localhost ~]<span class="comment"># chown -R vsftpduser.vsftpduser /home/vsftpduser/ftpdata</span></span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">//创建vsftpd项目目录</span><br><span class="line">[root@localhost ~]<span class="comment"># mkdir -p /home/vsftpduser/ftpdata/ssp</span></span><br><span class="line">[root@localhost ~]<span class="comment"># chown -R vsftpduser.vsftpduser /home/vsftpduser/ftpdata/ssp</span></span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">//创建虚拟目录配置文件</span><br><span class="line">[root@localhost ~]<span class="comment"># vim /etc/vsftpd/vconf/ssp.conf</span></span><br><span class="line"><span class="comment"># 指定虚拟用户的具体主路径</span></span><br><span class="line">local_root=/home/vsftpduser/ftpdata/ssp</span><br><span class="line"><span class="comment"># 设定不允许匿名用户访问</span></span><br><span class="line">anonymous_enable=NO</span><br><span class="line"><span class="comment"># 设定允许写操作</span></span><br><span class="line">write_enable=YES</span><br><span class="line"><span class="comment"># 设定上传文件权限掩码</span></span><br><span class="line">local_umask=022</span><br><span class="line"><span class="comment"># 设定不允许匿名用户上传</span></span><br><span class="line">anon_upload_enable=NO</span><br><span class="line"><span class="comment"># 设定不允许匿名用户建立目录</span></span><br><span class="line">anon_mkdir_write_enable=NO</span><br><span class="line"><span class="comment"># 设定空闲连接超时时间</span></span><br><span class="line">idle_session_timeout=600</span><br><span class="line"><span class="comment"># 设定单次连续传输最大时间</span></span><br><span class="line">data_connection_timeout=120</span><br><span class="line"><span class="comment"># 设定并发客户端访问个数</span></span><br><span class="line">max_clients=20</span><br><span class="line"><span class="comment"># 设定单个客户端的最大线程数,这个配置主要来照顾Flashget,迅雷等多线程下载软件</span></span><br><span class="line">max_per_ip=5</span><br><span class="line"><span class="comment"># 设定该用户的最大传输速率,单位b/s。</span></span><br><span class="line">local_max_rate=5000000</span><br></pre></td></tr></table></figure>
</li>
<li><p>启动服务</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># systemctl start vsftpd.service</span></span><br><span class="line">[root@localhost ~]<span class="comment"># systemctl status vsftpd.service</span></span><br><span class="line"></span><br><span class="line">[root@localhost ~]<span class="comment"># systemctl enable vsftpd.service</span></span><br><span class="line">[root@localhost ~]<span class="comment"># systemctl list-units --type=service |grep vsftpd</span></span><br><span class="line">vsftpd.service                     loaded active running Vsftpd ftp daemon</span><br></pre></td></tr></table></figure>
</li>
<li><p>测试</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ftp -i -n 127.0.0.1 21</span><br><span class="line">&gt; user &#123;user&#125; &#123;pass&#125;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<hr>
<h2 id="设置权限"><a href="#设置权限" class="headerlink" title="设置权限:"></a>设置权限:</h2><ul>
<li>只能上传.不能下载、删除、重命名<br>cmds_allowed＝FEAT,REST,CWD,LIST,MDTM,MKD,NLST,PASS,PASV,PORT,PWD,QUIT,RMD,SIZE,STOR,TYPE,USER,ACCT,APPE,CDUP,HELP,MODE,NOOP,REIN,STAT,STOU,STRU,SYST</li>
<li>只能下载.不能上传、删除、重命名<br>write_enable=NO</li>
<li>只能上传、删除、重命名.不能下载<br>download_enable＝NO</li>
<li>只能下载、删除、重命名.不能上传</li>
<li>只能下载上传,不能删除<br>cmds_allowed=FEAT,REST,CWD,LIST,MDTM,MKD,NLST,PASS,PASV,PORT,PWD,QUIT,RMD,RNFR,RNTO,RETR,DELE,SIZE,TYPE,USER,ACCT,APPE,CDUP,HELP,MODE,NOOP,REIN,STAT,STOU,STRU,SYST</li>
</ul>
<p><strong>具体命令介绍如下：</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">    CWD - change working directory 更改目录</span><br><span class="line">    LIST - list remote files 列目录</span><br><span class="line">    MKD - make a remote directory 新建文件</span><br><span class="line">    NLST - name list of remote directory</span><br><span class="line">    PWD - print working directory 显示当前工作目录</span><br><span class="line">    RETR - retrieve a remote file 下载文件</span><br><span class="line">    STOR - store a file on the remote host 上传文件</span><br><span class="line">    DELE - delete a remote file 删除文件</span><br><span class="line">    RMD - remove a remote directory 删除目录</span><br><span class="line">    RNFR - rename from 重命名</span><br><span class="line">    RNTO - rename to 重命名</span><br><span class="line">参考:</span><br><span class="line">    # ABOR - abort a file transfer 取消文件传输</span><br><span class="line">    # CWD - change working directory 更改目录</span><br><span class="line">    # DELE - delete a remote file 删除文件</span><br><span class="line">    # LIST - list remote files 列目录</span><br><span class="line">    # MDTM - return the modification time of a file 返回文件的更新时间</span><br><span class="line">    # MKD - make a remote directory 新建文件夹</span><br><span class="line">    # NLST - name list of remote directory</span><br><span class="line">    # PASS - send password</span><br><span class="line">    # PASV - enter passive mode</span><br><span class="line">    # PORT - open a data port 打开一个传输端口</span><br><span class="line">    # PWD - print working directory 显示当前工作目录</span><br><span class="line">    # QUIT - terminate the connection 退出</span><br><span class="line">    # RETR - retrieve a remote file 下载文件</span><br><span class="line">    # RMD - remove a remote directory</span><br><span class="line">    # RNFR - rename from    # RNTO - rename to</span><br><span class="line">    # SITE - site-specific commands</span><br><span class="line">    # SIZE - return the size of a file 返回文件大小</span><br><span class="line">    # STOR - store a file on the remote host 上传文件</span><br><span class="line">    # TYPE - set transfer type</span><br><span class="line">    # USER - send username</span><br><span class="line">    # less common commands:</span><br><span class="line">    # ACCT* - send account information</span><br><span class="line">    # APPE - append to a remote file</span><br><span class="line">    # CDUP - CWD to the parent of the current directory</span><br><span class="line">    # HELP - return help on using the server</span><br><span class="line">    # MODE - set transfer mode</span><br><span class="line">    # NOOP - do nothing</span><br><span class="line">    # REIN* - reinitialize the connection</span><br><span class="line">    # STAT - return server status</span><br><span class="line">    # STOU - store a file uniquely</span><br><span class="line">    # STRU - set file transfer structure</span><br><span class="line">    # SYST - return system type</span><br></pre></td></tr></table></figure></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.smallasa.com/2017/02/03/vsftpd-install/" data-id="cjavy9k7p00b70coqukoe6aa5" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-java-jvm-optimize" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/02/03/java-jvm-optimize/" class="article-date">
  <time datetime="2017-02-03T01:56:04.000Z" itemprop="datePublished">2017-02-03</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/java/">java</a>►<a class="article-category-link" href="/categories/java/java-jvm-optimize/">java jvm optimize</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/02/03/java-jvm-optimize/">java jvm optimize</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="1-堆大小设置"><a href="#1-堆大小设置" class="headerlink" title="1.堆大小设置"></a>1.堆大小设置</h3><p>JVM中”最大堆”大小有三方面限制:</p>
<ol>
<li>相关操作系统的数据模型限制(32位/64位)</li>
<li>系统的可用虚拟内存限制</li>
<li>系统的可用物理内存限制<ul>
<li>linux:32位操作系统,一般限制在1.5-2G;64位操作系统对内存无限制</li>
<li>windows: 由于windows内存管理问题,JVM能用的内存会更少</li>
</ul>
</li>
</ol>
<h3 id="2-典型设置"><a href="#2-典型设置" class="headerlink" title="2.典型设置:"></a>2.典型设置:</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java -Xmx1024m -Xms1024m -Xmn512m -Xss128k -XX:NewRatio=4 -XX:SurvivorRatio=4 -XX:MaxPermSize=64m -XX:MaxTenuringThreshold=0</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">* -Xmx1024m: 设置JVM最大可用内存为1024m</span><br><span class="line">* -Xms1024m: 设置JVM初始内存为1024m.此值可以设置与-Xmx相同,以避免每次垃圾回收完成后JVM重新分配内存</span><br><span class="line">* -Xmn512m:  设置年轻代大小为512m.整个<span class="string">"JVM内存大小 = 年轻代大小 + 年老代大小 + 持久代大小"</span>.</span><br><span class="line">  持久代一般固定大小为64m,所以增大年轻代后,将会减小年老代大小.</span><br><span class="line">  此值对系统性能影响较大,Sun官方推荐配置为整个堆的3/8.我们的abtest在线系统,设置的是1/2,视场景不同而不同</span><br><span class="line">* -Xss128k:  设置每个线程的堆栈大小.JDK5.0以后每个线程堆栈大小为1M,以前每个线程堆栈大小为256K.</span><br><span class="line">  更具应用的线程所需内存大小进行调整.在相同物理内存下,减小这个值能生成更多的线程.</span><br><span class="line">  但是操作系统对一个进程内的线程数还是有限制的,不能无限生成,经验值在3000~5000左右</span><br><span class="line">* -XX:NewRatio=4: 设置年轻代(包括Eden和两个Survivor区)与年老代的比值(除去持久代).</span><br><span class="line">  设置为4,则年轻代与年老代所占比值为1:4,年轻代占整个堆栈的1/5</span><br><span class="line">* -XX:SurvivorRatio=4: 设置年轻代中Eden区与Survivor区的大小比值.</span><br><span class="line">  设置为4,则两个Survivor区与一个Eden区的比值为2:4,一个Survivor区占整个年轻代的1/6</span><br><span class="line">* -XX:MaxPermSize=64m: 设置持久代大小为64m</span><br><span class="line">* -XX:MaxTenuringThreshold=0: 设置垃圾最大年龄.如果设置为0的话,则年轻代对象不经过Survivor区,直接进入年老代.</span><br><span class="line">  对于年老代比较多的应用,可以提高效率.如果将此值设置为一个较大值,则年轻代对象会在Survivor区进行多次复制,</span><br><span class="line">  这样可以增加对象再年轻代的存活时间,增加在年轻代即被回收的概论</span><br></pre></td></tr></table></figure>
<h3 id="3-回收器选择"><a href="#3-回收器选择" class="headerlink" title="3.回收器选择"></a>3.回收器选择</h3><p>JVM给了三种选择:串行收集器、并行收集器、并发收集器,但是串行收集器只适用于小数据量的情况,所以这里的选择主要针对”并行收集器”和”并发收集器””<br>默认情况下,JDK5.0以前都是使用串行收集器,如果想使用其他收集器需要在启动时加入相应参数.JDK5.0以后,JVM会根据当前系统配置进行判断</p>
<h4 id="1-吞吐量优先的并行收集器"><a href="#1-吞吐量优先的并行收集器" class="headerlink" title="1.吞吐量优先的并行收集器"></a>1.吞吐量优先的并行收集器</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">并行收集器主要以到达一定的吞吐量为目标,适用于科学技术和后台处理等,例如:</span><br><span class="line">1.java -Xmx1024m -Xms1024m -Xmn512m -Xss128k -XX:+UseParallelGC -XX:ParallelGCThreads=20</span><br><span class="line">  * -XX:+UseParallelGC: 选择垃圾收集器为并行收集器.</span><br><span class="line">    此配置仅对年轻代有效.即上述配置下,年轻代使用并发收集,而年老代仍旧使用串行收集</span><br><span class="line">  * -XX:ParallelGCThreads=20: 配置并行收集器的线程数,即:</span><br><span class="line">    同时多少个线程一起进行垃圾回收(此值最好配置与处理器数目相等)</span><br><span class="line">2.java -Xmx1024m -Xms1024m -Xmn512m -Xss128k -XX:+UseParallelGC -XX:ParallelGCThreads=20 -XX:+UseParallelOldGC</span><br><span class="line">  * -XX:+UseParallelOldGC: 配置年老代垃圾收集方式为并行收集.</span><br><span class="line">    JDK6.0支持对年老代并行收集</span><br><span class="line">3.java -Xmx1024m -Xms1024m -Xmn512m -Xss128k -XX:+UseParallelGC  -XX:MaxGCPauseMillis=100</span><br><span class="line">  * -XX:MaxGCPauseMillis=100: 设置每次年轻代垃圾回收的最长时间,</span><br><span class="line">    如果无法满足此时间,JVM会自动调整年轻代大小,以满足此值</span><br><span class="line">4.java -Xmx1024m -Xms1024m -Xmn512m -Xss128k -XX:+UseParallelGC  -XX:MaxGCPauseMillis=100 -XX:+UseAdaptiveSizePolicy</span><br><span class="line">  * -XX:+UseAdaptiveSizePolicy: 设置此选项后,并行收集器会自动选择年轻代区大小和相应的Survivor区比例,</span><br><span class="line">    以达到目标系统规定的最低相应时间或者收集频率等,此值建议使用并行收集器时,一直打开</span><br></pre></td></tr></table></figure>
<h4 id="2-响应时间优先的并发收集器"><a href="#2-响应时间优先的并发收集器" class="headerlink" title="2.响应时间优先的并发收集器"></a>2.响应时间优先的并发收集器</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">并发收集器主要是保证系统的响应时间,减少垃圾收集时的停顿时间.适用于应用服务器,电信领域等,例如:</span><br><span class="line">1.java -Xmx1024m -Xms1024m -Xmn512m -Xss128k -XX:ParallelGCThreads=20 -XX:+UseConcMarkSweepGC -XX:+UseParNewGC</span><br><span class="line">  * -XX:+UseConcMarkSweepGC: 设置年老代为并发收集</span><br><span class="line">  * -XX:+UseParNewGC: 设置年轻代为并行收集,可与CMS收集同时使用.</span><br><span class="line">    JDK5.0以上,JVM会根据系统配置自行设置,所以无需再设置此值</span><br><span class="line">2.java -Xmx1024m -Xms1024m -Xmn512m -Xss128k -XX:+UseConcMarkSweepGC -XX:CMSFullGCsBeforeCompaction=5 -XX:+UseCMSCompactAtFullCollection</span><br><span class="line">  * -XX:CMSFullGCsBeforeCompaction: 由于并发收集器不对内存空间进行压缩、整理,</span><br><span class="line">    所以运行一段时间以后会产生"碎片",使得运行效率降低.</span><br><span class="line">    此值设置运行多少次GC以后对内存空间进行压缩、整理</span><br><span class="line">  * -XX:+UseCMSCompactAtFullCollection: 打开对年老代的压缩.可能会影响性能,但是可以消除碎片</span><br></pre></td></tr></table></figure>
<h4 id="3-辅助信息"><a href="#3-辅助信息" class="headerlink" title="3.辅助信息"></a>3.辅助信息</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">* -XX:+PrintGC: 输出gc信息</span><br><span class="line">* -XX:+PrintGCDetails: 输出gc详细信息</span><br><span class="line">* -XX:+PrintGCTimeStamps -XX:+PrintGC: PrintGCTimeStamps可与上面两个混合使用</span><br><span class="line">* -XX:+PrintGCApplicationConcurrentTime: 打印每次垃圾回收前,程序未中断的执行时间.可与上面混合使用</span><br><span class="line">* -XX:+PrintGCApplicationStoppedTime: 打印垃圾回收期间程序暂停的时间.可与上面混合使用</span><br><span class="line">* -XX:PrintHeapAtGC: 打印GC前后的详细堆栈信息</span><br><span class="line">* -Xloggc:filename: 与上面几个配合使用,把相关日志信息记录到文件以便分析</span><br></pre></td></tr></table></figure>
<hr>
<h3 id="综上"><a href="#综上" class="headerlink" title="综上"></a>综上</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">1.堆设置</span><br><span class="line">  * -Xms: 初始堆大小</span><br><span class="line">  * -Xmx: 最大堆大小</span><br><span class="line">  * -XX:NewSize=n:  设置年轻代大小</span><br><span class="line">  * -XX:NewRatio=n: 设置年轻代和年老代的比值.</span><br><span class="line">    如:为3,表示年轻代与年老代比值为1:3,年轻代占整个年轻代年老代和的1/4</span><br><span class="line">  * -XX:SurvivorRatio=n: 年轻代中Eden区与两个Survivor区的比值.</span><br><span class="line">    注意Survivor区有两个.如：3，表示Eden:Survivor=3:2，一个Survivor区占整个年轻代的1/5</span><br><span class="line">  * -XX:MaxPermSize=n: 设置持久代大小</span><br><span class="line">2.收集器设置</span><br><span class="line">  * -XX:+UseSerialGC: 设置串行收集器</span><br><span class="line">  * -XX:+UseParallelGC: 设置并行收集器</span><br><span class="line">  * -XX:+UseParalledlOldGC: 设置并行年老代收集器</span><br><span class="line">  * -XX:+UseConcMarkSweepGC: 设置并发收集器</span><br><span class="line">3.垃圾回收统计信息</span><br><span class="line">  * -XX:+PrintGC</span><br><span class="line">  * -XX:+PrintGCDetails</span><br><span class="line">  * -XX:+PrintGCTimeStamps</span><br><span class="line">  * -Xloggc:filename</span><br><span class="line">4.并行收集器设置</span><br><span class="line">  * -XX:ParallelGCThreads=n: 设置并行收集器收集时使用的CPU数.并行收集线程数</span><br><span class="line">  * -XX:MaxGCPauseMillis=n:</span><br><span class="line">  * -XX:GCTimeRatio=n: 设置垃圾回收时间占程序运行时间的百分比.公式为1/(1+n)</span><br><span class="line">5.并发收集器设置</span><br><span class="line">  * -XX:ParallelGCThreads=n:</span><br></pre></td></tr></table></figure>
<hr>
<h3 id="调优总结"><a href="#调优总结" class="headerlink" title="调优总结:"></a>调优总结:</h3><ol>
<li>年轻代大小选择<ol>
<li>响应时间优先的应用</li>
<li>吞吐量优先的应用<ul>
<li>尽可能的设置大,可能到达Gbit的程度.<br>因为对响应时间没有要求,垃圾收集可以并行进行,一般适合8CPU以上的应用</li>
</ul>
</li>
</ol>
</li>
<li>老年代大小选择<ol>
<li>响应时间优先的应用<ul>
<li>年老代使用并发收集器,所以其大小需要小心设置,一般要考虑并发会话率和会话持续时间等一些参数</li>
<li>如果堆设置小了,可以会造成内存碎片、高回收频率以及应用暂停而使用传统的标记清除方式</li>
<li>如果堆大了,则需要较长的收集时间</li>
<li>最优化的方案,一般需要参考以下数据获得：<ol>
<li>并发垃圾收集信息</li>
<li>持久代并发收集次数</li>
<li>传统GC信息</li>
<li>花在年轻代和年老代回收上的时间比例</li>
<li>减少年轻代和年老代花费的时间,一般会提高应用的效率</li>
</ol>
</li>
</ul>
</li>
<li>吞吐量优先的应用<ul>
<li>一般吞吐量优先的应用都有一个很大的年轻代和一个较小的年老代</li>
<li>原因是,这样可以尽可能回收掉大部分短期对象,减少中期的对象,而年老代尽存放长期存活对象</li>
</ul>
</li>
</ol>
</li>
</ol>
<hr>
<h3 id="较小堆引起的碎片问题"><a href="#较小堆引起的碎片问题" class="headerlink" title="较小堆引起的碎片问题:"></a>较小堆引起的碎片问题:</h3><p><em>因为年老代的并发收集器使用标记、清除算法，所以不会对堆进行压缩<br>当收集器回收时,他会把相邻的空间进行合并,这样可以分配给较大的对象.<br>但是,当堆空间较小时,运行一段时间以后,就会出现”碎片”,如果并发收集器找不到足够的空间.<br>那么并发收集器将会停止,然后使用传统的标记、清除方式进行回收<br>如果出现”碎片,可能需要进行如下配置:<br>-XX:+UseCMSCompactAtFullCollection: 使用并发收集器时,开启对年老代的压缩<br>-XX:CMSFullGCsBeforeCompaction=0: 上面配置开启的情况下,这里设置多少次Full GC后,对年老代进行压缩</em></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.smallasa.com/2017/02/03/java-jvm-optimize/" data-id="cjavy9jx800420coqe0bg4aqp" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-java-jvm-opts" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/02/03/java-jvm-opts/" class="article-date">
  <time datetime="2017-02-03T01:56:04.000Z" itemprop="datePublished">2017-02-03</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/java/">java</a>►<a class="article-category-link" href="/categories/java/java-jvm-opts/">java jvm opts</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/02/03/java-jvm-opts/">java jvm opts</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="1-堆大小设置"><a href="#1-堆大小设置" class="headerlink" title="1.堆大小设置"></a>1.堆大小设置</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">JVM中<span class="string">"最大堆"</span>大小有三方面限制:</span><br><span class="line">* 相关操作系统的数据模型限制(32位/64位)</span><br><span class="line">* 系统的可用虚拟内存限制</span><br><span class="line">* 系统的可用物理内存限制</span><br><span class="line">  * linux:32位操作系统,一般限制在1.5-2G;64位操作系统对内存无限制</span><br><span class="line">  * windows: 由于windows内存管理问题,JVM能用的内存会更少</span><br></pre></td></tr></table></figure>
<h3 id="2-典型设置"><a href="#2-典型设置" class="headerlink" title="2.典型设置:"></a>2.典型设置:</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java -Xmx1024m -Xms1024m -Xmn512m -Xss128k -XX:NewRatio=4 -XX:SurvivorRatio=4 -XX:MaxPermSize=64m -XX:MaxTenuringThreshold=0</span><br></pre></td></tr></table></figure>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">* -Xmx1024m: 设置JVM最大可用内存为1024m</span><br><span class="line">* -Xms1024m: 设置JVM初始内存为1024m.此值可以设置与-Xmx相同,以避免每次垃圾回收完成后JVM重新分配内存</span><br><span class="line">* -Xmn512m:  设置年轻代大小为512m.整个<span class="string">"JVM内存大小 = 年轻代大小 + 年老代大小 + 持久代大小"</span>.</span><br><span class="line">  持久代一般固定大小为64m,所以增大年轻代后,将会减小年老代大小.</span><br><span class="line">  此值对系统性能影响较大,Sun官方推荐配置为整个堆的3/8.我们的abtest在线系统,设置的是1/2,视场景不同而不同</span><br><span class="line">* -Xss128k:  设置每个线程的堆栈大小.JDK5.0以后每个线程堆栈大小为1M,以前每个线程堆栈大小为256K.</span><br><span class="line">  更具应用的线程所需内存大小进行调整.在相同物理内存下,减小这个值能生成更多的线程.</span><br><span class="line">  但是操作系统对一个进程内的线程数还是有限制的,不能无限生成,经验值在3000~5000左右</span><br><span class="line">* -XX:NewRatio=4: 设置年轻代(包括Eden和两个Survivor区)与年老代的比值(除去持久代).</span><br><span class="line">  设置为4,则年轻代与年老代所占比值为1:4,年轻代占整个堆栈的1/5</span><br><span class="line">* -XX:SurvivorRatio=4: 设置年轻代中Eden区与Survivor区的大小比值.</span><br><span class="line">  设置为4,则两个Survivor区与一个Eden区的比值为2:4,一个Survivor区占整个年轻代的1/6</span><br><span class="line">* -XX:MaxPermSize=64m: 设置持久代大小为64m</span><br><span class="line">* -XX:MaxTenuringThreshold=0: 设置垃圾最大年龄.如果设置为0的话,则年轻代对象不经过Survivor区,直接进入年老代.</span><br><span class="line">  对于年老代比较多的应用,可以提高效率.如果将此值设置为一个较大值,则年轻代对象会在Survivor区进行多次复制,</span><br><span class="line">  这样可以增加对象再年轻代的存活时间,增加在年轻代即被回收的概论</span><br></pre></td></tr></table></figure>
<h3 id="3-回收器选择"><a href="#3-回收器选择" class="headerlink" title="3.回收器选择"></a>3.回收器选择</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">JVM给了三种选择:串行收集器、并行收集器、并发收集器,但是串行收集器只适用于小数据量的情况,所以这里的选择主要针对&quot;并行收集器&quot;和&quot;并发收集器&quot;&quot;</span><br><span class="line">默认情况下,JDK5.0以前都是使用串行收集器,如果想使用其他收集器需要在启动时加入相应参数.JDK5.0以后,JVM会根据当前系统配置进行判断</span><br></pre></td></tr></table></figure>
<h4 id="1-吞吐量优先的并行收集器"><a href="#1-吞吐量优先的并行收集器" class="headerlink" title="1.吞吐量优先的并行收集器"></a>1.吞吐量优先的并行收集器</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">并行收集器主要以到达一定的吞吐量为目标,适用于科学技术和后台处理等,例如:</span><br><span class="line">1.java -Xmx1024m -Xms1024m -Xmn512m -Xss128k -XX:+UseParallelGC -XX:ParallelGCThreads=20</span><br><span class="line">  * -XX:+UseParallelGC: 选择垃圾收集器为并行收集器.</span><br><span class="line">    此配置仅对年轻代有效.即上述配置下,年轻代使用并发收集,而年老代仍旧使用串行收集</span><br><span class="line">  * -XX:ParallelGCThreads=20: 配置并行收集器的线程数,即:</span><br><span class="line">    同时多少个线程一起进行垃圾回收(此值最好配置与处理器数目相等)</span><br><span class="line">2.java -Xmx1024m -Xms1024m -Xmn512m -Xss128k -XX:+UseParallelGC -XX:ParallelGCThreads=20 -XX:+UseParallelOldGC</span><br><span class="line">  * -XX:+UseParallelOldGC: 配置年老代垃圾收集方式为并行收集.</span><br><span class="line">    JDK6.0支持对年老代并行收集</span><br><span class="line">3.java -Xmx1024m -Xms1024m -Xmn512m -Xss128k -XX:+UseParallelGC  -XX:MaxGCPauseMillis=100</span><br><span class="line">  * -XX:MaxGCPauseMillis=100: 设置每次年轻代垃圾回收的最长时间,</span><br><span class="line">    如果无法满足此时间,JVM会自动调整年轻代大小,以满足此值</span><br><span class="line">4.java -Xmx1024m -Xms1024m -Xmn512m -Xss128k -XX:+UseParallelGC  -XX:MaxGCPauseMillis=100 -XX:+UseAdaptiveSizePolicy</span><br><span class="line">  * -XX:+UseAdaptiveSizePolicy: 设置此选项后,并行收集器会自动选择年轻代区大小和相应的Survivor区比例,</span><br><span class="line">    以达到目标系统规定的最低相应时间或者收集频率等,此值建议使用并行收集器时,一直打开</span><br></pre></td></tr></table></figure>
<h4 id="2-响应时间优先的并发收集器"><a href="#2-响应时间优先的并发收集器" class="headerlink" title="2.响应时间优先的并发收集器"></a>2.响应时间优先的并发收集器</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">并发收集器主要是保证系统的响应时间,减少垃圾收集时的停顿时间.适用于应用服务器,电信领域等,例如:</span><br><span class="line">1.java -Xmx1024m -Xms1024m -Xmn512m -Xss128k -XX:ParallelGCThreads=20 -XX:+UseConcMarkSweepGC -XX:+UseParNewGC</span><br><span class="line">  * -XX:+UseConcMarkSweepGC: 设置年老代为并发收集</span><br><span class="line">  * -XX:+UseParNewGC: 设置年轻代为并行收集,可与CMS收集同时使用.</span><br><span class="line">    JDK5.0以上,JVM会根据系统配置自行设置,所以无需再设置此值</span><br><span class="line">2.java -Xmx1024m -Xms1024m -Xmn512m -Xss128k -XX:+UseConcMarkSweepGC -XX:CMSFullGCsBeforeCompaction=5 -XX:+UseCMSCompactAtFullCollection</span><br><span class="line">  * -XX:CMSFullGCsBeforeCompaction: 由于并发收集器不对内存空间进行压缩、整理,</span><br><span class="line">    所以运行一段时间以后会产生"碎片",使得运行效率降低.</span><br><span class="line">    此值设置运行多少次GC以后对内存空间进行压缩、整理</span><br><span class="line">  * -XX:+UseCMSCompactAtFullCollection: 打开对年老代的压缩.可能会影响性能,但是可以消除碎片</span><br></pre></td></tr></table></figure>
<h4 id="3-辅助信息"><a href="#3-辅助信息" class="headerlink" title="3.辅助信息"></a>3.辅助信息</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">* -XX:+PrintGC: 输出gc信息</span><br><span class="line">* -XX:+PrintGCDetails: 输出gc详细信息</span><br><span class="line">* -XX:+PrintGCTimeStamps -XX:+PrintGC: PrintGCTimeStamps可与上面两个混合使用</span><br><span class="line">* -XX:+PrintGCApplicationConcurrentTime: 打印每次垃圾回收前,程序未中断的执行时间.可与上面混合使用</span><br><span class="line">* -XX:+PrintGCApplicationStoppedTime: 打印垃圾回收期间程序暂停的时间.可与上面混合使用</span><br><span class="line">* -XX:PrintHeapAtGC: 打印GC前后的详细堆栈信息</span><br><span class="line">* -Xloggc:filename: 与上面几个配合使用,把相关日志信息记录到文件以便分析</span><br></pre></td></tr></table></figure>
<hr>
<h3 id="综上"><a href="#综上" class="headerlink" title="综上"></a>综上</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">1.堆设置</span><br><span class="line">  * -Xms: 初始堆大小</span><br><span class="line">  * -Xmx: 最大堆大小</span><br><span class="line">  * -XX:NewSize=n:  设置年轻代大小</span><br><span class="line">  * -XX:NewRatio=n: 设置年轻代和年老代的比值.</span><br><span class="line">    如:为3,表示年轻代与年老代比值为1:3,年轻代占整个年轻代年老代和的1/4</span><br><span class="line">  * -XX:SurvivorRatio=n: 年轻代中Eden区与两个Survivor区的比值.</span><br><span class="line">    注意Survivor区有两个.如：3，表示Eden:Survivor=3:2，一个Survivor区占整个年轻代的1/5</span><br><span class="line">  * -XX:MaxPermSize=n: 设置持久代大小</span><br><span class="line">2.收集器设置</span><br><span class="line">  * -XX:+UseSerialGC: 设置串行收集器</span><br><span class="line">  * -XX:+UseParallelGC: 设置并行收集器</span><br><span class="line">  * -XX:+UseParalledlOldGC: 设置并行年老代收集器</span><br><span class="line">  * -XX:+UseConcMarkSweepGC: 设置并发收集器</span><br><span class="line">3.垃圾回收统计信息</span><br><span class="line">  * -XX:+PrintGC</span><br><span class="line">  * -XX:+PrintGCDetails</span><br><span class="line">  * -XX:+PrintGCTimeStamps</span><br><span class="line">  * -Xloggc:filename</span><br><span class="line">4.并行收集器设置</span><br><span class="line">  * -XX:ParallelGCThreads=n: 设置并行收集器收集时使用的CPU数.并行收集线程数</span><br><span class="line">  * -XX:MaxGCPauseMillis=n:</span><br><span class="line">  * -XX:GCTimeRatio=n: 设置垃圾回收时间占程序运行时间的百分比.公式为1/(1+n)</span><br><span class="line">5.并发收集器设置</span><br><span class="line">  * -XX:ParallelGCThreads=n:</span><br></pre></td></tr></table></figure>
<hr>
<h3 id="调优总结"><a href="#调优总结" class="headerlink" title="调优总结:"></a>调优总结:</h3><ol>
<li>年轻代大小选择<ol>
<li>响应时间优先的应用</li>
<li>吞吐量优先的应用<ul>
<li>尽可能的设置大,可能到达Gbit的程度.<br>因为对响应时间没有要求,垃圾收集可以并行进行,一般适合8CPU以上的应用</li>
</ul>
</li>
</ol>
</li>
<li>老年代大小选择<ol>
<li>响应时间优先的应用<ul>
<li>年老代使用并发收集器,所以其大小需要小心设置,一般要考虑并发会话率和会话持续时间等一些参数</li>
<li>如果堆设置小了,可以会造成内存碎片、高回收频率以及应用暂停而使用传统的标记清除方式</li>
<li>如果堆大了,则需要较长的收集时间</li>
<li>最优化的方案,一般需要参考以下数据获得：<ol>
<li>并发垃圾收集信息</li>
<li>持久代并发收集次数</li>
<li>传统GC信息</li>
<li>花在年轻代和年老代回收上的时间比例</li>
<li>减少年轻代和年老代花费的时间,一般会提高应用的效率</li>
</ol>
</li>
</ul>
</li>
<li>吞吐量优先的应用<ul>
<li>一般吞吐量优先的应用都有一个很大的年轻代和一个较小的年老代</li>
<li>原因是,这样可以尽可能回收掉大部分短期对象,减少中期的对象,而年老代尽存放长期存活对象</li>
</ul>
</li>
</ol>
</li>
</ol>
<hr>
<h3 id="较小堆引起的碎片问题"><a href="#较小堆引起的碎片问题" class="headerlink" title="较小堆引起的碎片问题:"></a>较小堆引起的碎片问题:</h3><p><em>因为年老代的并发收集器使用标记、清除算法，所以不会对堆进行压缩<br>当收集器回收时,他会把相邻的空间进行合并,这样可以分配给较大的对象.<br>但是,当堆空间较小时,运行一段时间以后,就会出现”碎片”,如果并发收集器找不到足够的空间.<br>那么并发收集器将会停止,然后使用传统的标记、清除方式进行回收<br>如果出现”碎片,可能需要进行如下配置:<br>-XX:+UseCMSCompactAtFullCollection: 使用并发收集器时,开启对年老代的压缩<br>-XX:CMSFullGCsBeforeCompaction=0: 上面配置开启的情况下,这里设置多少次Full GC后,对年老代进行压缩</em></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.smallasa.com/2017/02/03/java-jvm-opts/" data-id="cjavy9jxc00450coq7tsm2crs" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-node-install" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/02/01/node-install/" class="article-date">
  <time datetime="2017-02-01T02:15:24.000Z" itemprop="datePublished">2017-02-01</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/node/">node</a>►<a class="article-category-link" href="/categories/node/node-install/">node install</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/02/01/node-install/">node install</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <ol>
<li><p>node install(方法一)</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">1.安装nvm</span><br><span class="line">[root@dev app]<span class="comment"># wget -qO- https://raw.githubusercontent.com/creationix/nvm/v0.32.1/install.sh | bash</span></span><br><span class="line"></span><br><span class="line">2.安装nodejs</span><br><span class="line">[root@dev app]<span class="comment"># NVMW_NODEJS_ORG_MIRROR=https://npm.taobao.org/mirrors/node nvm install v6.9.1</span></span><br><span class="line"></span><br><span class="line">3.安装</span><br><span class="line">[root@dev app]<span class="comment"># npm --registry=http://r.cnpmjs.org install -g hexo-cli</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>node install(方法二)</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[root@dev app]<span class="comment"># xz -d node-v8.1.3-linux-x64.tar.xz</span></span><br><span class="line">[root@dev app]<span class="comment"># tar xf node-v8.1.3-linux-x64.tar</span></span><br><span class="line">[root@dev app]<span class="comment"># mv node-v8.1.3-linux-x64 /mnt/app/node</span></span><br><span class="line">[root@dev app]<span class="comment"># chown -R root.root /mnt/app/node</span></span><br><span class="line"></span><br><span class="line">[root@dev app]<span class="comment"># echo 'NODE_HOME=/mnt/app/node' |tee  /etc/profile.d/node.sh</span></span><br><span class="line">[root@dev app]<span class="comment"># echo 'NODE_PATH=$&#123;NODE_HOME&#125;/lib/node_modules' |tee -a /etc/profile.d/node.sh</span></span><br><span class="line">[root@dev app]<span class="comment"># echo 'export PATH=$&#123;PATH&#125;:$&#123;NODE_HOME&#125;/bin' |tee -a /etc/profile.d/node.sh</span></span><br><span class="line">[root@dev app]<span class="comment"># source /etc/profile</span></span><br><span class="line"></span><br><span class="line">[root@dev app]<span class="comment"># node -v</span></span><br><span class="line">v8.1.3</span><br></pre></td></tr></table></figure>
</li>
<li><p>修改npm源</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@dev app]<span class="comment"># echo 'registry = https://registry.npm.taobao.org' &gt; ~/.npmrc</span></span><br><span class="line">或者:</span><br><span class="line">[root@dev app]<span class="comment"># npm --registry http://registry.cnpmjs.org info express</span></span><br><span class="line"></span><br><span class="line">[root@dev app]<span class="comment"># npm -v</span></span><br><span class="line">5.0.3</span><br></pre></td></tr></table></figure>
</li>
<li><p>补充说明</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">tar cf xxx.tar xxx</span><br><span class="line">xz -z xxx.tar</span><br><span class="line">xz -d xxx.tar.xz*</span><br></pre></td></tr></table></figure>
</li>
<li><p>windows安装nodejs</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">1.下载软件包并安装</span><br><span class="line">2.打开软件包位置,并创建两个目录&quot;npm_global&quot;和&quot;npm_cache&quot;</span><br><span class="line">3.打开git-cmd.ext,设置npm参数</span><br><span class="line">  npm config set prefix &quot;D:\Program Files\nodejs\npm_global&quot;</span><br><span class="line">  npm config set cache &quot;D:\Program Files\nodejs\npm_cache&quot;</span><br><span class="line">4.将&quot;D:\Program Files\nodejs\npm_global&quot;添加到环境变量</span><br><span class="line">  D:\Program Files\nodejs\node_modules</span><br><span class="line">5.测试</span><br><span class="line">  npm config get proxy</span><br><span class="line">  npm config get https-proxy</span><br><span class="line">  如果返回值不为null,继续执行：</span><br><span class="line">  npm config set proxy null</span><br><span class="line">  npm config set https-proxy null</span><br><span class="line">  npm config set registry http://registry.cnpmjs.org/</span><br><span class="line">  直接编辑c盘下的.npmrc文件，将registry的值修改为：</span><br><span class="line">  registry = http://registry.cnpmjs.org</span><br></pre></td></tr></table></figure>
</li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.smallasa.com/2017/02/01/node-install/" data-id="cjavy9k1z00790coq5ridc04t" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-java-env" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/02/01/java-env/" class="article-date">
  <time datetime="2017-02-01T02:11:30.000Z" itemprop="datePublished">2017-02-01</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/java/">java</a>►<a class="article-category-link" href="/categories/java/java-env/">java env</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/02/01/java-env/">java env</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="java-env"><a href="#java-env" class="headerlink" title="java env"></a>java env</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost app]<span class="comment"># tar xzf jdk-8u111-linux-x64.tar.gz</span></span><br><span class="line">[root@localhost app]<span class="comment"># mv jdk1.8.0_111 /mnt/app/java</span></span><br><span class="line">[root@localhost app]<span class="comment"># echo 'JAVA_HOME=/mnt/app/java' | tee /etc/profile.d/java.sh</span></span><br><span class="line">[root@localhost app]<span class="comment"># echo 'JRE_HOME=$&#123;JAVA_HOME&#125;/jre' | tee -a /etc/profile.d/java.sh</span></span><br><span class="line">[root@localhost app]<span class="comment"># echo 'CLASSPATH=.:$&#123;JAVA_HOME&#125;/lib:$&#123;JRE_HOME&#125;/lib' | tee -a /etc/profile.d/java.sh</span></span><br><span class="line">[root@localhost app]<span class="comment"># echo 'export PATH=$&#123;JAVA_HOME&#125;/bin:$PATH' | tee -a /etc/profile.d/java.sh</span></span><br><span class="line">[root@localhost app]<span class="comment"># source  /etc/profile</span></span><br><span class="line">[root@localhost app]<span class="comment"># java -version</span></span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.smallasa.com/2017/02/01/java-env/" data-id="cjavy9jx600400coqbee7fmgf" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-git-gogs" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/02/01/git-gogs/" class="article-date">
  <time datetime="2017-02-01T02:02:40.000Z" itemprop="datePublished">2017-02-01</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/automation/">automation</a>►<a class="article-category-link" href="/categories/automation/git/">git</a>►<a class="article-category-link" href="/categories/automation/git/git-gogs/">git gogs</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/02/01/git-gogs/">git gogs</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="gogs-install"><a href="#gogs-install" class="headerlink" title="gogs install"></a>gogs install</h3><ol>
<li><p>查看系统版本</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># cat /etc/redhat-release</span></span><br><span class="line">CentOS Linux release 7.3.1611 (Core)</span><br></pre></td></tr></table></figure>
</li>
<li><p>设置主机名</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># hostname gogs &amp;&amp; echo gogs | tee /etc/hostname</span></span><br><span class="line">[root@localhost ~]<span class="comment"># echo '192.168.13.246 gogs' |tee -a /etc/hosts</span></span><br><span class="line">[root@localhost ~]<span class="comment"># $SHELL</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>硬盘格式化挂载</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@gogs ~]<span class="comment"># mkfs.xfs /dev/vdb</span></span><br><span class="line">[root@gogs ~]<span class="comment"># echo '/dev/vdb /mnt xfs defaults 0 0' | tee -a /etc/fstab</span></span><br><span class="line">[root@gogs ~]<span class="comment"># mount -a</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>设置打开最大文件数</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@gogs ~]<span class="comment"># echo '* - nproc  65535' | tee -a /etc/security/limits.conf</span></span><br><span class="line">[root@gogs ~]<span class="comment"># echo '* - nofile 65535' | tee -a /etc/security/limits.conf</span></span><br><span class="line">[root@gogs ~]<span class="comment"># ls /etc/security/limits.d/*|xargs rm -f</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>设置yum源</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@gogs ~]<span class="comment"># mkdir /etc/yum.repos.d/backup &amp;&amp; mv /etc/yum.repos.d/&#123;*,backup&#125;</span></span><br><span class="line">[root@gogs ~]<span class="comment"># rpm --import http://yum.ops.com/epel/RPM-GPG-KEY-EPEL-7</span></span><br><span class="line">[root@gogs ~]<span class="comment"># curl -o /etc/yum.repos.d/epel.repo http://yum.ops.com/epel-7.repo</span></span><br><span class="line">[root@gogs ~]<span class="comment"># rpm --import http://yum.ops.com/centos/RPM-GPG-KEY-CentOS-7</span></span><br><span class="line">[root@gogs ~]<span class="comment"># curl -o /etc/yum.repos.d/CentOS-Base.repo http://yum.ops.com/centos-7.repo</span></span><br><span class="line">[root@gogs ~]<span class="comment"># yum clean all &amp;&amp; yum makecache</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>安装基础依赖库和常用工具包</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">[root@gogs ~]<span class="comment"># yum -y groupinstall "Development Tools"</span></span><br><span class="line">[root@gogs ~]<span class="comment"># yum -y install \</span></span><br><span class="line">make cmake \</span><br><span class="line">bison-devel \</span><br><span class="line">bzip2-devel \</span><br><span class="line">zlib zlib-devel \</span><br><span class="line">openssl openssl-devel openssl-libs openssl-static \</span><br><span class="line">pcre pcre-devel pcre-static \</span><br><span class="line">ncurses ncurses-devel ncurses-libs \</span><br><span class="line">mariadb mariadb-devel\</span><br><span class="line">curl-devel \</span><br><span class="line">expat-devel \</span><br><span class="line">gettext-devel \</span><br><span class="line">openldap openldap-devel \</span><br><span class="line">readline readline-devel readline-static \</span><br><span class="line">libssh2 libssh2-devel \</span><br><span class="line">unixODBC unixODBC-devel \</span><br><span class="line">sqlite sqlite-devel \</span><br><span class="line">tcl tcl-devel \</span><br><span class="line">perl-Digest-SHA1 \</span><br><span class="line">python-libs python-devel python2-pip python-crypto \</span><br><span class="line">perl-libs \</span><br><span class="line">perl-ExtUtils-MakeMaker \</span><br><span class="line">GeoIP GeoIP-devel \</span><br><span class="line">gperftools gperftools-devel gperftools-libs \</span><br><span class="line">libatomic_ops-devel \</span><br><span class="line">gtest gtest-devel \</span><br><span class="line">gdk-pixbuf2 gdk-pixbuf2-deve \</span><br><span class="line">libffi libffi-devel \</span><br><span class="line">libcurl libcurl-devel \</span><br><span class="line">http-parser http-parser-devel \</span><br><span class="line">libxml2* \</span><br><span class="line">libmcrypt* \</span><br><span class="line">libtool-ltdl-devel*</span><br><span class="line">[root@gogs ~]<span class="comment"># yum -y install bash-completion fop lftp ntp ntpdate vim wget telnet dstat tree lrzsz net-tools nmap-ncat nmap sysstat dmidecode bc</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>关闭selinux</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@gogs ~]<span class="comment"># setenforce 0</span></span><br><span class="line">[root@gogs ~]<span class="comment"># sed -i s/'SELINUX=enforcing'/'SELINUX=disabled'/g /etc/selinux/config</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>关闭防火墙</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@gogs ~]<span class="comment"># systemctl stop firewalld &amp;&amp; systemctl disable firewalld</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>设置系统时区</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">[root@gogs ~]<span class="comment"># [ -f /etc/localtime ] &amp;&amp; cp -f /usr/share/zoneinfo/Asia/Shanghai /etc/localtime</span></span><br><span class="line">[root@gogs ~]<span class="comment"># [ -f /etc/sysconfig/clock ] &amp;&amp; echo 'ZONE="Asia/Shanghai"' | tee /etc/sysconfig/clock</span></span><br><span class="line">[root@gogs ~]<span class="comment"># [ -f /etc/timezone ] &amp;&amp; echo 'Asia/Shanghai' | tee /etc/timezone</span></span><br><span class="line">[root@gogs ~]<span class="comment"># [ -f /etc/sysconfig/ntpd ] &amp;&amp; echo 'SYNC_HWCLOCK=yes' | tee -a /etc/sysconfig/ntpd</span></span><br><span class="line"></span><br><span class="line">[root@gogs ~]<span class="comment"># ntpdate cn.pool.ntp.org</span></span><br><span class="line"></span><br><span class="line">[root@gogs ~]<span class="comment"># cp -f /etc/&#123;ntp.conf,ntp.conf.bak&#125;</span></span><br><span class="line">[root@gogs ~]<span class="comment"># cat &gt; /etc/ntp.conf &lt;&lt;EOF</span></span><br><span class="line">driftfile /var/lib/ntp/drift</span><br><span class="line">restrict default nomodify notrap nopeer noquery</span><br><span class="line">restrict 127.0.0.1</span><br><span class="line">restrict ::1</span><br><span class="line">server cn.pool.ntp.org prefer</span><br><span class="line">server 0.centos.pool.ntp.org iburst</span><br><span class="line">server 1.centos.pool.ntp.org iburst</span><br><span class="line">server 2.centos.pool.ntp.org iburst</span><br><span class="line">server 3.centos.pool.ntp.org iburst</span><br><span class="line">includefile /etc/ntp/crypto/pw</span><br><span class="line">keys /etc/ntp/keys</span><br><span class="line"><span class="built_in">disable</span> monitor</span><br><span class="line">EOF</span><br><span class="line"></span><br><span class="line">[root@gogs ~]<span class="comment"># cp -f /etc/ntp/&#123;step-tickers,step-tickers.bak&#125;</span></span><br><span class="line">[root@gogs ~]<span class="comment"># cat &gt; /etc/ntp/step-tickers &lt;&lt;EOF</span></span><br><span class="line">cn.pool.ntp.org</span><br><span class="line">0.centos.pool.ntp.org</span><br><span class="line">1.centos.pool.ntp.org</span><br><span class="line">2.centos.pool.ntp.org</span><br><span class="line">3.centos.pool.ntp.org</span><br><span class="line">EOF</span><br><span class="line"></span><br><span class="line">[root@gogs ~]<span class="comment"># systemctl start ntpd &amp;&amp; systemctl enable ntpd</span></span><br><span class="line"></span><br><span class="line">[root@gogs ~]<span class="comment"># iptables -I INPUT -p udp --dport 123 -j ACCEPT</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>安装python,并设置python源</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">[root@gogs ~]<span class="comment"># git clone https://github.com/yyuu/pyenv.git /usr/local/pyenv</span></span><br><span class="line"></span><br><span class="line">[root@gogs ~]<span class="comment"># echo 'export PYENV_ROOT="/usr/local/pyenv"' | tee /etc/profile.d/pyenv.sh</span></span><br><span class="line">[root@gogs ~]<span class="comment"># echo 'export PATH="$PYENV_ROOT/bin:$PATH"' | tee -a /etc/profile.d/pyenv.sh</span></span><br><span class="line">[root@gogs ~]<span class="comment"># echo 'eval "$(pyenv init -)"' | tee -a /etc/profile.d/pyenv.sh</span></span><br><span class="line">[root@gogs ~]<span class="comment"># source /etc/profile</span></span><br><span class="line"></span><br><span class="line">[root@gogs ~]<span class="comment"># mkdir -p $&#123;PYENV_ROOT&#125;/cache</span></span><br><span class="line">[root@gogs ~]<span class="comment"># ls $&#123;PYENV_ROOT&#125;/cache/Python-2.7.13.tar.xz  将源码包放到这里</span></span><br><span class="line">[root@gogs ~]<span class="comment"># pyenv install 2.7.13</span></span><br><span class="line">[root@gogs ~]<span class="comment"># pyenv local 2.7.13</span></span><br><span class="line"></span><br><span class="line">[root@gogs ~]<span class="comment"># mkdir ~/.pip</span></span><br><span class="line">[root@gogs ~]<span class="comment"># cat &gt; ~/.pip/pip.conf &lt;&lt;EOF</span></span><br><span class="line">[global]</span><br><span class="line">trusted-host=mirrors.aliyun.com</span><br><span class="line">index-url=http://mirrors.aliyun.com/pypi/simple/</span><br><span class="line">[list]</span><br><span class="line">format=columns</span><br><span class="line">EOF</span><br></pre></td></tr></table></figure>
</li>
<li><p>设置开机启动文件权限</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@gogs ~]<span class="comment"># chmod +x /etc/rc.d/rc.local</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>创建常见目录</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@gogs ~]<span class="comment"># mkdir -p /mnt/&#123;app,data,log,web,ops/&#123;app,data,cron&#125;&#125;</span></span><br></pre></td></tr></table></figure>
</li>
</ol>
<hr>
<ol>
<li><p>创建用户</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@gogs app]<span class="comment"># useradd -s /sbin/nologin git</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>golang install</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@gogs app]<span class="comment"># tar xzf go1.8.4.linux-amd64.tar.gz -C /mnt/app/</span></span><br><span class="line">[root@gogs app]<span class="comment"># chown -R git.git /mnt/app/go</span></span><br><span class="line"></span><br><span class="line">[root@gogs app]<span class="comment"># echo 'export GOROOT=/mnt/app/go' |tee /etc/profile.d/go.sh</span></span><br><span class="line">[root@gogs app]<span class="comment"># echo 'export GOPATH=$HOME/work'  |tee -a /etc/profile.d/go.sh</span></span><br><span class="line">[root@gogs app]<span class="comment"># echo 'export PATH=$GOROOT/bin:$PATH' |tee -a /etc/profile.d/go.sh</span></span><br><span class="line">[root@gogs app]<span class="comment"># source /etc/profile</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>mysql install</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">[root@gogs app]<span class="comment"># yum -y install mariadb-server mariadb</span></span><br><span class="line">[root@gogs app]<span class="comment"># cat &gt; /etc/my.cnf &lt;&lt;EOF</span></span><br><span class="line">[mysqld]</span><br><span class="line">datadir=/var/lib/mysql</span><br><span class="line">socket=/var/lib/mysql/mysql.sock</span><br><span class="line">symbolic-links=0</span><br><span class="line">default-storage-engine=INNODB</span><br><span class="line">character_set_server = utf8</span><br><span class="line">[mysqld_safe]</span><br><span class="line"><span class="built_in">log</span>-error=/var/<span class="built_in">log</span>/mariadb/mariadb.log</span><br><span class="line">pid-file=/var/run/mariadb/mariadb.pid</span><br><span class="line">!includedir /etc/my.cnf.d</span><br><span class="line">EOF</span><br><span class="line"></span><br><span class="line">[root@gogs app]<span class="comment"># systemctl start mariadb</span></span><br><span class="line">[root@gogs app]<span class="comment"># systemctl enable mariadb</span></span><br><span class="line"></span><br><span class="line">[root@gogs app]<span class="comment"># mysql</span></span><br><span class="line">MariaDB [(none)]&gt; CREATE DATABASE `gogs` DEFAULT CHARACTER SET utf8mb4;</span><br><span class="line">MariaDB [(none)]&gt; GRANT ALL PRIVILEGES ON gogs.* TO <span class="string">'gogs'</span>@<span class="string">'localhost'</span> IDENTIFIED BY <span class="string">'gogs123'</span>;</span><br><span class="line">MariaDB [(none)]&gt; FLUSH PRIVILEGES;</span><br></pre></td></tr></table></figure>
</li>
<li><p>gogs install</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br></pre></td><td class="code"><pre><span class="line">[root@gogs app]<span class="comment"># tar xzf linux_amd64.tar.gz -C /mnt/app/</span></span><br><span class="line"></span><br><span class="line">[root@gogs app]<span class="comment"># cd /mnt/app/gogs/</span></span><br><span class="line">[root@gogs gogs]<span class="comment"># mkdir -p custom/conf log data</span></span><br><span class="line">[root@gogs gogs]<span class="comment"># cat &gt; custom/conf/app.ini &lt;&lt;EOF</span></span><br><span class="line">APP_NAME = Gogs</span><br><span class="line">RUN_USER = git</span><br><span class="line">RUN_MODE = prod</span><br><span class="line"></span><br><span class="line">[database]</span><br><span class="line">DB_TYPE  = mysql</span><br><span class="line">HOST     = 127.0.0.1:3306</span><br><span class="line">NAME     = gogs</span><br><span class="line">USER     = gogs</span><br><span class="line">PASSWD   = gogs</span><br><span class="line">SSL_MODE = <span class="built_in">disable</span></span><br><span class="line">PATH     = data/gogs.db</span><br><span class="line"></span><br><span class="line">[repository]</span><br><span class="line">ROOT = /mnt/data/gogs.repo</span><br><span class="line"></span><br><span class="line">[server]</span><br><span class="line">DOMAIN           = &#123;gogs.ops.com&#125;</span><br><span class="line">HTTP_PORT        = 3000</span><br><span class="line">ROOT_URL         = https://&#123;gogs.ops.com&#125;</span><br><span class="line">DISABLE_SSH      = <span class="literal">false</span></span><br><span class="line">SSH_PORT         = 22</span><br><span class="line">START_SSH_SERVER = <span class="literal">false</span></span><br><span class="line">OFFLINE_MODE     = <span class="literal">false</span></span><br><span class="line"></span><br><span class="line">[mailer]</span><br><span class="line">ENABLED = <span class="literal">true</span></span><br><span class="line">HOST    = smtp.exmail.qq.com:465</span><br><span class="line">FROM    = gogs@&#123;a.com&#125;</span><br><span class="line">USER    = gogs@&#123;a.com&#125;</span><br><span class="line">PASSWD  = &#123;mail passwd&#125;</span><br><span class="line"></span><br><span class="line">[service]</span><br><span class="line">REGISTER_EMAIL_CONFIRM = <span class="literal">true</span></span><br><span class="line">ENABLE_NOTIFY_MAIL     = <span class="literal">true</span></span><br><span class="line">DISABLE_REGISTRATION   = <span class="literal">true</span></span><br><span class="line">ENABLE_CAPTCHA         = <span class="literal">false</span></span><br><span class="line">REQUIRE_SIGNIN_VIEW    = <span class="literal">true</span></span><br><span class="line"></span><br><span class="line">[picture]</span><br><span class="line">DISABLE_GRAVATAR        = <span class="literal">false</span></span><br><span class="line">ENABLE_FEDERATED_AVATAR = <span class="literal">true</span></span><br><span class="line"></span><br><span class="line">[session]</span><br><span class="line">PROVIDER = file</span><br><span class="line"></span><br><span class="line">[<span class="built_in">log</span>]</span><br><span class="line">MODE      = file</span><br><span class="line">LEVEL     = Info</span><br><span class="line">ROOT_PATH = /mnt/app/gogs/<span class="built_in">log</span></span><br><span class="line"></span><br><span class="line">[security]</span><br><span class="line">INSTALL_LOCK = <span class="literal">true</span></span><br><span class="line">SECRET_KEY   = 30EYn8NSl5dadf</span><br><span class="line">EOF</span><br><span class="line"></span><br><span class="line">[root@gogs app]<span class="comment"># mkdir -p /mnt/data/gogs.repo</span></span><br><span class="line">[root@gogs app]<span class="comment"># chown -R git.git /mnt/app/gogs/</span></span><br><span class="line">[root@gogs app]<span class="comment"># chown -R git.git /mnt/data/gogs.repo</span></span><br><span class="line"></span><br><span class="line">[root@gogs app]<span class="comment"># cat &gt; /usr/lib/systemd/system/gogs.service &lt;&lt;EOF</span></span><br><span class="line">[Unit]</span><br><span class="line">Description=Gogs</span><br><span class="line">After=syslog.target</span><br><span class="line">After=network.target</span><br><span class="line">After=mariadb.service mysqld.service postgresql.service memcached.service redis.service</span><br><span class="line"></span><br><span class="line">[Service]</span><br><span class="line">LimitMEMLOCK=infinity</span><br><span class="line">LimitNOFILE=65535</span><br><span class="line">Type=simple</span><br><span class="line">User=git</span><br><span class="line">Group=git</span><br><span class="line">WorkingDirectory=/mnt/app/gogs</span><br><span class="line">ExecStart=/mnt/app/gogs/gogs web</span><br><span class="line">Restart=always</span><br><span class="line">Environment=USER=git HOME=/home/git</span><br><span class="line"></span><br><span class="line">[Install]</span><br><span class="line">WantedBy=multi-user.target</span><br><span class="line">EOF</span><br><span class="line">[root@gogs app]<span class="comment"># systemctl daemon-reload</span></span><br><span class="line">[root@gogs app]<span class="comment"># systemctl start gogs</span></span><br><span class="line">[root@gogs app]<span class="comment"># systemctl enable gogs</span></span><br></pre></td></tr></table></figure>
</li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.smallasa.com/2017/02/01/git-gogs/" data-id="cjavy9jwb00350coq96qdyuvu" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-git-gitolite" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/02/01/git-gitolite/" class="article-date">
  <time datetime="2017-02-01T01:43:42.000Z" itemprop="datePublished">2017-02-01</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/automation/">automation</a>►<a class="article-category-link" href="/categories/automation/git/">git</a>►<a class="article-category-link" href="/categories/automation/git/git-gitolite/">git gitolite</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/02/01/git-gitolite/">git gitolite</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="gitolite简介"><a href="#gitolite简介" class="headerlink" title="gitolite简介"></a>gitolite简介</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">gitolite是一款perl语言开发的git服务管理工具,通过公钥对用户进行认证,并能够通过配置文件对写操作进行基于分之和路径的精细授权</span><br><span class="line">gitolite采用SSH协议并且使用SSH公钥认证</span><br></pre></td></tr></table></figure>
<h3 id="Git使用SSH协议"><a href="#Git使用SSH协议" class="headerlink" title="Git使用SSH协议:"></a>Git使用SSH协议:</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">SSH协议用于为Git提供远程读写操作,是远程写操作的标准服务,在智能HTTP协议出现之前,甚至是写操作的唯一标准服务.</span><br><span class="line"></span><br><span class="line">SSH协议有两种方式来实现Git服务:</span><br><span class="line">方式一: 使用标准的SSH账号访问版本库</span><br><span class="line">方式二: 所有用户使用同一个专用的SSH账号访问版本库,访问时通过公钥认证的方式.通过在建立连接时所用的不同公钥来区分不同的用户身份.</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">1.指定创建公钥/私钥:</span><br><span class="line">ssh-keygen -f ~/.ssh/<span class="built_in">test</span></span><br><span class="line"></span><br><span class="line">2.拷贝公钥到服务端:</span><br><span class="line">ssh-copy-id -i ~/.ssh/test.pub user@server</span><br><span class="line"></span><br><span class="line">3.连接测试:</span><br><span class="line">ssh user@server 默认使用的是~/.ssh/id_rsa.pub公钥</span><br><span class="line"></span><br><span class="line">4.通过创建主机别名,在连接主机时选择特定的公钥: ~/.ssh/config</span><br><span class="line">host bj              //定义的别名</span><br><span class="line">  user git           //表示登录时使用的用户名</span><br><span class="line">  hostname bj.com    //表示登录主机的主机名</span><br><span class="line">  port 22</span><br><span class="line">  identityfile ~/.ssh/beijing   //认证时使用的公钥文件</span><br><span class="line"></span><br><span class="line">5.测试</span><br><span class="line">ssh bj</span><br><span class="line">git <span class="built_in">clone</span> bj:path/to/repos/myrepo.git</span><br></pre></td></tr></table></figure>
<hr>
<h2 id="gitolite安装"><a href="#gitolite安装" class="headerlink" title="gitolite安装"></a>gitolite安装</h2><h3 id="1-创建用户-Server"><a href="#1-创建用户-Server" class="headerlink" title="1.创建用户(Server)"></a>1.创建用户(Server)</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># useradd git</span></span><br><span class="line">[root@localhost ~]<span class="comment"># echo 'y+&#123;3InfLAz' | passwd --stdin git</span></span><br></pre></td></tr></table></figure>
<h3 id="2-下载gitolite"><a href="#2-下载gitolite" class="headerlink" title="2.下载gitolite"></a>2.下载gitolite</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># su - git</span></span><br><span class="line">[git@localhost ~]$ git <span class="built_in">clone</span> https://github.com/sitaramc/gitolite.git</span><br><span class="line">[git@localhost ~]$ mkdir -p <span class="variable">$HOME</span>/bin</span><br><span class="line">[git@localhost ~]$ gitolite/install -to <span class="variable">$HOME</span>/bin</span><br></pre></td></tr></table></figure>
<h3 id="3-创建密钥对-Client"><a href="#3-创建密钥对-Client" class="headerlink" title="3.创建密钥对(Client)"></a>3.创建密钥对(Client)</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># ssh-keygen</span></span><br><span class="line">[root@localhost ~]<span class="comment"># cp ~/.ssh/id_rsa.pub /tmp/admin.pub</span></span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># su - git</span></span><br><span class="line">[git@localhost ~]$ bin/gitolite setup -pk /tmp/admin.pub</span><br><span class="line">Initialized empty Git repository <span class="keyword">in</span> /home/git/repositories/gitolite-admin.git/</span><br><span class="line">Initialized empty Git repository <span class="keyword">in</span> /home/git/repositories/testing.git/</span><br><span class="line">WARNING: /home/git/.ssh/authorized_keys missing; creating a new one</span><br><span class="line">    (this is normal on a brand new install)</span><br></pre></td></tr></table></figure>
<h3 id="4-克隆git管理"><a href="#4-克隆git管理" class="headerlink" title="4.克隆git管理"></a>4.克隆git管理</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># git clone git@192.168.10.75:gitolite-admin</span></span><br><span class="line">Cloning into <span class="string">'gitolite-admin'</span>...</span><br><span class="line">remote: Counting objects: 6, <span class="keyword">done</span>.</span><br><span class="line">remote: Compressing objects: 100% (4/4), <span class="keyword">done</span>.</span><br><span class="line">remote: Total 6 (delta 0), reused 0 (delta 0)</span><br><span class="line">Receiving objects: 100% (6/6), <span class="keyword">done</span>.</span><br></pre></td></tr></table></figure>
<h3 id="5-客户提供ssh-public-key"><a href="#5-客户提供ssh-public-key" class="headerlink" title="5.客户提供ssh public key"></a>5.客户提供ssh public key</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ ssh-keygen -t rsa -f ~/.ssh/liupeng</span><br></pre></td></tr></table></figure>
<h3 id="6-让客户将生成的liupeng-pub放到gitolite-admin-keydir目录下"><a href="#6-让客户将生成的liupeng-pub放到gitolite-admin-keydir目录下" class="headerlink" title="6.让客户将生成的liupeng.pub放到gitolite-admin/keydir目录下"></a>6.让客户将生成的liupeng.pub放到gitolite-admin/keydir目录下</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost keydir]<span class="comment"># pwd</span></span><br><span class="line">/root/gitolite-admin/keydir</span><br><span class="line"></span><br><span class="line">[root@localhost keydir]<span class="comment"># ls -l liupeng.pub</span></span><br><span class="line">-rw-r--r-- 1 root root 403 Nov 24 19:48 liupeng.pub</span><br></pre></td></tr></table></figure>
<h3 id="7-设置用户权限"><a href="#7-设置用户权限" class="headerlink" title="7.设置用户权限"></a>7.设置用户权限</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost conf]<span class="comment"># pwd</span></span><br><span class="line">/root/gitolite-admin/conf</span><br><span class="line">[root@localhost conf]<span class="comment"># vim gitolite.conf</span></span><br><span class="line">repo gitolite-admin</span><br><span class="line">    RW+     =   admin</span><br><span class="line">repo devops</span><br><span class="line">    RW+     =   liupeng</span><br><span class="line">    R       =   @all</span><br></pre></td></tr></table></figure>
<h3 id="8-将配置上传"><a href="#8-将配置上传" class="headerlink" title="8.将配置上传"></a>8.将配置上传</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost gitolite-admin]<span class="comment"># pwd</span></span><br><span class="line">/root/gitolite-admin</span><br><span class="line">[root@localhost gitolite-admin]<span class="comment"># git config --global user.email "liu_p@jointwisdom.cn"</span></span><br><span class="line">[root@localhost gitolite-admin]<span class="comment"># git config --global user.name "liu_p"</span></span><br><span class="line">[root@localhost gitolite-admin]<span class="comment"># git config --global push.default simple</span></span><br><span class="line"></span><br><span class="line">[root@localhost gitolite-admin]<span class="comment"># git add .</span></span><br><span class="line">[root@localhost gitolite-admin]<span class="comment"># git commit -m "add repo devops"</span></span><br><span class="line">[root@localhost gitolite-admin]<span class="comment"># git push</span></span><br></pre></td></tr></table></figure>
<h3 id="9-客户端设置别名"><a href="#9-客户端设置别名" class="headerlink" title="9.客户端设置别名"></a>9.客户端设置别名</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$vim</span> ~/.ssh/config</span><br><span class="line">host devops</span><br><span class="line">  user git</span><br><span class="line">  hostname 124.27.242.3</span><br><span class="line">  port 520</span><br><span class="line">  identityfile ~/.ssh/liupeng</span><br></pre></td></tr></table></figure>
<h3 id="10-客户端克隆"><a href="#10-客户端克隆" class="headerlink" title="10.客户端克隆"></a>10.客户端克隆</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$git</span> <span class="built_in">clone</span> git@devops:devops.git</span><br><span class="line"></span><br><span class="line"><span class="variable">$git</span> config --global user.email <span class="string">"liu_p@jointwisdom.cn"</span></span><br><span class="line"><span class="variable">$git</span> config --global user.name <span class="string">"liu_p"</span></span><br><span class="line"><span class="variable">$git</span> config --global push.default simple</span><br><span class="line"></span><br><span class="line"><span class="variable">$git</span> add .</span><br><span class="line"><span class="variable">$git</span> commit -m <span class="string">"update"</span></span><br><span class="line"><span class="variable">$git</span> push</span><br></pre></td></tr></table></figure>
<hr>
<h2 id="添加新用户-在gitserver上"><a href="#添加新用户-在gitserver上" class="headerlink" title="添加新用户(在gitserver上):"></a>添加新用户(在gitserver上):</h2><h3 id="1-生成ssh-key"><a href="#1-生成ssh-key" class="headerlink" title="1.生成ssh-key"></a>1.生成ssh-key</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># ssh-keygen -t rsa -C "test" -f ~/.ssh/test</span></span><br><span class="line">[root@localhost ~]<span class="comment"># cp ~/.ssh/genghongyu.pub gitolite-admin/keydir/genghongyu.pub</span></span><br></pre></td></tr></table></figure>
<h3 id="2-修改gitolite配置文件"><a href="#2-修改gitolite配置文件" class="headerlink" title="2.修改gitolite配置文件"></a>2.修改gitolite配置文件</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># vim gitolite-admin/conf/gitolite.conf</span></span><br><span class="line">@devssp  = <span class="built_in">test</span></span><br><span class="line">repo <span class="built_in">test</span></span><br><span class="line">    RW+     =   @devssp</span><br><span class="line">    R       =   @all</span><br><span class="line">[root@localhost ~]<span class="comment"># cd gitolite-admin/</span></span><br><span class="line">[root@localhost gitolite-admin]<span class="comment"># git add .</span></span><br><span class="line">[root@localhost gitolite-admin]<span class="comment"># git commit -m "add genghongyu to devssp"</span></span><br><span class="line">[root@localhost gitolite-admin]<span class="comment"># git push</span></span><br></pre></td></tr></table></figure>
<h3 id="3-客户端将私钥-test-保存到本地-同时修改”-ssh-config”配置文件"><a href="#3-客户端将私钥-test-保存到本地-同时修改”-ssh-config”配置文件" class="headerlink" title="3.客户端将私钥(test)保存到本地,同时修改”.ssh/config”配置文件"></a>3.客户端将私钥(test)保存到本地,同时修改”.ssh/config”配置文件</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$ ls -l ~/.ssh/genghongyu</span><br><span class="line">-rw-r--r-- 1 admin 197121 1675 11月 25 14:50 /c/Users/admin/.ssh/genghongyu</span><br><span class="line">$ cat ~/.ssh/config</span><br><span class="line">host <span class="built_in">test</span></span><br><span class="line">  user git</span><br><span class="line">  hostname 192.168.10.75</span><br><span class="line">  port 22</span><br><span class="line">  identityfile ~/.ssh/<span class="built_in">test</span></span><br></pre></td></tr></table></figure>
<h3 id="4-客户端克隆"><a href="#4-客户端克隆" class="headerlink" title="4.客户端克隆"></a>4.客户端克隆</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$git</span> <span class="built_in">clone</span> git@<span class="built_in">test</span>:test.git</span><br></pre></td></tr></table></figure>
<hr>
<h2 id="apt-get-install-gitolite3"><a href="#apt-get-install-gitolite3" class="headerlink" title="apt-get install gitolite3"></a>apt-get install gitolite3</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">opsys@ubuntu:~$ sudo apt-get -y install openssh-server openssh-client</span><br><span class="line">opsys@ubuntu:~$ sudo apt-get -y install git</span><br><span class="line">opsys@ubuntu:~$ sudo adduser --system --shell /bin/sh --group --disabled-password --home /home/git git</span><br><span class="line">opsys@ubuntu:~$ sudo apt-get -y install gitolite3</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">opsys@ubuntu:~$ ssh-keygen</span><br><span class="line">opsys@ubuntu:~$ vim .ssh/config</span><br><span class="line">host gitserver</span><br><span class="line">  user git</span><br><span class="line">  hostname 192.168.10.19</span><br><span class="line">  port 22</span><br><span class="line">  identityfile ~/.ssh/id_rsa</span><br><span class="line">opsys@ubuntu:~$ cp .ssh/id_rsa.pub /tmp/opsys.pub</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">opsys@ubuntu:~$ sudo su -</span><br><span class="line">root@ubuntu:~<span class="comment"># su - git</span></span><br><span class="line">$ gitolite setup -pk /tmp/opsys.pub</span><br><span class="line">Initialized empty Git repository <span class="keyword">in</span> /home/git/repositories/gitolite-admin.git/</span><br><span class="line">Initialized empty Git repository <span class="keyword">in</span> /home/git/repositories/testing.git/</span><br><span class="line">WARNING: /home/git/.ssh missing; creating a new one</span><br><span class="line">    (this is normal on a brand new install)</span><br><span class="line">WARNING: /home/git/.ssh/authorized_keys missing; creating a new one</span><br><span class="line">    (this is normal on a brand new install)</span><br><span class="line">$ <span class="built_in">exit</span></span><br><span class="line">root@ubuntu:~<span class="comment"># exit</span></span><br><span class="line"><span class="built_in">logout</span></span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">opsys@ubuntu:~$ git <span class="built_in">clone</span> git@gitserver:gitolite-admin.git</span><br><span class="line">Cloning into <span class="string">'gitolite-admin'</span>...</span><br><span class="line">The authenticity of host <span class="string">'192.168.10.19 (192.168.10.19)'</span> can<span class="string">'t be established.</span></span><br><span class="line"><span class="string">ECDSA key fingerprint is SHA256:HgWObuliUUy72v/lIm9ZF4KviIDzEkABmsanW+H9dJU.</span></span><br><span class="line"><span class="string">Are you sure you want to continue connecting (yes/no)? yes</span></span><br><span class="line"><span class="string">Warning: Permanently added '</span>192.168.10.19<span class="string">' (ECDSA) to the list of known hosts.</span></span><br><span class="line"><span class="string">remote: Counting objects: 6, done.</span></span><br><span class="line"><span class="string">remote: Compressing objects: 100% (4/4), done.</span></span><br><span class="line"><span class="string">Receiving objects: 100% (6/6), 737 bytes | 0 bytes/s, done.</span></span><br><span class="line"><span class="string">remote: Total 6 (delta 0), reused 0 (delta 0)</span></span><br><span class="line"><span class="string">Checking connectivity... done.</span></span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">opsys@ubuntu:~$ <span class="built_in">cd</span> gitolite-admin/</span><br><span class="line">opsys@ubuntu:~/gitolite-admin$ cat conf/gitolite.conf</span><br><span class="line">@devops = penn admin</span><br><span class="line">repo gitolite-admin</span><br><span class="line">    RW+     =   opsys penn</span><br><span class="line">repo devops</span><br><span class="line">    RW      = @devops</span><br><span class="line">opsys@ubuntu:~/gitolite-admin$ ls keydir/</span><br><span class="line">admin.pub  opsys.pub  penn.pub</span><br><span class="line">opsys@ubuntu:~/gitolite-admin$ git config --global user.email <span class="string">"smallasa@sina.com"</span></span><br><span class="line">opsys@ubuntu:~/gitolite-admin$ git config --global user.name <span class="string">"penn"</span></span><br><span class="line">opsys@ubuntu:~/gitolite-admin$ git config --global push.default simple</span><br><span class="line">opsys@ubuntu:~/gitolite-admin$ git add conf keydir</span><br><span class="line">opsys@ubuntu:~/gitolite-admin$ git commit -m <span class="string">"create new repo: devops"</span></span><br><span class="line">opsys@ubuntu:~/gitolite-admin$ git push</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">客户端直接下载文件:</span><br><span class="line">git <span class="built_in">clone</span> git@gitserver:devops.git</span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.smallasa.com/2017/02/01/git-gitolite/" data-id="cjavy9jw800310coqnsnp2f9v" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-git-gitlab" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/01/31/git-gitlab/" class="article-date">
  <time datetime="2017-01-31T10:18:31.000Z" itemprop="datePublished">2017-01-31</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/automation/">automation</a>►<a class="article-category-link" href="/categories/automation/git/">git</a>►<a class="article-category-link" href="/categories/automation/git/git-gitlab/">git gitlab</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/01/31/git-gitlab/">git gitlab</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="gitlab-install"><a href="#gitlab-install" class="headerlink" title="gitlab install"></a>gitlab install</h2><h3 id="1-gitlab-base-install"><a href="#1-gitlab-base-install" class="headerlink" title="1. gitlab base install"></a>1. gitlab base install</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@gitserver ~]<span class="comment">#  yum -y install curl policycoreutils openssh-server openssh-clients</span></span><br><span class="line">[root@gitserver ~]<span class="comment">#  yum -y install postfix</span></span><br><span class="line">[root@gitserver ~]<span class="comment">#  systemctl enable sshd</span></span><br><span class="line">[root@gitserver ~]<span class="comment">#  systemctl enable postfix</span></span><br><span class="line">[root@gitserver ~]<span class="comment">#  systemctl start postfix</span></span><br></pre></td></tr></table></figure>
<h3 id="2-gitlab-install"><a href="#2-gitlab-install" class="headerlink" title="2. gitlab install"></a>2. gitlab install</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@gitserver ~]<span class="comment"># curl -sS https://packages.gitlab.com/install/repositories/gitlab/gitlab-ce/script.rpm.sh | sudo bash</span></span><br><span class="line">[root@gitserver ~]<span class="comment"># yum install gitlab-ce</span></span><br></pre></td></tr></table></figure>
<h3 id="3-gitlab-configuration"><a href="#3-gitlab-configuration" class="headerlink" title="3. gitlab configuration"></a>3. gitlab configuration</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@gitserver ~]<span class="comment"># gitlab-ctl reconfigure</span></span><br></pre></td></tr></table></figure>
<h3 id="4-gitlab-stop-start"><a href="#4-gitlab-stop-start" class="headerlink" title="4. gitlab stop/start"></a>4. gitlab stop/start</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@gitserver ~]<span class="comment"># gitlab-ctl stop</span></span><br><span class="line">ok: down: gitlab-workhorse: 1s, normally up</span><br><span class="line">ok: down: logrotate: 0s, normally up</span><br><span class="line">ok: down: nginx: 1s, normally up</span><br><span class="line">ok: down: postgresql: 0s, normally up</span><br><span class="line">ok: down: redis: 1s, normally up</span><br><span class="line">ok: down: sidekiq: 0s, normally up</span><br><span class="line">ok: down: unicorn: 1s, normally up</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@gitserver ~]<span class="comment"># gitlab-ctl start</span></span><br><span class="line">ok: run: gitlab-workhorse: (pid 12049) 1s</span><br><span class="line">ok: run: logrotate: (pid 12054) 0s</span><br><span class="line">ok: run: nginx: (pid 12060) 0s</span><br><span class="line">ok: run: postgresql: (pid 12062) 1s</span><br><span class="line">ok: run: redis: (pid 12070) 0s</span><br><span class="line">ok: run: sidekiq: (pid 12074) 1s</span><br><span class="line">ok: run: unicorn: (pid 12077) 0s</span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.smallasa.com/2017/01/31/git-gitlab/" data-id="cjavy9jw6002z0coqpfubw7si" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-git-init" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/01/31/git-init/" class="article-date">
  <time datetime="2017-01-31T10:16:33.000Z" itemprop="datePublished">2017-01-31</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/automation/">automation</a>►<a class="article-category-link" href="/categories/automation/git/">git</a>►<a class="article-category-link" href="/categories/automation/git/git-init/">git init</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/01/31/git-init/">git init</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="git-init"><a href="#git-init" class="headerlink" title="git init"></a>git init</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">git config --global user.email <span class="string">"smallasa@sina.com"</span></span><br><span class="line">git config --global user.name <span class="string">"penn"</span></span><br><span class="line">git config --global push.default simple</span><br><span class="line">git config --global http.postBuffer 24288000</span><br></pre></td></tr></table></figure>
<h3 id="git-errors"><a href="#git-errors" class="headerlink" title="git errors"></a>git errors</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">$ git push --set-upstream origin relase</span><br><span class="line">Counting objects: 2707, done.</span><br><span class="line">Delta compression using up to 4 threads.</span><br><span class="line">Compressing objects: 100% (2693/2693), done.</span><br><span class="line">Writing objects: 100% (2707/2707), 36.23 MiB | 6.32 MiB/s, done.</span><br><span class="line">Total 2707 (delta 340), reused 0 (delta 0)</span><br><span class="line">error: RPC failed; HTTP 413 curl 22 The requested URL returned error: 413 Request Entity Too Large</span><br><span class="line">fatal: The remote end hung up unexpectedly</span><br><span class="line">fatal: The remote end hung up unexpectedly</span><br><span class="line">Everything up-to-date</span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.smallasa.com/2017/01/31/git-init/" data-id="cjavy9jwd00370coqnzx9e1ud" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  


  <nav id="page-nav">
    
    <a class="extend prev" rel="prev" href="/page/27/">&laquo; 上一页</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/26/">26</a><a class="page-number" href="/page/27/">27</a><span class="page-number current">28</span><a class="page-number" href="/page/29/">29</a><a class="extend next" rel="next" href="/page/29/">下一页 &raquo;</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">分类</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/AliCloud/">AliCloud</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/AliCloud/SDK/">SDK</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/AliCloud/SDK/Python-SDK/">Python SDK</a></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Android/">Android</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Android/Android-install/">Android install</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Android/Android-install/Android-studio-install/">Android studio install</a></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Development/">Development</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Development/Doc/">Doc</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Development/Doc/HTTP-严格传输安全HSTS/">HTTP 严格传输安全HSTS</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Development/Doc/HTTP协议/">HTTP协议</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Development/Doc/TCP-协议详解/">TCP 协议详解</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Development/Doc/TCP与socket区别/">TCP与socket区别</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Development/Doc/linux-文件描述符与打开文件之间的关系/">linux 文件描述符与打开文件之间的关系</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Development/Doc/linux-文件系统inode/">linux 文件系统inode</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Development/Doc/一次完整的HTTP请求/">一次完整的HTTP请求</a></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Disk/">Disk</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Disk/disk-io-performance/">disk io performance</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Disk/disk-iostat/">disk iostat</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Distributed-storage/">Distributed storage</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Distributed-storage/GlusterFS/">GlusterFS</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Distributed-storage/GlusterFS/GlusterFS-architecture/">GlusterFS architecture</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Distributed-storage/GlusterFS/GlusterFS-info/">GlusterFS info</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Distributed-storage/GlusterFS/GlusterFS-install/">GlusterFS install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Distributed-storage/GlusterFS/GlusterFS-workflow/">GlusterFS workflow</a></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/HA/">HA</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/HA/DRBD/">DRBD</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/HA/DRBD/DRBD-install/">DRBD install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/HA/keepalived/">keepalived</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/HA/keepalived/keepalived-install/">keepalived install</a></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/IDE/">IDE</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/IDE/Intellij/">Intellij</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/IDE/Intellij/Intellij-setting/">Intellij setting</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/IDE/vim/">vim</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/IDE/vim/vim-shortcut-key/">vim shortcut key</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/IDE/vim/vim-vimrc/">vim vimrc</a></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Kernel/">Kernel</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Kernel/kernel-memory/">kernel memory</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Kernel/kernel-memory/kernel-共享内存/">kernel 共享内存</a></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/">Monitor</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/ganglia/">ganglia</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/ganglia/ganglia-install/">ganglia install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/hmonitor/">hmonitor</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/hmonitor/hmonitor-install/">hmonitor install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/htmonitor/">htmonitor</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/htmonitor/htmonitor-install/">htmonitor install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/smokeping/">smokeping</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/smokeping/smokeping-install/">smokeping install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/zabbix/">zabbix</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/zabbix/monitor/">monitor</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/zabbix/monitor/zabbix-monitor-cpu/">zabbix monitor cpu</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/zabbix/monitor/zabbix-monitor-mem/">zabbix monitor mem</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/zabbix/zabbix-auto-discover/">zabbix auto discover</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/zabbix/zabbix-grafana-install/">zabbix grafana install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/zabbix/zabbix-install/">zabbix install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/zabbix/zabbix-install-distributed/">zabbix install distributed</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/zabbix/zabbix-item-and-tigger/">zabbix item and tigger</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/zabbix/zabbix-java-gateway/">zabbix java gateway</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/zabbix/zabbix-modify-login-user-passwd/">zabbix modify login user passwd</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/zabbix/zabbix-optimization/">zabbix optimization</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/zabbix/zabbix-proxy-install/">zabbix proxy install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/zabbix/zabbix-server-support-chinese/">zabbix server support chinese</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/zabbix/zabbix-windows-agent/">zabbix windows agent</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/树莓派/">树莓派</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/树莓派/树莓派-GSM-语音短信报警/">树莓派 GSM 语音短信报警</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/监控/">监控</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/监控/监控知识体系/">监控知识体系</a></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/">Python</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-Framework/">Python Framework</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-Framework/Python-Django/">Python Django</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-Framework/Python-Django-setting/">Python Django setting</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-Framework/Python-tornado-install/">Python tornado install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-Learn/">Python Learn</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-Learn/python-上下文管理器/">python 上下文管理器</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-Learn/python-内存管理/">python 内存管理</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-Learn/python-函数编程/">python 函数编程</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-Learn/python-变量/">python 变量</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-Learn/python-对象使用/">python 对象使用</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-Learn/python-对象的属性/">python 对象的属性</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-Learn/python-对象编程/">python 对象编程</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-Learn/python-数据类型/">python 数据类型</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-Learn/python-流程控制/">python 流程控制</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-Learn/python-爬虫/">python 爬虫</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-Learn/python-特殊方法/">python 特殊方法</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-Learn/python-特殊说明/">python 特殊说明</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-Learn/python-装饰器/">python 装饰器</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-Learn/python-过程编程/">python 过程编程</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-Learn/python-进阶/">python 进阶</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-Learn/python-闭包/">python 闭包</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-install/">Python install</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-install/python-error-info/">python error info</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-install/python-pip-source-image/">python pip source image</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-install/python-pip-use/">python pip use</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-install/python-pyenv-install/">python pyenv install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-install/python-setup-py/">python setup.py</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-install/python-source-install/">python source install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-install/python-virtualenv/">python virtualenv</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-library/">Python library</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-library/MySQLdb/">MySQLdb</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-library/memory-profiler/">memory_profiler</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-library/time-datetime-calendar/">time datetime calendar</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-modules/">Python modules</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-modules/python-modules-path/">python modules path</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-modules/python-modules-pylint-and-ipython/">python modules pylint and ipython</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-other/">Python other</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-other/python-import-and-reload/">python import and reload</a></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Ruby/">Ruby</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Ruby/Ruby-install/">Ruby install</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Ruby/Ruby-install/Ruby-install/">Ruby install</a></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/TCP-IP/">TCP.IP</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/TCP-IP/TCP-状态/">TCP 状态</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/TCP-IP/TCP-IP模型/">TCP/IP模型</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/TCP-IP/Wireshark-use/">Wireshark use</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/WeChat/">WeChat</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/WeChat/WeChat-enterprise/">WeChat enterprise</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/WeChat/WeChat-enterprise/WeChat-enterprise-API/">WeChat enterprise API</a></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/">automation</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/automation/git/">git</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/automation/git/git-command/">git command</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/git/git-error/">git error</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/git/git-gitlab/">git gitlab</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/git/git-gitolite/">git gitolite</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/git/git-gogs/">git gogs</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/git/git-gogs-source-install/">git gogs source install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/git/git-init/">git init</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/git/git-workflow/">git workflow</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/jenkins/">jenkins</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/automation/jenkins/jenkins-info/">jenkins info</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/jenkins/jenkins-install/">jenkins install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/kvm/">kvm</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/automation/kvm/kvm-install/">kvm install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/maven/">maven</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/automation/maven/maven-install/">maven install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/nexus/">nexus</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/automation/nexus/nexus-install/">nexus install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/nexus/nexus-proxy-maven/">nexus proxy maven</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/rpm/">rpm</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/automation/rpm/rpm-package-build/">rpm package build</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/rpm/rpmbuild-spec/">rpmbuild spec</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/salt/">salt</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/automation/salt/salt-advanced-topic/">salt advanced topic</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/salt/salt-highstate/">salt highstate</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/salt/salt-info/">salt info</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/salt/salt-install/">salt install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/salt/salt-install-HA/">salt install HA</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/salt/salt-install-distributed/">salt install distributed</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/salt/salt-install-standard/">salt install standard</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/salt/salt-jinja2-grain-pillar-module/">salt jinja2 grain pillar module</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/salt/salt-manage-event-reactor/">salt manage event reactor</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/salt/salt-manage-grains/">salt manage grains</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/salt/salt-manage-job/">salt manage job</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/salt/salt-manage-module/">salt manage module</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/salt/salt-manage-pillar/">salt manage pillar</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/salt/salt-manage-return/">salt manage return</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/salt/salt-manage-states/">salt manage states</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/salt/salt-manage-target/">salt manage target</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/salt/salt-master-syndic-install/">salt master syndic install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/salt/salt-master-conf/">salt master.conf</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/salt/salt-minion-conf/">salt minion.conf</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/salt/salt-raet/">salt raet</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/salt/salt-state-module/">salt state module</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/salt/salt-syndic-conf/">salt syndic.conf</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/salt/salt-write-module-code/">salt write module code</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/svn/">svn</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/automation/svn/svn-auto-update/">svn auto update</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/yum/">yum</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/automation/yum/yum-server-install/">yum server install</a></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/">database</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/database/Mongo/">Mongo</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/database/Mongo/mongo-auth/">mongo auth</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Mongo/mongo-error/">mongo error</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Mongo/mongo-replication-auth-install/">mongo replication auth install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Mongo/mongo-replication-standard-install/">mongo replication standard install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Mongo/mongo-standard-install/">mongo standard install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Mysql/">Mysql</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/database/Mysql/mysql-command/">mysql command</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Mysql/mysql-error-info/">mysql error info</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Mysql/mysql-explain/">mysql explain</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Mysql/mysql-grant/">mysql grant</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Mysql/mysql-index-options/">mysql index options</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Mysql/mysql-innodb-buffer-pool-flush/">mysql innodb buffer pool flush</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Mysql/mysql-master-slave/">mysql master slave</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Mysql/mysql-master-slave-switch/">mysql master slave switch</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Mysql/mysql-partition/">mysql partition</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Mysql/mysql-select-join/">mysql select join</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Mysql/mysql-slow-log/">mysql slow log</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Mysql/mysql-standard/">mysql standard</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Mysql/mysql-table-size/">mysql table size</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Mysql/mysql-use-memory-as-disk/">mysql use memory as disk</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Postgresql/">Postgresql</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/database/Postgresql/postgresql-book-use/">postgresql book use</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Postgresql/postgresql-master-slave-info/">postgresql master slave info</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Postgresql/postgresql-master-slave/">postgresql master/slave</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Postgresql/postgresql-plugin-install/">postgresql plugin install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Postgresql/postgresql-standard/">postgresql standard</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Postgresql/postgresql-tablespace-database-schema-table-user-role-relation/">postgresql tablespace database schema table user role relation</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Postgresql/postgresql-yum-install/">postgresql yum install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Postgresql/postgresql-常用命令/">postgresql 常用命令</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Postgresql/postgresql-数据库对象/">postgresql 数据库对象</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Postgresql/postgresql-数据库管理/">postgresql 数据库管理</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Redis/">Redis</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/database/Redis/redis-error/">redis error</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Redis/redis-install/">redis install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Redis/redis-redis-trib-rb/">redis redis-trib.rb</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Redis/redis-status/">redis status</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Redis/redis-use/">redis use</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/influxDB/">influxDB</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/database/influxDB/influxDB-install/">influxDB install</a></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/golang/">golang</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/golang/go-env/">go env</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/">hadoop</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/RabbitMQ/">RabbitMQ</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/RabbitMQ/RabbitMQ-cluster/">RabbitMQ cluster</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/RabbitMQ/RabbitMQ-high-availability/">RabbitMQ high availability</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/RabbitMQ/RabbitMQ-info/">RabbitMQ info</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/RabbitMQ/RabbitMQ-install/">RabbitMQ install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/RabbitMQ/RabbitMQ-python-pika/">RabbitMQ python pika</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/RabbitMQ/RabbitMQ-user-and-grant/">RabbitMQ user and grant</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/RabbitMQ/RabbitMQ-working-principle/">RabbitMQ working principle</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/beats/">beats</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/beats/beats-install/">beats install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/datax/">datax</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/datax/datax-info/">datax info</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/datax/datax-install/">datax install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/datax/datax-job/">datax job</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/elasticsearch/">elasticsearch</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/elasticsearch/elasticsearch-backup-and-restore/">elasticsearch backup and restore</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/elasticsearch/elasticsearch-command/">elasticsearch command</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/elasticsearch/elasticsearch-core-component/">elasticsearch core component</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/elasticsearch/elasticsearch-exploring-your-cluster/">elasticsearch exploring your cluster</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/elasticsearch/elasticsearch-exploring-your-data/">elasticsearch exploring your data</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/elasticsearch/elasticsearch-four-search-type/">elasticsearch four search type</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/elasticsearch/elasticsearch-full-cluster-restart-upgrade/">elasticsearch full cluster restart upgrade</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/elasticsearch/elasticsearch-install/">elasticsearch install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/elasticsearch/elasticsearch-modifying-your-data/">elasticsearch modifying your data</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/elasticsearch/elasticsearch-rolling-upgrades/">elasticsearch rolling upgrades</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/elasticsearch/elasticsearch-safe-restart/">elasticsearch safe restart</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/elasticsearch/elasticsearch-shard/">elasticsearch shard</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/elasticsearch/how-to-tune-for-indexing-speed/">how to tune for indexing speed</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/elasticsearch/how-to-tune-for-search-speed/">how to tune for search speed</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/flume/">flume</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/flume/flume-info/">flume info</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/flume/flume-install/">flume install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/grafana/">grafana</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/grafana/grafana-install/">grafana install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/hadoop/">hadoop</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/hadoop/hadoop-简介/">hadoop 简介</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/kafka/">kafka</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/kafka/kafka-add-topic-partition/">kafka add topic partition</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/kafka/kafka-add-topic-replicats/">kafka add topic replicats</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/kafka/kafka-broker-config/">kafka broker config</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/kafka/kafka-high-throughput/">kafka high throughput</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/kafka/kafka-info/">kafka info</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/kafka/kafka-install/">kafka install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/kafka/kafka-manage-web/">kafka manage web</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/kafka/kafka-migrate-and-scale/">kafka migrate and scale</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/kafka/kafka-offset-monitor/">kafka offset monitor</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/kafka/kafka-optimize/">kafka optimize</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/kafka/kafka-use/">kafka use</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/kafka/kafka-web-console/">kafka web console</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/kafka/kafka-with-zookeeper/">kafka with zookeeper</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/kibana/">kibana</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/kibana/kibana-install/">kibana install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/logstash/">logstash</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/logstash/logstash-config-file/">logstash config file</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/logstash/logstash-filter-grok/">logstash filter grok</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/logstash/logstash-info/">logstash info</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/logstash/logstash-install/">logstash install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/mycat/">mycat</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/mycat/mycat-jvm-optimize/">mycat jvm optimize</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/mycat/mycat-web-install/">mycat web install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/nsq/">nsq</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/nsq/nsq-command/">nsq command</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/nsq/nsq-info/">nsq info</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/nsq/nsq-install/">nsq install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/zookeeper/">zookeeper</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/zookeeper/zookeeper-install/">zookeeper install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/zookeeper/zookeeper-monitor/">zookeeper monitor</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/zookeeper/zookeeper-optimize/">zookeeper optimize</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/zookeeper/zookeeper-use/">zookeeper use</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/zookeeper/zookeeper-zab-protocol/">zookeeper zab protocol</a></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/java/">java</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/java/java-env/">java env</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/java/java-jvm-optimize/">java jvm optimize</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/java/java-jvm-opts/">java jvm opts</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/java/java-jvm-原理/">java jvm 原理</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/java/java-learn/">java learn</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/java/java-learn/java-学习笔记/">java 学习笔记</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/java/java-log4j/">java log4j</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/java/java-performance-analysis/">java performance analysis</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/java/java-performance-analysis/jps/">jps</a></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/k8s/">k8s</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/k8s/k8s-dashboard-install/">k8s dashboard install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/k8s/k8s-install/">k8s install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/k8s/k8s-registry-install/">k8s registry install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/node/">node</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/node/node-install/">node install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/other/">other</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/other/ACID/">ACID</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/other/分布式二阶段和三阶段提交协议/">分布式二阶段和三阶段提交协议</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/other/开源许可协议/">开源许可协议</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/other/网络带宽/">网络带宽</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/">system service</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/Atlassian/">Atlassian</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/Atlassian/confluence-https/">confluence https</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/Atlassian/confluence-install/">confluence install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/Atlassian/confluence-reset-passwd/">confluence reset passwd</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/Atlassian/confluence-update/">confluence update</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/Atlassian/jira-https/">jira https</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/Atlassian/jira-install/">jira install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/Atlassian/jira-update/">jira update</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/Atlassian/mariadb-install/">mariadb install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/CentOS/">CentOS</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/CentOS/Base-env/">Base env</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/CentOS/linux-common-use-scripts/">linux common use scripts</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/CentOS/linux-history-info-setting/">linux history info setting</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/CentOS/linux-login-info/">linux login info</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/CentOS/linux-nginx-install/">linux nginx install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/CentOS/linux-skill/">linux skill</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/CentOS/linux-system-init/">linux system init</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/CentOS/linux-内存插槽-内存信息/">linux 内存插槽 内存信息</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/CentOS/linux-扩容swap分区/">linux 扩容swap分区</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/CentOS/linux-物理CPU-CPU核数-逻辑CPU/">linux 物理CPU CPU核数 逻辑CPU</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/CentOS/linux-磁盘系统block区别/">linux 磁盘系统block区别</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/CentOS/linux-设置-包含头文件路径-和-动态库链接路径/">linux 设置 包含头文件路径 和 动态库链接路径</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/CentOS/make提高源码编译速度/">make提高源码编译速度</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/NFS/">NFS</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/NFS/nfs-exports-command/">nfs exports command</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/NFS/nfs-install/">nfs install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/Samba/">Samba</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/Samba/samba-conf/">samba conf</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/Samba/samba-install/">samba install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/command/">command</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/command/grep/">grep</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/command/linux/">linux</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/command/pigz/">pigz</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/command/sed/">sed</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/command/split/">split</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/command/tr/">tr</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/haproxy/">haproxy</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/haproxy/haproxy-install/">haproxy install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/nginx/">nginx</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/nginx/nginx-install/">nginx install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/nginx/nginx-location/">nginx location</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/nginx/nginx-rewrite/">nginx rewrite</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/nginx/nginx-status/">nginx status</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/ntpd/">ntpd</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/ntpd/ntpd-install/">ntpd install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/openssl/">openssl</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/openssl/openssl-certificate/">openssl certificate</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/openvpn/">openvpn</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/openvpn/openvpn-install/">openvpn install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/rsync/">rsync</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/rsync/rsync-install/">rsync install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/supersord/">supersord</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/supersord/supersord-install/">supersord install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/vsftpd/">vsftpd</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/vsftpd/ftp-proxy/">ftp proxy</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/vsftpd/vsftpd-error/">vsftpd error</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/vsftpd/vsftpd-info/">vsftpd info</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/vsftpd/vsftpd-install/">vsftpd install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/windows/">windows</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/windows/cygwin-install/">cygwin install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/windows/ipsec-set/">ipsec set</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/windows/windows-modify-hosts/">windows modify hosts</a></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/web/">web</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/web/SSL/">SSL</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/web/SSL/SSL-certificate/">SSL certificate</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/web/angular/">angular</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/web/angular/angular-install/">angular install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/web/hexo/">hexo</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/web/hexo/hexo-install/">hexo install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/web/sass/">sass</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/web/sass/sass-install/">sass install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/web/xml/">xml</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/web/xml/xml-format/">xml format</a></li></ul></li></ul></li></ul>
    </div>
  </div>


  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">归档</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/01/">一月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/11/">十一月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/10/">十月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/09/">九月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/08/">八月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/07/">七月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/06/">六月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/05/">五月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/04/">四月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/03/">三月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/02/">二月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/01/">一月 2017</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">最新文章</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2020/01/01/hello-everyone/">Hello Everyone</a>
          </li>
        
          <li>
            <a href="/2017/11/28/kafka-web-console/">kafka web console</a>
          </li>
        
          <li>
            <a href="/2017/11/27/svn-auto-update/">svn auto update</a>
          </li>
        
          <li>
            <a href="/2017/11/15/salt-manage-event-reactor/">salt manage event reactor</a>
          </li>
        
          <li>
            <a href="/2017/11/15/salt-manage-job/">salt manage job</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2017 penn<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>



  </div>
</body>
</html>