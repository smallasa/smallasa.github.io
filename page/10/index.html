<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  

  
  <title>smallasa</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="smallasa">
<meta property="og:url" content="http://www.smallasa.com/page/10/index.html">
<meta property="og:site_name" content="smallasa">
<meta property="og:locale" content="zh-CN">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="smallasa">
  
    <link rel="alternate" href="/atom.xml" title="smallasa" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">smallasa</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">I known what i do !</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="搜索"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://www.smallasa.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-rpmbuild-spec" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/07/08/rpmbuild-spec/" class="article-date">
  <time datetime="2017-07-08T08:41:17.000Z" itemprop="datePublished">2017-07-08</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/automation/">automation</a>►<a class="article-category-link" href="/categories/automation/rpm/">rpm</a>►<a class="article-category-link" href="/categories/automation/rpm/rpmbuild-spec/">rpmbuild spec</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/07/08/rpmbuild-spec/">rpmbuild spec</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="rpmbuild-spec说明"><a href="#rpmbuild-spec说明" class="headerlink" title="rpmbuild spec说明"></a>rpmbuild spec说明</h3><ol>
<li><p>rpmbuild介绍</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">顾名思义创建rpm包,它是用来指示转换的源码不定编译成二进制文件的包</span><br><span class="line"></span><br><span class="line">rpm对打包目录有一些严格的层次上的要求.比如:</span><br><span class="line">如果你的rpm的版本&lt;=4.4.x,那么rpmbuid工具其默认的工作路径是/usr/src/redhat,这就使得普通用户不能制作rpm包,因为权限的问题,在制作rpm软件包时必须切换到root身份才可以.所以,rpm从4.5.x版本开始,将rpmbuid的默认工作路径移动到用户家目录下的rpmbuild目录里,即$HOME/rpmbuild,并且推荐用户在制作rpm软件包时尽量不要以root身份进行操作</span><br><span class="line"></span><br><span class="line">关于rpmbuild默认工作路径的确定,通常由在/usr/lib/rpm/macros这个文件里的一个叫做%_topdir的宏变量来定义.</span><br><span class="line">如果用户想更改这个目录名(rpm官方并不推荐直接更改这个目录),可以在用户家目录下建立一个名为.rpmmacros的隐藏文件,然后在里面重新定义%_topdir,指向一个新的目录名.例如: &quot;%_topdir    $HOME/myrpmbuild&quot;</span><br></pre></td></tr></table></figure>
</li>
<li><p>rpmbuild 目录</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">在%_topdir目录下一般需要建立6个目录:</span><br><span class="line">* BUILD	    编译rpm包的临时目录	             %_builddir</span><br><span class="line">* BUILDROOT	编译后生成的软件临时安装目录	    %_buildrootdir</span><br><span class="line">* RPMS	    最终生成的可安装rpm包的所在目录	  %_rpmdir</span><br><span class="line">* SOURCES	  所有源代码和补丁文件的存放目录    %_sourcedir</span><br><span class="line">* SPECS	    存放SPEC文件的目录(重要)	        %_specdir</span><br><span class="line">* SRPMS	    软件最终的rpm源码格式存放路径	   %_srcrpmdir</span><br><span class="line"></span><br><span class="line">提示:</span><br><span class="line">1.执行rpmdev-setuptree会在当前用户家目录下的rpmbuild目录(如果该目录不存在也会被自动创建)里自动建立上述目录</span><br><span class="line">2.一般我们都把源码打包成tar.gz格式然后存放于SOURCES路径下,而在SPECS路径下编写spec文档.通过命令打包后,默认会把打包后的rpm包放在RPMS下,而源码包会被放置在SRPMS下</span><br></pre></td></tr></table></figure>
</li>
<li><p>rpmbuild相关命令</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">基本格式: rpmbuild [options] [spec文档|tarball包|源码包]</span><br><span class="line"></span><br><span class="line">//从spec文档建立有以下选项:</span><br><span class="line">-bp  #只执行spec的%pre段(解开源码包并打补丁,即只做准备)</span><br><span class="line">-bc  #执行spec的%pre和%build段(准备并编译)</span><br><span class="line">-bi  #执行spec中%pre,%build与%install(准备,编译并安装)</span><br><span class="line">-bl  #检查spec中的%file段(查看文件是否齐全)</span><br><span class="line">-ba  #建立源码与二进制包(常用)</span><br><span class="line">-bb  #只建立二进制包(最常用)</span><br><span class="line">-bs  #只建立源码包</span><br><span class="line"></span><br><span class="line">//从tarball包建立,与spec类似</span><br><span class="line">-tp #对应-bp</span><br><span class="line">-tc #对应-bc</span><br><span class="line">-ti #对应-bi</span><br><span class="line">-ta #对应-ba</span><br><span class="line">-tb #对应-bb</span><br><span class="line">-ts #对应-bs</span><br><span class="line"></span><br><span class="line">//从源码包建立</span><br><span class="line">--rebuild    #建立二进制包,通-bb</span><br><span class="line">--recompile  #同-bi</span><br><span class="line"></span><br><span class="line">//其他的一些选项</span><br><span class="line">--buildroot=DIRECTORY   #确定以root目录建立包</span><br><span class="line">--clean                 #完成打包后清除BUILD下的文件目录</span><br><span class="line">--nobuild               #不进行%build的阶段</span><br><span class="line">--nodeps                #不检查建立包时的关联文件</span><br><span class="line">--nodirtokens</span><br><span class="line">--rmsource              #完成打包后清除SOURCES</span><br><span class="line">--rmspec                #完成打包后清除SPEC</span><br><span class="line">--short-cricuit</span><br><span class="line">--target=CPU-VENDOR-OS  #确定包的最终使用平台</span><br></pre></td></tr></table></figure>
</li>
<li><p>SPEC文档的编写</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br></pre></td><td class="code"><pre><span class="line">Name:    软件包的名字,后面可使用%&#123;name&#125;的方式引用,具体命令需跟源包一致</span><br><span class="line">Version: 软件的实际版本号,具体命令需跟源包一致</span><br><span class="line">Release: 发布序列号,具体命令需跟源包一致</span><br><span class="line">Summary: 软件包的内容概要</span><br><span class="line">Group: 软件分组，建议使用标准分组</span><br><span class="line">-----------------------------------------</span><br><span class="line">软件包所属类别，具体类别有：</span><br><span class="line">Amusements/Games           （娱乐/游戏）</span><br><span class="line">Amusements/Graphics        （娱乐/图形）</span><br><span class="line">Applications/Archiving     （应用/文档）</span><br><span class="line">Applications/Communications（应用/通讯）</span><br><span class="line">Applications/Databases     （应用/数据库）</span><br><span class="line">Applications/Editors       （应用/编辑器）</span><br><span class="line">Applications/Emulators     （应用/仿真器）</span><br><span class="line">Applications/Engineering   （应用/工程）</span><br><span class="line">Applications/File          （应用/文件）</span><br><span class="line">Applications/Internet      （应用/因特网）</span><br><span class="line">Applications/Multimedia    （应用/多媒体）</span><br><span class="line">Applications/Productivity  （应用/产品）</span><br><span class="line">Applications/Publishing    （应用/印刷）</span><br><span class="line">Applications/System        （应用/系统）</span><br><span class="line">Applications/Text          （应用/文本）</span><br><span class="line">Development/Debuggers      （开发/调试器）</span><br><span class="line">Development/Languages      （开发/语言）</span><br><span class="line">Development/Libraries      （开发/函数库）</span><br><span class="line">Development/System         （开发/系统）</span><br><span class="line">Development/Tools          （开发/工具）</span><br><span class="line">Documentation              （文档）</span><br><span class="line">System Environment/Base    （系统环境/基础）</span><br><span class="line">System Environment/Daemons （系统环境/守护）</span><br><span class="line">System Environment/Kernel  （系统环境/内核）</span><br><span class="line">System Environment/Libraries （系统环境/函数库）</span><br><span class="line">System Environment/Shells    （系统环境/接口）</span><br><span class="line">User Interface/Desktops      （用户界面/桌面）</span><br><span class="line">User Interface/X             （用户界面/X窗口）</span><br><span class="line">User Interface/X Hardware Support （用户界面/X硬件支持）</span><br><span class="line">----------------------------------------------------</span><br><span class="line">License:   软件授权方式,通常就是GPL</span><br><span class="line">Source:    源代码包,可以带多个用Source1、Source2等源,后面也可以用%&#123;source1&#125;,%&#123;source2&#125;引用</span><br><span class="line">BuildRoot: 这个是安装或编译时使用的&quot;虚拟目录&quot;,考虑到多用户的环境,一般定义为:</span><br><span class="line">%&#123;_tmppath&#125;/%&#123;name&#125;-%&#123;version&#125;-%&#123;release&#125;-root</span><br><span class="line">或</span><br><span class="line">%&#123;_tmppath&#125;/%&#123;name&#125;-%&#123;version&#125;-%&#123;release&#125;-buildroot-%(%&#123;__id_u&#125; -n&#125;</span><br><span class="line">该参数非常重要,因为在生成rpm的过程中,执行make install时就会把软件安装到上述的路径中,在打包的时候,同样依赖&quot;虚拟目录&quot;为&quot;&quot;根目录&quot;进行操作.后面可使用$RPM_BUILD_ROOT方式引用</span><br><span class="line">URL:           软件的主页</span><br><span class="line">Vendor:        发行商或打包组织的信息,例如RedFlag Co,Ltd</span><br><span class="line">Disstribution: 发行版标识</span><br><span class="line">Patch:         补丁源码,可使用Patch1,Patch2等标识多个补丁,使用%patch0或%&#123;patch0&#125;引用</span><br><span class="line">Prefix: %&#123;_prefix&#125;这个主要是为了解决今后安装rpm包时,并不一定把软件安装到rpm中打包的目录的情况.这样,必须在这里定义该标识,并在编写%install脚本的时候引用,才能实现rpm安装时重新指定位置的功能</span><br><span class="line">Prefix: %&#123;_sysconfdir&#125; 这个原因和上面的一样,但由于%&#123;_prefix&#125;指/usr,而对于其他的文件,例如/etc下的配置文件,则需要用%&#123;_sysconfdir&#125;标识</span><br><span class="line">Build Arch:   指编译的目标处理器架构,noarch标识不指定,但通常都是以/usr/lib/rpm/marcros中的内容为默认值</span><br><span class="line">Requires:     该rpm包所依赖的软件包名称,可以用&gt;=或&lt;=表示大于或小于某一特定版本,不同软件名用空格分开,例如:libpng-devel &gt;= 1.0.20 zlib</span><br><span class="line"></span><br><span class="line">还有例如PreReq、Requires(pre)、Requires(post)、Requires(preun)、Requires(postun)、BuildRequires等都是针对不同阶段的依赖指定</span><br><span class="line">Provides: 指明本软件一些特定的功能,以便其他rpm识别</span><br><span class="line">Packager: 打包者的信息</span><br><span class="line">scription 软件的详细说明</span><br><span class="line"></span><br><span class="line">#spec脚本主体</span><br><span class="line">spec脚本的主体中也包括了很多关键字和描述:</span><br><span class="line">%prep 预处理脚本</span><br><span class="line">%setup -n %&#123;name&#125;-%&#123;version&#125; 把源码包解压并放好</span><br><span class="line">注:可根据你的源码的名字格式,来确认解压后名字的格式,否则可能导致install的时候找不到对应的目录</span><br><span class="line">通常是从/usr/src/redhat/SOURCES里的包解压到/usr/src/redhat/BUILD/%&#123;name&#125;-%&#123;version&#125;中</span><br><span class="line">一般用%setup -c就可以了,但有两种情况:一就是同时编译多个源码包;二就是源码的tar包的名称与解压出来的目录不一致.此时，就需要使用-n参数指定一下了</span><br><span class="line">%patch 打补丁,通常补丁都会一起在源码tar.gz包中,或放到SOURCES目录下.一般参数为:</span><br><span class="line">%patch -p1 使用前面定义的Patch补丁进行,-p1是忽略patch的第一层目录</span><br><span class="line">%Patch2 -p1 -b xxx.patch 打上指定的补丁,-b是指生成备份文件</span><br><span class="line">◎补充一下</span><br><span class="line">%setup 不加任何选项，仅将软件包打开。</span><br><span class="line">%setup -n newdir 将软件包解压在newdir目录。</span><br><span class="line">%setup -c 解压缩之前先产生目录。</span><br><span class="line">%setup -b num 将第num个source文件解压缩。</span><br><span class="line">%setup -T 不使用default的解压缩操作。</span><br><span class="line">%setup -T -b 0 将第0个源代码文件解压缩。</span><br><span class="line">%setup -c -n newdir 指定目录名称newdir，并在此目录产生rpm套件。</span><br><span class="line">%patch 最简单的补丁方式，自动指定patch level。</span><br><span class="line">%patch 0 使用第0个补丁文件，相当于%patch ?p 0。</span><br><span class="line">%patch -s 不显示打补丁时的信息。</span><br><span class="line">%patch -T 将所有打补丁时产生的输出文件删除。</span><br><span class="line"></span><br><span class="line">%build 开始构建包</span><br><span class="line">在/usr/src/redhat/BUILD/%&#123;name&#125;-%&#123;version&#125;目录中进行make的工作,常见写法：</span><br><span class="line">make %&#123;?_smp_mflags&#125; OPTIMIZE=&quot;%&#123;optflags&#125;&quot;</span><br><span class="line">都是一些优化参数，定义在/usr/lib/rpm/marcros中</span><br><span class="line">%install 开始把软件安装到虚拟的根目录中</span><br><span class="line">在/usr/src/redhat/BUILD/%&#123;name&#125;-%&#123;version&#125;目录中进行make install的操作.这个很重要,因为如果这里的路径不对的话,则下面%file中寻找文件的时候就会失败.</span><br><span class="line">常见内容有：</span><br><span class="line">%makeinstall 这不是关键字,而是rpm定义的标准宏命令.也可以使用非标准写法:</span><br><span class="line">make DESTDIR=$RPM_BUILD_ROOT install</span><br><span class="line">或</span><br><span class="line">make prefix=$RPM_BUILD_ROOT install</span><br><span class="line"></span><br><span class="line">需要说明的是,这里的%install主要就是为了后面的%file服务的.所以,还可以使用常规的系统命令:</span><br><span class="line">install -d $RPM_BUILD_ROOT/ #建立目录</span><br><span class="line">cp -a * $RPM_BUILD_ROOT/</span><br><span class="line"></span><br><span class="line">%clean 清理临时文件</span><br><span class="line">通常内容为:引用</span><br><span class="line">[ &quot;$RPM_BUILD_ROOT&quot; != &quot;/&quot; ] &amp;&amp; rm -rf &quot;$RPM_BUILD_ROOT&quot;</span><br><span class="line">rm -rf $RPM_BUILD_DIR/%&#123;name&#125;-%&#123;version&#125;</span><br><span class="line">※注意区分$RPM_BUILD_ROOT和$RPM_BUILD_DIR：</span><br><span class="line">$RPM_BUILD_ROOT是指开头定义的BuildRoot,而$RPM_BUILD_DIR通常就是指/usr/src/redhat/BUILD.其中,前面的才是%file需要的.</span><br><span class="line">%pre    rpm安装前执行的脚本</span><br><span class="line">%post   rpm安装后执行的脚本</span><br><span class="line">%preun  rpm卸载前执行的脚本</span><br><span class="line">%postun rpm卸载后执行的脚本</span><br><span class="line"></span><br><span class="line">%preun %postun 的区别是什么呢？</span><br><span class="line">前者在升级的时候会执行,后者在升级rpm包的时候不会执行</span><br><span class="line"></span><br><span class="line">%files 定义那些文件或目录会放入rpm中</span><br><span class="line">这里会在虚拟根目录下进行,千万不要写绝对路径,而应用宏或变量表示相对路径.如果描述为目录,表示目录中除%exclude外的所有文件.</span><br><span class="line">%defattr(文件权限,用户名,组名,目录权限)   默认是 %defattr(-,root,root,-)</span><br><span class="line">%exclude 列出不想打包到rpm中的文件</span><br><span class="line">注意:</span><br><span class="line">1.%&#123;buildroot&#125;里的所有文件都要明确被指定是否要被打包到rpm里</span><br><span class="line">2.如果声明了%&#123;buildroot&#125;里不存在的文件或者目录也会报错</span><br><span class="line">3.如果%exclude指定的文件不存在,也会出错的</span><br><span class="line"></span><br><span class="line">%doc</span><br><span class="line">关于%doc宏，所有跟在这个宏后面的文件都来自%&#123;_builddir&#125;目录，当用户安装rpm时，由这个宏所指定的文件都会安装到/usr/share/doc/name-version/目录里。</span><br><span class="line"></span><br><span class="line">%changelog 变更日志</span><br><span class="line">* date +&quot;%a %b %d %Y&quot; 修改人 邮箱 本次版本x.y.z-p</span><br><span class="line">- 本次变更修改了那些内容</span><br></pre></td></tr></table></figure>
</li>
<li><p>SPEC文档中常用的几个宏(变量)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">1. RPM_BUILD_DIR:    /usr/src/redhat/BUILD</span><br><span class="line">2. RPM_BUILD_ROOT:   /usr/src/redhat/BUILDROOT</span><br><span class="line">3. %&#123;_sysconfdir&#125;:   /etc</span><br><span class="line">4. %&#123;_sbindir&#125;：     /usr/sbin</span><br><span class="line">5. %&#123;_bindir&#125;:       /usr/bin</span><br><span class="line">6. %&#123;_datadir&#125;:      /usr/share</span><br><span class="line">7. %&#123;_mandir&#125;:       /usr/share/man</span><br><span class="line">8. %&#123;_libdir&#125;:       /usr/lib64</span><br><span class="line">9. %&#123;_prefix&#125;:       /usr</span><br><span class="line">10. %&#123;_localstatedir&#125;:   /usr/var</span><br></pre></td></tr></table></figure>
</li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.smallasa.com/2017/07/08/rpmbuild-spec/" data-id="cjazexzl3009mqcoqzl2ibxja" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-rpm-package-build" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/07/08/rpm-package-build/" class="article-date">
  <time datetime="2017-07-08T07:32:19.000Z" itemprop="datePublished">2017-07-08</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/automation/">automation</a>►<a class="article-category-link" href="/categories/automation/rpm/">rpm</a>►<a class="article-category-link" href="/categories/automation/rpm/rpm-package-build/">rpm package build</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/07/08/rpm-package-build/">rpm package build</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="rpm-包创建"><a href="#rpm-包创建" class="headerlink" title="rpm 包创建"></a>rpm 包创建</h3><ol>
<li><p>安装 rpmbuild 和 rpmdevtools工具</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># yum -y install rpm-build</span></span><br><span class="line">[root@localhost ~]<span class="comment"># yum -y install rpmdevtools</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>查看rpm包版本</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># rpm --version</span></span><br><span class="line">RPM version 4.11.3</span><br></pre></td></tr></table></figure>
</li>
<li><p>查看rpmbuild的默认位置</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">//查看rpmbuild位置</span><br><span class="line">[root@localhost ~]<span class="comment"># grep -w '%_topdir' /usr/lib/rpm/macros</span></span><br><span class="line">%_topdir                %&#123;getenv:HOME&#125;/rpmbuild</span><br><span class="line"></span><br><span class="line">//手动指定rpmbuild位置</span><br><span class="line">[root@localhost ~]<span class="comment"># echo "%_topdir    $HOME/rpmbuild" | tee ~/.rpmmacros</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>生成rpmbuild目录</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># rpmdev-setuptree</span></span><br><span class="line">[root@localhost ~]<span class="comment"># tree rpmbuild/</span></span><br><span class="line">rpmbuild/</span><br><span class="line">├── BUILD</span><br><span class="line">├── RPMS</span><br><span class="line">├── SOURCES</span><br><span class="line">├── SPECS</span><br><span class="line">└── SRPMS</span><br></pre></td></tr></table></figure>
</li>
<li><p>生成SPEC配置文件</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># rpmdev-newspec -o rpmbuild/SPECS/wisdom-nginx-1.10.2.spec</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>SPEC配置文件说明</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# vim rpmbuild/SPECS/wisdom-nginx-1.10.2.spec</span><br><span class="line"># 定义变量</span><br><span class="line">%define realname wisdom-nginx</span><br><span class="line">%define realver  1.10.2</span><br><span class="line"></span><br><span class="line">%if 0%&#123;?suse_version&#125;</span><br><span class="line">  %define USER  apache</span><br><span class="line">  %define GROUP apache</span><br><span class="line">  %define PREFIX /mnt/app/nginx</span><br><span class="line">%else</span><br><span class="line">  %define USER  apache</span><br><span class="line">  %define GROUP apache</span><br><span class="line">  %define PREFIX /mnt/app/nginx</span><br><span class="line">%endif</span><br><span class="line"></span><br><span class="line"># 第一阶段:设置基础信息</span><br><span class="line"># 1.软件包信息</span><br><span class="line">Name:           %&#123;realname&#125;</span><br><span class="line">Version:        %&#123;realver&#125;</span><br><span class="line">Release:        1%&#123;?dist&#125;</span><br><span class="line">Summary:        wisdom nginx</span><br><span class="line">Group:          Applications/Archiving</span><br><span class="line">License:        GPLv2</span><br><span class="line">URL:            http://nginx.org/en/download.html</span><br><span class="line">Packager:       刘朋 &lt;smallasa@sina.com&gt;</span><br><span class="line">Vendor:         众荟</span><br><span class="line"></span><br><span class="line"># 2.源码包和文件</span><br><span class="line">Source0:        nginx-1.10.2.tar.gz</span><br><span class="line">Source1:        init.nginx</span><br><span class="line">Source2:        nginx.conf</span><br><span class="line"></span><br><span class="line"># 3.安装位置</span><br><span class="line">BuildRoot:      %&#123;PREFIX&#125;</span><br><span class="line"></span><br><span class="line"># 4.软件依赖包</span><br><span class="line">BuildRequires:  gcc</span><br><span class="line">Requires:       openssl,openssl-devel,pcre,pcre-devel</span><br><span class="line"></span><br><span class="line"># 5.软件详细信息</span><br><span class="line">%description</span><br><span class="line">众荟 慧通 nginx 软件包 wisdom-nginx-1.10.2.tar.gz</span><br><span class="line"></span><br><span class="line"># 第二阶段: 准备阶段(解压,并进入目录)</span><br><span class="line">%prep</span><br><span class="line">%setup -q</span><br><span class="line"></span><br><span class="line"># 第三阶段: 编译阶段</span><br><span class="line">%build</span><br><span class="line">./configure \</span><br><span class="line">--prefix=%&#123;PREFIX&#125; \</span><br><span class="line">--user=%&#123;USER&#125; \</span><br><span class="line">--group=%&#123;GROUP&#125; \</span><br><span class="line">--with-select_module \</span><br><span class="line">--with-poll_module \</span><br><span class="line">--with-threads \</span><br><span class="line">%if 0%&#123;?suse_version&#125; || 0%&#123;?fedora&#125; || 0%&#123;?rhel_version&#125; || 0%&#123;?centos_version&#125; &gt;= 600</span><br><span class="line"> --with-file-aio \</span><br><span class="line">%endif</span><br><span class="line">--with-http_ssl_module \</span><br><span class="line">--with-http_stub_status_module \</span><br><span class="line">--with-http_v2_module \</span><br><span class="line">--with-http_realip_module \</span><br><span class="line">--with-http_addition_module \</span><br><span class="line">--with-http_geoip_module \</span><br><span class="line">--with-http_gunzip_module \</span><br><span class="line">--with-http_gzip_static_module \</span><br><span class="line">--with-http_auth_request_module \</span><br><span class="line">--with-http_degradation_module \</span><br><span class="line">--with-google_perftools_module \</span><br><span class="line">--with-pcre \</span><br><span class="line">--with-libatomic</span><br><span class="line"></span><br><span class="line">make %&#123;?_smp_mflags&#125;</span><br><span class="line"></span><br><span class="line"># 第四阶段: 安装阶段</span><br><span class="line">%install</span><br><span class="line">rm -rf $RPM_BUILD_ROOT</span><br><span class="line">make install DESTDIR=%&#123;buildroot&#125;</span><br><span class="line">%&#123;__install&#125; -p -D -m 0755 %&#123;SOURCE1&#125; %&#123;buildroot&#125;/etc/rc.d/init.d/nginx</span><br><span class="line">%&#123;__install&#125; -p -D %&#123;SOURCE2&#125; %&#123;buildroot&#125;/usr/local/nginx/conf/nginx.conf</span><br><span class="line">%&#123;__install&#125; -p -D %&#123;SOURCE3&#125; %&#123;buildroot&#125;/usr/local/nginx/conf/fastcgi_params</span><br><span class="line"></span><br><span class="line"># 第五阶段: 将文件拷贝到相应目录,并授权</span><br><span class="line">%files</span><br><span class="line">%defattr(-,root,root,0755) /usr/local/nginx/</span><br><span class="line">%attr(0755,root,root) /etc/rc.d/init.d/nginx</span><br><span class="line">%config(noreplace) /usr/local/nginx/conf/nginx.conf</span><br><span class="line">%config(noreplace) /usr/local/nginx/conf/fastcgi_params</span><br><span class="line"></span><br><span class="line">%doc</span><br><span class="line">%dir</span><br><span class="line"></span><br><span class="line"># 第六阶段: 在安装/卸载 rpm包 前/后 执行的脚本</span><br><span class="line"># 1.rpm 安装前执行的脚本</span><br><span class="line">%pre</span><br><span class="line"># 1:表示安装;2:表示升级;3:表示卸载</span><br><span class="line">if [ $1 == 1 ];then</span><br><span class="line">  /usr/sbin/useradd -s /sbin/nologin nginx 2&gt;/dev/null</span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line"># 2.rpm 安装后执行的脚本</span><br><span class="line">%post</span><br><span class="line">if [ $1 == 1 ];then</span><br><span class="line">  echo &apos;# Add sysctl.conf</span><br><span class="line">net.ipv4.tcp_max_syn_backlog = 65536</span><br><span class="line">net.core.netdev_max_backlog =  32768</span><br><span class="line">net.core.somaxconn = 32768</span><br><span class="line"></span><br><span class="line">net.core.wmem_default = 8388608</span><br><span class="line">net.core.rmem_default = 8388608</span><br><span class="line">net.core.rmem_max = 16777216</span><br><span class="line">net.core.wmem_max = 16777216</span><br><span class="line"></span><br><span class="line">net.ipv4.tcp_timestamps = 0</span><br><span class="line">net.ipv4.tcp_synack_retries = 2</span><br><span class="line">net.ipv4.tcp_syn_retries = 2</span><br><span class="line"></span><br><span class="line">net.ipv4.tcp_tw_recycle = 1</span><br><span class="line">net.ipv4.tcp_tw_reuse = 1</span><br><span class="line"></span><br><span class="line">net.ipv4.tcp_mem = 94500000 915000000927000000</span><br><span class="line">net.ipv4.tcp_max_orphans = 3276800</span><br><span class="line"></span><br><span class="line">#net.ipv4.tcp_fin_timeout = 30</span><br><span class="line">#net.ipv4.tcp_keepalive_time = 120</span><br><span class="line">net.ipv4.ip_local_port_range = 1024  65535&apos; |tee -a /etc/sysctl.conf</span><br><span class="line">sysctl -p 2&gt;&amp;1 /dev/null</span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line"># 3.rpm卸载前执行的脚本</span><br><span class="line">%preun</span><br><span class="line">if [ $1 == 0 ];then</span><br><span class="line">  /etc/init.d/nginx stop &gt; /dev/null 2&gt;&amp;1</span><br><span class="line">  userdel -r nginx 2&gt;/dev/null</span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line"># 4.rpm卸载后执行的脚本</span><br><span class="line">%postun</span><br><span class="line"></span><br><span class="line">第七阶段: 更新日志</span><br><span class="line">%changelog</span><br><span class="line">*  Thu Wed 26 2014 smallasa &lt;smallasa@sina.com&gt; - 1.10.2</span><br><span class="line">- Initial version</span><br></pre></td></tr></table></figure>
</li>
<li><p>制作rpm包</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">rpmbuild -bp nginx.spec 制作到%prep段</span><br><span class="line">rpmbuild -bc nginx.spec 制作到%build段</span><br><span class="line">rpmbuild -bi nginx.spec 执行spec文件的 <span class="string">"%install"</span> 阶段(在执行了%prep和%build阶段之后).这通常等价于执行了一次 <span class="string">"make install"</span></span><br><span class="line">rpmbuild -bb nginx.spec 制作二进制包</span><br><span class="line">rpmbuild -ba nginx.spec 表示既制作二进制包又制作src格式包</span><br></pre></td></tr></table></figure>
</li>
</ol>
<hr>
<h3 id="rpm包的签名"><a href="#rpm包的签名" class="headerlink" title="rpm包的签名"></a>rpm包的签名</h3><ol>
<li><p>查询软件包信息</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># rpm -qi nginx</span></span><br><span class="line">Name        : nginx                        Relocations: (not relocatable)</span><br><span class="line">Version     : 1.7.7                             Vendor: smallasa</span><br><span class="line">Release     : 3.el6                         Build Date: Wed 26 Nov 2014 06:39:00 PM CST</span><br><span class="line">Install Date: Wed 26 Nov 2014 06:42:19 PM CST      Build Host: localhost</span><br><span class="line">Group       : Applications/Archiving        Source RPM: nginx-1.7.7-3.el6.src.rpm</span><br><span class="line">Size        : 793593                           License: GPLv2</span><br><span class="line">Signature   : (none)    <span class="comment"># rpm包未签名状态</span></span><br><span class="line">Packager    : nmshuishui &lt;353025240@qq.com&gt;</span><br><span class="line">URL         : http://nmshuishui.blog.51cto.com/</span><br><span class="line">Summary     : nginx-1.7.7.tar.gz to nginx-1.7.7.rpm</span><br><span class="line">Description :</span><br><span class="line">Custom a rpm by yourself!Build nginx-1.7.7.tar.gz to nginx-1.7.7.rpm</span><br></pre></td></tr></table></figure>
</li>
<li><p>使用gpg方式生成签名密钥</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># gpg --gen-key</span></span><br><span class="line">Your selection?1&lt;Enter&gt;  <span class="comment">#默认即可</span></span><br><span class="line">What keysize <span class="keyword">do</span> you want? (2048) 1024&lt;Enter&gt;  <span class="comment">#选择密钥长度</span></span><br><span class="line">Key is valid <span class="keyword">for</span>? (0) 1y&lt;Enter&gt;  <span class="comment">#有效期</span></span><br><span class="line">Is this correct? (y/N) y&lt;Enter&gt;  <span class="comment">#确认</span></span><br><span class="line">Real name: smallasa&lt;Enter&gt;  <span class="comment">#密钥名称</span></span><br><span class="line">Email address: smallasa@sina.com&lt;Enter&gt;  <span class="comment">#邮件</span></span><br><span class="line">Comment: GPG-RPM-KEY&lt;Enter&gt;  <span class="comment">#备注</span></span><br><span class="line">Change (N)ame, (C)omment, (E)mail or (O)kay/(Q)uit? O&lt;ENTER&gt; <span class="comment">#okay确认</span></span><br><span class="line">Enter passphrase  OK &lt;Enter&gt;  <span class="comment">#按Enter输入密码                    </span></span><br><span class="line">&lt;Take this one anyway&gt; &lt;Enter&gt; <span class="comment">#确认使用此密码</span></span><br><span class="line"><span class="comment">#####</span></span><br><span class="line">在生成密钥的时候,会报这么一个信息：can<span class="string">'t connect to `/root/.gnupg/S.gpg-agent'</span>: No such file or directory,可以不用理会它.接下来就是一些随机数的说明了:We need to generate a lot of random bytes. It is a good idea to perform</span><br><span class="line">some other action (<span class="built_in">type</span> on the keyboard, move the mouse, utilize the</span><br><span class="line">disks) during the prime generation; this gives the random number</span><br><span class="line">generator a better chance to gain enough entropy.</span><br><span class="line">就狂敲键盘和移动鼠标吧,也可以链接一个伪随机数(不过不安全),接下来就是等待了</span><br><span class="line">生成密钥后会是这样的：</span><br><span class="line">gpg: checking the trustdb</span><br><span class="line">gpg: 3 marginal(s) needed, 1 complete(s) needed, PGP trust model</span><br><span class="line">gpg: depth: 0  valid:   1  signed:   0  trust: 0-, 0q, 0n, 0m, 0f, 1u</span><br><span class="line">pub   2048R/DF63EDFB 2014-11-26</span><br><span class="line">      Key fingerprint = 338D 476F 29C9 E2D6 6604  1D96 6F73 1E81 DF63 EDFB</span><br><span class="line">uid                  smallasa (gen-key) &lt;smallasa@sina.com&gt;</span><br><span class="line">sub   2048R/263FB359 2014-11-26</span><br></pre></td></tr></table></figure>
</li>
<li><p>查看生成的密钥</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># gpg --list-keys</span></span><br><span class="line">/root/.gnupg/pubring.gpg</span><br><span class="line">------------------------</span><br><span class="line">pub   2048R/DF63EDFB 2014-11-26</span><br><span class="line">uid                  smallasa (gen-key) &lt;smallasa@sina.com&gt;</span><br><span class="line">sub   2048R/263FB359 2014-11-26</span><br></pre></td></tr></table></figure>
</li>
<li><p>导出公钥以供验证</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># gpg --export -a "smallasa" &gt; RPM-GPG-KEY-smallasa</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>在~/.rpmmacros宏中定义加密密钥</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># vim ~/.rpmmacros</span></span><br><span class="line">%_gpg_name smallasa</span><br></pre></td></tr></table></figure>
</li>
<li><p>为rpm包签名</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># rpm --addsign /home/hero/rpmbuild/RPMS/x86_64/nginx-1.7.7-3.el6.x86_64.rpm</span></span><br><span class="line">Enter pass phrase:</span><br><span class="line">Pass phrase is good.</span><br><span class="line">/home/hero/rpmbuild/RPMS/x86_64/nginx-1.7.7-3.el6.x86_64.rpm:</span><br></pre></td></tr></table></figure>
</li>
<li><p>将公钥导入rpm包</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># rpm --import RPM-GPG-KEY-smallasa</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>验证</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># rpm --checksig /home/hero/rpmbuild/RPMS/x86_64/nginx-1.7.7-3.el6.x86_64.rpm</span></span><br><span class="line">/home/hero/rpmbuild/RPMS/x86_64/nginx-1.7.7-3.el6.x86_64.rpm: rsa sha1 (md5) pgp md5 OK</span><br></pre></td></tr></table></figure>
</li>
<li><p>重新安装nginx，验证安装包的签名信息</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># rpm -ivh /home/hero/rpmbuild/RPMS/x86_64/nginx-1.7.7-3.el6.x86_64.rpm</span></span><br><span class="line">Preparing...                <span class="comment">########################################### [100%]</span></span><br><span class="line">   1:nginx                  <span class="comment">########################################### [100%]</span></span><br><span class="line">[root@localhost ~]<span class="comment">#</span></span><br><span class="line">[root@localhost ~]<span class="comment"># rpm -qi nginx</span></span><br><span class="line">Name        : nginx                        Relocations: (not relocatable)</span><br><span class="line">Version     : 1.7.7                             Vendor: smallasa</span><br><span class="line">Release     : 3.el6                         Build Date: Wed 26 Nov 2014 06:39:00 PM CST</span><br><span class="line">Install Date: Thu 27 Nov 2014 10:58:44 AM CST      Build Host: localhost</span><br><span class="line">Group       : Applications/Archiving        Source RPM: nginx-1.7.7-3.el6.src.rpm</span><br><span class="line">Size        : 793593                           License: GPLv2</span><br><span class="line">Signature   : RSA/SHA1, Thu 27 Nov 2014 10:40:02 AM CST, Key ID 6f731e81df63edfb   <span class="comment"># 与 1 比起来，多了签名信息</span></span><br><span class="line">Packager    : nmshuishui &lt;353025240@qq.com&gt;</span><br><span class="line">URL         : http://nmshuishui.blog.51cto.com/</span><br><span class="line">Summary     : nginx-1.7.7.tar.gz to nginx-1.7.7.rpm</span><br><span class="line">Description :</span><br><span class="line">Custom a rpm by yourself!Build nginx-1.7.7.tar.gz to nginx-1.7.7.rpm</span><br></pre></td></tr></table></figure>
</li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.smallasa.com/2017/07/08/rpm-package-build/" data-id="cjazexzl3009jqcoq27pc9tib" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-yum-server-install" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/07/05/yum-server-install/" class="article-date">
  <time datetime="2017-07-05T15:05:41.000Z" itemprop="datePublished">2017-07-05</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/automation/">automation</a>►<a class="article-category-link" href="/categories/automation/yum/">yum</a>►<a class="article-category-link" href="/categories/automation/yum/yum-server-install/">yum server install</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/07/05/yum-server-install/">yum server install</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="yum-源服务器搭建"><a href="#yum-源服务器搭建" class="headerlink" title="yum 源服务器搭建"></a>yum 源服务器搭建</h3><ol>
<li><p>基础软件安装</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">//修改主机名</span><br><span class="line">[root@localhost ~]<span class="comment"># echo yum |tee /etc/hostname</span></span><br><span class="line">[root@localhost ~]<span class="comment"># hostname yum</span></span><br><span class="line">[root@localhost ~]<span class="comment"># $SHELL</span></span><br><span class="line"></span><br><span class="line">//安装基础软件包</span><br><span class="line">[root@yum ~]<span class="comment"># yum -y install epel-release</span></span><br><span class="line">[root@yum ~]<span class="comment"># yum -y install gcc gcc-c++ make cmake bison libtool autoconf automake zip unzip bzip2 zlib zlib-devel openssl openssl-devel pcre pcre-devel bison-devel ncurses-devel tcl tcl-devel perl-Digest-SHA1 GeoIP GeoIP-devel gperftools gperftools-devel libatomic_ops-devel gtest gtest-devel glibc-devel unixODBC-devel fop libperl libpython readline readline-devel python2-pip readline readline-devel readline-static openssl openssl-devel openssl-static sqlite-devel bzip2-devel bzip2-libs openldap-devel</span></span><br><span class="line">[root@yum ~]<span class="comment"># yum -y install git lftp ntpdate vim wget telnet dstat tree lrzsz net-tools nmap-ncat nmap sysstat</span></span><br><span class="line"></span><br><span class="line">//关闭selinux</span><br><span class="line">[root@yum ~]<span class="comment"># setenforce 0</span></span><br><span class="line">[root@yum ~]<span class="comment"># sed -i s/'SELINUX=enforcing'/'SELINUX=disabled'/g /etc/selinux/config</span></span><br><span class="line"></span><br><span class="line">//关闭防火墙</span><br><span class="line">[root@yum ~]<span class="comment"># systemctl stop firewalld.service</span></span><br><span class="line">[root@yum ~]<span class="comment"># systemctl disable firewalld.service</span></span><br><span class="line"></span><br><span class="line">//关闭ntpd服务,定时同步时间</span><br><span class="line">[root@yum ~]<span class="comment"># systemctl stop ntpd</span></span><br><span class="line">[root@yum ~]<span class="comment"># systemctl disable ntpd</span></span><br><span class="line">[root@yum ~]<span class="comment"># echo '1 1 * * *     /usr/sbin/ntpdate -s cn.pool.ntp.org' | tee /var/spool/cron/root</span></span><br><span class="line"></span><br><span class="line">//创建基础目录</span><br><span class="line">[root@yum ~]<span class="comment"># mkdir -p /mnt/&#123;app,data,log,web,ops/&#123;app,data,cron&#125;&#125;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>安装createrepo</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@yum ~]<span class="comment"># yum -y install createrepo</span></span><br><span class="line"></span><br><span class="line">//createrepo主要用来创建yum仓库</span><br></pre></td></tr></table></figure>
</li>
<li><p>安装yum-utils</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@yum ~]<span class="comment"># yum -y install yum-utils</span></span><br><span class="line"></span><br><span class="line">//yum-utils主要用来使用reposync命令同步</span><br></pre></td></tr></table></figure>
</li>
<li><p>安装nginx</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">[root@yum app]<span class="comment"># useradd -s /sbin/nologin nginx</span></span><br><span class="line">[root@yum app]<span class="comment"># tar xzf nginx-1.10.2.tar.gz</span></span><br><span class="line">[root@yum app]<span class="comment"># cd nginx-1.10.2</span></span><br><span class="line">[root@yum nginx-1.10.2]<span class="comment"># ./configure \</span></span><br><span class="line">&gt; --prefix=/mnt/app/nginx \</span><br><span class="line">&gt; --user=nginx \</span><br><span class="line">&gt; --group=nginx \</span><br><span class="line">&gt; --with-select_module \</span><br><span class="line">&gt; --with-poll_module \</span><br><span class="line">&gt; --with-threads \</span><br><span class="line">&gt; --with-file-aio \</span><br><span class="line">&gt; --with-http_ssl_module \</span><br><span class="line">&gt; --with-http_stub_status_module \</span><br><span class="line">&gt; --with-http_v2_module \</span><br><span class="line">&gt; --with-http_realip_module \</span><br><span class="line">&gt; --with-http_addition_module \</span><br><span class="line">&gt; --with-http_geoip_module \</span><br><span class="line">&gt; --with-http_gunzip_module \</span><br><span class="line">&gt; --with-http_gzip_static_module \</span><br><span class="line">&gt; --with-http_auth_request_module \</span><br><span class="line">&gt; --with-http_degradation_module \</span><br><span class="line">&gt; --with-google_perftools_module \</span><br><span class="line">&gt; --with-pcre \</span><br><span class="line">&gt; --with-libatomic</span><br><span class="line">[root@yum nginx-1.10.2]<span class="comment"># make -j 2</span></span><br><span class="line">[root@yum nginx-1.10.2]<span class="comment"># make -j 2 install</span></span><br><span class="line">[root@yum nginx-1.10.2]<span class="comment"># mkdir -p /mnt/log/nginx</span></span><br><span class="line">[root@yum nginx-1.10.2]<span class="comment"># chown -R nginx.nginx /mnt/log/nginx</span></span><br><span class="line">[root@yum nginx-1.10.2]<span class="comment"># mkdir /mnt/data/yum.repo</span></span><br><span class="line">[root@yum nginx-1.10.2]<span class="comment"># chown -R nginx.nginx /mnt/data/yum.repo</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>修改nginx配置文件,调试</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">[root@yum ~]<span class="comment"># vim /mnt/app/nginx/conf/nginx.conf</span></span><br><span class="line">user  nginx;</span><br><span class="line">worker_processes  2;</span><br><span class="line">worker_cpu_affinity 01 10;</span><br><span class="line">worker_rlimit_nofile 65536;</span><br><span class="line">error_log  /mnt/<span class="built_in">log</span>/nginx/nginx_error.log  info;</span><br><span class="line">pid        /mnt/<span class="built_in">log</span>/nginx/nginx.pid;</span><br><span class="line">events &#123;</span><br><span class="line">    use epoll;</span><br><span class="line">    accept_mutex on;</span><br><span class="line">    multi_accept on;</span><br><span class="line">    worker_connections  10240;</span><br><span class="line">&#125;</span><br><span class="line">http &#123;</span><br><span class="line">    include       mime.types;</span><br><span class="line">    default_type  application/octet-stream;</span><br><span class="line">    server_tokens off;</span><br><span class="line">    log_format  main  <span class="string">'$remote_addr - $remote_user [$time_local] "$request" '</span></span><br><span class="line">                      <span class="string">'$status $body_bytes_sent "$http_referer" '</span></span><br><span class="line">                      <span class="string">'"$http_user_agent" "$http_x_forwarded_for"'</span>;</span><br><span class="line">    access_log  /mnt/<span class="built_in">log</span>/nginx/nginx_access.log  main;</span><br><span class="line">    sendfile        on;</span><br><span class="line">    keepalive_timeout  65 60;</span><br><span class="line">    server &#123;</span><br><span class="line">        listen       80;</span><br><span class="line">        server_name  yum.domain.cn;</span><br><span class="line">        location / &#123;</span><br><span class="line">            root   /mnt/data/yum.repo;</span><br><span class="line">            index  index.html index.htm;</span><br><span class="line">            autoindex on;                <span class="comment">#nginx打开目录浏览功能</span></span><br><span class="line">            autoindex_exact_size on;     <span class="comment">#显示文件具体大小</span></span><br><span class="line">            autoindex_localtime on;      <span class="comment">#显示系统时间</span></span><br><span class="line">        &#125;</span><br><span class="line">        error_page   404              /404.html;</span><br><span class="line">        error_page   500 502 503 504  /50x.html;</span><br><span class="line">        location = /50x.html &#123;</span><br><span class="line">            root   html;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">[root@yum ~]<span class="comment"># /mnt/app/nginx/sbin/nginx -c /mnt/app/nginx/conf/nginx.conf -t</span></span><br><span class="line">[root@yum ~]<span class="comment"># /mnt/app/nginx/sbin/nginx -c /mnt/app/nginx/conf/nginx.conf</span></span><br></pre></td></tr></table></figure>
</li>
</ol>
<hr>
<h3 id="使用-rsync-进行同步"><a href="#使用-rsync-进行同步" class="headerlink" title="使用 rsync 进行同步"></a>使用 rsync 进行同步</h3><ol>
<li><p>建立yum同步目录</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@yum ~]<span class="comment"># mkdir -p /mnt/data/yum.repo/&#123;centos,epel&#125;</span></span><br><span class="line">[root@yum ~]<span class="comment"># chmod -R 755 /mnt/data/yum.repo</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>修改nginx index.html配置文件,指向创建的目录</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">[root@yum ~]<span class="comment"># vim /mnt/data/yum.repo/index.html</span></span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;title&gt;众荟YUM源&lt;/title&gt;</span><br><span class="line">&lt;meta http-equiv=<span class="string">"Content-Type"</span> content=<span class="string">"text/html; charset=utf-8"</span> /&gt;  </span><br><span class="line">&lt;style&gt;</span><br><span class="line">    body &#123;</span><br><span class="line">        width: 35em;</span><br><span class="line">        margin: 0 auto;</span><br><span class="line">        font-family: Tahoma, Verdana, Arial, sans-serif;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/style&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;br/&gt;</span><br><span class="line">&lt;p style=<span class="string">"font-weight:bolder;color:green;font-size:16px;"</span>&gt;众荟YUM源仓库:</span><br><span class="line">&lt;!-- &lt;font size=<span class="string">"3"</span> color=<span class="string">"red"</span>&gt;众荟YUM源仓库:&lt;/fon&gt; &lt;br/&gt; --&gt;</span><br><span class="line">&lt;ul&gt;</span><br><span class="line">  &lt;li&gt;&lt;a href=<span class="string">"http://&#123;yum.domain.com&#125;/centos"</span>&gt;&lt;font size=<span class="string">"3"</span> color=<span class="string">"blue"</span>&gt;centos&lt;/font&gt;&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">  &lt;li&gt;&lt;a href=<span class="string">"http://&#123;yum.domain.com&#125;/epel"</span>&gt;&lt;font size=<span class="string">"3"</span> color=<span class="string">"blue"</span>&gt;epel&lt;/font&gt;&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">  &lt;li&gt;&lt;a href=<span class="string">"http://&#123;yum.domain.com&#125;/wisdom"</span>&gt;&lt;font size=<span class="string">"3"</span> color=<span class="string">"blue"</span>&gt;wisdom&lt;/font&gt;&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">&lt;/ul&gt;</span><br><span class="line">&lt;/p&gt;</span><br><span class="line">&lt;br/&gt;</span><br><span class="line">&lt;p style=<span class="string">"font-weight:bolder;color:green;font-size:12px;"</span>&gt;更新命令:</span><br><span class="line">&lt;ul&gt;</span><br><span class="line">  &lt;li&gt;centos 6:</span><br><span class="line">    &lt;ul&gt;</span><br><span class="line">      &lt;li&gt;&lt;font size=<span class="string">"1"</span> color=<span class="string">"blue"</span>&gt;rpm --import http://&#123;yum.domain.com&#125;/epel/RPM-GPG-KEY-EPEL-6&lt;/font&gt;&lt;/li&gt;</span><br><span class="line">      &lt;li&gt;&lt;font size=<span class="string">"1"</span> color=<span class="string">"blue"</span>&gt;curl -o /etc/yum.repos.d/epel.repo http://&#123;yum.domain.com&#125;/epel-6.repo&lt;/font&gt;&lt;/li&gt;</span><br><span class="line">      &lt;li&gt;&lt;font size=<span class="string">"1"</span> color=<span class="string">"blue"</span>&gt;rpm --import http://&#123;yum.domain.com&#125;/centos/RPM-GPG-KEY-CentOS-6&lt;/font&gt;&lt;/li&gt;</span><br><span class="line">      &lt;li&gt;&lt;font size=<span class="string">"1"</span> color=<span class="string">"blue"</span>&gt;curl -o /etc/yum.repos.d/CentOS-Base.repo http://&#123;yum.domain.com&#125;/centos-6.repo&lt;/font&gt;&lt;/li&gt;</span><br><span class="line">    &lt;/ul&gt;</span><br><span class="line">  &lt;/li&gt;</span><br><span class="line">  &lt;li&gt;centos 7:</span><br><span class="line">    &lt;ul&gt;</span><br><span class="line">      &lt;li&gt;&lt;font size=<span class="string">"1"</span> color=<span class="string">"blue"</span>&gt;rpm --import http://&#123;yum.domain.com&#125;/epel/RPM-GPG-KEY-EPEL-7&lt;/font&gt;&lt;/li&gt;</span><br><span class="line">      &lt;li&gt;&lt;font size=<span class="string">"1"</span> color=<span class="string">"blue"</span>&gt;curl -o /etc/yum.repos.d/epel.repo http://&#123;yum.domain.com&#125;/epel-7.repo&lt;/font&gt;&lt;/li&gt;</span><br><span class="line">      &lt;li&gt;&lt;font size=<span class="string">"1"</span> color=<span class="string">"blue"</span>&gt;rpm --import http://&#123;yum.domain.com&#125;/centos/RPM-GPG-KEY-CentOS-7&lt;/font&gt;&lt;/li&gt;</span><br><span class="line">      &lt;li&gt;&lt;font size=<span class="string">"1"</span> color=<span class="string">"blue"</span>&gt;curl -o /etc/yum.repos.d/CentOS-Base.repo http://&#123;yum.domain.com&#125;/centos-7.repo&lt;/font&gt;&lt;/li&gt;</span><br><span class="line">    &lt;/ul&gt;</span><br><span class="line">  &lt;/li&gt;</span><br><span class="line">&lt;/ul&gt;</span><br><span class="line">&lt;/p&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>创建yum源配置文件</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br></pre></td><td class="code"><pre><span class="line">epel-6:</span><br><span class="line">[root@yum ~]<span class="comment"># cat /mnt/data/yum.repo/epel-6.repo</span></span><br><span class="line">[epel]</span><br><span class="line">name=Extra Packages <span class="keyword">for</span> Enterprise Linux 6 - <span class="variable">$basearch</span></span><br><span class="line">baseurl=http://&#123;yum.domain.com&#125;/epel/6/<span class="variable">$basearch</span></span><br><span class="line">failovermethod=priority</span><br><span class="line">enabled=1</span><br><span class="line">gpgcheck=0</span><br><span class="line">gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-EPEL-6</span><br><span class="line"></span><br><span class="line">[epel-debuginfo]</span><br><span class="line">name=Extra Packages <span class="keyword">for</span> Enterprise Linux 6 - <span class="variable">$basearch</span> - Debug</span><br><span class="line">baseurl=http://&#123;yum.domain.com&#125;/epel/6/<span class="variable">$basearch</span>/debug</span><br><span class="line">failovermethod=priority</span><br><span class="line">enabled=0</span><br><span class="line">gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-EPEL-6</span><br><span class="line">gpgcheck=0</span><br><span class="line"></span><br><span class="line">[epel-source]</span><br><span class="line">name=Extra Packages <span class="keyword">for</span> Enterprise Linux 6 - <span class="variable">$basearch</span> - Source</span><br><span class="line">baseurl=http://&#123;yum.domain.com&#125;/epel/6/SRPMS</span><br><span class="line">failovermethod=priority</span><br><span class="line">enabled=0</span><br><span class="line">gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-EPEL-6</span><br><span class="line">gpgcheck=0</span><br><span class="line">------------------------</span><br><span class="line">epel-7:</span><br><span class="line">[root@yum ~]<span class="comment"># cat /mnt/data/yum.repo/epel-7.repo</span></span><br><span class="line">[epel]</span><br><span class="line">name=Extra Packages <span class="keyword">for</span> Enterprise Linux 7 - <span class="variable">$basearch</span></span><br><span class="line">baseurl=http://&#123;yum.domain.com&#125;/epel/7/<span class="variable">$basearch</span></span><br><span class="line">failovermethod=priority</span><br><span class="line">enabled=1</span><br><span class="line">gpgcheck=0</span><br><span class="line">gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-EPEL-7</span><br><span class="line"></span><br><span class="line">[epel-debuginfo]</span><br><span class="line">name=Extra Packages <span class="keyword">for</span> Enterprise Linux 7 - <span class="variable">$basearch</span> - Debug</span><br><span class="line">baseurl=http://&#123;yum.domain.com&#125;/epel/7/<span class="variable">$basearch</span>/debug</span><br><span class="line">failovermethod=priority</span><br><span class="line">enabled=0</span><br><span class="line">gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-EPEL-7</span><br><span class="line">gpgcheck=0</span><br><span class="line"></span><br><span class="line">[epel-source]</span><br><span class="line">name=Extra Packages <span class="keyword">for</span> Enterprise Linux 7 - <span class="variable">$basearch</span> - Source</span><br><span class="line">baseurl=http://&#123;yum.domain.com&#125;/epel/7/SRPMS</span><br><span class="line">failovermethod=priority</span><br><span class="line">enabled=0</span><br><span class="line">gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-EPEL-7</span><br><span class="line">gpgcheck=0</span><br><span class="line">------------------------</span><br><span class="line">centos-6:</span><br><span class="line">[root@yum ~]<span class="comment"># cat /mnt/data/yum.repo/centos-6.repo</span></span><br><span class="line">[base]</span><br><span class="line">name=CentOS-6 - Base - &#123;yum.domain.com&#125;</span><br><span class="line">baseurl=http://&#123;yum.domain.com&#125;/centos/6/os/x86_64/</span><br><span class="line">gpgcheck=1</span><br><span class="line">gpgkey=http://&#123;yum.domain.com&#125;/centos/RPM-GPG-KEY-CentOS-6</span><br><span class="line"></span><br><span class="line"><span class="comment">#released updates</span></span><br><span class="line">[updates]</span><br><span class="line">name=CentOS-6 - Updates - &#123;yum.domain.com&#125;</span><br><span class="line">baseurl=http://&#123;yum.domain.com&#125;/centos/6/updates/x86_64/</span><br><span class="line">gpgcheck=1</span><br><span class="line">gpgkey=http://&#123;yum.domain.com&#125;/centos/RPM-GPG-KEY-CentOS-6</span><br><span class="line"></span><br><span class="line"><span class="comment">#additional packages that may be useful</span></span><br><span class="line">[extras]</span><br><span class="line">name=CentOS-6 - Extras - &#123;yum.domain.com&#125;</span><br><span class="line">baseurl=http://&#123;yum.domain.com&#125;/centos/6/extras/x86_64/</span><br><span class="line">gpgcheck=1</span><br><span class="line">gpgkey=http://&#123;yum.domain.com&#125;/centos/RPM-GPG-KEY-CentOS-6</span><br><span class="line"></span><br><span class="line"><span class="comment">#additional packages that extend functionality of existing packages</span></span><br><span class="line">[centosplus]</span><br><span class="line">name=CentOS-6 - Plus - &#123;yum.domain.com&#125;</span><br><span class="line">baseurl=http://&#123;yum.domain.com&#125;/centos/6/centosplus/x86_64/</span><br><span class="line">gpgcheck=1</span><br><span class="line">enabled=0</span><br><span class="line">gpgkey=http://&#123;yum.domain.com&#125;/centos/RPM-GPG-KEY-CentOS-6</span><br><span class="line"></span><br><span class="line"><span class="comment">#contrib - packages by Centos Users</span></span><br><span class="line">[contrib]</span><br><span class="line">name=CentOS-6 - Contrib - &#123;yum.domain.com&#125;</span><br><span class="line">baseurl=http://&#123;yum.domain.com&#125;/centos/6/contrib/x86_64/</span><br><span class="line">gpgcheck=1</span><br><span class="line">enabled=0</span><br><span class="line">gpgkey=http://&#123;yum.domain.com&#125;/centos/RPM-GPG-KEY-CentOS-6</span><br><span class="line">------------------------</span><br><span class="line">centos-7:</span><br><span class="line">[root@yum ~]<span class="comment"># cat /mnt/data/yum.repo/centos-7.repo</span></span><br><span class="line">[base]</span><br><span class="line">name=CentOS-7 - Base</span><br><span class="line">baseurl=http://&#123;yum.domain.com&#125;/centos/7/os/x86_64/</span><br><span class="line">gpgcheck=1</span><br><span class="line">gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-7</span><br><span class="line"></span><br><span class="line"><span class="comment">#released updates</span></span><br><span class="line">[updates]</span><br><span class="line">name=CentOS-7 - Updates</span><br><span class="line">baseurl=http://&#123;yum.domain.com&#125;/centos/7/updates/x86_64/</span><br><span class="line">gpgcheck=1</span><br><span class="line">gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-7</span><br><span class="line"></span><br><span class="line"><span class="comment">#additional packages that may be useful</span></span><br><span class="line">[extras]</span><br><span class="line">name=CentOS-7 - Extras</span><br><span class="line">baseurl=http://&#123;yum.domain.com&#125;/centos/7/extras/x86_64/</span><br><span class="line">gpgcheck=1</span><br><span class="line">gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-7</span><br><span class="line"></span><br><span class="line"><span class="comment">#additional packages that extend functionality of existing packages</span></span><br><span class="line">[centosplus]</span><br><span class="line">name=CentOS-7 - Plus</span><br><span class="line">baseurl=http://&#123;yum.domain.com&#125;/centos/7/centosplus/x86_64/</span><br><span class="line">gpgcheck=1</span><br><span class="line">enabled=0</span><br><span class="line">gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-7</span><br></pre></td></tr></table></figure>
</li>
<li><p>同步yum源脚本</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">[root@yum ~]<span class="comment"># cat /mnt/ops/cron/yum.rsync.sh</span></span><br><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line">/usr/bin/rsync -av --delete --exclude=debug --exclude=aarch64 --exclude=i386 --exclude=ppc64 --exclude=ppc64le --exclude=SRPMS rsync://mirrors.ustc.edu.cn/epel/&#123;6,7&#125; /mnt/data/yum.repo/epel/</span><br><span class="line">/usr/bin/rsync -av --delete --exclude=debug --exclude=i386 --exclude=isos rsync://mirrors.ustc.edu.cn/centos/&#123;6*,7*&#125; /mnt/data/yum.repo/centos/</span><br><span class="line"></span><br><span class="line">curl -o /mnt/data/yum.repo/epel/RPM-GPG-KEY-EPEL-6 http://mirrors.ustc.edu.cn/epel/RPM-GPG-KEY-EPEL-6</span><br><span class="line">curl -o /mnt/data/yum.repo/epel/RPM-GPG-KEY-EPEL-7 http://mirrors.ustc.edu.cn/epel/RPM-GPG-KEY-EPEL-7</span><br><span class="line">curl -o /mnt/data/yum.repo/centos/RPM-GPG-KEY-CentOS-6 http://mirrors.ustc.edu.cn/centos/RPM-GPG-KEY-CentOS-6</span><br><span class="line">curl -o /mnt/data/yum.repo/centos/RPM-GPG-KEY-CentOS-7 http://mirrors.ustc.edu.cn/centos/RPM-GPG-KEY-CentOS-7</span><br><span class="line"></span><br><span class="line">[root@yum ~]<span class="comment"># crontab  -l|grep yum</span></span><br><span class="line">3 0 * * 6     /mnt/ops/cron/yum.rsync.sh &gt;/dev/null 2&gt;&amp;1</span><br><span class="line"></span><br><span class="line">注意: 使用rsync同步时,没有必要在使用createrepo创建仓库了.同步的时候已经默认将repo仓库同步到本地了</span><br></pre></td></tr></table></figure>
</li>
<li><p>客户端设置</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># mkdir –p /etc/yum.repos.d/back</span></span><br><span class="line">[root@localhost ~]<span class="comment"># mv /etc/yum.repos.d/* /etc/yum.repos.d/back/</span></span><br><span class="line"></span><br><span class="line">centos 6:</span><br><span class="line">[root@localhost ~]<span class="comment"># rpm --import http://yum.jwops.cn/epel/RPM-GPG-KEY-EPEL-6</span></span><br><span class="line">[root@localhost ~]<span class="comment"># curl -o /etc/yum.repos.d/epel.repo http://yum.jwops.cn/epel-6.repo</span></span><br><span class="line">[root@localhost ~]<span class="comment"># rpm --import http://yum.jwops.cn/centos/RPM-GPG-KEY-CentOS-6</span></span><br><span class="line">[root@localhost ~]<span class="comment"># curl -o /etc/yum.repos.d/CentOS-Base.repo http://yum.jwops.cn/centos-6.repo</span></span><br><span class="line"></span><br><span class="line">centos 7:</span><br><span class="line">[root@localhost ~]<span class="comment"># rpm --import http://yum.jwops.cn/epel/RPM-GPG-KEY-EPEL-7</span></span><br><span class="line">[root@localhost ~]<span class="comment"># curl -o /etc/yum.repos.d/epel.repo http://yum.jwops.cn/epel-7.repo</span></span><br><span class="line">[root@localhost ~]<span class="comment"># rpm --import http://yum.jwops.cn/centos/RPM-GPG-KEY-CentOS-7</span></span><br><span class="line">[root@localhost ~]<span class="comment"># curl -o /etc/yum.repos.d/CentOS-Base.repo http://yum.jwops.cn/centos-7.repo</span></span><br><span class="line"></span><br><span class="line">[root@localhost ~]<span class="comment"># yum clean all</span></span><br><span class="line">[root@localhost ~]<span class="comment"># yum makecache</span></span><br></pre></td></tr></table></figure>
</li>
</ol>
<hr>
<h3 id="使用-reposync-进行同步"><a href="#使用-reposync-进行同步" class="headerlink" title="使用 reposync 进行同步"></a>使用 reposync 进行同步</h3><ol>
<li><p>建立yum同步目录</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@yum ~]<span class="comment"># mkdir -p /mnt/data/yum.repo/wisdom/centos/6</span></span><br><span class="line">[root@yum ~]<span class="comment"># mkdir -p /mnt/data/yum.repo/wisdom/centos/7</span></span><br><span class="line">[root@yum ~]<span class="comment"># chmod -R 755 /mnt/data/yum.repo</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>修改nginx index.html配置文件,指向创建的目录</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">[root@yum ~]<span class="comment"># cp /mnt/data/yum.repo/index.html /mnt/data/yum.repo/index.html.bak</span></span><br><span class="line">[root@yum ~]<span class="comment"># vim /mnt/data/yum.repo/index.html</span></span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;title&gt;Welcome to nginx!&lt;/title&gt;</span><br><span class="line">&lt;style&gt;</span><br><span class="line">    body &#123;</span><br><span class="line">        width: 35em;</span><br><span class="line">        margin: 0 auto;</span><br><span class="line">        font-family: Tahoma, Verdana, Arial, sans-serif;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/style&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;p style=<span class="string">"font-weight:bolder;color:green;font-size:30px;"</span>&gt;ALL of the packages <span class="keyword">in</span> the below:&lt;/p&gt;</span><br><span class="line">&lt;br/&gt;</span><br><span class="line">&lt;a href=<span class="string">"http://192.168.13.213/centos/Aliyun"</span>&gt;Aliyun&lt;/a&gt;&lt;br/&gt;</span><br><span class="line">        These packagers from of CentOS ISO.&lt;br/&gt;</span><br><span class="line">&lt;p style=<span class="string">"font-weight:bolder;color:red;font-size:18px;"</span>&gt;Please replace the file and fill <span class="keyword">in</span> the following content:&lt;/p&gt;</span><br><span class="line">&lt;p style=<span class="string">"font-weight:bolder;color:blue;font-size:15px;"</span>&gt;Way: /etc/yum.repos.d/CentOS-Base.repo&lt;/p&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>下载centos repo配置文件</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@yum ~]<span class="comment"># wget -O /mnt/ops/cron/Centos-6.repo http://mirrors.aliyun.com/repo/Centos-6.repo</span></span><br><span class="line">[root@yum ~]<span class="comment"># sed -i s/\$releasever/6/g /mnt/ops/cron/Centos-6.repo</span></span><br><span class="line">[root@yum ~]<span class="comment"># sed -i s/\$basearch/x86_64/g /mnt/ops/cron/Centos-6.repo</span></span><br><span class="line"></span><br><span class="line">[root@yum ~]<span class="comment"># wget -O /etc/yum.repos.d/CentOS-Base.repo http://mirrors.aliyun.com/repo/Centos-7.repo</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>同步yum源</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@yum ~]<span class="comment"># reposync -c /mnt/ops/cron/Centos-6.repo -d -n -p /mnt/data/yum.repo/wisdom/centos/6/</span></span><br><span class="line">[root@yum ~]<span class="comment"># reposync -p /mnt/data/yum.repo/wisdom/centos/7/</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>软件包手动同步下来后,yum建立仓库</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@yum ~]<span class="comment"># createrepo -p -d -o /mnt/data/yum.repo/wisdom/centos/6/base/ /mnt/data/yum.repo/wisdom/centos/6/base/</span></span><br><span class="line">[root@yum ~]<span class="comment"># createrepo -p -d -o /mnt/data/yum.repo/wisdom/centos/6/extras/ /mnt/data/yum.repo/wisdom/centos/6/extras/</span></span><br><span class="line">[root@yum ~]<span class="comment"># createrepo -p -d -o /mnt/data/yum.repo/wisdom/centos/6/updates/ /mnt/data/yum.repo/wisdom/centos/6/updates/</span></span><br><span class="line"></span><br><span class="line">[root@yum ~]<span class="comment"># createrepo -p -d -o /mnt/data/yum.repo/wisdom/centos/7/base/ /mnt/data/yum.repo/wisdom/centos/7/base/</span></span><br><span class="line">[root@yum ~]<span class="comment"># createrepo -p -d -o /mnt/data/yum.repo/wisdom/centos/7/extras/ /mnt/data/yum.repo/wisdom/centos/7/extras/</span></span><br><span class="line">[root@yum ~]<span class="comment"># createrepo -p -d -o /mnt/data/yum.repo/wisdom/centos/7/updates/ /mnt/data/yum.repo/wisdom/centos/7/updates/</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>编写同步脚本</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">[root@yum ~]<span class="comment"># vim /mnt/ops/cron/yum.reposync.sh</span></span><br><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line">reposync -c /mnt/ops/cron/Centos-6.repo -d -n -p /mnt/data/yum.repo/wisdom/centos/6/</span><br><span class="line">createrepo -p -d -o /mnt/data/yum.repo/wisdom/centos/6/base/ /mnt/data/yum.repo/wisdom/centos/6/base/</span><br><span class="line">createrepo -p -d -o /mnt/data/yum.repo/wisdom/centos/6/extras/ /mnt/data/yum.repo/wisdom/centos/6/extras/</span><br><span class="line">createrepo -p -d -o /mnt/data/yum.repo/wisdom/centos/6/updates/ /mnt/data/yum.repo/wisdom/centos/6/updates/</span><br><span class="line"><span class="comment">#wget -O /etc/yum.repos.d/CentOS-Base.repo http://mirrors.aliyun.com/repo/Centos-7.repo</span></span><br><span class="line">reposync -n -p /mnt/data/yum.repo/wisdom/centos/7/</span><br><span class="line">createrepo -p -d -o /mnt/data/yum.repo/wisdom/centos/7/base/ /mnt/data/yum.repo/wisdom/centos/7/base/</span><br><span class="line">createrepo -p -d -o /mnt/data/yum.repo/wisdom/centos/7/extras/ /mnt/data/yum.repo/wisdom/centos/7/extras/</span><br><span class="line">createrepo -p -d -o /mnt/data/yum.repo/wisdom/centos/7/updates/ /mnt/data/yum.repo/wisdom/centos/7/updates/</span><br><span class="line"><span class="comment">#reposync -c /mnt/ops/cron/Centos-7.repo -d -p /mnt/data/yum.repo/wisdom/centos/7/</span></span><br><span class="line"></span><br><span class="line">[root@yum ~]<span class="comment"># chmod +x /mnt/ops/cron/yum.reposync.sh</span></span><br><span class="line">[root@yum ~]<span class="comment"># sh /mnt/ops/cron/yum.reposync.sh</span></span><br><span class="line"></span><br><span class="line">[root@yum ~]<span class="comment"># echo '1 2 * * *     /mnt/ops/cron/yum.reposync.sh &gt;/dev/null 2&gt;&amp;1' |tee -a /var/spool/cron/root</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>创建repo文件</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line">[root@yum ~]<span class="comment"># mkdir /mnt/data/yum.repo/repo</span></span><br><span class="line"></span><br><span class="line">//CentOS-6.repo   </span><br><span class="line">[root@yum repo]<span class="comment"># cat /mnt/data/yum.repo/repo/centos-6.repo    </span></span><br><span class="line">[CentOS_6_base]</span><br><span class="line">name=centos 6 x64</span><br><span class="line">failovermethod=priority</span><br><span class="line">baseurl=http://yum.domain.cn/centos/6/base</span><br><span class="line"><span class="built_in">enable</span>=1</span><br><span class="line">gpgcheck=0</span><br><span class="line">priority=1</span><br><span class="line"></span><br><span class="line">[CentOS_6_updates]</span><br><span class="line">name=centos 6 x64</span><br><span class="line">failovermethod=priority</span><br><span class="line">baseurl=http://yum.domain.cn/centos/6/updates</span><br><span class="line"><span class="built_in">enable</span>=1</span><br><span class="line">gpgcheck=0</span><br><span class="line">priority=3</span><br><span class="line"></span><br><span class="line">[CentOS_6_extras]</span><br><span class="line">name=centos 6 x64</span><br><span class="line">failovermethod=priority</span><br><span class="line">baseurl=http://yum.domain.cn/centos/6/extras</span><br><span class="line"><span class="built_in">enable</span>=1</span><br><span class="line">gpgcheck=0</span><br><span class="line">priority=5</span><br><span class="line">[root@yum repo]<span class="comment"># cat /mnt/data/yum.repo/repo/wisdom-centos-7.repo</span></span><br><span class="line">[CentOS_7_base]</span><br><span class="line">name=centos 7 x64</span><br><span class="line">failovermethod=priority</span><br><span class="line">baseurl=http://yum.domain.cn/centos/7/base</span><br><span class="line"><span class="built_in">enable</span>=1</span><br><span class="line">gpgcheck=0</span><br><span class="line">priority=1</span><br><span class="line"></span><br><span class="line">[CentOS_7_updates]</span><br><span class="line">name=centos 7 x64</span><br><span class="line">failovermethod=priority</span><br><span class="line">baseurl=http://yum.domain.cn/centos/7/updates</span><br><span class="line"><span class="built_in">enable</span>=1</span><br><span class="line">gpgcheck=0</span><br><span class="line">priority=3</span><br><span class="line"></span><br><span class="line">[CentOS_7_extras]</span><br><span class="line">name=centos 7 x64</span><br><span class="line">failovermethod=priority</span><br><span class="line">baseurl=http://yum.domain.cn/centos/7/extras</span><br><span class="line"><span class="built_in">enable</span>=1</span><br><span class="line">gpgcheck=0</span><br><span class="line">priority=5</span><br></pre></td></tr></table></figure>
</li>
<li><p>客户端安装 yum-plugin-priorities</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># yum -y install yum-plugin-priorities</span></span><br><span class="line"></span><br><span class="line">//yum-plugin-priorities主要用来控制yum源更新优先级,控制进行yum源检索的先后顺序</span><br></pre></td></tr></table></figure>
</li>
<li><p>客户端配置</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># mkdir –p /etc/yum.repos.d/back</span></span><br><span class="line">[root@localhost ~]<span class="comment"># mv /etc/yum.repos.d/* /etc/yum.repos.d/back/</span></span><br><span class="line">[root@localhost ~]<span class="comment"># wget -O /etc/yum.repos.d/CentOS-Base.repo http://yum.domain.cn/repo/CentOS-6.repo</span></span><br><span class="line">[root@localhost ~]<span class="comment"># wget -O /etc/yum.repos.d/CentOS-Base.repo http://yum.domain.cn/repo/CentOS-7.repo</span></span><br><span class="line"></span><br><span class="line">[root@localhost ~]<span class="comment"># yum clean all</span></span><br><span class="line">[root@localhost ~]<span class="comment"># yum makecache</span></span><br><span class="line">[root@localhost ~]<span class="comment"># yum repolist</span></span><br></pre></td></tr></table></figure>
</li>
</ol>
<hr>
<h3 id="YUM-rsync-public-source"><a href="#YUM-rsync-public-source" class="headerlink" title="YUM rsync public source"></a>YUM rsync public source</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><span class="line">[root@yum ~]<span class="comment"># mkdir -p /mnt/data/yum.repo/centos</span></span><br><span class="line">[root@yum ~]<span class="comment"># mkdir -p /mnt/ops/cron/yum.repo.sync.log</span></span><br><span class="line">[root@yum ~]<span class="comment"># echo '1 2 * * *     /mnt/ops/cron/yum.repo.sync.sh &gt;/dev/null 2&gt;&amp;1' |tee -a /var/spool/cron/root</span></span><br><span class="line">[root@yum ~]<span class="comment"># vim /mnt/ops/cron/yum.repo.sync.sh</span></span><br><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># YUM 源地址</span></span><br><span class="line">YUM_SITE=<span class="string">"rsync://mirrors.kernel.org/centos"</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># YUM 同步位置</span></span><br><span class="line">YUM_LOCAL=<span class="string">"/mnt/data/yum.repo/centos"</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># YUM 同步版本</span></span><br><span class="line">YUM_LOCAL_VER=<span class="string">"6 6* 7 7*"</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># RSYNC 限速</span></span><br><span class="line">RSYNC_BW=10240</span><br><span class="line"></span><br><span class="line"><span class="comment"># 记录脚本执行PID</span></span><br><span class="line">LOCK_FILE=<span class="string">"/mnt/ops/cron/yum.repo.sync.pid"</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 记录脚本同步日志</span></span><br><span class="line">LOG_FILE=<span class="string">"/mnt/ops/cron/yum.repo.sync.log/<span class="variable">$(date +"%Y%m%d")</span>.log"</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 指定rsync命令位置,为空表示系统默认</span></span><br><span class="line">RSYNC_PATH=<span class="string">""</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 将PID记录到文件中</span></span><br><span class="line">MY_PID=$$</span><br><span class="line"><span class="keyword">if</span> [ -f <span class="variable">$LOCK_FILE</span> ];<span class="keyword">then</span></span><br><span class="line">  get_pid=$(cat <span class="variable">$LOCK_FILE</span>)</span><br><span class="line">  get_system_pid=$(ps -ef|grep -v grep|grep <span class="variable">$get_pid</span>|wc -l)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> [ <span class="variable">$get_system_pid</span> -eq 0];<span class="keyword">then</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="variable">$MY_PID</span> |tee <span class="variable">$LOCK_FILE</span></span><br><span class="line">  <span class="keyword">else</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"正在同步中...!"</span></span><br><span class="line">    <span class="built_in">exit</span> 1</span><br><span class="line">  <span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">  <span class="built_in">echo</span> <span class="variable">$MY_PID</span> |tee <span class="variable">$LOCK_FILE</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 检查rsync工具</span></span><br><span class="line"><span class="keyword">if</span> [ -z <span class="variable">$RSYNC_PATH</span> ];<span class="keyword">then</span></span><br><span class="line">  RSYNC_PATH=`whereis rsync|awk <span class="string">' '</span><span class="string">'&#123;print $2&#125;'</span>`</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> [ -z <span class="variable">$RSYNC_PATH</span> ];<span class="keyword">then</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">'没有找到 rsync 命令'</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">'安装: yum -y install rsync'</span></span><br><span class="line">  <span class="keyword">fi</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用rsync同步YUM源</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"--------------------------------------------------"</span> |tee -a <span class="variable">$LOG_FILE</span></span><br><span class="line"><span class="built_in">echo</span> |tee -a <span class="variable">$LOG_FILE</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"rsync 开始时间: <span class="variable">$(date +'%Y-%m-%d %H:%M:%S')</span>"</span> |tee -a <span class="variable">$LOG_FILE</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> VER <span class="keyword">in</span> <span class="variable">$YUM_LOCAL_VER</span>;<span class="keyword">do</span></span><br><span class="line">  <span class="keyword">if</span> [ ! -d <span class="string">"<span class="variable">$YUM_LOCAL</span>/<span class="variable">$VER</span>"</span> ];<span class="keyword">then</span></span><br><span class="line">    mkdir -p <span class="variable">$YUM_LOCAL</span>/<span class="variable">$VER</span></span><br><span class="line">  <span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line">  <span class="built_in">echo</span> <span class="string">"rsync 开始同步: <span class="variable">$VER</span> =&gt; <span class="variable">$YUM_LOCAL</span>/<span class="variable">$VER</span>"</span> |tee -a <span class="variable">$LOG_FILE</span></span><br><span class="line">  <span class="variable">$RSYNC_PATH</span> -avrtH --delete --bwlimit=<span class="variable">$RSYNC_BW</span> --exclude=i386 <span class="variable">$YUM_SITE</span>/<span class="variable">$VER</span> <span class="variable">$YUM_LOCAL</span>/<span class="variable">$VER</span> |tee -a <span class="variable">$LOG_FILE</span></span><br><span class="line">  <span class="built_in">echo</span> |tee -a <span class="variable">$LOG_FILE</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"rsync 结束时间: <span class="variable">$(date +'%Y-%m-%d %H:%M:%S')</span>"</span> |tee -a <span class="variable">$LOG_FILE</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"--------------------------------------------------"</span> |tee -a <span class="variable">$LOG_FILE</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 删除PID文件</span></span><br><span class="line"><span class="keyword">if</span> [ -f <span class="variable">$LOCK_FILE</span> ];<span class="keyword">then</span></span><br><span class="line">  rm -rf <span class="variable">$LOCK_FILE</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">exit</span> 0</span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.smallasa.com/2017/07/05/yum-server-install/" data-id="cjazexzn900bjqcoqi4vv824r" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-Python-Django-setting" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/07/04/Python-Django-setting/" class="article-date">
  <time datetime="2017-07-04T04:43:55.000Z" itemprop="datePublished">2017-07-04</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Python/">Python</a>►<a class="article-category-link" href="/categories/Python/Python-Framework/">Python Framework</a>►<a class="article-category-link" href="/categories/Python/Python-Framework/Python-Django-setting/">Python Django setting</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/07/04/Python-Django-setting/">Python Django setting</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="python-django-配置"><a href="#python-django-配置" class="headerlink" title="python django 配置"></a>python django 配置</h3><ol>
<li><p>python 3.x 版本安装mysql</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">[root@dev cmdb]# cat cmdb/settings.py</span><br><span class="line">DATABASES = &#123;</span><br><span class="line">    &apos;default&apos;: &#123;</span><br><span class="line">        &apos;ENGINE&apos;    : &apos;django.db.backends.mysql&apos;,</span><br><span class="line">        &apos;NAME&apos;      : &apos;cmdb&apos;,</span><br><span class="line">        &apos;USER&apos;      : &apos;cmdb&apos;,</span><br><span class="line">        &apos;PASSWORD&apos;  : &apos;cmdb123&apos;,</span><br><span class="line">        &apos;HOST&apos;      : &apos;127.0.0.1&apos;,</span><br><span class="line">        &apos;PORT&apos;      : &apos;3306&apos;,</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">注意: python 3.x 不在使用MySQL-python包了,而是使用PyMySQL</span><br><span class="line"></span><br><span class="line">[root@dev cmdb]# pip install PyMySQL</span><br><span class="line">[root@dev cmdb]# cat cmdb/__init__.py</span><br><span class="line">import pymysql</span><br><span class="line">pymysql.install_as_MySQLdb()</span><br></pre></td></tr></table></figure>
</li>
<li><p>django 创建数据库表</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">[root@dev cmdb]# python manage.py migrate</span><br><span class="line">System check identified some issues:</span><br><span class="line">WARNINGS:</span><br><span class="line">?: (mysql.W002) MySQL Strict Mode is not set for database connection &apos;default&apos;</span><br><span class="line">        HINT: MySQL&apos;s Strict Mode fixes many data integrity problems in MySQL, such as data truncation upon insertion, by escalating warnings into errors. It is strongly recommended you activate it. See: https://docs.djangoproject.com/en/1.11/ref/databases/#mysql-sql-mode</span><br><span class="line"></span><br><span class="line">解决方法:</span><br><span class="line">[root@dev cmdb]# vim cmdb/settings.py</span><br><span class="line">DATABASES = &#123;</span><br><span class="line">    &apos;default&apos;: &#123;</span><br><span class="line">        #&apos;ENGINE&apos;: &apos;django.db.backends.sqlite3&apos;,</span><br><span class="line">        #&apos;NAME&apos;: os.path.join(BASE_DIR, &apos;db.sqlite3&apos;),</span><br><span class="line">        &apos;ENGINE&apos;    : &apos;django.db.backends.mysql&apos;,</span><br><span class="line">        &apos;NAME&apos;      : &apos;cmdb&apos;,</span><br><span class="line">        &apos;USER&apos;      : &apos;cmdb&apos;,</span><br><span class="line">        &apos;PASSWORD&apos;  : &apos;cmdb123&apos;,</span><br><span class="line">        &apos;HOST&apos;      : &apos;127.0.0.1&apos;,</span><br><span class="line">        &apos;PORT&apos;      : &apos;3306&apos;,</span><br><span class="line">        &apos;OPTIONS&apos;   : &#123;</span><br><span class="line">            &apos;init_command&apos; : &apos;SET default_storage_engine=INNODB&apos;,</span><br><span class="line">            &apos;init_command&apos; : &quot;SET sql_mode=&apos;STRICT_TRANS_TABLES&apos;&quot;,</span><br><span class="line">            &apos;charset&apos;      : &apos;utf8&apos;,</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>创建 model(就是创建数据库表)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line">//创建数据库表</span><br><span class="line">[root@dev cmdb]# cat app/models.py</span><br><span class="line">from django.db import models</span><br><span class="line"># Create your models here.</span><br><span class="line">class Question(models.Model):</span><br><span class="line">    question_text = models.CharField(max_length=200)</span><br><span class="line">    pub_date = models.DateTimeField(&apos;date published&apos;)</span><br><span class="line"></span><br><span class="line">class Choice(models.Model):</span><br><span class="line">    question = models.ForeignKey(Question,on_delete=models.CASCADE)</span><br><span class="line">    choice_text = models.CharField(max_length=200)</span><br><span class="line">    votes = models.IntegerField(default=0)</span><br><span class="line"></span><br><span class="line">//将数据库表加载到应用中</span><br><span class="line">(oeaoo) [root@dev cmdb]# cat app/apps.py</span><br><span class="line">from django.apps import AppConfig</span><br><span class="line">class AppConfig(AppConfig):</span><br><span class="line">    name = &apos;app&apos;</span><br><span class="line"></span><br><span class="line">[root@dev cmdb]# vim cmdb/settings.py</span><br><span class="line">INSTALLED_APPS = [</span><br><span class="line">    &apos;app.apps.AppConfig&apos;,</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line">//生成sql配置文件</span><br><span class="line">[root@dev cmdb]# python manage.py makemigrations app</span><br><span class="line">[root@dev cmdb]# ls -1 app/migrations/</span><br><span class="line">0001_initial.py</span><br><span class="line">__init__.py</span><br><span class="line">__pycache__</span><br><span class="line"></span><br><span class="line">//检查sql语句</span><br><span class="line">[root@dev cmdb]# python manage.py sqlmigrate app 0001</span><br><span class="line">BEGIN;</span><br><span class="line">--</span><br><span class="line">-- Create model Choice</span><br><span class="line">--</span><br><span class="line">CREATE TABLE `app_choice` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `choice_text` varchar(200) NOT NULL, `votes` integer NOT NULL);</span><br><span class="line">--</span><br><span class="line">-- Create model Question</span><br><span class="line">--</span><br><span class="line">CREATE TABLE `app_question` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `question_text` varchar(200) NOT NULL, `pub_date` datetime NOT NULL);</span><br><span class="line">--</span><br><span class="line">-- Add field question to choice</span><br><span class="line">--</span><br><span class="line">ALTER TABLE `app_choice` ADD COLUMN `question_id` integer NOT NULL;</span><br><span class="line">ALTER TABLE `app_choice` ADD CONSTRAINT `app_choice_question_id_614eef1f_fk_app_question_id` FOREIGN KEY (`question_id`) REFERENCES `app_question` (`id`);</span><br><span class="line">COMMIT;</span><br><span class="line"></span><br><span class="line">//检查执行sql过程</span><br><span class="line">[root@dev cmdb]#  python manage.py check</span><br><span class="line">System check identified no issues (0 silenced).</span><br><span class="line"></span><br><span class="line">//执行sql语句(创建数据库表)</span><br><span class="line">[root@dev cmdb]# python manage.py migrate</span><br></pre></td></tr></table></figure>
</li>
<li><p>Django shell环境</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">[root@dev cmdb]# python manage.py shell</span><br><span class="line">&gt;&gt;&gt; from polls.models import Question,Choice</span><br><span class="line">&gt;&gt;&gt; Question.objects.all()</span><br><span class="line">&lt;QuerySet []&gt;</span><br><span class="line">&gt;&gt;&gt;</span><br><span class="line">&gt;&gt;&gt; from django.utils import timezone</span><br><span class="line">&gt;&gt;&gt; q = Question(question_text=&quot;What&apos;s new?&quot;,pub_date=timezone.now())</span><br><span class="line">&gt;&gt;&gt; q.save()</span><br><span class="line">&gt;&gt;&gt; q.id</span><br><span class="line">1</span><br><span class="line">&gt;&gt;&gt; q.question_text</span><br><span class="line">&quot;What&apos;s new?&quot;</span><br><span class="line">&gt;&gt;&gt; q.pub_date</span><br><span class="line">datetime.datetime(2017, 7, 11, 1, 44, 48, 472871, tzinfo=&lt;UTC&gt;)</span><br><span class="line">&gt;&gt;&gt;</span><br><span class="line">&gt;&gt;&gt; q.question_text=&quot;What&apos;s up?&quot;</span><br><span class="line">&gt;&gt;&gt; q.save()</span><br><span class="line">&gt;&gt;&gt; Question.objects.all()</span><br><span class="line">&lt;QuerySet [&lt;Question: Question object&gt;]&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>Django admin</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">//创建 Django user</span><br><span class="line">[root@dev cmdb]# python manage.py createsuperuser</span><br><span class="line">Username (leave blank to use &apos;root&apos;): admin</span><br><span class="line">Email address: liu@xxx.cn</span><br><span class="line">Password:</span><br><span class="line">Password (again):</span><br><span class="line">This password is too short. It must contain at least 8 characters.</span><br><span class="line">This password is too common.</span><br><span class="line">Password:</span><br><span class="line">Password (again):</span><br><span class="line">Superuser created successfully.</span><br><span class="line"></span><br><span class="line">//启动服务</span><br><span class="line">[root@dev cmdb]# python manage.py runserver 0.0.0.0:8080</span><br><span class="line"></span><br><span class="line">//通过浏览器访问</span><br><span class="line">输入: http://192.168.13.208:8080/admin/</span><br><span class="line">输入账号和密码: admin/adminadmin</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p><img src="Python-Django-setting/django.admin.login.jpg" alt="django.admin.login"><br>  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">//将应用app通过admin来管理</span><br><span class="line">[root@dev cmdb]# vim app/admin.py</span><br><span class="line">from django.contrib import admin</span><br><span class="line"># Register your models here.</span><br><span class="line">from .models import Question</span><br><span class="line">admin.site.register(Question)</span><br></pre></td></tr></table></figure></p>
<p><img src="Python-Django-setting/django.admin.manage.jpg" alt="django.admin.manage"><br>  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">单击&quot;Question&quot;,你可以对插入到数据库里面的数据进行操作(增删改除)</span><br></pre></td></tr></table></figure></p>
<ol>
<li>Django view</li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.smallasa.com/2017/07/04/Python-Django-setting/" data-id="cjazexza9000hqcoq4rw2hmz3" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-Intellij-IDE" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/07/04/Intellij-IDE/" class="article-date">
  <time datetime="2017-07-04T01:47:49.000Z" itemprop="datePublished">2017-07-04</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/IDE/">IDE</a>►<a class="article-category-link" href="/categories/IDE/Intellij/">Intellij</a>►<a class="article-category-link" href="/categories/IDE/Intellij/Intellij-setting/">Intellij setting</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/07/04/Intellij-IDE/">Intellij IDE</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="Intellij-设置"><a href="#Intellij-设置" class="headerlink" title="Intellij 设置"></a>Intellij 设置</h3><ol>
<li>PyCharm tab 四个空格设置<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">File -&gt; Setting -&gt; Editor -&gt; Code Style -&gt; Python -&gt; Tab size 设置为4</span><br></pre></td></tr></table></figure>
</li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.smallasa.com/2017/07/04/Intellij-IDE/" data-id="cjazexza9000gqcoqot1w5tip" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-vim-vimrc-conf" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/07/04/vim-vimrc-conf/" class="article-date">
  <time datetime="2017-07-04T01:08:29.000Z" itemprop="datePublished">2017-07-04</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/IDE/">IDE</a>►<a class="article-category-link" href="/categories/IDE/vim/">vim</a>►<a class="article-category-link" href="/categories/IDE/vim/vim-vimrc/">vim vimrc</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/07/04/vim-vimrc-conf/">vim vimrc conf</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="vimrc配置"><a href="#vimrc配置" class="headerlink" title="vimrc配置"></a>vimrc配置</h3><ol>
<li>将tab键设置成4个空格<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">echo &apos;set ts=4&apos; | tee -a /etc/vimrc</span><br><span class="line">echo &apos;set expandtab&apos; | tee -a /etc/vimrc</span><br></pre></td></tr></table></figure>
</li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.smallasa.com/2017/07/04/vim-vimrc-conf/" data-id="cjazexzmu00b7qcoq5czs3xig" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-mysql-select-join" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/07/03/mysql-select-join/" class="article-date">
  <time datetime="2017-07-03T09:31:55.000Z" itemprop="datePublished">2017-07-03</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/database/">database</a>►<a class="article-category-link" href="/categories/database/Mysql/">Mysql</a>►<a class="article-category-link" href="/categories/database/Mysql/mysql-select-join/">mysql select join</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/07/03/mysql-select-join/">mysql select join</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="mysql-join-语法"><a href="#mysql-join-语法" class="headerlink" title="mysql join 语法"></a>mysql join 语法</h3><ul>
<li><a href="http://www.cnblogs.com/BeginMan/p/3754322.html" target="_blank" rel="noopener">mysql join语法分析和性能</a></li>
<li><a href="http://www.cnblogs.com/xiaofeng028/p/4098965.html" target="_blank" rel="noopener">mysql join示例</a></li>
</ul>
<hr>
<h3 id="mysql-join-示例"><a href="#mysql-join-示例" class="headerlink" title="mysql join 示例"></a>mysql join 示例</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">select</span><br><span class="line">    from_unixtime(hi.clock,<span class="string">'%Y-%m'</span>) as Date,   //from_unixtime(时间戳,格式),时间格式化. 列名为Date</span><br><span class="line">    g.name as Group_Name,  //列名为Group_name</span><br><span class="line">    h.host as Host,        //列名为Host</span><br><span class="line">    round(avg(hi.value_avg),1) as Cpu_Avg_Idle //avg(字段名),求字段平均值;round(小数,保留位),四舍五入函数;列名为Cpu_Avg_Idle</span><br><span class="line">from</span><br><span class="line">    hosts_groups hg  //表明的别名是hg</span><br><span class="line">    join groups g  on g.groupid = hg.groupid //groups 表明别名是g,(join...table...on..),g.groupid = hg.groupid表示groups.groupid字段=hosts_groups.groupid字段</span><br><span class="line">    join items  i  on hg.hostid = i.hostid</span><br><span class="line">    join hosts  h  on h.hostid  = i.hostid</span><br><span class="line">    join trends hi on i.itemid  = hi.itemid  //多个join表示满足所有条件</span><br><span class="line"><span class="built_in">where</span></span><br><span class="line">     i.key_=<span class="string">'system.cpu.util[,idle]'</span></span><br><span class="line">     and</span><br><span class="line">     hi.clock &gt;= UNIX_TIMESTAMP(<span class="string">'$&#123;year&#125;-$&#123;month&#125;-01 00:00:00'</span>) //UNIX_TIMESTAMP 将时间转换为时间戳</span><br><span class="line">     and</span><br><span class="line">     hi.clock &lt; UNIX_TIMESTAMP(<span class="string">'$&#123;year&#125;-0$&#123;next_month&#125;-01 00:00:00'</span>)</span><br><span class="line">group by h.host;</span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.smallasa.com/2017/07/03/mysql-select-join/" data-id="cjazexzhn006qqcoqlwr8gqy7" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-command-grep" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/06/28/command-grep/" class="article-date">
  <time datetime="2017-06-28T04:14:21.000Z" itemprop="datePublished">2017-06-28</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/system-service/">system service</a>►<a class="article-category-link" href="/categories/system-service/command/">command</a>►<a class="article-category-link" href="/categories/system-service/command/grep/">grep</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/06/28/command-grep/">command grep</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <ol>
<li>grep<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">//匹配多行</span><br><span class="line">cat a.txt |grep -Po <span class="string">'(?&lt;="messages_ready":)[0-9]+'</span></span><br></pre></td></tr></table></figure>
</li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.smallasa.com/2017/06/28/command-grep/" data-id="cjazexzb50018qcoqgsj5h2ef" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-python-source-install" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/06/26/python-source-install/" class="article-date">
  <time datetime="2017-06-26T09:36:59.000Z" itemprop="datePublished">2017-06-26</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Python/">Python</a>►<a class="article-category-link" href="/categories/Python/Python-install/">Python install</a>►<a class="article-category-link" href="/categories/Python/Python-install/python-source-install/">python source install</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/06/26/python-source-install/">python source install</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="python源码编译"><a href="#python源码编译" class="headerlink" title="python源码编译"></a>python源码编译</h3><ol>
<li><p>python install</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost app]<span class="comment"># xz -d Python-2.7.13.tar.xz</span></span><br><span class="line">[root@localhost app]<span class="comment"># tar xf Python-2.7.13.tar</span></span><br><span class="line">[root@localhost Python-2.7.13]<span class="comment"># ./configure --enable-optimizations --prefix=/mnt/app/python.2.7.13</span></span><br><span class="line">[root@localhost Python-2.7.13]<span class="comment"># make -j 4</span></span><br><span class="line">[root@localhost Python-2.7.13]<span class="comment"># make -j 4 install</span></span><br><span class="line"></span><br><span class="line">[root@localhost Python-2.7.13]<span class="comment"># ln -s /mnt/app/python.2.7.13 /mnt/app/python</span></span><br><span class="line"></span><br><span class="line">补充: python升级版本后,yum不可用,解决方法:</span><br><span class="line">CentOS6:</span><br><span class="line">[root@localhost Python-2.7.13]<span class="comment"># sed -i s/python/python2.6/g /usr/bin/yum</span></span><br><span class="line">CentOS7:</span><br><span class="line">[root@localhost Python-2.7.13]<span class="comment"># sed -i s/python/python2.7/g /usr/bin/yum</span></span><br><span class="line">[root@localhost Python-2.7.13]<span class="comment"># sed -i s/python/python2.7/g /usr/libexec/urlgrabber-ext-down</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>pip install</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost Python-2.7.13]<span class="comment"># wget https://bootstrap.pypa.io/get-pip.py</span></span><br><span class="line">[root@localhost Python-2.7.13]<span class="comment"># /mnt/app/python/bin/python get-pip.py</span></span><br><span class="line">[root@localhost Python-2.7.13]<span class="comment"># /mnt/app/python/bin/pip -V</span></span><br><span class="line"></span><br><span class="line">[root@localhost Python-2.7.13]<span class="comment"># mkdir ~/.pip</span></span><br><span class="line">[root@localhost Python-2.7.13]<span class="comment"># cat &gt; ~/.pip/pip.conf &lt;&lt;EOF</span></span><br><span class="line">[global]</span><br><span class="line">trusted-host=mirrors.aliyun.com</span><br><span class="line">index-url=http://mirrors.aliyun.com/pypi/simple/</span><br><span class="line">[list]</span><br><span class="line">format=columns</span><br><span class="line">EOF</span><br></pre></td></tr></table></figure>
</li>
<li><p>virtualenv install</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost Python-2.7.13]<span class="comment"># /mnt/app/python/bin/pip install virtualenv</span></span><br><span class="line">[root@localhost Python-2.7.13]<span class="comment"># /mnt/app/python/bin/virtualenv -p /mnt/app/python/bin/python /mnt/web/myenv</span></span><br><span class="line">Already using interpreter /mnt/app/python/bin/python</span><br><span class="line">New python executable <span class="keyword">in</span> /mnt/web/myenv/bin/python</span><br><span class="line">Installing setuptools, pip, wheel...done.</span><br><span class="line"></span><br><span class="line">[root@localhost Python-2.7.13]<span class="comment"># source /mnt/web/myenv/bin/activate</span></span><br><span class="line">(myenv) [root@localhost Python-2.7.13]<span class="comment"># pip -V</span></span><br><span class="line">pip 9.0.1 from /mnt/web/myenv/lib/python2.7/site-packages (python 2.7)</span><br><span class="line">(myenv) [root@localhost Python-2.7.13]<span class="comment"># deactivate</span></span><br><span class="line"></span><br><span class="line">[root@localhost Python-2.7.13]<span class="comment"># rm -rf /mnt/web/myenv</span></span><br></pre></td></tr></table></figure>
</li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.smallasa.com/2017/06/26/python-source-install/" data-id="cjazexzjt008iqcoq04bbrpwm" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-android-install" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/06/21/android-install/" class="article-date">
  <time datetime="2017-06-21T06:19:56.000Z" itemprop="datePublished">2017-06-21</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Android/">Android</a>►<a class="article-category-link" href="/categories/Android/Android-install/">Android install</a>►<a class="article-category-link" href="/categories/Android/Android-install/Android-studio-install/">Android studio install</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/06/21/android-install/">android install</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h4 id="Android-studio-install"><a href="#Android-studio-install" class="headerlink" title="Android studio install"></a>Android studio install</h4><ol>
<li><p><a href="http://www.android-studio.org/index.php/download" target="_blank" rel="noopener">Android studio download</a></p>
</li>
<li><p>Android studio install<br><strong>注意:</strong></p>
<ul>
<li>在安装的时候,Android studio的安装位置与SDK存放位置不能在相同磁盘下(windows)</li>
<li>Install Type 选择 Custom</li>
<li>选择SDK安装位置</li>
<li>选择configure-&gt;project defaults-&gt;project structure -&gt; set “SDK location” and “JDK location”</li>
</ul>
</li>
<li><p>Error</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">问题描述: 第一次安装Android studio时候弹出&quot;unable to access android sdk add-on list&quot;信息</span><br><span class="line">解决方法:</span><br><span class="line">方法一: 在自己安装的目录下找到&quot;bin\idea.properties&quot;,在文件末尾添加一行&quot;disable.android.first.run=true&quot;</span><br><span class="line">方法二: 点击&quot;setup proxy&quot;,选择&quot;Manual proxy configuration-&gt;HTTP-&gt;HOSTNAME-&gt;Port number&quot;. HOSTNAME=&quot;mirrors.neusoft.edu.cn&quot;;Port number=80</span><br></pre></td></tr></table></figure>
</li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.smallasa.com/2017/06/21/android-install/" data-id="cjazexzb50015qcoqlx09vqn8" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  


  <nav id="page-nav">
    
    <a class="extend prev" rel="prev" href="/page/9/">&laquo; 上一页</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/8/">8</a><a class="page-number" href="/page/9/">9</a><span class="page-number current">10</span><a class="page-number" href="/page/11/">11</a><a class="page-number" href="/page/12/">12</a><span class="space">&hellip;</span><a class="page-number" href="/page/29/">29</a><a class="extend next" rel="next" href="/page/11/">下一页 &raquo;</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">分类</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/AliCloud/">AliCloud</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/AliCloud/SDK/">SDK</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/AliCloud/SDK/Python-SDK/">Python SDK</a></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Android/">Android</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Android/Android-install/">Android install</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Android/Android-install/Android-studio-install/">Android studio install</a></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Development/">Development</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Development/Doc/">Doc</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Development/Doc/HTTP-严格传输安全HSTS/">HTTP 严格传输安全HSTS</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Development/Doc/HTTP协议/">HTTP协议</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Development/Doc/TCP-协议详解/">TCP 协议详解</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Development/Doc/TCP与socket区别/">TCP与socket区别</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Development/Doc/linux-文件描述符与打开文件之间的关系/">linux 文件描述符与打开文件之间的关系</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Development/Doc/linux-文件系统inode/">linux 文件系统inode</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Development/Doc/一次完整的HTTP请求/">一次完整的HTTP请求</a></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Disk/">Disk</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Disk/disk-io-performance/">disk io performance</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Disk/disk-iostat/">disk iostat</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Distributed-storage/">Distributed storage</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Distributed-storage/GlusterFS/">GlusterFS</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Distributed-storage/GlusterFS/GlusterFS-architecture/">GlusterFS architecture</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Distributed-storage/GlusterFS/GlusterFS-info/">GlusterFS info</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Distributed-storage/GlusterFS/GlusterFS-install/">GlusterFS install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Distributed-storage/GlusterFS/GlusterFS-workflow/">GlusterFS workflow</a></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Domain/">Domain</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Domain/nslookup-dns-search/">nslookup dns search</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/HA/">HA</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/HA/DRBD/">DRBD</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/HA/DRBD/DRBD-install/">DRBD install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/HA/keepalived/">keepalived</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/HA/keepalived/keepalived-install/">keepalived install</a></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/IDE/">IDE</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/IDE/Intellij/">Intellij</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/IDE/Intellij/Intellij-setting/">Intellij setting</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/IDE/vim/">vim</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/IDE/vim/vim-shortcut-key/">vim shortcut key</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/IDE/vim/vim-vimrc/">vim vimrc</a></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Kernel/">Kernel</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Kernel/kernel-memory/">kernel memory</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Kernel/kernel-memory/kernel-共享内存/">kernel 共享内存</a></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/">Monitor</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/ganglia/">ganglia</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/ganglia/ganglia-install/">ganglia install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/hmonitor/">hmonitor</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/hmonitor/hmonitor-install/">hmonitor install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/htmonitor/">htmonitor</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/htmonitor/htmonitor-install/">htmonitor install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/smokeping/">smokeping</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/smokeping/smokeping-install/">smokeping install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/zabbix/">zabbix</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/zabbix/monitor/">monitor</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/zabbix/monitor/zabbix-monitor-cpu/">zabbix monitor cpu</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/zabbix/monitor/zabbix-monitor-mem/">zabbix monitor mem</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/zabbix/zabbix-auto-discover/">zabbix auto discover</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/zabbix/zabbix-grafana-install/">zabbix grafana install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/zabbix/zabbix-install/">zabbix install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/zabbix/zabbix-install-distributed/">zabbix install distributed</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/zabbix/zabbix-item-and-tigger/">zabbix item and tigger</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/zabbix/zabbix-java-gateway/">zabbix java gateway</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/zabbix/zabbix-modify-login-user-passwd/">zabbix modify login user passwd</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/zabbix/zabbix-optimization/">zabbix optimization</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/zabbix/zabbix-proxy-install/">zabbix proxy install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/zabbix/zabbix-server-support-chinese/">zabbix server support chinese</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/zabbix/zabbix-windows-agent/">zabbix windows agent</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/树莓派/">树莓派</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/树莓派/树莓派-GSM-语音短信报警/">树莓派 GSM 语音短信报警</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/监控/">监控</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/监控/监控知识体系/">监控知识体系</a></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/">Python</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-Framework/">Python Framework</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-Framework/Python-Django/">Python Django</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-Framework/Python-Django-setting/">Python Django setting</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-Framework/Python-tornado-install/">Python tornado install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-Learn/">Python Learn</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-Learn/python-上下文管理器/">python 上下文管理器</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-Learn/python-内存管理/">python 内存管理</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-Learn/python-函数编程/">python 函数编程</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-Learn/python-变量/">python 变量</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-Learn/python-对象使用/">python 对象使用</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-Learn/python-对象的属性/">python 对象的属性</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-Learn/python-对象编程/">python 对象编程</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-Learn/python-数据类型/">python 数据类型</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-Learn/python-流程控制/">python 流程控制</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-Learn/python-爬虫/">python 爬虫</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-Learn/python-特殊方法/">python 特殊方法</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-Learn/python-特殊说明/">python 特殊说明</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-Learn/python-装饰器/">python 装饰器</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-Learn/python-过程编程/">python 过程编程</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-Learn/python-进阶/">python 进阶</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-Learn/python-闭包/">python 闭包</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-install/">Python install</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-install/python-error-info/">python error info</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-install/python-pip-source-image/">python pip source image</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-install/python-pip-use/">python pip use</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-install/python-pyenv-install/">python pyenv install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-install/python-setup-py/">python setup.py</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-install/python-source-install/">python source install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-install/python-virtualenv/">python virtualenv</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-library/">Python library</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-library/MySQLdb/">MySQLdb</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-library/memory-profiler/">memory_profiler</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-library/time-datetime-calendar/">time datetime calendar</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-modules/">Python modules</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-modules/python-modules-path/">python modules path</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-modules/python-modules-pylint-and-ipython/">python modules pylint and ipython</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-other/">Python other</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-other/python-import-and-reload/">python import and reload</a></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Ruby/">Ruby</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Ruby/Ruby-install/">Ruby install</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Ruby/Ruby-install/Ruby-install/">Ruby install</a></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/TCP-IP/">TCP.IP</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/TCP-IP/TCP-状态/">TCP 状态</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/TCP-IP/TCP-IP模型/">TCP/IP模型</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/TCP-IP/Wireshark-use/">Wireshark use</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/WeChat/">WeChat</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/WeChat/WeChat-enterprise/">WeChat enterprise</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/WeChat/WeChat-enterprise/WeChat-enterprise-API/">WeChat enterprise API</a></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/">automation</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/automation/git/">git</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/automation/git/git-command/">git command</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/git/git-error/">git error</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/git/git-gitlab/">git gitlab</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/git/git-gitolite/">git gitolite</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/git/git-gogs/">git gogs</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/git/git-gogs-source-install/">git gogs source install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/git/git-init/">git init</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/git/git-workflow/">git workflow</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/jenkins/">jenkins</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/automation/jenkins/jenkins-info/">jenkins info</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/jenkins/jenkins-install/">jenkins install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/kvm/">kvm</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/automation/kvm/kvm-install/">kvm install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/maven/">maven</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/automation/maven/maven-install/">maven install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/nexus/">nexus</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/automation/nexus/nexus-install/">nexus install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/nexus/nexus-proxy-maven/">nexus proxy maven</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/rpm/">rpm</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/automation/rpm/rpm-package-build/">rpm package build</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/rpm/rpmbuild-spec/">rpmbuild spec</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/salt/">salt</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/automation/salt/salt-advanced-topic/">salt advanced topic</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/salt/salt-highstate/">salt highstate</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/salt/salt-info/">salt info</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/salt/salt-install/">salt install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/salt/salt-install-HA/">salt install HA</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/salt/salt-install-distributed/">salt install distributed</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/salt/salt-install-standard/">salt install standard</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/salt/salt-jinja2-grain-pillar-module/">salt jinja2 grain pillar module</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/salt/salt-manage-event-reactor/">salt manage event reactor</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/salt/salt-manage-grains/">salt manage grains</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/salt/salt-manage-job/">salt manage job</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/salt/salt-manage-module/">salt manage module</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/salt/salt-manage-pillar/">salt manage pillar</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/salt/salt-manage-return/">salt manage return</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/salt/salt-manage-states/">salt manage states</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/salt/salt-manage-target/">salt manage target</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/salt/salt-master-syndic-install/">salt master syndic install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/salt/salt-master-conf/">salt master.conf</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/salt/salt-minion-conf/">salt minion.conf</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/salt/salt-raet/">salt raet</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/salt/salt-state-module/">salt state module</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/salt/salt-syndic-conf/">salt syndic.conf</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/salt/salt-write-module-code/">salt write module code</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/svn/">svn</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/automation/svn/svn-auto-update/">svn auto update</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/svn/svn-checkout-bat/">svn checkout bat</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/svn/svn-server-for-windows/">svn server for windows</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/yum/">yum</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/automation/yum/yum-server-install/">yum server install</a></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/">database</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/database/Mongo/">Mongo</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/database/Mongo/mongo-auth/">mongo auth</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Mongo/mongo-error/">mongo error</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Mongo/mongo-replication-auth-install/">mongo replication auth install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Mongo/mongo-replication-standard-install/">mongo replication standard install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Mongo/mongo-standard-install/">mongo standard install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Mysql/">Mysql</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/database/Mysql/mysql-command/">mysql command</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Mysql/mysql-error-info/">mysql error info</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Mysql/mysql-explain/">mysql explain</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Mysql/mysql-grant/">mysql grant</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Mysql/mysql-index-options/">mysql index options</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Mysql/mysql-innodb-buffer-pool-flush/">mysql innodb buffer pool flush</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Mysql/mysql-master-slave/">mysql master slave</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Mysql/mysql-master-slave-switch/">mysql master slave switch</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Mysql/mysql-partition/">mysql partition</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Mysql/mysql-select-join/">mysql select join</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Mysql/mysql-slow-log/">mysql slow log</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Mysql/mysql-standard/">mysql standard</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Mysql/mysql-table-size/">mysql table size</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Mysql/mysql-use-memory-as-disk/">mysql use memory as disk</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Postgresql/">Postgresql</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/database/Postgresql/postgresql-book-use/">postgresql book use</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Postgresql/postgresql-master-slave-info/">postgresql master slave info</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Postgresql/postgresql-master-slave/">postgresql master/slave</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Postgresql/postgresql-plugin-install/">postgresql plugin install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Postgresql/postgresql-standard/">postgresql standard</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Postgresql/postgresql-tablespace-database-schema-table-user-role-relation/">postgresql tablespace database schema table user role relation</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Postgresql/postgresql-yum-install/">postgresql yum install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Postgresql/postgresql-常用命令/">postgresql 常用命令</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Postgresql/postgresql-数据库对象/">postgresql 数据库对象</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Postgresql/postgresql-数据库管理/">postgresql 数据库管理</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Redis/">Redis</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/database/Redis/redis-error/">redis error</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Redis/redis-install/">redis install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Redis/redis-redis-trib-rb/">redis redis-trib.rb</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Redis/redis-status/">redis status</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Redis/redis-use/">redis use</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/influxDB/">influxDB</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/database/influxDB/influxDB-install/">influxDB install</a></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/golang/">golang</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/golang/go-env/">go env</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/">hadoop</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/RabbitMQ/">RabbitMQ</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/RabbitMQ/RabbitMQ-cluster/">RabbitMQ cluster</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/RabbitMQ/RabbitMQ-high-availability/">RabbitMQ high availability</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/RabbitMQ/RabbitMQ-info/">RabbitMQ info</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/RabbitMQ/RabbitMQ-install/">RabbitMQ install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/RabbitMQ/RabbitMQ-python-pika/">RabbitMQ python pika</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/RabbitMQ/RabbitMQ-user-and-grant/">RabbitMQ user and grant</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/RabbitMQ/RabbitMQ-working-principle/">RabbitMQ working principle</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/beats/">beats</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/beats/beats-install/">beats install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/datax/">datax</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/datax/datax-info/">datax info</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/datax/datax-install/">datax install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/datax/datax-job/">datax job</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/elasticsearch/">elasticsearch</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/elasticsearch/elasticsearch-backup-and-restore/">elasticsearch backup and restore</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/elasticsearch/elasticsearch-command/">elasticsearch command</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/elasticsearch/elasticsearch-core-component/">elasticsearch core component</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/elasticsearch/elasticsearch-exploring-your-cluster/">elasticsearch exploring your cluster</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/elasticsearch/elasticsearch-exploring-your-data/">elasticsearch exploring your data</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/elasticsearch/elasticsearch-four-search-type/">elasticsearch four search type</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/elasticsearch/elasticsearch-full-cluster-restart-upgrade/">elasticsearch full cluster restart upgrade</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/elasticsearch/elasticsearch-install/">elasticsearch install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/elasticsearch/elasticsearch-modifying-your-data/">elasticsearch modifying your data</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/elasticsearch/elasticsearch-rolling-upgrades/">elasticsearch rolling upgrades</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/elasticsearch/elasticsearch-safe-restart/">elasticsearch safe restart</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/elasticsearch/elasticsearch-shard/">elasticsearch shard</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/elasticsearch/how-to-tune-for-indexing-speed/">how to tune for indexing speed</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/elasticsearch/how-to-tune-for-search-speed/">how to tune for search speed</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/flume/">flume</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/flume/flume-info/">flume info</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/flume/flume-install/">flume install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/grafana/">grafana</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/grafana/grafana-install/">grafana install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/hadoop/">hadoop</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/hadoop/hadoop-简介/">hadoop 简介</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/kafka/">kafka</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/kafka/kafka-add-topic-partition/">kafka add topic partition</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/kafka/kafka-add-topic-replicats/">kafka add topic replicats</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/kafka/kafka-broker-config/">kafka broker config</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/kafka/kafka-high-throughput/">kafka high throughput</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/kafka/kafka-info/">kafka info</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/kafka/kafka-install/">kafka install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/kafka/kafka-manage-web/">kafka manage web</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/kafka/kafka-migrate-and-scale/">kafka migrate and scale</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/kafka/kafka-offset-monitor/">kafka offset monitor</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/kafka/kafka-optimize/">kafka optimize</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/kafka/kafka-use/">kafka use</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/kafka/kafka-web-console/">kafka web console</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/kafka/kafka-with-zookeeper/">kafka with zookeeper</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/kibana/">kibana</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/kibana/kibana-install/">kibana install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/logstash/">logstash</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/logstash/logstash-config-file/">logstash config file</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/logstash/logstash-filter-grok/">logstash filter grok</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/logstash/logstash-info/">logstash info</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/logstash/logstash-install/">logstash install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/mycat/">mycat</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/mycat/mycat-jvm-optimize/">mycat jvm optimize</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/mycat/mycat-web-install/">mycat web install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/nsq/">nsq</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/nsq/nsq-command/">nsq command</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/nsq/nsq-info/">nsq info</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/nsq/nsq-install/">nsq install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/zookeeper/">zookeeper</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/zookeeper/zookeeper-install/">zookeeper install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/zookeeper/zookeeper-monitor/">zookeeper monitor</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/zookeeper/zookeeper-optimize/">zookeeper optimize</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/zookeeper/zookeeper-use/">zookeeper use</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/zookeeper/zookeeper-zab-protocol/">zookeeper zab protocol</a></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/java/">java</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/java/java-env/">java env</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/java/java-jvm-optimize/">java jvm optimize</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/java/java-jvm-opts/">java jvm opts</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/java/java-jvm-原理/">java jvm 原理</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/java/java-learn/">java learn</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/java/java-learn/java-学习笔记/">java 学习笔记</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/java/java-log4j/">java log4j</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/java/java-performance-analysis/">java performance analysis</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/java/java-performance-analysis/jps/">jps</a></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/k8s/">k8s</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/k8s/k8s-dashboard-install/">k8s dashboard install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/k8s/k8s-install/">k8s install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/k8s/k8s-registry-install/">k8s registry install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/node/">node</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/node/node-install/">node install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/other/">other</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/other/ACID/">ACID</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/other/分布式二阶段和三阶段提交协议/">分布式二阶段和三阶段提交协议</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/other/开源许可协议/">开源许可协议</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/other/网络带宽/">网络带宽</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/">system service</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/Atlassian/">Atlassian</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/Atlassian/confluence-https/">confluence https</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/Atlassian/confluence-install/">confluence install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/Atlassian/confluence-reset-passwd/">confluence reset passwd</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/Atlassian/confluence-update/">confluence update</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/Atlassian/jira-https/">jira https</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/Atlassian/jira-install/">jira install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/Atlassian/jira-update/">jira update</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/Atlassian/mariadb-install/">mariadb install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/CentOS/">CentOS</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/CentOS/Base-env/">Base env</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/CentOS/linux-common-use-scripts/">linux common use scripts</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/CentOS/linux-history-info-setting/">linux history info setting</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/CentOS/linux-login-info/">linux login info</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/CentOS/linux-nginx-install/">linux nginx install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/CentOS/linux-skill/">linux skill</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/CentOS/linux-system-init/">linux system init</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/CentOS/linux-内存插槽-内存信息/">linux 内存插槽 内存信息</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/CentOS/linux-扩容swap分区/">linux 扩容swap分区</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/CentOS/linux-物理CPU-CPU核数-逻辑CPU/">linux 物理CPU CPU核数 逻辑CPU</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/CentOS/linux-磁盘系统block区别/">linux 磁盘系统block区别</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/CentOS/linux-设置-包含头文件路径-和-动态库链接路径/">linux 设置 包含头文件路径 和 动态库链接路径</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/CentOS/make提高源码编译速度/">make提高源码编译速度</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/NFS/">NFS</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/NFS/nfs-exports-command/">nfs exports command</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/NFS/nfs-install/">nfs install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/Samba/">Samba</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/Samba/samba-conf/">samba conf</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/Samba/samba-install/">samba install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/command/">command</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/command/grep/">grep</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/command/linux/">linux</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/command/pigz/">pigz</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/command/sed/">sed</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/command/split/">split</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/command/tr/">tr</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/haproxy/">haproxy</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/haproxy/haproxy-install/">haproxy install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/nginx/">nginx</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/nginx/nginx-install/">nginx install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/nginx/nginx-location/">nginx location</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/nginx/nginx-rewrite/">nginx rewrite</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/nginx/nginx-status/">nginx status</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/ntpd/">ntpd</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/ntpd/ntpd-install/">ntpd install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/openssl/">openssl</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/openssl/openssl-certificate/">openssl certificate</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/openvpn/">openvpn</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/openvpn/openvpn-install/">openvpn install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/rsync/">rsync</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/rsync/rsync-install/">rsync install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/supersord/">supersord</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/supersord/supersord-install/">supersord install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/vsftpd/">vsftpd</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/vsftpd/ftp-proxy/">ftp proxy</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/vsftpd/vsftpd-error/">vsftpd error</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/vsftpd/vsftpd-info/">vsftpd info</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/vsftpd/vsftpd-install/">vsftpd install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/windows/">windows</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/windows/cygwin-install/">cygwin install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/windows/ipsec-set/">ipsec set</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/windows/windows-modify-hosts/">windows modify hosts</a></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/web/">web</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/web/SSL/">SSL</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/web/SSL/SSL-certificate/">SSL certificate</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/web/angular/">angular</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/web/angular/angular-install/">angular install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/web/hexo/">hexo</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/web/hexo/hexo-install/">hexo install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/web/sass/">sass</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/web/sass/sass-install/">sass install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/web/xml/">xml</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/web/xml/xml-format/">xml format</a></li></ul></li></ul></li></ul>
    </div>
  </div>


  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">归档</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/01/">一月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/12/">十二月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/11/">十一月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/10/">十月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/09/">九月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/08/">八月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/07/">七月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/06/">六月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/05/">五月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/04/">四月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/03/">三月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/02/">二月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/01/">一月 2017</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">最新文章</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2020/01/01/hello-everyone/">Hello Everyone</a>
          </li>
        
          <li>
            <a href="/2017/12/08/svn-checkout-bat/">svn checkout bat</a>
          </li>
        
          <li>
            <a href="/2017/12/08/svn-server-for-windows/">svn server for windows</a>
          </li>
        
          <li>
            <a href="/2017/12/08/nslookup-dns-search/">nslookup dns search</a>
          </li>
        
          <li>
            <a href="/2017/11/28/kafka-web-console/">kafka web console</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2017 penn<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>



  </div>
</body>
</html>