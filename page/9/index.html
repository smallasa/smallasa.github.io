<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  

  
  <title>smallasa</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="smallasa">
<meta property="og:url" content="http://www.smallasa.com/page/9/index.html">
<meta property="og:site_name" content="smallasa">
<meta property="og:locale" content="zh-CN">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="smallasa">
  
    <link rel="alternate" href="/atom.xml" title="smallasa" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">smallasa</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">I known what i do !</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="搜索"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://www.smallasa.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-树莓派-GSM-语音和短信报警" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/07/24/树莓派-GSM-语音和短信报警/" class="article-date">
  <time datetime="2017-07-24T02:23:44.000Z" itemprop="datePublished">2017-07-24</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Monitor/">Monitor</a>►<a class="article-category-link" href="/categories/Monitor/树莓派/">树莓派</a>►<a class="article-category-link" href="/categories/Monitor/树莓派/树莓派-GSM-语音短信报警/">树莓派 GSM 语音短信报警</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/07/24/树莓派-GSM-语音和短信报警/">树莓派 GSM 语音和短信报警</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="树莓派-GSM-语音短信报警"><a href="#树莓派-GSM-语音短信报警" class="headerlink" title="树莓派 GSM 语音短信报警"></a>树莓派 GSM 语音短信报警</h3><ol>
<li><p>树莓派系统安装</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">1. 购买树莓派</span><br><span class="line">2. 购买无线网卡,读卡器,内存卡,HDMI转VGA线,USB转RS232串口连接转换线,相应的电源线</span><br><span class="line">3. 下载树莓派系统</span><br><span class="line">4. 将系统安装到内存卡中</span><br><span class="line">5. 接通电源,启动服务</span><br><span class="line">6. 通过无线网卡,连接WIFI</span><br><span class="line">7. 启动ssh服务</span><br><span class="line">root@raspberrypi:~# /etc/init.d/ssh start</span><br><span class="line">root@raspberrypi:~# update-rc.d ssh defaults</span><br><span class="line">root@raspberrypi:~# update-rc.d -f ssh remove</span><br></pre></td></tr></table></figure>
</li>
<li><p>树莓派基本操作</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">pi@raspberrypi:~ $ sudo su -</span><br><span class="line">root@raspberrypi:~<span class="comment"># apt-get update</span></span><br><span class="line">root@raspberrypi:~<span class="comment"># apt-get upgrade</span></span><br><span class="line">root@raspberrypi:~<span class="comment"># apt-get install vim ntpdate</span></span><br><span class="line">root@raspberrypi:~<span class="comment"># cp /usr/share/zoneinfo/Asia/Shanghai /etc/localtime</span></span><br><span class="line"></span><br><span class="line">root@raspberrypi:~<span class="comment"># raspi-config 初始化一些配置</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><a href="http://pan.baidu.com/s/1c2u5MY8" target="_blank" rel="noopener">树莓派工具</a> 密码:yb3k</p>
</li>
</ol>
<hr>
<h3 id="树莓派-调用-GSM模块-发送短信-和-语音"><a href="#树莓派-调用-GSM模块-发送短信-和-语音" class="headerlink" title="树莓派 调用 GSM模块 发送短信 和 语音"></a>树莓派 调用 GSM模块 发送短信 和 语音</h3><ol>
<li><p>给单个用户发送短信</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line">pi@raspberrypi:~/gsm $ cat send_sms.py</span><br><span class="line"><span class="comment">#!/usr/bin/env python3</span></span><br><span class="line"><span class="comment">#coding:utf8</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> RPi.GPIO <span class="keyword">as</span> GPIO</span><br><span class="line"><span class="keyword">import</span> serial</span><br><span class="line"><span class="keyword">import</span> time, sys</span><br><span class="line"><span class="keyword">import</span> datetime</span><br><span class="line"><span class="keyword">import</span> binascii</span><br><span class="line"></span><br><span class="line">P_BUTTON = <span class="number">24</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">setup</span><span class="params">()</span>:</span></span><br><span class="line">    GPIO.setmode(GPIO.BOARD)</span><br><span class="line">    GPIO.setup(P_BUTTON, GPIO.IN, GPIO.PUD_UP)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">Unicode2HexStr</span><span class="params">(Unicde_Str)</span>:</span></span><br><span class="line">    Hex_Str = <span class="string">""</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">0</span>,len(Unicde_Str)):</span><br><span class="line">        Hex_Str += (hex(ord(Unicde_Str[i])).replace(<span class="string">'0x'</span>,<span class="string">''</span>).zfill(<span class="number">4</span>))</span><br><span class="line">    <span class="keyword">return</span> Hex_Str</span><br><span class="line"></span><br><span class="line">INFO = Unicode2HexStr(<span class="string">'hi,刘朋'</span>)</span><br><span class="line"></span><br><span class="line">AA = binascii.a2b_hex(<span class="string">'1A'</span>)</span><br><span class="line"></span><br><span class="line">SERIAL_PORT = <span class="string">"/dev/ttyUSB0"</span></span><br><span class="line"></span><br><span class="line">ser = serial.Serial(SERIAL_PORT, baudrate = <span class="number">9600</span>, timeout = <span class="number">5</span>)</span><br><span class="line">setup()</span><br><span class="line"></span><br><span class="line">ser.write(<span class="string">'AT+CMGDA="DEL ALL"\r'</span>.encode())</span><br><span class="line">print(ser.read(ser.inWaiting()))</span><br><span class="line">time.sleep(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">ser.write(<span class="string">"AT+CMGF=1\r"</span>.encode())</span><br><span class="line">print(ser.read(ser.inWaiting()))</span><br><span class="line">time.sleep(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">ser.write(<span class="string">'AT+CSMP=17,167,2,25\r'</span>.encode())</span><br><span class="line">time.sleep(<span class="number">3</span>)</span><br><span class="line">print(ser.read(ser.inWaiting()))</span><br><span class="line"></span><br><span class="line">ser.write(<span class="string">'AT+CSCS="UCS2"\r'</span>.encode())</span><br><span class="line">time.sleep(<span class="number">3</span>)</span><br><span class="line">print(ser.read(ser.inWaiting()))</span><br><span class="line"></span><br><span class="line">ser.write(<span class="string">'AT+CMGS="00310035003200300031003600380034003200320033"\r'</span>.encode())</span><br><span class="line">time.sleep(<span class="number">2</span>)</span><br><span class="line">ser.write(INFO.encode())</span><br><span class="line">time.sleep(<span class="number">1</span>)</span><br><span class="line">ser.write(AA)</span><br><span class="line">print(ser.read(ser.inWaiting()))</span><br><span class="line">time.sleep(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">ser.close()</span><br></pre></td></tr></table></figure>
</li>
<li><p>给单个用户打电话,语音报警</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line">pi@raspberrypi:~/gsm $ cat send_gms.py</span><br><span class="line"><span class="comment">#!/usr/bin/env python3</span></span><br><span class="line"><span class="comment">#coding:utf8</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> serial</span><br><span class="line"><span class="keyword">import</span> time, sys</span><br><span class="line"><span class="keyword">import</span> datetime</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">Unicode2HexStr</span><span class="params">(Unicde_Str)</span>:</span></span><br><span class="line">    Hex_Str = <span class="string">""</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">0</span>,len(Unicde_Str)):</span><br><span class="line">        Hex_Str += (hex(ord(Unicde_Str[i])).replace(<span class="string">'0x'</span>,<span class="string">''</span>).zfill(<span class="number">4</span>))</span><br><span class="line">    <span class="keyword">return</span> Hex_Str</span><br><span class="line"></span><br><span class="line">INFO = Unicode2HexStr(<span class="string">'你在干什么!!! 我一直在盯着你!!! 你给我小心点!!!'</span>)</span><br><span class="line">SEND_INFO = <span class="string">'AT+CTTS=1,'</span> + <span class="string">'"'</span> + INFO  + <span class="string">'"'</span></span><br><span class="line">PHONE_NUM = <span class="string">'ATD'</span> + <span class="string">'&#123;手机号&#125;'</span> + <span class="string">';'</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">SERIAL_PORT = <span class="string">"/dev/ttyUSB0"</span></span><br><span class="line"></span><br><span class="line">ser = serial.Serial(SERIAL_PORT, baudrate = <span class="number">115200</span>, timeout = <span class="number">5</span>)</span><br><span class="line">time.sleep(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">ser.write(<span class="string">"ATE1;\r"</span>.encode())</span><br><span class="line">time.sleep(<span class="number">1</span>)</span><br><span class="line">print(ser.read(ser.inWaiting()))</span><br><span class="line"></span><br><span class="line">ser.write(<span class="string">"AT+COLP=1\r"</span>.encode())</span><br><span class="line">time.sleep(<span class="number">1</span>)</span><br><span class="line">print(ser.read(ser.inWaiting()))</span><br><span class="line"></span><br><span class="line">ser.write(<span class="string">"AT+CTTSRING=0\r"</span>.encode())</span><br><span class="line">time.sleep(<span class="number">1</span>)</span><br><span class="line">print(ser.read(ser.inWaiting()))</span><br><span class="line"></span><br><span class="line">ser.write(<span class="string">"AT+CTTSPARAM=20,0,50,75,1\r"</span>.encode())</span><br><span class="line">time.sleep(<span class="number">1</span>)</span><br><span class="line">print(ser.read(ser.inWaiting()))</span><br><span class="line"></span><br><span class="line">ser.write((PHONE_NUM + <span class="string">'\r'</span>).encode())</span><br><span class="line">time.sleep(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">ABC = <span class="number">0</span></span><br><span class="line">CBA = <span class="number">0</span></span><br><span class="line"><span class="keyword">while</span> ABC != <span class="number">1</span>:</span><br><span class="line">    AA = ser.read(ser.inWaiting())</span><br><span class="line">    BB = AA.decode()</span><br><span class="line">    <span class="keyword">if</span> <span class="string">'+COLP'</span> <span class="keyword">in</span> BB <span class="keyword">and</span> <span class="string">'OK'</span> <span class="keyword">in</span> BB:</span><br><span class="line">        ser.write((SEND_INFO + <span class="string">'\r'</span>).encode())</span><br><span class="line">        time.sleep(<span class="number">10</span>)</span><br><span class="line">        ser.write(<span class="string">"AT+CTTS=0\r"</span>.encode())</span><br><span class="line">        time.sleep(<span class="number">1</span>)</span><br><span class="line">        ABC = <span class="number">1</span></span><br><span class="line">    CBA += <span class="number">1</span></span><br><span class="line">    print(CBA)</span><br><span class="line">    <span class="keyword">if</span> CBA == <span class="number">50</span>:</span><br><span class="line">       ABC = <span class="number">1</span></span><br><span class="line">    time.sleep(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">ser.write(<span class="string">"ATH\r"</span>.encode())</span><br><span class="line">ser.close()</span><br></pre></td></tr></table></figure>
</li>
</ol>
<hr>
<h3 id="树莓派-python-模块"><a href="#树莓派-python-模块" class="headerlink" title="树莓派 python 模块"></a>树莓派 python 模块</h3><ol>
<li><p>pyserial</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">Python中用于读串口的模块是&quot;pySerial&quot;</span><br><span class="line">读取串口时首先导入包&quot;import serial&quot;,其次设置读取哪一个口,波特率,数据位,停止位</span><br><span class="line"></span><br><span class="line">例如:</span><br><span class="line">class serial.Serial  </span><br><span class="line">    __init__( port=None,</span><br><span class="line">              baudrate=9600,</span><br><span class="line">              bytesize=EIGHTBITS,</span><br><span class="line">              parity=PARITY_NONE,</span><br><span class="line">              stopbits=STOPBITS_ONE,</span><br><span class="line">              timeout=None,</span><br><span class="line">              xonxoff=False,</span><br><span class="line">              rtscts=False,</span><br><span class="line">              writeTimeout=None,</span><br><span class="line">              dsrdtr=False,</span><br><span class="line">              interCharTimeout=None )</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    baudrate：设置波特率</span><br><span class="line">    bytesize:数据位</span><br><span class="line">    stopbits:停止位</span><br><span class="line">    timeout:超时时间</span><br><span class="line">      timeout = None: 长时间等待</span><br><span class="line">      timeout = 0: 不阻塞形式 (读完之后就返回)</span><br><span class="line">      timeout = x: x秒后超时 (float allowed)</span><br><span class="line"></span><br><span class="line">例2:</span><br><span class="line">import serial           //导入模块</span><br><span class="line">ser = serial.Serial(0)  //打开第一个串口</span><br><span class="line">print ser.portstr       //能看到第一个串口的标识,windows下是COM1</span><br><span class="line">ser.write(&quot;hello&quot;)      //往串口里面写数据</span><br><span class="line">ser.close()             //关闭ser表示的串口</span><br><span class="line">ser.open()              //打开这个串口</span><br><span class="line">ser = serial.Serial(&apos;COM1&apos;, 115200)   //来设置波特率,当然还有专门的函数</span><br><span class="line">data = ser.read()       //可以读1个字符</span><br><span class="line">data = ser.read(20)     //可以读20个字符</span><br><span class="line">data = ser.readline()   //是读一行,以/n结束,要是没有/n就一直读,阻塞</span><br><span class="line">data = ser.readlines()和ser.xreadlines() //都需要设置超时时间</span><br><span class="line">ser.baudrate = 9600     //设置波特率</span><br><span class="line">ser                     //来查看当前串口的状态</span><br><span class="line">ser.isOpen()            //看看这个串口是否已经被打开</span><br></pre></td></tr></table></figure>
</li>
<li><p>RPi.GPIO</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br></pre></td><td class="code"><pre><span class="line">GPIO（General Purpose I/O Ports）意思为通用输入/输出端口,通俗地说,就是一些引脚,可以通过它们输出高低电平或者通过它们读入引脚的状态-是高电平或是低电平</span><br><span class="line">用户可以通过GPIO口和硬件进行数据交互(如UART),控制硬件工作(如LED、蜂鸣器等),读取硬件的工作状态信号(如中断信号)等</span><br><span class="line">掌握了GPIO,差不多相当于掌握了操作硬件的能力</span><br><span class="line"></span><br><span class="line">例如:</span><br><span class="line">import RPi.GPIO as GPIO   //导入RPi.GPIO模块</span><br><span class="line">或者:</span><br><span class="line">try:</span><br><span class="line">    import RPi.GPIO as GPIO</span><br><span class="line">except RuntimeError:</span><br><span class="line">    print(&quot;引入错误&quot;)</span><br><span class="line"></span><br><span class="line">在RPi.GPIO中,同时支持树莓派上的两种GPIO引脚编号:</span><br><span class="line">第一种编号是BOARD编号,这和树莓派电路板上的物理引脚编号相对应.使用这种编号的好处是,你的硬件将是一直可以使用的,不用担心树莓派的版本问题.因此,在电路板升级后,你不需要重写连接器或代码</span><br><span class="line">第二种编号是BCM规则,是更底层的工作方式,它和Broadcom的片上系统中信道编号相对应.在使用一个引脚时,你需要查找信道号和物理引脚编号之间的对应规则.对于不同的树莓派版本,编写的脚本文件也可能是无法通用的</span><br><span class="line"></span><br><span class="line">GPIO.setmode(GPIO.BOARD)  //指定BOARD编号</span><br><span class="line">或者</span><br><span class="line">GPIO.setmode(GPIO.BCM)    //指定BCM规则</span><br><span class="line"></span><br><span class="line">mode = GPIO.getmode()     //返回设置的引脚编号</span><br><span class="line"></span><br><span class="line">GPIO.setwarnings(False)   //禁用警告</span><br><span class="line"></span><br><span class="line">GPIO.setup(channel, GPIO.IN)  //将引脚设置为输入模式</span><br><span class="line">GPIO.setup(channel, GPIO.OUT) //将引脚设置为输出模式</span><br><span class="line">GPIO.setup(channel, GPIO.OUT, initial=GPIO.HIGH)  //为输出的引脚设置默认值</span><br><span class="line"></span><br><span class="line">GPIO.cleanup() //释放脚本中的使用的引脚(注意,GPIO.cleanup()只会释放掉脚本中使用的GPIO引脚,并会清除设置的引脚编号规则)</span><br><span class="line"></span><br><span class="line">GPIO.output(channel, state) //设置引脚的输出状态(状态可以设置为0,GPIO.LOW,False,1,GPIO.HIGH,True.如果编码规则为&quot;GPIO.BOARD&quot;,那么channel就是对应引脚的数字)</span><br><span class="line"></span><br><span class="line">一次性设置多个引脚:</span><br><span class="line">chan_list = [11,12]</span><br><span class="line">GPIO.output(chan_list, GPIO.LOW)</span><br><span class="line">GPIO.output(chan_list, (GPIO.HIGH, GPIO.LOW))</span><br><span class="line"></span><br><span class="line">你还可以使用Input()函数读取一个输出引脚的状态并将其作为输出值:</span><br><span class="line">GPIO.output(12, not GPIO.input(12))</span><br><span class="line"></span><br><span class="line">我们也常常需要读取引脚的输入状态,获取引脚输入状态如下代码：</span><br><span class="line">GPIO.input(channel)</span><br><span class="line">注意:低电平返回0,GPIO.LOW,False;高电平返回1,GPIO.HIGH.True</span><br><span class="line"></span><br><span class="line">如果输入引脚处于悬空状态,引脚的值将是漂动的.换句话说,读取到的值是未知的,因为它并没有被连接到任何的信号上,直到按下一个按钮或开关.由于干扰的影响,输入的值可能会反复的变化.解决方法:</span><br><span class="line">GPIO.setup(channel, GPIO.IN, pull_up_down=GPIO.PUD_UP)</span><br><span class="line">GPIO.setup(channel, GPIO.IN, pull_up_down=GPIO.PUD_DOWN)</span><br><span class="line">注意: 上面的读取代码只是获取当前一瞬间的引脚输入信号</span><br><span class="line"></span><br><span class="line">如果需要实时监控引脚的状态变化,可以有两种办法:</span><br><span class="line">最简单原始的方式是每隔一段时间检查输入的信号值,这种方式被称为轮询.如果你的程序读取的时机错误,则很可能会丢失输入信号.轮询是在循环中执行的,这种方式比较占用处理器资源.</span><br><span class="line">另一种响应GPIO输入的方式是使用中断(边缘检测),这里的边缘是指信号从高到低的变换(下降沿)或从低到高的变换(上升沿)</span><br><span class="line"></span><br><span class="line">轮询方式:</span><br><span class="line">while GPIO.input(channel) == GPIO.LOW:</span><br><span class="line">    time.sleep(0.01)  # wait 10 ms to give CPU chance to do other things</span><br><span class="line"></span><br><span class="line">边缘检测:</span><br><span class="line">边缘是指信号状态的改变,从低到高(上升沿)或从高到低(下降沿).通常情况下,我们更关心于输入状态的该边而不是输入信号的值.这种状态的该边被称为事件</span><br><span class="line">先介绍两个函数:</span><br><span class="line">* wait_for_edge() 函数</span><br><span class="line">  wait_for_edge()被用于阻止程序的继续执行,直到检测到一个边沿.也就是说,上文中等待按钮按下的实例可以改写为:</span><br><span class="line">  channel = GPIO.wait_for_edge(channel, GPIO_RISING, timeout=5000)</span><br><span class="line">  if channel is None:</span><br><span class="line">      print(&apos;Timeout occurred&apos;)</span><br><span class="line">  else:</span><br><span class="line">      print(&apos;Edge detected on channel&apos;, channel)</span><br><span class="line"></span><br><span class="line">* add_event_detect() 函数</span><br><span class="line">  该函数对一个引脚进行监听,一旦引脚输入状态发生了改变,调用event_detected()函数会返回true,如下代码:</span><br><span class="line">  GPIO.add_event_detect(channel, GPIO.RISING)  # add rising edge detection on a channel</span><br><span class="line">  do_something()</span><br><span class="line">  // 下面的代码放在一个线程循环执行。</span><br><span class="line">  if GPIO.event_detected(channel):</span><br><span class="line">      print(&apos;Button pressed&apos;)</span><br><span class="line"></span><br><span class="line">  设置多个回调函数:</span><br><span class="line">  def my_callback_one(channel):</span><br><span class="line">      print(&apos;Callback one&apos;)</span><br><span class="line">  def my_callback_two(channel):</span><br><span class="line">      print(&apos;Callback two&apos;)</span><br><span class="line">  GPIO.add_event_detect(channel, GPIO.RISING)</span><br><span class="line">  GPIO.add_event_callback(channel, my_callback_one)</span><br><span class="line">  GPIO.add_event_callback(channel, my_callback_two)</span><br><span class="line">  注意:回调触发时,并不会同时执行回调函数,而是根据设置的顺序调用它们</span><br><span class="line"></span><br><span class="line">例如: 点亮LED灯</span><br><span class="line">import RPi.GPIO as GPIO  //引入函数库</span><br><span class="line">import time</span><br><span class="line"></span><br><span class="line">RPi.GPIO.setmode(GPIO.BOARD)       //设置引脚编号规则</span><br><span class="line">RPi.GPIO.setup(11, RPi.GPIO.OUT)   //将11号引脚设置成输出模式</span><br><span class="line"></span><br><span class="line">while True</span><br><span class="line">    GPIO.output(channel, 1)   //将引脚的状态设置为高电平，此时LED亮了</span><br><span class="line">    time.sleep(1)             //程序休眠1秒钟，让LED亮1秒</span><br><span class="line">    GPIO.output(channel, 0)   //将引脚状态设置为低电平，此时LED灭了</span><br><span class="line">    time.sleep(1)             //程序休眠1秒钟，让LED灭1秒</span><br><span class="line"></span><br><span class="line">GPIO.cleanup()    //程序的最后别忘记清除所有资源</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>00310035003200300031003600380034003200320033<br>00480065006C006C006F002C5218670B</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.smallasa.com/2017/07/24/树莓派-GSM-语音和短信报警/" data-id="cjazey0ao019dqcoq6x3aaczj" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-RabbitMQ-working-principle" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/07/19/RabbitMQ-working-principle/" class="article-date">
  <time datetime="2017-07-19T09:20:05.000Z" itemprop="datePublished">2017-07-19</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/hadoop/">hadoop</a>►<a class="article-category-link" href="/categories/hadoop/RabbitMQ/">RabbitMQ</a>►<a class="article-category-link" href="/categories/hadoop/RabbitMQ/RabbitMQ-working-principle/">RabbitMQ working principle</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/07/19/RabbitMQ-working-principle/">RabbitMQ working principle</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="RabbitMQ-工作原理"><a href="#RabbitMQ-工作原理" class="headerlink" title="RabbitMQ 工作原理"></a>RabbitMQ 工作原理</h3><ol>
<li><p>RabbitMQ 简介</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">* 开源AMQP实现,Erlang语言编写,支持多种客户端</span><br><span class="line">* 分布式,高可用,持久化,可靠,安全</span><br><span class="line">* 支持多种协议: AMQP,STOMP,MQTT,HTTP</span><br><span class="line">* RabbitMQ主要概念对象: 生产者,消费者,交换机,队列</span><br><span class="line">* 业务解耦: 解决多系统,易购系统间的数据交换,解耦生产者和消费者</span><br><span class="line">* 适用场景: 批量数据异步处理,并行任务串行化,高负载任务负载均衡</span><br></pre></td></tr></table></figure>
</li>
<li><p>RabbitMQ 核心概念<br><img src="RabbitMQ-working-principle/AMQP基本概念图.jpg" alt="AMQP基本概念图"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">* 颗粒度</span><br><span class="line">  * Broker</span><br><span class="line">    接收和分发消息的应用,RabbitMQ Server就是Message Broker</span><br><span class="line"></span><br><span class="line">  * Virtual host</span><br><span class="line">    虚拟主机(虚拟组),一个Broker可以开设多个vhost.因为RabbitMQ当中,用户只能在虚拟主机的粒度进行权限控制.</span><br><span class="line">    当多个不同的用户使用同一个RabbitMQ server提供的服务时,可以划分出多个vhost,每个用户在自己的vhost创建exchange和queue等</span><br><span class="line"></span><br><span class="line">  * Exchange 消息交换机</span><br><span class="line">    message到达broker的第一站,根据分发规则,匹配查询表中的routing key,分发消息到queue中去</span><br><span class="line">    常用的类型有:direct(point-to-point),topic(publish-subscribe),fanout(multicast)</span><br><span class="line"></span><br><span class="line">  * Queue 消息队列载体</span><br><span class="line">    消息最终被送到这里等待consumer取走.一个message可以被同时拷贝到多个queue中</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">* 消息流转</span><br><span class="line">  * Binding 绑定,根据路由规则绑定Exchange和Queue</span><br><span class="line">    exchange和queue之间的虚拟连接,binding中可以包含routing key</span><br><span class="line">    Binding信息被保存到exchange中的查询表中,用于message的分发依据</span><br><span class="line"></span><br><span class="line">  * Routing Key 路由关键字</span><br><span class="line"></span><br><span class="line">  * Connection 连接</span><br><span class="line">    Publisher/Consumer和broker之间的TCP连接</span><br><span class="line">    断开连接的操作只会在client端进行,Broker不会断开连接,除非出现网络故障或broker服务出现问题</span><br><span class="line"></span><br><span class="line">  * Channel 消息通道,每个连接可建立多个channel</span><br><span class="line">    如果每一次访问RabbitMQ都建立一个Connection,在消息量大的时候建立TCP Connection的开销将是巨大的,效率也较低.Channel是在connection内部建立的逻辑连接,如果应用程序支持多线程,通常每个thread创建单独的channel进行通讯,AMQP method包含了&quot;channel id&quot;帮助客户端和&quot;message broker&quot;识别channel,所以channel之间是完全隔离的.Channel作为轻量级的Connection极大减少了操作系统建立TCP connection的开销</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">* 关联对象</span><br><span class="line">  * Producter 消息生产者</span><br><span class="line">  * Consumer  消息消费者</span><br></pre></td></tr></table></figure>
</li>
<li><p>RabbitMQ典型生产消费消息模型</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">生产者发送消息到broker server(RabbitMQ).在Broker内部,用户创建Exchange/Queue,通过Binding规则将两者联系在一起.Exchange分发消息,根据类型/binding的不同,分发策略有所区别.消息最后来到Queue中,等待消费者取走</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p><img src="RabbitMQ-working-principle/RabbitMQ典型生产消费消息模型.jpg" alt="RabbitMQ典型生产消费消息模型"></p>
<ol>
<li>RabbitMQ 交换机类型- Direct Exchange<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Direct Exchange 路由机制: 通过精确匹配消息的路由关键字,将消息路由到零个或者多个队列中,绑定关键字用来将队列和交换器绑定在一起</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p><img src="RabbitMQ-working-principle/Exchange.Direct.jpg" alt="Exchange.Direct"></p>
<ol>
<li>RabbitMQ 交换机类型- Topic Exchange<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Topic Exchange 路由机制: 通过消息的路由关键字和绑定关键字的模式匹配,将消息路由到被绑定的队列中.这种路由器类型可以被用来支持经典的发布/订阅消息传输模式</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p><img src="RabbitMQ-working-principle/Exchange.Topic.jpg" alt="Exchange.Topic"></p>
<ol>
<li>RabbitMQ 交换机类型- Fanout Exchange<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Fanout Exchange 路由机制: 不论消息的路由关键字是什么,这条信息都会被路由到所有与该交换机绑定的队列中</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p><img src="RabbitMQ-working-principle/Exchange.Fanout.jpg" alt="Exchange.Fanout"></p>
<ol>
<li>RabbitMQ 交换机类型- Headers Exchange<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Headers Exchange 路由机制: 键值对匹配路由</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p><img src="RabbitMQ-working-principle/Exchange.Headers.jpg" alt="Exchange.Headers"></p>
<ol>
<li><p>操作流程</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">(1)  消费者创建消息队列</span><br><span class="line">(2)  消费者定义消息队列</span><br><span class="line">(3)  消费者定义特定类型的交换机</span><br><span class="line">(4)  消费者设定绑定规则</span><br><span class="line">(5)  等待消息</span><br><span class="line">(6)  生产者创建消息</span><br><span class="line">(7)  生产者将消息投递至信息通道中</span><br><span class="line">(8)  交换机获取消息</span><br><span class="line">(9)  消费者获取并处理消息，并发送反馈</span><br><span class="line">(10) 结束，关闭通道和连接</span><br></pre></td></tr></table></figure>
</li>
<li><p>实践保障和规划</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">//保障</span><br><span class="line">* 复用connection,复用channel</span><br><span class="line">* 如果需要可靠业务,需要持久化和ack机制</span><br><span class="line">* 如果希望高吞吐,可以采取非持久化,noack,自动删除机制</span><br><span class="line">* 稳定性保障: 生产者异常保障,消费者异常保障</span><br><span class="line"></span><br><span class="line">//规划</span><br><span class="line">* 生产者面对Exchange,消费者面对queue</span><br><span class="line">* 一个queue只有一个消费者(可多个副本)进行处理</span><br><span class="line">* 命名规划:</span><br><span class="line">  - exchange: ex_&#123;业务对象&#125;_&#123;业务场景&#125;</span><br><span class="line">  - routekey: &#123;事件,某个业务动作&#125;</span><br><span class="line">  - queue: ex_&#123;业务对象&#125;_&#123;业务场景&#125;_&#123;事件&#125;</span><br><span class="line">* 串行或并行业务方案</span><br><span class="line">  - 并行方案: 一个事件发生后,多个消费者相互间没有依赖关系,可由Exchange分发消息到多个队列,由各队列的消费者并行进行处理</span><br><span class="line">  - 串行方案: 一个事件发生后,多个消费者有先后依赖关系,可以由先执行的消费者处理事情,处理完成后再次发送消息到exchange,由后续的队列进行处理</span><br></pre></td></tr></table></figure>
</li>
<li><p>应用场景-异步处理<br><strong>场景说明:</strong> 用户注册后,需要发注册邮件和注册短信,传统的做法有两种:</p>
<ol>
<li>串行的方式<br>将注册信息写入数据库后,发送注册邮件,再发送注册短信,以上三个任务全部完成后才返回给客户端<br>这有一个问题是,邮件,短信并不是必须的,它只是一个通知,而这种做法让客户端等待没有必要等待的东西.<br><img src="RabbitMQ-working-principle/异步处理串行.jpg" alt="异步处理串行"></li>
<li>并行的方式<br>将注册信息写入数据库后,发送邮件的同时发送短信,以上三个任务完成后,返回给客户端,并行的方式能提高处理的时间<br><img src="RabbitMQ-working-principle/异步处理并行.jpg" alt="异步处理并行"></li>
<li>引入消息队列<br>引入消息队列后,把发送邮件,短信不是必须的业务逻辑异步处理.用户的响应时间就等于写入数据库的时间+写入消息队列的时间,响应时间是串行的3倍,是并行的2倍<br><img src="RabbitMQ-working-principle/异步处理消息队列.jpg" alt="异步处理消息队列"></li>
</ol>
</li>
<li><p>应用场景-应用解耦<br><strong>场景说明:</strong> 双11是购物狂节,用户下单后,订单系统需要通知库存系统,传统的做法就是订单系统调用库存系统的接口.这种做法有一个缺点,当库存系统出现故障时,订单就会失败<br><img src="RabbitMQ-working-principle/应用解耦传统模式.jpg" alt="应用解耦传统模式"><br>引入消息队列,订单系统(用户下单后,订单系统完成持久化处理,将消息写入消息队列,返回用户订单下单成功),库存系统(订阅下单的消息,获取下单消息,进行库操作),就算库存系统出现故障,消息队列也能保证消息的可靠投递,不会导致消息丢失<br><img src="RabbitMQ-working-principle/应用解耦引入消息队列.jpg" alt="应用解耦引入消息队列"></p>
</li>
<li><p>应用场景-流量削峰<br><strong>场景说明:</strong> 流量削峰一般在秒杀活动中应用广泛.秒杀活动,一般会因为流量过大,导致应用挂掉,为了解决这个问题,一般在应用前端加入消息队列.一方面可以控制活动人数,超过此一定阀值的订单直接丢弃;另一方面可以缓解短时间的高流量压垮应用(应用程序按自己的最大处理能力获取订单)<br>引入消息队列后,用户的请求,服务器收到之后,首先写入消息队列,加入消息队列长度超过最大值,则直接抛弃用户请求或跳转到错误页面.秒杀业务根据消息队列中的请求信息,再做后续处理.<br><img src="RabbitMQ-working-principle/流量消峰引入消息队列.jpg" alt="流量消峰引入消息队列"></p>
</li>
<li><p>RabbitMQ 系统架构</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">* Round-robin dispathching 循环分发</span><br><span class="line">  RabbbitMQ的分发机制非常适合扩展,而且它是专门为并发程序设计的,如果现在load加重,那么只需要创建更多的Consumer来进行任务处理</span><br><span class="line"></span><br><span class="line">* Message acknowledgment 消息确认</span><br><span class="line">  为了保证数据不被丢失,RabbitMQ支持消息确认机制,为了保证数据能被正确处理,而不仅仅是被Consumer收到,那么我们不能采用no-ack,而应该是在处理完数据之后发送ack.</span><br><span class="line">  在处理完数据之后发送ack,就是告诉RabbitMQ数据已经被接收,处理完成,RabbitMQ可以安全的删除它了.如果Consumer退出了但是没有发送ack,那么RabbitMQ就会把这个Message发送到下一个Consumer,这样就保证在Consumer异常退出情况下数据也不会丢失.</span><br><span class="line">  RabbitMQ它没有用到超时机制.RabbitMQ仅仅通过Consumer的连接中断来确认该Message并没有正确处理,也就是说RabbitMQ给了Consumer足够长的时间做数据处理.如果忘记ack,那么当Consumer退出时,Mesage会重新分发,然后RabbitMQ会占用越来越多的内存.</span><br><span class="line"></span><br><span class="line">* Message durability 消息持久化</span><br><span class="line">  要持久化队列(queue)的持久化需要在声明时指定&quot;durable=True;&quot;</span><br><span class="line">  这里要注意,队列的名字一定要是Broker中不存在的,不然不能改变此队列的任何属性.</span><br><span class="line"></span><br><span class="line">  队列和交换机有一个创建时候指定的标志durable,durable的唯一含义就是具有这个标志的队列和交换机会在重启之后重新建立,它不表示说在队列中的消息会在重启后恢复</span><br><span class="line"></span><br><span class="line">  消息持久化包括3部分:</span><br><span class="line">  1.exchange持久化,在声明时指定&quot;durable =&gt; true&quot;</span><br><span class="line">  2.queue持久化,在声明时指定&quot;durable =&gt; true&quot;</span><br><span class="line">  3.消息持久化,在投递时指定&quot;delivery_mode =&gt; 2&quot; (1是非持久化)</span><br><span class="line">  注意:</span><br><span class="line">  * 如果exchange和queue都是持久化的,那么它们之间的binding也是持久化的</span><br><span class="line">  * 如果exchange和queue两者之间有一个持久化,一个非持久化,则不允许建立绑定</span><br><span class="line">  * 一旦创建了队列和交换机,就不能修改其标志了.例如,创建了一个non-durable的队列,然后想把它改变成durable的,唯一的办法就是删除这个队列然后重现创建</span><br><span class="line"></span><br><span class="line">* Fair dispath 公平分发</span><br><span class="line">  分发机制默认状态下不是那么优雅: RabbitMQ将第N个Message分发给第N个Consumer.N是取余后的,它不管Consumer是否还有&quot;unacked Message&quot;,只是按照这个默认的机制进行分发.如果有个Consumer工作比较重,那么就会导致有的Consumer基本没事可做,有的Consumer却毫无休息的机会</span><br><span class="line"></span><br><span class="line">  解决方法:</span><br><span class="line">  公平分发: 通过basic.qos方法设置&quot;prefetch_count=1&quot;,这样RabbitMQ就会使得每个Consumer在同一个时间点最多处理一个Message,换句话说,在接收到该Consumer的ack前,它不会将新的Message分发给它</span><br><span class="line">  注意: 这种方法可能会导致queue爆满.当然,这种情况下你可能需要添加更多的Consumer,或者创建更多的virtual Host来细化你的设计</span><br><span class="line"></span><br><span class="line">* 分发到多个Consumer</span><br><span class="line">  重温交换机类型:</span><br><span class="line">  * Direct Exchange</span><br><span class="line">    直接匹配,通过Exchange名称+Rounting Key来发送与接收消息</span><br><span class="line">  * Fanout Exchange</span><br><span class="line">    广播订阅,向所有的消费者发布消息,但是只有消费者将队列绑定到该路由器才能收到消息,忽略Routing Key</span><br><span class="line">  * Topic Exchange</span><br><span class="line">    主题匹配订阅,这里的主题指的是Routing Key,Routing Key可以采用通配符,如:*或#,RoutingKey命名采用&quot;.&quot;来分隔多个词,只有消息这将队列绑定到该路由器且指定Routing Key符合匹配规则时才能收到消息</span><br><span class="line">  * Headers Exchange</span><br><span class="line">    消息头订阅,消息发布前,为消息定义一个或多个键值对的消息头,然后消费者接收消息同时需要定义类似的键值对请求头:(如:x-mactch=all或者x_match=any),只有请求头与消息头匹配,才能接收消息,忽略RoutingKey.</span><br><span class="line">  * 默认的exchange</span><br><span class="line">    如果用空字符串去声明一个exchange,那么系统就会使用&quot;amq.direct&quot;这个exchange.我们创建一个queue时,默认的都会有一个和新建queue同名的routing Key绑定到这个默认的exchange上去</span><br><span class="line"></span><br><span class="line">  如果有两个接收程序都是用了同一个的queue和相同的routingKey去绑定direct exchange的话,分发的行为是负载均衡的,也就是说第一个是程序1收到,第二个是程序2收到,以此类推</span><br><span class="line">  如果有两个接收程序用了各自的queue,但使用相同的routingKey去绑定direct exchange的话,分发的行为是复制的,也就是说每个程序都会收到这个消息的副本.行为相当于fanout类型的</span><br><span class="line"></span><br><span class="line">* 消息序列化</span><br><span class="line">  RabbitMQ使用ProtoBuf序列化消息,它可作为RabbitMQ的Message的数据格式进行传输,由于是结构化的数据,这样就极大的方便了Consumer的数据高效处理,当然也可以使用XML,与XML相比,ProtoBuf有优势.</span><br></pre></td></tr></table></figure>
</li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.smallasa.com/2017/07/19/RabbitMQ-working-principle/" data-id="cjazexzap000sqcoqvozxsvba" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-RabbitMQ-high-availability" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/07/19/RabbitMQ-high-availability/" class="article-date">
  <time datetime="2017-07-19T07:37:23.000Z" itemprop="datePublished">2017-07-19</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/hadoop/">hadoop</a>►<a class="article-category-link" href="/categories/hadoop/RabbitMQ/">RabbitMQ</a>►<a class="article-category-link" href="/categories/hadoop/RabbitMQ/RabbitMQ-high-availability/">RabbitMQ high availability</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/07/19/RabbitMQ-high-availability/">RabbitMQ high availability</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="RabbitMQ-高可用方案"><a href="#RabbitMQ-高可用方案" class="headerlink" title="RabbitMQ 高可用方案"></a>RabbitMQ 高可用方案</h3><ol>
<li><p>Rabbit集群方案一: 普通模式</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">普通模式:</span><br><span class="line">exchange,buindling在所有的节点上都会保存一份,但queue只会存储在其中的一个节点上,同时所有的节点还都会存储一份queue的meta信息.</span><br><span class="line">因为这样有两个好处:</span><br><span class="line">1.存储空间</span><br><span class="line">  如果每一个节点上都有全部的消息,有多少个节点就会有多少个消息总量的&quot;拷贝&quot;.</span><br><span class="line">  假如一个队列的消息占用的空间是1G,那么三个节点就是3G</span><br><span class="line">2.性能</span><br><span class="line">  * 消息需要在节点之间传输会有很大的网络开销</span><br><span class="line">  * 如果消息设置了durable(即,持久化),还会增加很大的磁盘负载</span><br><span class="line"></span><br><span class="line">队列存储的节点 取决于 创建队列的客户端当时所连接的节点.如果生产者连接的是另外一个节点,将会把消息转发到存储该队列的节点上.如果消费者连接了非存储队列的节点取数据,消费者从存储消息的节点拉去数据.</span><br><span class="line">所以:</span><br><span class="line">1.创建队列都连到了一个节点上,所有的队列都存储在一个节点上</span><br><span class="line">2.存消息的节点挂掉了,consumer只能等到节点恢复后才能读到消息</span><br><span class="line">3.设A,B节点,queue数据在A上,可以向A或B生产或消费消息.一旦往B生产消息时A挂了,client不会收到任何错误信息并继续发送,而实际上消息是被丢弃了.而此时如果client也挂了,再连接B时会报节点A不存在而失败.在B读也是类似的,在client批量取到的数据读完之前是不会知道A有没有挂掉,等到读取下一批数据时一旦A挂掉会报错</span><br><span class="line">所以这种集群方法的特点是：高吞吐量,非高可用</span><br></pre></td></tr></table></figure>
</li>
<li><p>Rabbit集群方案一: 镜像模式</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line">镜像模式:</span><br><span class="line"></span><br><span class="line">镜像模式和普通模式的区别:</span><br><span class="line">队列的数据都镜像了一份到所有的节点上.这样任何一个节点失效,不会影响整个集群的使用</span><br><span class="line"></span><br><span class="line">在实现上,镜像队列内部有一套选举算法,会选出一个master和若干个slaver.master和slaver通过相互间不断发送心跳来检查是否连接断开.可以通过指定net_ticktime来控制心跳检查频率.注意一个单位时间net_ticktime实际上做了4次交互,故当超过net_ticktime(± 25%)秒没有响应的话则认为节点挂掉.另外注意修改net_ticktime时需要所有节点都一致:</span><br><span class="line">配置举例:</span><br><span class="line">[</span><br><span class="line">  &#123;rabbit, [&#123;tcp_listeners, [5672]&#125;]&#125;,</span><br><span class="line">  &#123;kernel, [&#123;net_ticktime,  120&#125;]&#125;</span><br><span class="line">].</span><br><span class="line"></span><br><span class="line">consumer,任意连接一个节点,若连上的不是master,请求会转发给master,为了保证消息的可靠性,consumer回复ack给master后,master删除消息并广播所有的slaver去删除.</span><br><span class="line"></span><br><span class="line">publisher,任意连接一个节点,若连上的不是master,则转发给master,由master存储并转发给其他的slaver存储.如果master挂掉,则从slaver中选择消息队列最长的为master,在这种情况下可以存在消息未同步,给ack消息未同步的情况,会造成消息重发(默认是异步同步的).</span><br><span class="line">总共有以下几件事情发生：</span><br><span class="line">1.1个最老的(队列最长的)的slaver提升为master,如果没有一个slaver是和master同步的则会造成消息丢失</span><br><span class="line">2.要提升为master的slaver会认为以前所有连接挂掉的master的消费者都断开了连接.那么存在clinet发送了ack的消息但还在路上是master挂掉的情况,或者master收到了ack但是在广播给slaver的时候master挂掉的情况,所以新的master别无选择,只能认为消息没有被确认.他会requeue他认为没有ack的消息.那么client可能就收到了重复的消息,并要再次发送ack</span><br><span class="line">3.从镜像队列中消费的client支持了consumer Cancellation通知的,将收到通知并订阅的mirrored-queue被取消了,这是因为该mirrored-queue升级成了master,这是client需要重现去找mirrored-queue上消费,这样就避免了client继续发送ack到老的挂掉的master上.避免收到新的master发送的相同的消息.</span><br><span class="line">4.如果noAck=true,且在mirrored-queue上消费,那么在切换时由于服务器是先ack然后发送到noAck=true的消费者,这时连接断开可能导致该数据丢失</span><br><span class="line"></span><br><span class="line">如果slaver挂掉,则集群的节点状态没有任何变化.只要client没有连到这个节点上,也不会给client发送失败的通知.在检测到slaver挂掉的期间publish消息会有延迟.如果配置了高可用策略是自动同步,当slaver起来后,队列中有大量的消息需要同步,将会整个集群阻塞长时间的不能读写直到同步结束.</span><br><span class="line"></span><br><span class="line">这两个挂掉的情况都需要客户端镜像容错,比如在连接断开的时候进行重连(官方的Java和.net 客户端提供了callback方法在监听到链接失败的时候调用.Java在Connection和channel类中提供了ShutdownListener 的callback方法,.net client在IConnecton中提供了ConnectionShuedown在Imodel中提供了ImodelShutdown事件供调用).也可以在client和server之间加入LoadBalancer.比如haproxy做负载均衡</span><br><span class="line"></span><br><span class="line">指定mirror策略:</span><br><span class="line">有三种策略:</span><br><span class="line">* all</span><br><span class="line">  队列将mirrored到所有集群中的节点中,当新节点添加进来时也会mirrored到新的节点</span><br><span class="line">* exactly(需指定count)</span><br><span class="line">  如果节点数小于count数,则队列将mirrored到所有的节点.如果节点数大于count,新的节点将不再创建队列的mirror(即使原来已创建mirror的节点挂掉也不会创建)</span><br><span class="line">* nodes</span><br><span class="line">  对指定的节点进行mirror.如果没有一个指定的节点在运行中,那么只有client连接的那个节点才会声明queue(这里有个迁移策略:假如queue是在[A,B]上且A为master,若给定的新的策略为nodes[C,D],那么为了防止数据丢失,在迁移中会同时存在[A,C,D]直到C,D已经同步好以后,A才会关闭)</span><br><span class="line"></span><br><span class="line">配置举例:</span><br><span class="line">设置queue的名称为ha.的为高可用:</span><br><span class="line">linux:rabbitmqctl set_policy ha-all &quot;^ha\.&quot; &apos;&#123;&quot;ha-mode&quot;:&quot;all&quot;&#125;&apos;</span><br><span class="line">win:rabbitmqctl set_policy ha-all &quot;^ha\.&quot; &quot;&#123;&quot;&quot;ha-mode&quot;&quot;:&quot;&quot;all&quot;&quot;&#125;&quot;</span><br><span class="line">http api:PUT /api/policies/%2f/ha-all &#123;&quot;pattern&quot;:&quot;^ha\.&quot;, &quot;definition&quot;:&#123;&quot;ha-mode&quot;:&quot;all&quot;&#125;&#125;</span><br><span class="line">web ui:</span><br><span class="line">1:Navigate to Admin &gt; Policies &gt; Add / update a policy.</span><br><span class="line">2:Enter &quot;ha-all&quot; next to Name, &quot;^ha\.&quot; next to Pattern, and &quot;ha-mode&quot; = &quot;all&quot; in the first line next to Policy.</span><br><span class="line">3:Click Add policy.</span><br><span class="line"></span><br><span class="line">举例2：</span><br><span class="line">rabbitmqctl set_policy ha-two &quot;^two\.&quot; \</span><br><span class="line">   &apos;&#123;&quot;ha-mode&quot;:&quot;exactly&quot;,&quot;ha-params&quot;:2,&quot;ha-sync-mode&quot;:&quot;automatic&quot;&#125;&apos;</span><br><span class="line"></span><br><span class="line">自动或手动同步：</span><br><span class="line">你可以查看哪些slave已经同步好了：</span><br><span class="line">rabbitmqctl list_queues name slave_pids synchronised_slave_pids</span><br><span class="line"></span><br><span class="line">你可以手动同步(默认手动同步)：</span><br><span class="line">rabbitmqctl sync_queue name</span><br><span class="line"></span><br><span class="line">你可以取消自动同步：</span><br><span class="line">rabbitmqctl cancel_sync_queue name</span><br><span class="line">一个没有同步的mirror，它仍然会同步后续插入队列的数据，但是队列前面的数据却没有。但是随着队列的不断消费，导致空缺的部分的消息被消费掉了，此时mirror也可以是同步了的。</span><br></pre></td></tr></table></figure>
</li>
<li><p>Rabbit集群方案一: 主备模式</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">主备模式:</span><br><span class="line">主备方式(active,passive)只有一个节点处于服务状态,可以结合pacemaker和ARBD,shovel简单从一个broker的一个队列中消费消息,且转发该消息到另一个broker的交换机.</span><br></pre></td></tr></table></figure>
</li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.smallasa.com/2017/07/19/RabbitMQ-high-availability/" data-id="cjazexza9000kqcoq5zbrcvpp" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-SSL-certificate" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/07/18/SSL-certificate/" class="article-date">
  <time datetime="2017-07-18T01:25:19.000Z" itemprop="datePublished">2017-07-18</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/web/">web</a>►<a class="article-category-link" href="/categories/web/SSL/">SSL</a>►<a class="article-category-link" href="/categories/web/SSL/SSL-certificate/">SSL certificate</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/07/18/SSL-certificate/">SSL certificate</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="SSL-证书相关信息"><a href="#SSL-证书相关信息" class="headerlink" title="SSL 证书相关信息"></a>SSL 证书相关信息</h3><ol>
<li><p>SSL专用名词</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">* HTTPS</span><br><span class="line">  HTTPS=HTTP+SSL,是 HTTP 基于 SSL 协议的网站加密传输协议,网站安装 SSL 证书后,使用 HTTPS 加密协议访问,可激活客户端浏览器到网站服务器之间的&quot;SSL 加密通道&quot;(SSL 协议),实现高强度双向加密传输,以保护传输数据的隐私性与完整性</span><br><span class="line"></span><br><span class="line">* SSL</span><br><span class="line">  SSL（Secure Sockets Layer）即安全套接层,利用数据加密(Encryption)技术,可确保数据在网络上传输过程中不会被截取.SSL 协议位于 TCP/IP 协议与各种应用层协议之间,为数据通讯提供安全支持</span><br><span class="line"></span><br><span class="line">* SSL 证书</span><br><span class="line">  SSL 证书就是遵守 SSL 协议的服务器数字证书,由受信任的数字证书颁发机构CA颁发,具有服务器身份验证和数据传输加密等功能</span><br><span class="line"></span><br><span class="line">* CA</span><br><span class="line">  数字证书授权机构(CA，Certificate Authority)是负责发放和管理数字证书的权威机构</span><br><span class="line"></span><br><span class="line">* RSA</span><br><span class="line">  RSA 公钥加密算法是 1977 年由 Ron Rivest、Adi Shamir、Leonard Adleman 一起提出的,它是第一个能同时用于加密和数字签名的算法,从提出到现今经历了各种攻击的考验,能够抵抗到目前为止已知的绝大多数密码攻击,已被 ISO 推荐为公钥数据加密标准</span><br><span class="line"></span><br><span class="line">* ECC</span><br><span class="line">  ECC(Elliptic Curves Cryptography，椭圆曲线加密算法)也是一种公钥加密算法,与主流的 RSA 算法相比,ECC 算法可以使用较短的密钥达到相同的安全程度,其安全性更高、处理速度更快</span><br></pre></td></tr></table></figure>
</li>
<li><p>SSL域名证书类型</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">* DV</span><br><span class="line">  信任等级一般只需验证网站的真实性便可颁发证书保护网站 普通加锁标记(一般免费)</span><br><span class="line">  适用于个人网站</span><br><span class="line"></span><br><span class="line">* OV</span><br><span class="line">  信任等级强须要验证企业的身份，审核严格，安全性更高 普通加锁标记(收费)</span><br><span class="line">  适用于企业官网,一般网店,电商</span><br><span class="line"></span><br><span class="line">* EV</span><br><span class="line">  信任等级最高须要验证企业的身份，审核严格，安全性最高 绿色安全地址栏(收费)</span><br><span class="line">  适用于金融行业</span><br><span class="line"></span><br><span class="line">补充:</span><br><span class="line">标准域名: www.qiniu.com；qiniu.com；abc.qiniu.com</span><br><span class="line">泛域名:  *.qiniu.com；.abc.qiniu.com</span><br></pre></td></tr></table></figure>
</li>
<li><p>SSL域名证书验证方式</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">* 邮箱验证</span><br><span class="line">  系统会向你选择的管理员邮箱 发送验证邮件，能够收到验证邮件，并点击邮件中验证链接 即可完成验证</span><br><span class="line">  域名管理员邮箱须符合以下任意规则:</span><br><span class="line">  1.域名 whois 管理联系人邮箱</span><br><span class="line">  2.域名 whois 技术联系人邮箱</span><br><span class="line">  3.默认管理员前缀的邮箱：</span><br><span class="line">    admin@domain.com</span><br><span class="line">    administrator@domain.com</span><br><span class="line">    hostmaster@domain.com</span><br><span class="line">    webmaster@domain.com</span><br><span class="line">    postmaster@domain.com</span><br><span class="line"></span><br><span class="line">* DNS验证</span><br><span class="line">  通过解析指定的DNS记录验证域名所有权</span><br><span class="line">  例如: sr5jtl17ng5dfzjvx2lg9fxm90dygdps.domain.com ---CName--&gt; s20150112110645.domain.com</span><br><span class="line">       系统会定时检查 sr5jtl17ng5dfzjvx2lg9fxm90dygdps.domain.com 的CName纪录，若能检测到 并且与指定的值匹配 即可完成域名所有权验证</span><br><span class="line"></span><br><span class="line">* 文件验证</span><br><span class="line">  通过在域名根目录下创建指定的文件验证域名所有权</span><br><span class="line">  例如：创建文件 irmvo302.htm 文件内容 NtdutxbskfhWvP3OffXW</span><br><span class="line">       系统会定时尝试访问 http://xxx.domain/irmvo302.htm 这个文件,若能访问到 并且内容匹配即可完成域名所有权验证</span><br></pre></td></tr></table></figure>
</li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.smallasa.com/2017/07/18/SSL-certificate/" data-id="cjazexzap000tqcoqqrnt3lb1" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-smokeping-install" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/07/14/smokeping-install/" class="article-date">
  <time datetime="2017-07-14T04:03:02.000Z" itemprop="datePublished">2017-07-14</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Monitor/">Monitor</a>►<a class="article-category-link" href="/categories/Monitor/smokeping/">smokeping</a>►<a class="article-category-link" href="/categories/Monitor/smokeping/smokeping-install/">smokeping install</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/07/14/smokeping-install/">smokeping install</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="smokeping-install"><a href="#smokeping-install" class="headerlink" title="smokeping install"></a>smokeping install</h3><ol>
<li><p>smokeping 简介</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Smokeping 是一款用于网络性能监测的监控软件,通过它可以检测IDC的网络状况(如:延时,丢包率,是否BGP多线等),通过rrdtool制图方式,图形化地展示网络的时延情况,进而能够清楚的判断出网络的即时通信情况.</span><br></pre></td></tr></table></figure>
</li>
<li><p>smokeping install</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">//基础环境安装</span><br><span class="line">[root@localhost ~]<span class="comment"># yum -y install epel-release</span></span><br><span class="line">[root@localhost ~]<span class="comment"># yum -y install gcc gcc-c++ make cmake bison libtool autoconf automake zip unzip bzip2 zlib zlib-devel openssl openssl-devel pcre pcre-devel bison-devel ncurses-devel tcl tcl-devel perl-Digest-SHA1 GeoIP GeoIP-devel gperftools gperftools-devel libatomic_ops-devel gtest gtest-devel glibc-devel unixODBC-devel fop libperl libpython readline readline-devel python2-pip readline readline-devel readline-static openssl openssl-devel openssl-static sqlite-devel bzip2-devel bzip2-libs openldap-devel</span></span><br><span class="line">[root@localhost ~]<span class="comment"># yum -y install git lftp ntpdate vim wget telnet dstat tree lrzsz net-tools nmap-ncat nmap sysstat</span></span><br><span class="line"></span><br><span class="line">//perl版本</span><br><span class="line">[root@localhost ~]<span class="comment"># perl -v|head -2|tail -1</span></span><br><span class="line">This is perl 5, version 16, subversion 3 (v5.16.3) built <span class="keyword">for</span> x86_64-linux-thread-multi</span><br><span class="line"></span><br><span class="line">//curl版本</span><br><span class="line">[root@zabbix-server-company ~]<span class="comment"># curl -V</span></span><br><span class="line">curl 7.29.0 (x86_64-redhat-linux-gnu) libcurl/7.29.0 NSS/3.15.4 zlib/1.2.7 libidn/1.28 libssh2/1.4.3</span><br><span class="line"></span><br><span class="line">//ssh版本</span><br><span class="line">[root@localhost ~]<span class="comment"># ssh -V</span></span><br><span class="line">OpenSSH_6.4p1, OpenSSL 1.0.1e-fips 11 Feb 2013</span><br><span class="line"></span><br><span class="line">//fping安装</span><br><span class="line">[root@localhost ~]<span class="comment"># yum -y install fping</span></span><br><span class="line"></span><br><span class="line">//echoping安装</span><br><span class="line">[root@localhost app]<span class="comment"># yum -y install popt popt-devel libidn libidn-devel</span></span><br><span class="line">[root@localhost app]<span class="comment"># wget https://fossies.org/linux/misc/old/echoping-6.0.2.tar.gz</span></span><br><span class="line">[root@localhost app]<span class="comment"># tar xzf echoping-6.0.2.tar.gz</span></span><br><span class="line">[root@localhost app]<span class="comment"># cd echoping-6.0.2</span></span><br><span class="line">[root@localhost echoping-6.0.2]<span class="comment"># ./configure --prefix=/mnt/app/echoping</span></span><br><span class="line">[root@localhost echoping-6.0.2]<span class="comment"># make</span></span><br><span class="line">[root@localhost echoping-6.0.2]<span class="comment"># make install</span></span><br><span class="line">[root@localhost echoping-6.0.2]<span class="comment"># echo "ECHOPING_HOME=/mnt/app/echoping" |tee /etc/profile.d/echoping.sh</span></span><br><span class="line">[root@localhost echoping-6.0.2]<span class="comment"># echo "ECHOPING_BIN=\$&#123;ECHOPING_HOME&#125;/bin" |tee -a /etc/profile.d/echoping.sh      </span></span><br><span class="line">[root@localhost echoping-6.0.2]<span class="comment"># echo "export PATH=\$&#123;ECHOPING_BIN&#125;:\$PATH" |tee -a /etc/profile.d/echoping.sh</span></span><br><span class="line">[root@localhost echoping-6.0.2]<span class="comment"># source /etc/profile.d/echoping.sh</span></span><br><span class="line"></span><br><span class="line">//dig安装</span><br><span class="line">[root@localhost ~]<span class="comment"># yum install bind-utils   //dig命令</span></span><br><span class="line"></span><br><span class="line">//rrdtool安装</span><br><span class="line">[root@localhost ~]<span class="comment"># yum -y install rrdtool rrdtool-perl</span></span><br><span class="line"></span><br><span class="line">//httpd安装</span><br><span class="line">[root@localhost ~]<span class="comment"># yum -y install httpd</span></span><br><span class="line"></span><br><span class="line">//smokeping安装</span><br><span class="line">[root@localhost ~]<span class="comment"># yum -y install smokeping</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>smokeping config</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># useradd -s /sbin/nologin smokeping</span></span><br><span class="line">[root@localhost ~]<span class="comment"># vim /etc/smokeping/config</span></span><br><span class="line">*** General ***</span><br><span class="line">owner    = &#123;姓名&#125;</span><br><span class="line">contact  = &#123;邮箱&#125;</span><br><span class="line">mailhost = &#123;邮箱服务器地址&#125;</span><br><span class="line">sendmail = /usr/sbin/sendmail</span><br><span class="line">imgcache = /mnt/data/smokeping/images</span><br><span class="line">imgurl   = /smokeping/images</span><br><span class="line">datadir  = /mnt/data/smokeping/rrd</span><br><span class="line">piddir   = /var/run/smokeping</span><br><span class="line">cgiurl   = http://&#123;192.168.13.202&#125;/smokeping/sm.cgi</span><br><span class="line">smokemail = /etc/smokeping/smokemail</span><br><span class="line">tmail     = /etc/smokeping/tmail</span><br><span class="line">syslogfacility = local0</span><br><span class="line">*** Alerts ***</span><br><span class="line">to = &#123;接收邮箱地址&#125;</span><br><span class="line">from = &#123;发送邮箱地址&#125;</span><br><span class="line">+someloss</span><br><span class="line"><span class="built_in">type</span> = loss</span><br><span class="line">pattern = &gt;0%,*12*,&gt;0%,*12*,&gt;0%</span><br><span class="line">comment = loss 3 <span class="built_in">times</span>  <span class="keyword">in</span> a row</span><br><span class="line">*** Database ***</span><br><span class="line">step     = 60</span><br><span class="line">pings    = 20</span><br><span class="line">AVERAGE  0.5   1  1008</span><br><span class="line">AVERAGE  0.5  12  4320</span><br><span class="line">    MIN  0.5  12  4320</span><br><span class="line">    MAX  0.5  12  4320</span><br><span class="line">AVERAGE  0.5 144   720</span><br><span class="line">    MAX  0.5 144   720</span><br><span class="line">    MIN  0.5 144   720</span><br><span class="line">*** Presentation ***</span><br><span class="line">template = /etc/smokeping/basepage.html</span><br><span class="line">charset = utf-8</span><br><span class="line">+ charts</span><br><span class="line">menu = Charts</span><br><span class="line">title = The most interesting destinations</span><br><span class="line">++ stddev</span><br><span class="line">sorter = StdDev(entries=&gt;4)</span><br><span class="line">title = Top Standard Deviation</span><br><span class="line">menu = Std Deviation</span><br><span class="line">format = Standard Deviation %f</span><br><span class="line">++ max</span><br><span class="line">sorter = Max(entries=&gt;5)</span><br><span class="line">title = Top Max Roundtrip Time</span><br><span class="line">menu = by Max</span><br><span class="line">format = Max Roundtrip Time %f seconds</span><br><span class="line">++ loss</span><br><span class="line">sorter = Loss(entries=&gt;5)</span><br><span class="line">title = Top Packet Loss</span><br><span class="line">menu = Loss</span><br><span class="line">format = Packets Lost %f</span><br><span class="line">++ median</span><br><span class="line">sorter = Median(entries=&gt;5)</span><br><span class="line">title = Top Median Roundtrip Time</span><br><span class="line">menu = by Median</span><br><span class="line">format = Median RTT %f seconds</span><br><span class="line">+ overview</span><br><span class="line">width = 600</span><br><span class="line">height = 50</span><br><span class="line">range = 10h</span><br><span class="line">+ detail</span><br><span class="line">width = 600</span><br><span class="line">height = 200</span><br><span class="line">unison_tolerance = 2</span><br><span class="line"><span class="string">"Last 3 Hours"</span>    3h</span><br><span class="line"><span class="string">"Last 30 Hours"</span>   30h</span><br><span class="line"><span class="string">"Last 10 Days"</span>    10d</span><br><span class="line"><span class="string">"Last 400 Days"</span>   400d</span><br><span class="line">*** Probes ***</span><br><span class="line">+ FPing</span><br><span class="line">binary = /usr/sbin/fping</span><br><span class="line">*** Slaves ***</span><br><span class="line">secrets=/etc/smokeping/smokeping_secrets</span><br><span class="line">+boomer</span><br><span class="line">display_name=boomer</span><br><span class="line">color=0000ff</span><br><span class="line">+slave2</span><br><span class="line">display_name=another</span><br><span class="line">color=00ff00</span><br><span class="line">*** Targets ***</span><br><span class="line">probe = FPing</span><br><span class="line">menu = Top</span><br><span class="line">title = Network Latency Grapher</span><br><span class="line">remark = Welcome to the SmokePing website of &lt;b&gt;众荟&lt;/b&gt;. \</span><br><span class="line">         Here you will learn all about the latency of our network.</span><br><span class="line">+ Ping</span><br><span class="line">menu  = &#123;XX机房&#125;</span><br><span class="line">title = &#123;&#125;监控统计&#125;</span><br><span class="line">++ AliCloud</span><br><span class="line">menu  = 阿里云网络监控</span><br><span class="line">title = 阿里云网络监控列表</span><br><span class="line">host  = /Ping/AliCloud/&#123;xx1&#125; /Ping/AliCloud/&#123;xx2&#125;</span><br><span class="line">+++ &#123;xx1&#125;</span><br><span class="line">menu   = &#123;xx1&#125;</span><br><span class="line">title  = &#123;xx1&#125;</span><br><span class="line">alerts = someloss</span><br><span class="line">host   = &#123;xx1 服务器地址&#125;</span><br><span class="line">+++ &#123;xx2&#125;</span><br><span class="line">menu   = &#123;xx2&#125;</span><br><span class="line">title  = &#123;xx2&#125;</span><br><span class="line">alerts = someloss</span><br><span class="line">host   = &#123;xx2 服务器地址&#125;</span><br><span class="line">[root@localhost ~]<span class="comment"># mkdir -p /mnt/data/smokeping/&#123;images,rrd&#125;</span></span><br><span class="line">[root@localhost ~]<span class="comment"># chown -R apache /mnt/data/smokeping/images</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>smokeping 中文显示</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># yum -y install wqy-zenhei-fonts</span></span><br><span class="line">[root@localhost ~]<span class="comment"># vim /etc/smokeping/config</span></span><br><span class="line">*** Presentation ***</span><br><span class="line">charset = utf-8</span><br><span class="line">[root@localhost ~]<span class="comment">#  vim /usr/share/smokeping/Smokeping/Graphs.pm</span></span><br><span class="line">在第147行下边插入下边一行:</span><br><span class="line"><span class="string">'--font TITLE:20:"WenQuanYi Zen Hei Mono"'</span>,</span><br><span class="line">例如:</span><br><span class="line">my (<span class="variable">$graphret</span>,<span class="variable">$xs</span>,<span class="variable">$ys</span>) = RRDs::graph</span><br><span class="line">(<span class="string">"dummy"</span>,</span><br><span class="line"><span class="string">'--start'</span>, <span class="variable">$tasks</span>[0][1],</span><br><span class="line"><span class="string">'--end'</span>, <span class="variable">$tasks</span>[0][2],</span><br><span class="line"><span class="string">'--font TITLE:20:"WenQuanYi Zen Hei Mono"'</span>,</span><br><span class="line"><span class="string">"DEF:maxping=<span class="variable">$cfg</span>-&gt;&#123;General&#125;&#123;datadir&#125;<span class="variable">$&#123;host&#125;</span>.rrd:median:AVERAGE"</span>,</span><br><span class="line"><span class="string">'PRINT:maxping:MAX:%le'</span> );</span><br></pre></td></tr></table></figure>
</li>
<li><p>httpd配置文件</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">[root@zabbix-server-company ~]<span class="comment"># cat /etc/httpd/conf.d/smokeping.conf</span></span><br><span class="line">&lt;Directory <span class="string">"/usr/share/smokeping"</span> &gt;</span><br><span class="line">  Require <span class="built_in">local</span></span><br><span class="line">  Require ip 0.0.0.0</span><br><span class="line">  <span class="comment"># Require host example.org</span></span><br><span class="line">  Options Indexes FollowSymLinks  </span><br><span class="line">  Options +ExecCGI  </span><br><span class="line">  AllowOverride None</span><br><span class="line">  DirectoryIndex smokeping.fcgi</span><br><span class="line">  Require all granted</span><br><span class="line">&lt;/Directory&gt;</span><br><span class="line"></span><br><span class="line">&lt;Directory <span class="string">"/mnt/data/smokeping"</span> &gt;</span><br><span class="line">  Require <span class="built_in">local</span></span><br><span class="line">  Require ip 0.0.0.0</span><br><span class="line">  <span class="comment"># Require host example.org</span></span><br><span class="line">  AllowOverride None</span><br><span class="line">  Require all granted   </span><br><span class="line">&lt;/Directory&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment"># .fcgi : smokeping by mod_fcgid aka fastcgi</span></span><br><span class="line"><span class="comment"># _cgi  : plain old fashion cgi</span></span><br><span class="line">ScriptAlias /smokeping/sm.cgi  /usr/share/smokeping/cgi/smokeping.fcgi</span><br><span class="line"><span class="comment">#ScriptAlias /smokeping/sm.cgi  /usr/share/smokeping/cgi/smokeping_cgi</span></span><br><span class="line"></span><br><span class="line">Alias       /smokeping/images  /mnt/data/smokeping/images</span><br><span class="line">Alias       /smokeping         /usr/share/smokeping/htdocs</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">注意:</span><br><span class="line">1.httpd 版本是2.4</span><br><span class="line">2.每次更新完smokeping的配置文件conf后,需要重启httpd服务</span><br></pre></td></tr></table></figure>
</li>
<li><p>做软连接</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># ln -s /usr/share/smokeping/cgi/smokeping_cgi /usr/share/smokeping/htdocs/smokeping.fcgi</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>启动服务</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># systemctl start smokeping</span></span><br><span class="line">[root@localhost ~]<span class="comment"># systemctl restart httpd</span></span><br></pre></td></tr></table></figure>
</li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.smallasa.com/2017/07/14/smokeping-install/" data-id="cjazexzme00ayqcoquzloecgi" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-zabbix-optimization" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/07/13/zabbix-optimization/" class="article-date">
  <time datetime="2017-07-13T01:10:03.000Z" itemprop="datePublished">2017-07-13</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Monitor/">Monitor</a>►<a class="article-category-link" href="/categories/Monitor/zabbix/">zabbix</a>►<a class="article-category-link" href="/categories/Monitor/zabbix/zabbix-optimization/">zabbix optimization</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/07/13/zabbix-optimization/">zabbix optimization</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="zabbix-优化"><a href="#zabbix-优化" class="headerlink" title="zabbix 优化"></a>zabbix 优化</h3><ol>
<li><p>zabbix Poller 调整</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">* Option: StartPollers              处理监控项</span><br><span class="line">* Option: StartIPMIPollers          处理IPMI,暂时未用,设置为0</span><br><span class="line">* Option: StartPollersUnreachable   获取数据遇到不可到达时,交给这些进程处理</span><br><span class="line">* Option: StartHTTPPollers          监控HTTP,WEB,设置为10</span><br><span class="line">* Option: StartJavaPollers          监控JAVA专用进程,设置为10</span><br><span class="line">* Option: StartProxyPollers         处理代理的进程,设置为30</span><br><span class="line">* Option: StartDiscoverers          处理自动发现的,设置为30</span><br><span class="line">* Option: StartPingers              如果用了ICMP PING那个模板的,这个值要调大一些</span><br><span class="line"></span><br><span class="line">注意:</span><br><span class="line">StartPollers,然配置文件写是可用范围是0-1000,但这个1000是所有的进程的值,也就是说上面那些进程的总数不能超过1000,设的时候要注意一下这点</span><br></pre></td></tr></table></figure>
</li>
<li><p>关于Cache的调整</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">* Option: CacheSize               zabbix初始化时占用多少系统共享内存用于存储配置信息(HOST,ITEM,TRIGGER数据，视监控主机数量和监控项调整)</span><br><span class="line">* Option: CacheUpdateFrequency    zabbix更新操作系统CACHE频率,若管理页面操作不频繁,可以考虑加大参数值       </span><br><span class="line">* Option: HistoryCacheSize        用于设置划分多少系统共享内存用于存储采集的历史数据，此数值越大，数据库读压力越小</span><br><span class="line">* Option: TrendCacheSize          用于设置划分多少系统共享内存用于存储计算出来的趋势数据，此参数值从一定程度上可影响数据库读压力</span><br><span class="line">* Option: HistoryIndexCacheSize   历史数据索引缓存</span><br><span class="line">* Option: ValueCacheSize          划出系统多少共享内存用于已请求的存储监控项信息，若监控项较多，建议加大此数值</span><br><span class="line"></span><br><span class="line">注意: 关于内存的参数有这么多,都是要根据机器数量和item数量的增加而增加,这些内存的值不能大于系统内核的kernel.shmall这个值,否则申请不了内存程序启动不了</span><br></pre></td></tr></table></figure>
</li>
<li><p>内核共享内存优化</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[root@zabbix-server-mysql ~]# echo kernel.shmmax=15461882265 | tee -a /etc/sysctl.conf</span><br><span class="line">[root@zabbix-server-mysql ~]# echo kernel.shmall=3774873 | tee -a /etc/sysctl.conf</span><br><span class="line">[root@zabbix-server-mysql ~]# echo kernel.msgmax=65535 | tee -a /etc/sysctl.conf</span><br><span class="line">[root@zabbix-server-mysql ~]# echo kernel.msgmnb=65535 | tee -a /etc/sysctl.conf</span><br><span class="line"></span><br><span class="line">说明:</span><br><span class="line">shmall是全部允许使用的共享内存大小,shmmax是单个段允许使用的大小.这两个可以设置为内存的90%</span><br><span class="line">例如:16G内存,shmmax的大小为 16*1024*1024*1024*90% = 15461882265,shmall的大小为 15461882265/4k(getconf PAGESIZE可得到) = 3774873</span><br><span class="line"></span><br><span class="line">msgmax该文件指定了从一个进程发送到另一个进程的消息的最大长度(bytes).进程间的消息传递是在内核的内存中进行的,不会交换到磁盘上,所以如果增加该值,则将增加操作系统所使用的内存数量</span><br><span class="line">msgmnb该文件指定一个消息队列的最大长度(bytes)</span><br></pre></td></tr></table></figure>
</li>
<li><p>数据库配置参数优化</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">[root@zabbix-server-mysql ~]# cat /mnt/app/mysql/conf/3306.M.cnf</span><br><span class="line">[mysqld]</span><br><span class="line">user    = mysql</span><br><span class="line">port    = 3306</span><br><span class="line">basedir = /mnt/app/mysql</span><br><span class="line">datadir = /mnt/data/mysql/3306</span><br><span class="line">socket  = /mnt/data/mysql/3306/mysql.sock</span><br><span class="line">default-storage-engine = InnoDB</span><br><span class="line">character_set_server   = utf8</span><br><span class="line">max_connections        = 5000</span><br><span class="line">sql_mode=NO_ENGINE_SUBSTITUTION,STRICT_TRANS_TABLES</span><br><span class="line"></span><br><span class="line">server-id               = 210</span><br><span class="line">max_allowed_packet      = 32m</span><br><span class="line">max_heap_table_size     = 128m</span><br><span class="line">read_rnd_buffer_size    = 8m</span><br><span class="line">sort_buffer_size        = 4m</span><br><span class="line">join_buffer_size        = 4m</span><br><span class="line">query_cache_type        = 1</span><br><span class="line">query_cache_size        = 512m</span><br><span class="line">query_cache_limit       = 4m</span><br><span class="line">innodb_open_files       = 3000</span><br><span class="line">innodb_buffer_pool_size = 12G</span><br><span class="line">innodb_file_per_table   = 1</span><br><span class="line"></span><br><span class="line">[mysqld_safe]</span><br><span class="line">log-error=/mnt/log/mysql/3306/mysqld.log</span><br><span class="line">pid-file =/mnt/app/mysql/mysqld.3306.pid</span><br><span class="line"></span><br><span class="line">[client]</span><br><span class="line">default-character-set=utf8</span><br><span class="line">socket=/mnt/data/mysql/3306/mysql.sock</span><br><span class="line"></span><br><span class="line">[mysql]</span><br><span class="line">default-character-set=utf8</span><br><span class="line">socket=/mnt/data/mysql/3306/mysql.sock</span><br><span class="line"></span><br><span class="line">[root@zabbix-server-mysql ~]# /etc/init.d/mysql.3306M restart</span><br></pre></td></tr></table></figure>
</li>
<li><p><a href="https://www.zabbix.org/wiki/Docs/howto/mysql_partition" target="_blank" rel="noopener">zabbix mysql 表分区优化</a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">机器数量多的时候,mysql里面的history表就会越来越大,虽然zabbix本身有删除功能(就是那个housekeeper的功能),但这东西太影响性能,所以网上的做法都是关闭这个东西,用mysql的表分区功能来实现清理历史数据还可以提升mysql的性能</span><br><span class="line"></span><br><span class="line">补充: zabbix 3.2 版本数据库不需要重新执行创建索引过程；2.0,3.0版本都需要</span><br><span class="line">mysql&gt; Alter table history_text drop primary key, add index (id), drop index history_text_2, add index history_text_2 (itemid, id);</span><br><span class="line">mysql&gt; Alter table history_log drop primary key, add index (id), drop index history_log_2, add index history_log_2 (itemid, id);</span><br></pre></td></tr></table></figure>
</li>
<li><p>创建存储过程</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br></pre></td><td class="code"><pre><span class="line">[root@zabbix-server-mysql data]# vim partition_call.sql</span><br><span class="line">DELIMITER $$</span><br><span class="line">CREATE PROCEDURE `partition_create`(SCHEMANAME varchar(64), TABLENAME varchar(64), PARTITIONNAME varchar(64), CLOCK int)</span><br><span class="line">BEGIN</span><br><span class="line">        /*</span><br><span class="line">           SCHEMANAME = The DB schema in which to make changes</span><br><span class="line">           TABLENAME = The table with partitions to potentially delete</span><br><span class="line">           PARTITIONNAME = The name of the partition to create</span><br><span class="line">        */</span><br><span class="line">        /*</span><br><span class="line">           Verify that the partition does not already exist</span><br><span class="line">        */</span><br><span class="line"></span><br><span class="line">        DECLARE RETROWS INT;</span><br><span class="line">        SELECT COUNT(1) INTO RETROWS</span><br><span class="line">        FROM information_schema.partitions</span><br><span class="line">        WHERE table_schema = SCHEMANAME AND table_name = TABLENAME AND partition_description &gt;= CLOCK;</span><br><span class="line"></span><br><span class="line">        IF RETROWS = 0 THEN</span><br><span class="line">                /*</span><br><span class="line">                   1. Print a message indicating that a partition was created.</span><br><span class="line">                   2. Create the SQL to create the partition.</span><br><span class="line">                   3. Execute the SQL from #2.</span><br><span class="line">                */</span><br><span class="line">                SELECT CONCAT( &quot;partition_create(&quot;, SCHEMANAME, &quot;,&quot;, TABLENAME, &quot;,&quot;, PARTITIONNAME, &quot;,&quot;, CLOCK, &quot;)&quot; ) AS msg;</span><br><span class="line">                SET @sql = CONCAT( &apos;ALTER TABLE &apos;, SCHEMANAME, &apos;.&apos;, TABLENAME, &apos; ADD PARTITION (PARTITION &apos;, PARTITIONNAME, &apos; VALUES LESS THAN (&apos;, CLOCK, &apos;));&apos; );</span><br><span class="line">                PREPARE STMT FROM @sql;</span><br><span class="line">                EXECUTE STMT;</span><br><span class="line">                DEALLOCATE PREPARE STMT;</span><br><span class="line">        END IF;</span><br><span class="line">END$$</span><br><span class="line">DELIMITER ;</span><br><span class="line"></span><br><span class="line">DELIMITER $$</span><br><span class="line">CREATE PROCEDURE `partition_drop`(SCHEMANAME VARCHAR(64), TABLENAME VARCHAR(64), DELETE_BELOW_PARTITION_DATE BIGINT)</span><br><span class="line">BEGIN</span><br><span class="line">        /*</span><br><span class="line">           SCHEMANAME = The DB schema in which to make changes</span><br><span class="line">           TABLENAME = The table with partitions to potentially delete</span><br><span class="line">           DELETE_BELOW_PARTITION_DATE = Delete any partitions with names that are dates older than this one (yyyy-mm-dd)</span><br><span class="line">        */</span><br><span class="line">        DECLARE done INT DEFAULT FALSE;</span><br><span class="line">        DECLARE drop_part_name VARCHAR(16);</span><br><span class="line"></span><br><span class="line">        /*</span><br><span class="line">           Get a list of all the partitions that are older than the date</span><br><span class="line">           in DELETE_BELOW_PARTITION_DATE.  All partitions are prefixed with</span><br><span class="line">           a &quot;p&quot;, so use SUBSTRING TO get rid of that character.</span><br><span class="line">        */</span><br><span class="line">        DECLARE myCursor CURSOR FOR</span><br><span class="line">                SELECT partition_name</span><br><span class="line">                FROM information_schema.partitions</span><br><span class="line">                WHERE table_schema = SCHEMANAME AND table_name = TABLENAME AND CAST(SUBSTRING(partition_name FROM 2) AS UNSIGNED) &lt; DELETE_BELOW_PARTITION_DATE;</span><br><span class="line">        DECLARE CONTINUE HANDLER FOR NOT FOUND SET done = TRUE;</span><br><span class="line"></span><br><span class="line">        /*</span><br><span class="line">           Create the basics for when we need to drop the partition.  Also, create</span><br><span class="line">           @drop_partitions to hold a comma-delimited list of all partitions that</span><br><span class="line">           should be deleted.</span><br><span class="line">        */</span><br><span class="line">        SET @alter_header = CONCAT(&quot;ALTER TABLE &quot;, SCHEMANAME, &quot;.&quot;, TABLENAME, &quot; DROP PARTITION &quot;);</span><br><span class="line">        SET @drop_partitions = &quot;&quot;;</span><br><span class="line"></span><br><span class="line">        /*</span><br><span class="line">           Start looping through all the partitions that are too old.</span><br><span class="line">        */</span><br><span class="line">        OPEN myCursor;</span><br><span class="line">        read_loop: LOOP</span><br><span class="line">                FETCH myCursor INTO drop_part_name;</span><br><span class="line">                IF done THEN</span><br><span class="line">                        LEAVE read_loop;</span><br><span class="line">                END IF;</span><br><span class="line">                SET @drop_partitions = IF(@drop_partitions = &quot;&quot;, drop_part_name, CONCAT(@drop_partitions, &quot;,&quot;, drop_part_name));</span><br><span class="line">        END LOOP;</span><br><span class="line">        IF @drop_partitions != &quot;&quot; THEN</span><br><span class="line">                /*</span><br><span class="line">                   1. Build the SQL to drop all the necessary partitions.</span><br><span class="line">                   2. Run the SQL to drop the partitions.</span><br><span class="line">                   3. Print out the table partitions that were deleted.</span><br><span class="line">                */</span><br><span class="line">                SET @full_sql = CONCAT(@alter_header, @drop_partitions, &quot;;&quot;);</span><br><span class="line">                PREPARE STMT FROM @full_sql;</span><br><span class="line">                EXECUTE STMT;</span><br><span class="line">                DEALLOCATE PREPARE STMT;</span><br><span class="line"></span><br><span class="line">                SELECT CONCAT(SCHEMANAME, &quot;.&quot;, TABLENAME) AS `table`, @drop_partitions AS `partitions_deleted`;</span><br><span class="line">        ELSE</span><br><span class="line">                /*</span><br><span class="line">                   No partitions are being deleted, so print out &quot;N/A&quot; (Not applicable) to indicate</span><br><span class="line">                   that no changes were made.</span><br><span class="line">                */</span><br><span class="line">                SELECT CONCAT(SCHEMANAME, &quot;.&quot;, TABLENAME) AS `table`, &quot;N/A&quot; AS `partitions_deleted`;</span><br><span class="line">        END IF;</span><br><span class="line">END$$</span><br><span class="line">DELIMITER ;</span><br><span class="line"></span><br><span class="line">DELIMITER $$</span><br><span class="line">CREATE PROCEDURE `partition_maintenance`(SCHEMA_NAME VARCHAR(32), TABLE_NAME VARCHAR(32), KEEP_DATA_DAYS INT, HOURLY_INTERVAL INT, CREATE_NEXT_INTERVALS INT)</span><br><span class="line">BEGIN</span><br><span class="line">        DECLARE OLDER_THAN_PARTITION_DATE VARCHAR(16);</span><br><span class="line">        DECLARE PARTITION_NAME VARCHAR(16);</span><br><span class="line">        DECLARE OLD_PARTITION_NAME VARCHAR(16);</span><br><span class="line">        DECLARE LESS_THAN_TIMESTAMP INT;</span><br><span class="line">        DECLARE CUR_TIME INT;</span><br><span class="line"></span><br><span class="line">        CALL partition_verify(SCHEMA_NAME, TABLE_NAME, HOURLY_INTERVAL);</span><br><span class="line">        SET CUR_TIME = UNIX_TIMESTAMP(DATE_FORMAT(NOW(), &apos;%Y-%m-%d 00:00:00&apos;));</span><br><span class="line"></span><br><span class="line">        SET @__interval = 1;</span><br><span class="line">        create_loop: LOOP</span><br><span class="line">                IF @__interval &gt; CREATE_NEXT_INTERVALS THEN</span><br><span class="line">                        LEAVE create_loop;</span><br><span class="line">                END IF;</span><br><span class="line"></span><br><span class="line">                SET LESS_THAN_TIMESTAMP = CUR_TIME + (HOURLY_INTERVAL * @__interval * 3600);</span><br><span class="line">                SET PARTITION_NAME = FROM_UNIXTIME(CUR_TIME + HOURLY_INTERVAL * (@__interval - 1) * 3600, &apos;p%Y%m%d%H00&apos;);</span><br><span class="line">                IF(PARTITION_NAME != OLD_PARTITION_NAME) THEN</span><br><span class="line">                        CALL partition_create(SCHEMA_NAME, TABLE_NAME, PARTITION_NAME, LESS_THAN_TIMESTAMP);</span><br><span class="line">                END IF;</span><br><span class="line">                SET @__interval=@__interval+1;</span><br><span class="line">                SET OLD_PARTITION_NAME = PARTITION_NAME;</span><br><span class="line">        END LOOP;</span><br><span class="line"></span><br><span class="line">        SET OLDER_THAN_PARTITION_DATE=DATE_FORMAT(DATE_SUB(NOW(), INTERVAL KEEP_DATA_DAYS DAY), &apos;%Y%m%d0000&apos;);</span><br><span class="line">        CALL partition_drop(SCHEMA_NAME, TABLE_NAME, OLDER_THAN_PARTITION_DATE);</span><br><span class="line"></span><br><span class="line">END$$</span><br><span class="line">DELIMITER ;</span><br><span class="line"></span><br><span class="line">DELIMITER $$</span><br><span class="line">CREATE PROCEDURE `partition_verify`(SCHEMANAME VARCHAR(64), TABLENAME VARCHAR(64), HOURLYINTERVAL INT(11))</span><br><span class="line">BEGIN</span><br><span class="line">        DECLARE PARTITION_NAME VARCHAR(16);</span><br><span class="line">        DECLARE RETROWS INT(11);</span><br><span class="line">        DECLARE FUTURE_TIMESTAMP TIMESTAMP;</span><br><span class="line"></span><br><span class="line">        /*</span><br><span class="line">         * Check if any partitions exist for the given SCHEMANAME.TABLENAME.</span><br><span class="line">         */</span><br><span class="line">        SELECT COUNT(1) INTO RETROWS</span><br><span class="line">        FROM information_schema.partitions</span><br><span class="line">        WHERE table_schema = SCHEMANAME AND table_name = TABLENAME AND partition_name IS NULL;</span><br><span class="line"></span><br><span class="line">        /*</span><br><span class="line">         * If partitions do not exist, go ahead and partition the table</span><br><span class="line">         */</span><br><span class="line">        IF RETROWS = 1 THEN</span><br><span class="line">                /*</span><br><span class="line">                 * Take the current date at 00:00:00 and add HOURLYINTERVAL to it.  This is the timestamp below which we will store values.</span><br><span class="line">                 * We begin partitioning based on the beginning of a day.  This is because we don&apos;t want to generate a random partition</span><br><span class="line">                 * that won&apos;t necessarily fall in line with the desired partition naming (ie: if the hour interval is 24 hours, we could</span><br><span class="line">                 * end up creating a partition now named &quot;p201403270600&quot; when all other partitions will be like &quot;p201403280000&quot;).</span><br><span class="line">                 */</span><br><span class="line">                SET FUTURE_TIMESTAMP = TIMESTAMPADD(HOUR, HOURLYINTERVAL, CONCAT(CURDATE(), &quot; &quot;, &apos;00:00:00&apos;));</span><br><span class="line">                SET PARTITION_NAME = DATE_FORMAT(CURDATE(), &apos;p%Y%m%d%H00&apos;);</span><br><span class="line"></span><br><span class="line">                -- Create the partitioning query</span><br><span class="line">                SET @__PARTITION_SQL = CONCAT(&quot;ALTER TABLE &quot;, SCHEMANAME, &quot;.&quot;, TABLENAME, &quot; PARTITION BY RANGE(`clock`)&quot;);</span><br><span class="line">                SET @__PARTITION_SQL = CONCAT(@__PARTITION_SQL, &quot;(PARTITION &quot;, PARTITION_NAME, &quot; VALUES LESS THAN (&quot;, UNIX_TIMESTAMP(FUTURE_TIMESTAMP), &quot;));&quot;);</span><br><span class="line"></span><br><span class="line">                -- Run the partitioning query</span><br><span class="line">                PREPARE STMT FROM @__PARTITION_SQL;</span><br><span class="line">                EXECUTE STMT;</span><br><span class="line">                DEALLOCATE PREPARE STMT;</span><br><span class="line">        END IF;</span><br><span class="line">END$$</span><br><span class="line">DELIMITER ;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">[root@zabbix-server-mysql data]# mysql -S /mnt/data/mysql/3306/mysql.sock zabbix &lt; partition_call.sql</span><br></pre></td></tr></table></figure>
</li>
<li><p>创建调用存储过程</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">[root@zabbix-server-mysql data]# vim partition_call_call.sql</span><br><span class="line">DELIMITER $$</span><br><span class="line">CREATE PROCEDURE `partition_maintenance_all`(SCHEMA_NAME VARCHAR(32))</span><br><span class="line">BEGIN</span><br><span class="line">                CALL partition_maintenance(SCHEMA_NAME, &apos;history&apos;, 30, 24, 14);</span><br><span class="line">                CALL partition_maintenance(SCHEMA_NAME, &apos;history_log&apos;, 30, 24, 14);</span><br><span class="line">                CALL partition_maintenance(SCHEMA_NAME, &apos;history_str&apos;, 30, 24, 14);</span><br><span class="line">                CALL partition_maintenance(SCHEMA_NAME, &apos;history_text&apos;, 30, 24, 14);</span><br><span class="line">                CALL partition_maintenance(SCHEMA_NAME, &apos;history_uint&apos;, 30, 24, 14);</span><br><span class="line">                CALL partition_maintenance(SCHEMA_NAME, &apos;trends&apos;, 730, 24, 14);</span><br><span class="line">                CALL partition_maintenance(SCHEMA_NAME, &apos;trends_uint&apos;, 730, 24, 14);</span><br><span class="line">END$$</span><br><span class="line">DELIMITER ;</span><br><span class="line"></span><br><span class="line">说明:</span><br><span class="line">mysql&gt; CALL partition_maintenance(&apos;&lt;zabbix_db_name&gt;&apos;, &apos;&lt;table_name&gt;&apos;, &lt;days_to_keep_data&gt;, &lt;hourly_interval&gt;, &lt;num_future_intervals_to_create&gt;)</span><br><span class="line">说明:</span><br><span class="line">zabbix_db_name    库名</span><br><span class="line">table_name        表名</span><br><span class="line">days_to_keep_data 保存多少天的数据</span><br><span class="line">hourly_interval   每隔多久生成一个分区</span><br><span class="line">num_future_intervals_to_create  本次一共生成多少个分区</span><br></pre></td></tr></table></figure>
</li>
<li><p>执行调用存储过程</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@zabbix-server-mysql data]# mysql -S /mnt/data/mysql/3306/mysql.sock zabbix -e &quot;CALL partition_maintenance_all(&apos;zabbix&apos;);&quot;</span><br></pre></td></tr></table></figure>
</li>
<li><p>将”执行调用存储过程”命令,加入计划任务</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@zabbix-server-mysql data]# crontab -l</span><br><span class="line">5 1 * * *     /mnt/app/mysql/bin/mysql -S /mnt/data/mysql/3306/mysql.sock zabbix -e &quot;CALL partition_maintenance_all(&apos;zabbix&apos;);&quot;</span><br></pre></td></tr></table></figure>
</li>
<li><p>关掉Zabbix的HouseKeeper功能</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">administration -&gt; general -&gt; HouseKeeping -&gt; &quot;取消勾选框,保存&quot;</span><br></pre></td></tr></table></figure>
</li>
<li><p>解决表依赖关系</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; SET foreign_key_checks=0;</span><br><span class="line">mysql&gt; truncate table events;</span><br><span class="line">mysql&gt; SET foreign_key_checks=1;</span><br></pre></td></tr></table></figure>
</li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.smallasa.com/2017/07/13/zabbix-optimization/" data-id="cjazey09d018nqcoqya1n4p7r" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-angular-install" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/07/10/angular-install/" class="article-date">
  <time datetime="2017-07-10T02:43:32.000Z" itemprop="datePublished">2017-07-10</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/web/">web</a>►<a class="article-category-link" href="/categories/web/angular/">angular</a>►<a class="article-category-link" href="/categories/web/angular/angular-install/">angular install</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/07/10/angular-install/">angular install</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="angular-install"><a href="#angular-install" class="headerlink" title="angular install"></a>angular install</h3><ol>
<li><p>nodejs install</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[root@dev app]<span class="comment"># xz -d node-v8.1.3-linux-x64.tar.xz</span></span><br><span class="line">[root@dev app]<span class="comment"># tar xf node-v8.1.3-linux-x64.tar</span></span><br><span class="line">[root@dev app]<span class="comment"># mv node-v8.1.3-linux-x64 /mnt/app/node</span></span><br><span class="line">[root@dev app]<span class="comment"># chown -R root.root /mnt/app/node</span></span><br><span class="line"></span><br><span class="line">[root@dev app]<span class="comment"># echo 'NODE_HOME=/mnt/app/node' |tee  /etc/profile.d/node.sh</span></span><br><span class="line">[root@dev app]<span class="comment"># echo 'NODE_PATH=$&#123;NODE_HOME&#125;/lib/node_modules' |tee -a /etc/profile.d/node.sh</span></span><br><span class="line">[root@dev app]<span class="comment"># echo 'export PATH=$&#123;PATH&#125;:$&#123;NODE_HOME&#125;/bin' |tee -a /etc/profile.d/node.sh</span></span><br><span class="line">[root@dev app]<span class="comment"># source /etc/profile</span></span><br><span class="line"></span><br><span class="line">[root@dev app]<span class="comment"># node -v</span></span><br><span class="line">v8.1.3</span><br></pre></td></tr></table></figure>
</li>
<li><p>修改npm源</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@dev app]<span class="comment"># echo 'registry = https://registry.npm.taobao.org' &gt; ~/.npmrc</span></span><br><span class="line">[root@dev app]<span class="comment"># npm -v</span></span><br><span class="line">5.0.3</span><br></pre></td></tr></table></figure>
</li>
<li><p>angular install</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@dev app]<span class="comment"># npm install -g @angular/cli</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>angular 创建新项目</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@dev ~]<span class="comment"># ng new my-app</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>angular 启动开发服务</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@dev ~]<span class="comment"># cd my-app/</span></span><br><span class="line">[root@dev my-app]<span class="comment"># ng server --open --host 192.168.13.208 --port 4000</span></span><br><span class="line"></span><br><span class="line">浏览器中输入:http://192.168.13.208:4000/</span><br></pre></td></tr></table></figure>
</li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.smallasa.com/2017/07/10/angular-install/" data-id="cjazexzb50017qcoq7sbdpxjz" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-sass-install" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/07/10/sass-install/" class="article-date">
  <time datetime="2017-07-10T02:25:42.000Z" itemprop="datePublished">2017-07-10</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/web/">web</a>►<a class="article-category-link" href="/categories/web/sass/">sass</a>►<a class="article-category-link" href="/categories/web/sass/sass-install/">sass install</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/07/10/sass-install/">sass install</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="sass-install"><a href="#sass-install" class="headerlink" title="sass install"></a>sass install</h3><ol>
<li><p>ruby install</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@dev ~]<span class="comment"># gpg --keyserver hkp://keys.gnupg.net --recv-keys 409B6B1796C275462A1703113804BB82D39DC0E3 7D2BAF1CF37B13E2069D6956105BD0E739499BDB</span></span><br><span class="line">[root@dev ~]<span class="comment"># curl -sSL https://get.rvm.io | bash -s stable</span></span><br><span class="line">[root@dev ~]<span class="comment"># source /etc/profile.d/rvm.sh</span></span><br><span class="line">[root@dev ~]<span class="comment"># sed -i 's!ftp.ruby-lang.org/pub/ruby!cache.ruby-china.org/pub/ruby!g' $rvm_path/config/db</span></span><br><span class="line"></span><br><span class="line">[root@dev ~]<span class="comment"># rvm install 2.4</span></span><br><span class="line">[root@dev ~]<span class="comment"># rvm --default use 2.4</span></span><br><span class="line">[root@dev ~]<span class="comment"># gem sources --add https://gems.ruby-china.org/ --remove https://rubygems.org/</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>sass install</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@dev ~]<span class="comment"># gem install sass</span></span><br><span class="line">[root@dev ~]<span class="comment"># gem install compass</span></span><br><span class="line"></span><br><span class="line">[root@dev ~]<span class="comment"># sass -v</span></span><br><span class="line">Sass 3.4.25 (Selective Steve)</span><br><span class="line">[root@dev ~]<span class="comment"># compass -v</span></span><br><span class="line">Compass 1.0.3 (Polaris)</span><br></pre></td></tr></table></figure>
</li>
<li><p>sass 编译</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[root@dev ~]<span class="comment"># sass input.scss output.css  //单文件转换命令</span></span><br><span class="line">[root@dev ~]<span class="comment"># sass --watch input.scss:output.css  //单文件监听命令</span></span><br><span class="line">[root@dev ~]<span class="comment"># sass --watch app/sass:public/stylesheets  //sass监听整个目录</span></span><br><span class="line"></span><br><span class="line">[root@dev ~]<span class="comment"># sass --watch input.scss:output.css --style compact  //编译格式</span></span><br><span class="line">[root@dev ~]<span class="comment"># sass --watch input.scss:output.css --sourcemap  //编译添加调试map</span></span><br><span class="line">[root@dev ~]<span class="comment"># sass --watch input.scss:output.css --style expanded --sourcemap  //选择编译格式并添加调试map</span></span><br><span class="line">[root@dev ~]<span class="comment"># sass --watch input.scss:output.css --debug-info  //开启debug信息</span></span><br><span class="line"></span><br><span class="line">注意:</span><br><span class="line">1.sass内置有四种编译格式:nested``expanded``compact``compressed</span><br><span class="line">2.-sourcemap表示开启sourcemap调试.开启sourcemap调试后,会生成一个后缀名为.css.map文件</span><br></pre></td></tr></table></figure>
</li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.smallasa.com/2017/07/10/sass-install/" data-id="cjazexzme00axqcoqilccbylp" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-ruby-install" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/07/10/ruby-install/" class="article-date">
  <time datetime="2017-07-10T01:09:10.000Z" itemprop="datePublished">2017-07-10</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Ruby/">Ruby</a>►<a class="article-category-link" href="/categories/Ruby/Ruby-install/">Ruby install</a>►<a class="article-category-link" href="/categories/Ruby/Ruby-install/Ruby-install/">Ruby install</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/07/10/ruby-install/">ruby install</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="Ruby-install"><a href="#Ruby-install" class="headerlink" title="Ruby install"></a>Ruby install</h3><ol>
<li><p><a href="http://rvm.io/" target="_blank" rel="noopener">rvm安装</a></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@dev ~]<span class="comment"># gpg --keyserver hkp://keys.gnupg.net --recv-keys 409B6B1796C275462A1703113804BB82D39DC0E3 7D2BAF1CF37B13E2069D6956105BD0E739499BDB</span></span><br><span class="line">[root@dev ~]<span class="comment"># curl -sSL https://get.rvm.io | bash -s stable</span></span><br><span class="line">[root@dev ~]<span class="comment"># source /etc/profile.d/rvm.sh</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><a href="http://ruby-china.org/wiki/ruby-mirror" target="_blank" rel="noopener">修改rvm源</a></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@dev ~]<span class="comment"># grep ftp.ruby-lang.org $rvm_path/config/db</span></span><br><span class="line">ruby_url_fallback_1=https://ftp.ruby-lang.org/pub/ruby</span><br><span class="line">[root@dev ~]<span class="comment"># sed -i 's!ftp.ruby-lang.org/pub/ruby!cache.ruby-china.org/pub/ruby!g' $rvm_path/config/db</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>Ruby install</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">[root@dev ~]<span class="comment"># rvm list known</span></span><br><span class="line">[root@dev ~]<span class="comment"># rvm install 2.4</span></span><br><span class="line">[root@dev ~]<span class="comment"># rvm docs generate-ri</span></span><br><span class="line">[root@dev ~]<span class="comment"># rvm --default use 2.4     //指定默认版本</span></span><br><span class="line"></span><br><span class="line">[root@dev ~]<span class="comment"># ruby -v</span></span><br><span class="line">ruby 2.4.0p0 (2016-12-24 revision 57164) [x86_64-linux]</span><br><span class="line">[root@dev ~]<span class="comment"># gem -v</span></span><br><span class="line">2.6.12</span><br><span class="line"></span><br><span class="line">补充:</span><br><span class="line">[root@dev ~]<span class="comment"># rvm list                  //列出所有ruby版本</span></span><br><span class="line">[root@dev ~]<span class="comment"># rvm list default          //列出默认版本</span></span><br><span class="line">[root@dev ~]<span class="comment"># rvm reset                 //恢复系统默认设置</span></span><br><span class="line">[root@dev ~]<span class="comment"># rvm reinstall 2.4         //重新安装</span></span><br><span class="line">[root@dev ~]<span class="comment"># rvm uninstall 2.4         //卸载,但保留源数据</span></span><br><span class="line">[root@dev ~]<span class="comment"># rvm remove 2.4            //卸载,删除源数据,比uninstall更彻底</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><a href="http://gems.ruby-china.org/" target="_blank" rel="noopener">修改gem源</a></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">[root@dev ~]<span class="comment"># gem sources --add https://gems.ruby-china.org/ --remove https://rubygems.org/</span></span><br><span class="line">[root@dev ~]<span class="comment"># gem sources -l</span></span><br><span class="line">https://gems.ruby-china.org/</span><br><span class="line"></span><br><span class="line">补充:</span><br><span class="line">[root@dev ~]<span class="comment"># gem update --system      //更新gem</span></span><br><span class="line">[root@dev ~]<span class="comment"># gem update               //更新所有gem包</span></span><br><span class="line"></span><br><span class="line">[root@dev ~]<span class="comment"># gem list --local         //显示本地安装的gem包</span></span><br><span class="line"></span><br><span class="line">[root@dev ~]<span class="comment"># gem uninstall rake                           //卸载旧的gem包,保留最新</span></span><br><span class="line">[root@dev ~]<span class="comment"># gem uninstall rake --version=&#123;version&#125;       //卸载指定gem包</span></span><br><span class="line"></span><br><span class="line">[root@dev ~]<span class="comment"># gem cleanup              //清除所有包旧版本,保留最新版本</span></span><br><span class="line"></span><br><span class="line">[root@dev ~]<span class="comment"># gem search -r &#123;关键字&#125;        //从远程服务器上查找包含"关键字"的gem包</span></span><br><span class="line">[root@dev ~]<span class="comment"># gem search &#123;关键字&#125; --remoter //从远程服务器上查找包含"关键字"的gem包</span></span><br><span class="line">[root@dev ~]<span class="comment"># gem search &#123;关键字&#125; --both    //从本地和远程服务器上查找包含"关键字"的gem包</span></span><br><span class="line"></span><br><span class="line">[root@dev ~]<span class="comment"># gem install &#123;gem_package&#125;              //安装最新版本的gem包(本地+远程)</span></span><br><span class="line">[root@dev ~]<span class="comment"># gem install &#123;gem_package&#125; --remoter    //安装最新版本的gem包(远程)</span></span><br><span class="line">[root@dev ~]<span class="comment"># gem install &#123;gem_package&#125; -v &#123;version&#125; //安装指定版本的gem包(本地+远程)</span></span><br><span class="line"></span><br><span class="line">[root@dev ~]<span class="comment"># gem query -n ''[0-9]'' --local  //查找本地含有数字的gem包</span></span><br><span class="line"></span><br><span class="line">[root@dev ~]<span class="comment"># gem build rake.gemspec  //把rake.gemspec编译成rake.gem</span></span><br><span class="line">[root@dev ~]<span class="comment"># gem check -v pkg/rake-0.4.0.gem #检测rake是否有效</span></span><br><span class="line"></span><br><span class="line">[root@dev ~]<span class="comment"># gem contents rake //显示rake包中所包含的文件</span></span><br><span class="line">[root@dev ~]<span class="comment"># gem dependency rails -v 0.10.1 //列出与rails相互依赖的包</span></span><br><span class="line">[root@dev ~]<span class="comment"># gem environment //查看gem的环境</span></span><br></pre></td></tr></table></figure>
</li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.smallasa.com/2017/07/10/ruby-install/" data-id="cjazexzl3009qqcoqn49ozd7b" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-开源许可协议" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/07/08/开源许可协议/" class="article-date">
  <time datetime="2017-07-08T09:46:27.000Z" itemprop="datePublished">2017-07-08</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/other/">other</a>►<a class="article-category-link" href="/categories/other/开源许可协议/">开源许可协议</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/07/08/开源许可协议/">开源许可协议</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="开源许可协议"><a href="#开源许可协议" class="headerlink" title="开源许可协议"></a>开源许可协议</h3><p><img src="开源许可协议/开源许可协议.png" alt="开源许可协议"></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.smallasa.com/2017/07/08/开源许可协议/" data-id="cjazey0ao019bqcoq4w839le7" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  


  <nav id="page-nav">
    
    <a class="extend prev" rel="prev" href="/page/8/">&laquo; 上一页</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/7/">7</a><a class="page-number" href="/page/8/">8</a><span class="page-number current">9</span><a class="page-number" href="/page/10/">10</a><a class="page-number" href="/page/11/">11</a><span class="space">&hellip;</span><a class="page-number" href="/page/29/">29</a><a class="extend next" rel="next" href="/page/10/">下一页 &raquo;</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">分类</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/AliCloud/">AliCloud</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/AliCloud/SDK/">SDK</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/AliCloud/SDK/Python-SDK/">Python SDK</a></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Android/">Android</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Android/Android-install/">Android install</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Android/Android-install/Android-studio-install/">Android studio install</a></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Development/">Development</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Development/Doc/">Doc</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Development/Doc/HTTP-严格传输安全HSTS/">HTTP 严格传输安全HSTS</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Development/Doc/HTTP协议/">HTTP协议</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Development/Doc/TCP-协议详解/">TCP 协议详解</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Development/Doc/TCP与socket区别/">TCP与socket区别</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Development/Doc/linux-文件描述符与打开文件之间的关系/">linux 文件描述符与打开文件之间的关系</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Development/Doc/linux-文件系统inode/">linux 文件系统inode</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Development/Doc/一次完整的HTTP请求/">一次完整的HTTP请求</a></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Disk/">Disk</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Disk/disk-io-performance/">disk io performance</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Disk/disk-iostat/">disk iostat</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Distributed-storage/">Distributed storage</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Distributed-storage/GlusterFS/">GlusterFS</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Distributed-storage/GlusterFS/GlusterFS-architecture/">GlusterFS architecture</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Distributed-storage/GlusterFS/GlusterFS-info/">GlusterFS info</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Distributed-storage/GlusterFS/GlusterFS-install/">GlusterFS install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Distributed-storage/GlusterFS/GlusterFS-workflow/">GlusterFS workflow</a></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Domain/">Domain</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Domain/nslookup-dns-search/">nslookup dns search</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/HA/">HA</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/HA/DRBD/">DRBD</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/HA/DRBD/DRBD-install/">DRBD install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/HA/keepalived/">keepalived</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/HA/keepalived/keepalived-install/">keepalived install</a></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/IDE/">IDE</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/IDE/Intellij/">Intellij</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/IDE/Intellij/Intellij-setting/">Intellij setting</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/IDE/vim/">vim</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/IDE/vim/vim-shortcut-key/">vim shortcut key</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/IDE/vim/vim-vimrc/">vim vimrc</a></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Kernel/">Kernel</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Kernel/kernel-memory/">kernel memory</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Kernel/kernel-memory/kernel-共享内存/">kernel 共享内存</a></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/">Monitor</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/ganglia/">ganglia</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/ganglia/ganglia-install/">ganglia install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/hmonitor/">hmonitor</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/hmonitor/hmonitor-install/">hmonitor install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/htmonitor/">htmonitor</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/htmonitor/htmonitor-install/">htmonitor install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/smokeping/">smokeping</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/smokeping/smokeping-install/">smokeping install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/zabbix/">zabbix</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/zabbix/monitor/">monitor</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/zabbix/monitor/zabbix-monitor-cpu/">zabbix monitor cpu</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/zabbix/monitor/zabbix-monitor-mem/">zabbix monitor mem</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/zabbix/zabbix-auto-discover/">zabbix auto discover</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/zabbix/zabbix-grafana-install/">zabbix grafana install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/zabbix/zabbix-install/">zabbix install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/zabbix/zabbix-install-distributed/">zabbix install distributed</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/zabbix/zabbix-item-and-tigger/">zabbix item and tigger</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/zabbix/zabbix-java-gateway/">zabbix java gateway</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/zabbix/zabbix-modify-login-user-passwd/">zabbix modify login user passwd</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/zabbix/zabbix-optimization/">zabbix optimization</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/zabbix/zabbix-proxy-install/">zabbix proxy install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/zabbix/zabbix-server-support-chinese/">zabbix server support chinese</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/zabbix/zabbix-windows-agent/">zabbix windows agent</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/树莓派/">树莓派</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/树莓派/树莓派-GSM-语音短信报警/">树莓派 GSM 语音短信报警</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/监控/">监控</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/监控/监控知识体系/">监控知识体系</a></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/">Python</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-Framework/">Python Framework</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-Framework/Python-Django/">Python Django</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-Framework/Python-Django-setting/">Python Django setting</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-Framework/Python-tornado-install/">Python tornado install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-Learn/">Python Learn</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-Learn/python-上下文管理器/">python 上下文管理器</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-Learn/python-内存管理/">python 内存管理</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-Learn/python-函数编程/">python 函数编程</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-Learn/python-变量/">python 变量</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-Learn/python-对象使用/">python 对象使用</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-Learn/python-对象的属性/">python 对象的属性</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-Learn/python-对象编程/">python 对象编程</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-Learn/python-数据类型/">python 数据类型</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-Learn/python-流程控制/">python 流程控制</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-Learn/python-爬虫/">python 爬虫</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-Learn/python-特殊方法/">python 特殊方法</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-Learn/python-特殊说明/">python 特殊说明</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-Learn/python-装饰器/">python 装饰器</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-Learn/python-过程编程/">python 过程编程</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-Learn/python-进阶/">python 进阶</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-Learn/python-闭包/">python 闭包</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-install/">Python install</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-install/python-error-info/">python error info</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-install/python-pip-source-image/">python pip source image</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-install/python-pip-use/">python pip use</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-install/python-pyenv-install/">python pyenv install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-install/python-setup-py/">python setup.py</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-install/python-source-install/">python source install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-install/python-virtualenv/">python virtualenv</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-library/">Python library</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-library/MySQLdb/">MySQLdb</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-library/memory-profiler/">memory_profiler</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-library/time-datetime-calendar/">time datetime calendar</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-modules/">Python modules</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-modules/python-modules-path/">python modules path</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-modules/python-modules-pylint-and-ipython/">python modules pylint and ipython</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-other/">Python other</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-other/python-import-and-reload/">python import and reload</a></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Ruby/">Ruby</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Ruby/Ruby-install/">Ruby install</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Ruby/Ruby-install/Ruby-install/">Ruby install</a></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/TCP-IP/">TCP.IP</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/TCP-IP/TCP-状态/">TCP 状态</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/TCP-IP/TCP-IP模型/">TCP/IP模型</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/TCP-IP/Wireshark-use/">Wireshark use</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/WeChat/">WeChat</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/WeChat/WeChat-enterprise/">WeChat enterprise</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/WeChat/WeChat-enterprise/WeChat-enterprise-API/">WeChat enterprise API</a></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/">automation</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/automation/git/">git</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/automation/git/git-command/">git command</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/git/git-error/">git error</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/git/git-gitlab/">git gitlab</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/git/git-gitolite/">git gitolite</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/git/git-gogs/">git gogs</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/git/git-gogs-source-install/">git gogs source install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/git/git-init/">git init</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/git/git-workflow/">git workflow</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/jenkins/">jenkins</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/automation/jenkins/jenkins-info/">jenkins info</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/jenkins/jenkins-install/">jenkins install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/kvm/">kvm</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/automation/kvm/kvm-install/">kvm install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/maven/">maven</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/automation/maven/maven-install/">maven install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/nexus/">nexus</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/automation/nexus/nexus-install/">nexus install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/nexus/nexus-proxy-maven/">nexus proxy maven</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/rpm/">rpm</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/automation/rpm/rpm-package-build/">rpm package build</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/rpm/rpmbuild-spec/">rpmbuild spec</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/salt/">salt</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/automation/salt/salt-advanced-topic/">salt advanced topic</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/salt/salt-highstate/">salt highstate</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/salt/salt-info/">salt info</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/salt/salt-install/">salt install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/salt/salt-install-HA/">salt install HA</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/salt/salt-install-distributed/">salt install distributed</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/salt/salt-install-standard/">salt install standard</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/salt/salt-jinja2-grain-pillar-module/">salt jinja2 grain pillar module</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/salt/salt-manage-event-reactor/">salt manage event reactor</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/salt/salt-manage-grains/">salt manage grains</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/salt/salt-manage-job/">salt manage job</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/salt/salt-manage-module/">salt manage module</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/salt/salt-manage-pillar/">salt manage pillar</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/salt/salt-manage-return/">salt manage return</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/salt/salt-manage-states/">salt manage states</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/salt/salt-manage-target/">salt manage target</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/salt/salt-master-syndic-install/">salt master syndic install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/salt/salt-master-conf/">salt master.conf</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/salt/salt-minion-conf/">salt minion.conf</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/salt/salt-raet/">salt raet</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/salt/salt-state-module/">salt state module</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/salt/salt-syndic-conf/">salt syndic.conf</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/salt/salt-write-module-code/">salt write module code</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/svn/">svn</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/automation/svn/svn-auto-update/">svn auto update</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/svn/svn-checkout-bat/">svn checkout bat</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/svn/svn-server-for-windows/">svn server for windows</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/yum/">yum</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/automation/yum/yum-server-install/">yum server install</a></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/">database</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/database/Mongo/">Mongo</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/database/Mongo/mongo-auth/">mongo auth</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Mongo/mongo-error/">mongo error</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Mongo/mongo-replication-auth-install/">mongo replication auth install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Mongo/mongo-replication-standard-install/">mongo replication standard install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Mongo/mongo-standard-install/">mongo standard install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Mysql/">Mysql</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/database/Mysql/mysql-command/">mysql command</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Mysql/mysql-error-info/">mysql error info</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Mysql/mysql-explain/">mysql explain</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Mysql/mysql-grant/">mysql grant</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Mysql/mysql-index-options/">mysql index options</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Mysql/mysql-innodb-buffer-pool-flush/">mysql innodb buffer pool flush</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Mysql/mysql-master-slave/">mysql master slave</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Mysql/mysql-master-slave-switch/">mysql master slave switch</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Mysql/mysql-partition/">mysql partition</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Mysql/mysql-select-join/">mysql select join</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Mysql/mysql-slow-log/">mysql slow log</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Mysql/mysql-standard/">mysql standard</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Mysql/mysql-table-size/">mysql table size</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Mysql/mysql-use-memory-as-disk/">mysql use memory as disk</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Postgresql/">Postgresql</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/database/Postgresql/postgresql-book-use/">postgresql book use</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Postgresql/postgresql-master-slave-info/">postgresql master slave info</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Postgresql/postgresql-master-slave/">postgresql master/slave</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Postgresql/postgresql-plugin-install/">postgresql plugin install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Postgresql/postgresql-standard/">postgresql standard</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Postgresql/postgresql-tablespace-database-schema-table-user-role-relation/">postgresql tablespace database schema table user role relation</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Postgresql/postgresql-yum-install/">postgresql yum install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Postgresql/postgresql-常用命令/">postgresql 常用命令</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Postgresql/postgresql-数据库对象/">postgresql 数据库对象</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Postgresql/postgresql-数据库管理/">postgresql 数据库管理</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Redis/">Redis</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/database/Redis/redis-error/">redis error</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Redis/redis-install/">redis install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Redis/redis-redis-trib-rb/">redis redis-trib.rb</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Redis/redis-status/">redis status</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Redis/redis-use/">redis use</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/influxDB/">influxDB</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/database/influxDB/influxDB-install/">influxDB install</a></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/golang/">golang</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/golang/go-env/">go env</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/">hadoop</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/RabbitMQ/">RabbitMQ</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/RabbitMQ/RabbitMQ-cluster/">RabbitMQ cluster</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/RabbitMQ/RabbitMQ-high-availability/">RabbitMQ high availability</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/RabbitMQ/RabbitMQ-info/">RabbitMQ info</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/RabbitMQ/RabbitMQ-install/">RabbitMQ install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/RabbitMQ/RabbitMQ-python-pika/">RabbitMQ python pika</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/RabbitMQ/RabbitMQ-user-and-grant/">RabbitMQ user and grant</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/RabbitMQ/RabbitMQ-working-principle/">RabbitMQ working principle</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/beats/">beats</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/beats/beats-install/">beats install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/datax/">datax</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/datax/datax-info/">datax info</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/datax/datax-install/">datax install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/datax/datax-job/">datax job</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/elasticsearch/">elasticsearch</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/elasticsearch/elasticsearch-backup-and-restore/">elasticsearch backup and restore</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/elasticsearch/elasticsearch-command/">elasticsearch command</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/elasticsearch/elasticsearch-core-component/">elasticsearch core component</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/elasticsearch/elasticsearch-exploring-your-cluster/">elasticsearch exploring your cluster</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/elasticsearch/elasticsearch-exploring-your-data/">elasticsearch exploring your data</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/elasticsearch/elasticsearch-four-search-type/">elasticsearch four search type</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/elasticsearch/elasticsearch-full-cluster-restart-upgrade/">elasticsearch full cluster restart upgrade</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/elasticsearch/elasticsearch-install/">elasticsearch install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/elasticsearch/elasticsearch-modifying-your-data/">elasticsearch modifying your data</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/elasticsearch/elasticsearch-rolling-upgrades/">elasticsearch rolling upgrades</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/elasticsearch/elasticsearch-safe-restart/">elasticsearch safe restart</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/elasticsearch/elasticsearch-shard/">elasticsearch shard</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/elasticsearch/how-to-tune-for-indexing-speed/">how to tune for indexing speed</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/elasticsearch/how-to-tune-for-search-speed/">how to tune for search speed</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/flume/">flume</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/flume/flume-info/">flume info</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/flume/flume-install/">flume install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/grafana/">grafana</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/grafana/grafana-install/">grafana install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/hadoop/">hadoop</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/hadoop/hadoop-简介/">hadoop 简介</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/kafka/">kafka</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/kafka/kafka-add-topic-partition/">kafka add topic partition</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/kafka/kafka-add-topic-replicats/">kafka add topic replicats</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/kafka/kafka-broker-config/">kafka broker config</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/kafka/kafka-high-throughput/">kafka high throughput</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/kafka/kafka-info/">kafka info</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/kafka/kafka-install/">kafka install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/kafka/kafka-manage-web/">kafka manage web</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/kafka/kafka-migrate-and-scale/">kafka migrate and scale</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/kafka/kafka-offset-monitor/">kafka offset monitor</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/kafka/kafka-optimize/">kafka optimize</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/kafka/kafka-use/">kafka use</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/kafka/kafka-web-console/">kafka web console</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/kafka/kafka-with-zookeeper/">kafka with zookeeper</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/kibana/">kibana</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/kibana/kibana-install/">kibana install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/logstash/">logstash</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/logstash/logstash-config-file/">logstash config file</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/logstash/logstash-filter-grok/">logstash filter grok</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/logstash/logstash-info/">logstash info</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/logstash/logstash-install/">logstash install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/mycat/">mycat</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/mycat/mycat-jvm-optimize/">mycat jvm optimize</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/mycat/mycat-web-install/">mycat web install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/nsq/">nsq</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/nsq/nsq-command/">nsq command</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/nsq/nsq-info/">nsq info</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/nsq/nsq-install/">nsq install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/zookeeper/">zookeeper</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/zookeeper/zookeeper-install/">zookeeper install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/zookeeper/zookeeper-monitor/">zookeeper monitor</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/zookeeper/zookeeper-optimize/">zookeeper optimize</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/zookeeper/zookeeper-use/">zookeeper use</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/zookeeper/zookeeper-zab-protocol/">zookeeper zab protocol</a></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/java/">java</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/java/java-env/">java env</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/java/java-jvm-optimize/">java jvm optimize</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/java/java-jvm-opts/">java jvm opts</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/java/java-jvm-原理/">java jvm 原理</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/java/java-learn/">java learn</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/java/java-learn/java-学习笔记/">java 学习笔记</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/java/java-log4j/">java log4j</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/java/java-performance-analysis/">java performance analysis</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/java/java-performance-analysis/jps/">jps</a></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/k8s/">k8s</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/k8s/k8s-dashboard-install/">k8s dashboard install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/k8s/k8s-install/">k8s install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/k8s/k8s-registry-install/">k8s registry install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/node/">node</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/node/node-install/">node install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/other/">other</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/other/ACID/">ACID</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/other/分布式二阶段和三阶段提交协议/">分布式二阶段和三阶段提交协议</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/other/开源许可协议/">开源许可协议</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/other/网络带宽/">网络带宽</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/">system service</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/Atlassian/">Atlassian</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/Atlassian/confluence-https/">confluence https</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/Atlassian/confluence-install/">confluence install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/Atlassian/confluence-reset-passwd/">confluence reset passwd</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/Atlassian/confluence-update/">confluence update</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/Atlassian/jira-https/">jira https</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/Atlassian/jira-install/">jira install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/Atlassian/jira-update/">jira update</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/Atlassian/mariadb-install/">mariadb install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/CentOS/">CentOS</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/CentOS/Base-env/">Base env</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/CentOS/linux-common-use-scripts/">linux common use scripts</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/CentOS/linux-history-info-setting/">linux history info setting</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/CentOS/linux-login-info/">linux login info</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/CentOS/linux-nginx-install/">linux nginx install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/CentOS/linux-skill/">linux skill</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/CentOS/linux-system-init/">linux system init</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/CentOS/linux-内存插槽-内存信息/">linux 内存插槽 内存信息</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/CentOS/linux-扩容swap分区/">linux 扩容swap分区</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/CentOS/linux-物理CPU-CPU核数-逻辑CPU/">linux 物理CPU CPU核数 逻辑CPU</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/CentOS/linux-磁盘系统block区别/">linux 磁盘系统block区别</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/CentOS/linux-设置-包含头文件路径-和-动态库链接路径/">linux 设置 包含头文件路径 和 动态库链接路径</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/CentOS/make提高源码编译速度/">make提高源码编译速度</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/NFS/">NFS</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/NFS/nfs-exports-command/">nfs exports command</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/NFS/nfs-install/">nfs install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/Samba/">Samba</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/Samba/samba-conf/">samba conf</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/Samba/samba-install/">samba install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/command/">command</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/command/grep/">grep</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/command/linux/">linux</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/command/pigz/">pigz</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/command/sed/">sed</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/command/split/">split</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/command/tr/">tr</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/haproxy/">haproxy</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/haproxy/haproxy-install/">haproxy install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/nginx/">nginx</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/nginx/nginx-install/">nginx install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/nginx/nginx-location/">nginx location</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/nginx/nginx-rewrite/">nginx rewrite</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/nginx/nginx-status/">nginx status</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/ntpd/">ntpd</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/ntpd/ntpd-install/">ntpd install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/openssl/">openssl</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/openssl/openssl-certificate/">openssl certificate</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/openvpn/">openvpn</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/openvpn/openvpn-install/">openvpn install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/rsync/">rsync</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/rsync/rsync-install/">rsync install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/supersord/">supersord</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/supersord/supersord-install/">supersord install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/vsftpd/">vsftpd</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/vsftpd/ftp-proxy/">ftp proxy</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/vsftpd/vsftpd-error/">vsftpd error</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/vsftpd/vsftpd-info/">vsftpd info</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/vsftpd/vsftpd-install/">vsftpd install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/windows/">windows</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/windows/cygwin-install/">cygwin install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/windows/ipsec-set/">ipsec set</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/windows/windows-modify-hosts/">windows modify hosts</a></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/web/">web</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/web/SSL/">SSL</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/web/SSL/SSL-certificate/">SSL certificate</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/web/angular/">angular</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/web/angular/angular-install/">angular install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/web/hexo/">hexo</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/web/hexo/hexo-install/">hexo install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/web/sass/">sass</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/web/sass/sass-install/">sass install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/web/xml/">xml</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/web/xml/xml-format/">xml format</a></li></ul></li></ul></li></ul>
    </div>
  </div>


  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">归档</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/01/">一月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/12/">十二月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/11/">十一月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/10/">十月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/09/">九月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/08/">八月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/07/">七月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/06/">六月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/05/">五月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/04/">四月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/03/">三月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/02/">二月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/01/">一月 2017</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">最新文章</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2020/01/01/hello-everyone/">Hello Everyone</a>
          </li>
        
          <li>
            <a href="/2017/12/08/svn-checkout-bat/">svn checkout bat</a>
          </li>
        
          <li>
            <a href="/2017/12/08/svn-server-for-windows/">svn server for windows</a>
          </li>
        
          <li>
            <a href="/2017/12/08/nslookup-dns-search/">nslookup dns search</a>
          </li>
        
          <li>
            <a href="/2017/11/28/kafka-web-console/">kafka web console</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2017 penn<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>



  </div>
</body>
</html>