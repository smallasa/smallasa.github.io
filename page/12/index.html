<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  

  
  <title>smallasa</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="smallasa">
<meta property="og:url" content="http://www.smallasa.com/page/12/index.html">
<meta property="og:site_name" content="smallasa">
<meta property="og:locale" content="zh-CN">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="smallasa">
  
    <link rel="alternate" href="/atom.xml" title="smallasa" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">smallasa</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">I known what i do !</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="搜索"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://www.smallasa.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-postgresql-常用命令" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/05/24/postgresql-常用命令/" class="article-date">
  <time datetime="2017-05-24T00:48:54.000Z" itemprop="datePublished">2017-05-24</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/database/">database</a>►<a class="article-category-link" href="/categories/database/Postgresql/">Postgresql</a>►<a class="article-category-link" href="/categories/database/Postgresql/postgresql-常用命令/">postgresql 常用命令</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/05/24/postgresql-常用命令/">postgresql 常用命令</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="postgrsql-常用命令"><a href="#postgrsql-常用命令" class="headerlink" title="postgrsql 常用命令"></a>postgrsql 常用命令</h3><ol>
<li><p>数据库基本查询</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">//显示服务器监听端口号</span><br><span class="line">select inet_server_port();</span><br><span class="line"></span><br><span class="line">//显示当前数据库</span><br><span class="line">select current_database();</span><br><span class="line"></span><br><span class="line">//显示当前的userid</span><br><span class="line">select current_user;</span><br><span class="line"></span><br><span class="line">//显示接受服务器的连接地址</span><br><span class="line">select inet_server_addr();</span><br><span class="line"></span><br><span class="line">//通过用户&#123;role&#125;连接</span><br><span class="line">\c - &#123;role&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>查看表</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">postgres=<span class="comment"># \d+ pg_stat_activity;</span></span><br><span class="line">                        View <span class="string">"pg_catalog.pg_stat_activity"</span></span><br><span class="line">      Column      |           Type           | Modifiers | Storage  | Description</span><br><span class="line">------------------+--------------------------+-----------+----------+-------------</span><br><span class="line"> datid            | oid                      |           | plain    |</span><br><span class="line"> datname          | name                     |           | plain    |</span><br><span class="line"> pid              | <span class="built_in">integer</span>                  |           | plain    |</span><br><span class="line"> usesysid         | oid                      |           | plain    |</span><br><span class="line"> usename          | name                     |           | plain    |</span><br><span class="line"> application_name | text                     |           | extended |</span><br><span class="line"> client_addr      | inet                     |           | main     |</span><br><span class="line"> client_hostname  | text                     |           | extended |</span><br><span class="line"> client_port      | <span class="built_in">integer</span>                  |           | plain    |</span><br><span class="line"> backend_start    | timestamp with time zone |           | plain    |</span><br><span class="line"> xact_start       | timestamp with time zone |           | plain    |</span><br><span class="line"> query_start      | timestamp with time zone |           | plain    |</span><br><span class="line"> state_change     | timestamp with time zone |           | plain    |</span><br><span class="line"> waiting          | boolean                  |           | plain    |</span><br><span class="line"> state            | text                     |           | extended |</span><br><span class="line"> query            | text                     |           | extended |</span><br><span class="line">View definition:</span><br><span class="line"> SELECT s.datid,</span><br><span class="line">    d.datname,</span><br><span class="line">    s.pid,</span><br><span class="line">    s.usesysid,</span><br><span class="line">    u.rolname AS usename,</span><br><span class="line">    s.application_name,</span><br><span class="line">    s.client_addr,</span><br><span class="line">    s.client_hostname,</span><br><span class="line">    s.client_port,</span><br><span class="line">    s.backend_start,</span><br><span class="line">    s.xact_start,</span><br><span class="line">    s.query_start,</span><br><span class="line">    s.state_change,</span><br><span class="line">    s.waiting,</span><br><span class="line">    s.state,</span><br><span class="line">    s.query</span><br><span class="line">   FROM pg_database d,</span><br><span class="line">    pg_stat_get_activity(NULL::<span class="built_in">integer</span>) s(datid, pid, usesysid, application_name, state, query, waiting, xact_start, query_start, backend_start, state_change, client_addr, client_hostname, client_port),</span><br><span class="line">    pg_authid u</span><br><span class="line">  WHERE s.datid = d.oid AND s.usesysid = u.oid;</span><br></pre></td></tr></table></figure>
</li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.smallasa.com/2017/05/24/postgresql-常用命令/" data-id="cjavy9k2s007u0coq3urnm8tw" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-python-Django" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/05/23/python-Django/" class="article-date">
  <time datetime="2017-05-23T02:32:22.000Z" itemprop="datePublished">2017-05-23</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Python/">Python</a>►<a class="article-category-link" href="/categories/Python/Python-Framework/">Python Framework</a>►<a class="article-category-link" href="/categories/Python/Python-Framework/Python-Django/">Python Django</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/05/23/python-Django/">python Django</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="Python-Django-install"><a href="#Python-Django-install" class="headerlink" title="Python Django install"></a>Python Django install</h3><ol>
<li><p>python virtualenv</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@dev ~]<span class="comment"># pyenv virtualenv 2.7.13 cmdb</span></span><br><span class="line">[root@dev ~]<span class="comment"># pyenv virtualenvs</span></span><br><span class="line">[root@dev ~]<span class="comment"># pyenv activate cmdb</span></span><br><span class="line">(cmdb) [root@dev ~]<span class="comment"># source deactivate</span></span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@dev ~]<span class="comment"># pyenv install 3.6.1</span></span><br><span class="line">[root@dev ~]<span class="comment"># pyenv virtualenv 3.6.1 oeaoo</span></span><br><span class="line">[root@dev ~]<span class="comment"># pyenv activate oeaoo</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>django install</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@dev ~]<span class="comment"># pyenv activate cmdb</span></span><br><span class="line">(cmdb) [root@dev ~]<span class="comment"># pip install django==1.11.1</span></span><br><span class="line"></span><br><span class="line">(cmdb) [root@dev ~]<span class="comment"># python</span></span><br><span class="line">Python 2.7.13 (default, May 22 2017, 11:51:24)</span><br><span class="line">&gt;&gt;&gt; import django</span><br><span class="line">&gt;&gt;&gt; <span class="built_in">print</span>(django.VERSION)</span><br><span class="line">(1, 11, 1, u<span class="string">'final'</span>, 0)</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">(oeaoo) [root@dev web]<span class="comment"># pip install django==1.11.2</span></span><br><span class="line">(oeaoo) [root@dev web]<span class="comment"># python</span></span><br><span class="line">&gt;&gt;&gt; import django</span><br><span class="line">&gt;&gt;&gt; <span class="built_in">print</span>(django.get_version())</span><br><span class="line">1.11.2</span><br></pre></td></tr></table></figure>
</li>
</ol>
<hr>
<h3 id="Python-Django-开发站点"><a href="#Python-Django-开发站点" class="headerlink" title="Python Django 开发站点"></a>Python Django 开发站点</h3><ol>
<li><p>建立项目</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">(cmdb) [root@dev ~]<span class="comment"># django-admin startproject djangosite</span></span><br><span class="line">(cmdb) [root@dev ~]<span class="comment"># tree djangosite/</span></span><br><span class="line">djangosite/</span><br><span class="line">├── djangosite</span><br><span class="line">│   ├── __init__.py</span><br><span class="line">│   ├── settings.py</span><br><span class="line">│   ├── urls.py</span><br><span class="line">│   └── wsgi.py</span><br><span class="line">└── manage.py</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">(oeaoo) [root@dev oeaoo]<span class="comment"># django-admin startproject cmdb</span></span><br><span class="line">(oeaoo) [root@dev oeaoo]<span class="comment"># tree cmdb/</span></span><br><span class="line">cmdb/</span><br><span class="line">├── cmdb</span><br><span class="line">│   ├── __init__.py</span><br><span class="line">│   ├── settings.py</span><br><span class="line">│   ├── urls.py</span><br><span class="line">│   └── wsgi.py</span><br><span class="line">└── manage.py</span><br></pre></td></tr></table></figure>
</li>
<li><p>建立应用</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">(cmdb) [root@dev ~]<span class="comment"># cd djangosite/</span></span><br><span class="line">(cmdb) [root@dev djangosite]<span class="comment"># python manage.py startapp app</span></span><br><span class="line">(cmdb) [root@dev djangosite]<span class="comment"># tree .</span></span><br><span class="line">.</span><br><span class="line">├── app</span><br><span class="line">│   ├── admin.py</span><br><span class="line">│   ├── apps.py</span><br><span class="line">│   ├── __init__.py</span><br><span class="line">│   ├── migrations</span><br><span class="line">│   │   └── __init__.py</span><br><span class="line">│   ├── models.py</span><br><span class="line">│   ├── tests.py</span><br><span class="line">│   └── views.py</span><br><span class="line">├── djangosite</span><br><span class="line">│   ├── __init__.py</span><br><span class="line">│   ├── __init__.pyc</span><br><span class="line">│   ├── settings.py</span><br><span class="line">│   ├── settings.pyc</span><br><span class="line">│   ├── urls.py</span><br><span class="line">│   └── wsgi.py</span><br><span class="line">└── manage.py</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">(oeaoo) [root@dev cmdb]<span class="comment"># python manage.py startapp polls</span></span><br><span class="line">(oeaoo) [root@dev cmdb]<span class="comment"># tree .</span></span><br><span class="line">.</span><br><span class="line">├── cmdb</span><br><span class="line">│   ├── __init__.py</span><br><span class="line">│   ├── __pycache__</span><br><span class="line">│   │   ├── __init__.cpython-36.pyc</span><br><span class="line">│   │   ├── settings.cpython-36.pyc</span><br><span class="line">│   │   ├── urls.cpython-36.pyc</span><br><span class="line">│   │   └── wsgi.cpython-36.pyc</span><br><span class="line">│   ├── settings.py</span><br><span class="line">│   ├── urls.py</span><br><span class="line">│   └── wsgi.py</span><br><span class="line">├── db.sqlite3</span><br><span class="line">├── manage.py</span><br><span class="line">└── polls</span><br><span class="line">    ├── admin.py</span><br><span class="line">    ├── apps.py</span><br><span class="line">    ├── __init__.py</span><br><span class="line">    ├── migrations</span><br><span class="line">    │   └── __init__.py</span><br><span class="line">    ├── models.py</span><br><span class="line">    ├── tests.py</span><br><span class="line">    └── views.py</span><br></pre></td></tr></table></figure>
</li>
<li><p>基本视图</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">* 建立路由响应函数</span><br><span class="line">(cmdb) [root@dev djangosite]<span class="comment"># vim app/views.py</span></span><br><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line">from __future__ import unicode_literals</span><br><span class="line">from django.shortcuts import render</span><br><span class="line"><span class="comment"># Create your views here.</span></span><br><span class="line">from django.http import HttpResponse</span><br><span class="line">def welecome(request):</span><br><span class="line">    <span class="built_in">return</span> HttpResponse(<span class="string">"&lt;h1&gt;Welecome to my website!&lt;/h1&gt;"</span>)</span><br><span class="line"></span><br><span class="line">* 通过URL映射将用户的HTTP访问与该函数绑定起来</span><br><span class="line">(cmdb) [root@dev djangosite]<span class="comment"># vim app/urls.py</span></span><br><span class="line">from django.conf.urls import url</span><br><span class="line">from . import views</span><br><span class="line">urlpatterns = [</span><br><span class="line">    url(r<span class="string">''</span>,views.welecome)</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line">* 在项目URL文件中的urlpatterns参数中增加一项,声明对应用app中的ruls.py文件的引用</span><br><span class="line">(cmdb) [root@dev djangosite]<span class="comment"># vim djangosite/urls.py</span></span><br><span class="line">from django.conf.urls import url</span><br><span class="line">from django.contrib import admin</span><br><span class="line">from django.conf.urls import include       <span class="comment">#新增</span></span><br><span class="line">urlpatterns = [</span><br><span class="line">    url(r<span class="string">'^app/'</span>, include(<span class="string">'app.urls'</span>)),    <span class="comment">#新增</span></span><br><span class="line">    url(r<span class="string">'^admin/'</span>, admin.site.urls),</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
</li>
<li><p>内置web服务器</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">(cmdb) [root@dev djangosite]<span class="comment"># pwd</span></span><br><span class="line">/root/djangosite</span><br><span class="line">(cmdb) [root@dev djangosite]<span class="comment"># python manage.py runserver 0.0.0.0:8080</span></span><br><span class="line"></span><br><span class="line">浏览器中输入: http://127.0.0.1:8080/app/ 进行检查</span><br></pre></td></tr></table></figure>
</li>
<li><p>摸类型</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">* 配置项目INSTALLED_APPS</span><br><span class="line">要在djangosite项目的setting.py中告诉Django需要安装应用app中的模型,则方法是找到djangosite/setting.py文件,找到INSTALLED_APPS数组,在其中添加应用app的Config类</span><br><span class="line">(cmdb) [root@dev djangosite]# pwd</span><br><span class="line">/root/djangosite</span><br><span class="line">(cmdb) [root@dev djangosite]# vim djangosite/settings.py</span><br><span class="line">INSTALLED_APPS = [</span><br><span class="line">    &apos;app.apps.AppConfig&apos;,   #新增</span><br><span class="line">    &apos;django.contrib.admin&apos;,</span><br><span class="line">    &apos;django.contrib.auth&apos;,</span><br><span class="line">    &apos;django.contrib.contenttypes&apos;,</span><br><span class="line">    &apos;django.contrib.sessions&apos;,</span><br><span class="line">    &apos;django.contrib.messages&apos;,</span><br><span class="line">    &apos;django.contrib.staticfiles&apos;,</span><br><span class="line">]</span><br><span class="line">注意: 上面声明的是djangosite/app/apps.py中自动生成的AppConfig类</span><br><span class="line"></span><br><span class="line">* 模型定义</span><br><span class="line">定义一个模型类Moment用来定义信息发布表</span><br><span class="line">(cmdb) [root@dev djangosite]# vim app/models.py</span><br><span class="line"># -*- coding: utf-8 -*-</span><br><span class="line">from __future__ import unicode_literals</span><br><span class="line">from django.db import models    #所有的模型类必须继承自它</span><br><span class="line"># Create your models here.</span><br><span class="line">class Monment(models.Model):    #定义了models.Model的子类Monment</span><br><span class="line">    content = models.CharField(max_length=200)</span><br><span class="line">    user_name = models.CharField(max_length=20)</span><br><span class="line">    kind = models.CharField(max_length=20)</span><br><span class="line"></span><br><span class="line">* 生成数据移植文件</span><br><span class="line">生成数据移植文件是指将models.py中定义的数据表转换成数据库生成脚本的过程</span><br><span class="line">(cmdb) [root@dev djangosite]# pwd</span><br><span class="line">/root/djangosite</span><br><span class="line">(cmdb) [root@dev djangosite]# python manage.py makemigrations app</span><br><span class="line">Migrations for &apos;app&apos;:</span><br><span class="line">  app/migrations/0001_initial.py</span><br><span class="line">    - Create model Monment</span><br><span class="line"></span><br><span class="line">* 将数据移植文件应用到数据库</span><br><span class="line">(cmdb) [root@dev djangosite]# pwd</span><br><span class="line">/root/djangosite</span><br><span class="line">(cmdb) [root@dev djangosite]# python manage.py migrate</span><br><span class="line">Operations to perform:</span><br><span class="line">  Apply all migrations: admin, app, auth, contenttypes, sessions</span><br><span class="line">Running migrations:</span><br><span class="line">  Applying app.0001_initial... OK</span><br><span class="line">  Applying app.0002_auto_20170523_0338... OK</span><br><span class="line">在命令执行过程中将检查djangosite/app/migrations目录中的所有文件,逐步使历次生成的移植文件生效</span><br></pre></td></tr></table></figure>
</li>
<li><p>表单视图</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br></pre></td><td class="code"><pre><span class="line">设计和开发信息录入页面:提供输入界面,让用户输入名字,文本信息内容和选择消息类型.用户提交后网页自动设置该信息的时间并保持到数据库中</span><br><span class="line"></span><br><span class="line">* 定义表单类</span><br><span class="line">(cmdb) [root@dev djangosite]<span class="comment"># pwd</span></span><br><span class="line">/root/djangosite</span><br><span class="line">(cmdb) [root@dev djangosite]<span class="comment"># vim app/forms.py</span></span><br><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line">from django.forms import ModelForm    <span class="comment">#引入django表单类的基类</span></span><br><span class="line">from app.models import Moment         <span class="comment">#引入models定义的Moment类,以便后面表单中关联Moment类</span></span><br><span class="line"></span><br><span class="line">class MomentForm(ModelForm):         <span class="comment">#定义表单类MomentForm类,继承ModelForm.</span></span><br><span class="line">    class Meta:                      <span class="comment">#定义子类Meta,声明与本表单关联的模型类及其字段</span></span><br><span class="line">        model = Moment</span><br><span class="line">        fields = <span class="string">'__all__'</span></span><br><span class="line"></span><br><span class="line">* 修改模型类</span><br><span class="line">为了使用户能以单选的方式设置消息类型,则需要在models.py文件中定义单选枚举值,并与模型类Moment关联</span><br><span class="line">(cmdb) [root@dev djangosite]<span class="comment"># vim app/models.py</span></span><br><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line">from __future__ import unicode_literals</span><br><span class="line">from django.db import models</span><br><span class="line"><span class="comment"># 声明元组用于设置消息类型枚举项</span></span><br><span class="line">KIND_CHOICES = (</span><br><span class="line">    (<span class="string">'python技术'</span>,<span class="string">'python技术'</span>),</span><br><span class="line">    (<span class="string">'数据库技术'</span>,<span class="string">'据库技术'</span>),</span><br><span class="line">    (<span class="string">'个人中心'</span>,<span class="string">'个人中心'</span>),</span><br><span class="line">    (<span class="string">'其它'</span>,<span class="string">'其它'</span>),</span><br><span class="line">)</span><br><span class="line"><span class="comment"># Create your models here.</span></span><br><span class="line">class Monment(models.Model):</span><br><span class="line">    content = models.CharField(max_length=300)</span><br><span class="line">    user_name = models.CharField(max_length=20,default=<span class="string">'匿名'</span>)</span><br><span class="line">    kind = models.CharField(max_length=20,choices=KIND_CHOICES,default=KIND_CHOICES[0])</span><br><span class="line"></span><br><span class="line">* 开发模板文件</span><br><span class="line">模板是python web框架中用于产生HTML,XML等文本格式文档的术语</span><br><span class="line">模板文件本身也是一种文本文件,开发者需要手工对齐编辑开发</span><br><span class="line">//创建模板存放目录</span><br><span class="line">(cmdb) [root@dev djangosite]<span class="comment"># mkdir app/templates</span></span><br><span class="line">//创建模板文件</span><br><span class="line">(cmdb) [root@dev djangosite]<span class="comment"># vim app/templates/moments_input.html</span></span><br><span class="line">&lt;!DOCTPYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">  &lt;head&gt;</span><br><span class="line">    &lt;title&gt;消息录入界面&lt;/title&gt;</span><br><span class="line">  &lt;/head&gt;</span><br><span class="line">  &lt;body&gt;</span><br><span class="line">    &lt;form action=<span class="string">"?"</span> method=<span class="string">"post"</span>&gt;</span><br><span class="line">      &lt;fieldset&gt;</span><br><span class="line">        &lt;legend&gt;请输入并提交&lt;/legend&gt;</span><br><span class="line">            &#123;&#123;form.as_p&#125;&#125;</span><br><span class="line">            &lt;input <span class="built_in">type</span>=<span class="string">"submit"</span> value=<span class="string">"submit"</span> /&gt;</span><br><span class="line">      &lt;/fieldset&gt;</span><br><span class="line">    &lt;/form&gt;</span><br><span class="line">  &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br><span class="line"></span><br><span class="line">* 开发视图(使得表单类和页面模板衔接起来)</span><br><span class="line">(cmdb) [root@dev djangosite]<span class="comment"># vim app/views.py</span></span><br><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line">import os</span><br><span class="line">from __future__ import unicode_literals</span><br><span class="line">from app.forms import MomentForm</span><br><span class="line">from django.shortcuts import render</span><br><span class="line">from django.http import HttpResponse</span><br><span class="line">from django.core.urlresolvers import reverse</span><br><span class="line">def welcome(request):</span><br><span class="line">    <span class="built_in">return</span> HttpResponse(<span class="string">"&lt;h1&gt;Welecome to my website!&lt;/h1&gt;"</span>)</span><br><span class="line">def monments_input(request):</span><br><span class="line">    <span class="keyword">if</span> request.method == <span class="string">'POST'</span>:</span><br><span class="line">        form = MomentFrom(request.POST)</span><br><span class="line">        <span class="keyword">if</span> form.is_valid():</span><br><span class="line">            moment = form.save()</span><br><span class="line">            moment.save()</span><br><span class="line">            <span class="built_in">return</span> HttpResponseRedirect(reverse(<span class="string">"app.views.welcome"</span>))</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        form = MomentFrom()</span><br><span class="line">    PROJECT_ROOT = os.path.dirname(os.path.dirname(os.path.abspath(__file__)))</span><br><span class="line">    <span class="built_in">return</span> render(request,os.path.join(PROJECT_ROOT,<span class="string">'app/templates'</span>,<span class="string">'moments_input.html'</span>,&#123;<span class="string">'form'</span>: form&#125;))</span><br><span class="line"></span><br><span class="line">* 增加视图函数路由映射</span><br><span class="line">(cmdb) [root@dev djangosite]<span class="comment"># vim app/urls.py</span></span><br><span class="line">from django.conf.urls import url</span><br><span class="line">from . import views</span><br><span class="line">urlpatterns = [</span><br><span class="line">    url(r<span class="string">'moments_input'</span>,views.moments_input,name=<span class="string">'moments_input'</span>),</span><br><span class="line">    url(r<span class="string">''</span>,views.welcome,name=<span class="string">'welcome'</span>),</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
</li>
<li><p>Django模型层</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br></pre></td><td class="code"><pre><span class="line">Django模型层是Django框架自定义的一套独特的ORM技术.</span><br><span class="line"></span><br><span class="line">使用Django模型开发的首要任务是定义模型类及其属性.每个模型类都可以被映射为数据库中的一个数据表,而类型属性被定义为数据字段,除此之外,数据库表的主键,外键,约束也通过类的属性完成定义</span><br><span class="line"></span><br><span class="line">* 模型类定义</span><br><span class="line">from django.db import models</span><br><span class="line"></span><br><span class="line">class ModelName(models.Model):</span><br><span class="line">    field1 = models.XXField(...)</span><br><span class="line">    field2 = models.XXField(...)</span><br><span class="line"></span><br><span class="line">    class Meta:</span><br><span class="line">        db_table = ...</span><br><span class="line">        other_metas = ...</span><br><span class="line"></span><br><span class="line">解析:</span><br><span class="line">* 所有的Django模型继承自django.db.models.Model类</span><br><span class="line">* 通过其中的类属性定义模型字段,模型字段必须是某种models.XXField类型</span><br><span class="line">* 通过模型类中的Meta子类定义模型元数据,比如数据库表名,数据默认排序等</span><br><span class="line"></span><br><span class="line">Meta类的属性名由Django预定于,通用属性如下:</span><br><span class="line">* abstract True/False,标识是否为抽象基类</span><br><span class="line">* app_label 定义本类所属的应用,例如: app_label=<span class="string">"myapp"</span></span><br><span class="line">* db_table 映射的数据表名(如果未定义,则默认生成数据表,表名为<span class="string">"应用名_模型名"</span>)</span><br><span class="line">* db_tablespace 映射表空间名(表空间在oracle和postgresql中存在)</span><br><span class="line">* default_related_name 定义模型的反向关系引用名称,默认与模型名一样</span><br><span class="line">* get_latest_by 定义按哪个字段值排列以获得模型开始或结束记录,本属性值通常指向一个日期或整型的模型字段</span><br><span class="line">* managed True/False,定义Django的manage.py命令行工具是否管理本模型</span><br><span class="line">* order_with_respect_to 定义模型可以按照某外键引用关系排序</span><br><span class="line">* ordering 本模型记录的默认排序字段,可以设置多个字段,默认以升序排序,降序需要在前面加负号(-)</span><br><span class="line">* default_permissions 模型操作权限(add,change,delete)</span><br><span class="line">* proxy True/False,本模型及所有继承自本模型的子模型是否为代理模型</span><br><span class="line">* require_db_features 定义底层数据库所必须具备的特性</span><br><span class="line">* require_db_vendor 定义底层数据库类型(SQLite,PostgreSQL,MySQL,Oracle)</span><br><span class="line">* unique_together 用来设置不重复的字段组合,必须唯一</span><br><span class="line">* index_together 定义联合索引的字段,可以设置多个</span><br><span class="line">* verbose_name 指明一个易于理解和表述的单数形式的对象名称</span><br><span class="line">* verbose_name_plural 指明一个易于理解和表述的复数形式对象名称</span><br><span class="line"></span><br><span class="line">* 普通字段类型</span><br><span class="line">普通字段类型中除外键关系外的数据字段属性.</span><br><span class="line">所有的字段属性必须继承自抽象类django.db.models.Field,开发可以自定义继承自该类的字段类型</span><br><span class="line"></span><br><span class="line">预定于类型:</span><br><span class="line">* AutoField 一个自动递增的整形字段,添加记录时会自动增长(充当主键)</span><br><span class="line">* BigIntegerField  64位整型字段</span><br><span class="line">* BinaryField 二进制数据字段,只能通过bytes对其进行赋值</span><br><span class="line">* BooleanField 布尔字段,对应html标签<span class="string">"&lt;input type="</span>checkbox<span class="string">"&gt;"</span></span><br><span class="line">* CharField 字符串字段,用于较短的字符串,对应于html标签<span class="string">"&lt;input type="</span>text<span class="string">"&gt;"</span></span><br><span class="line">* TextField 大容量字段,对应于html标签是多行编辑框<span class="string">"&lt;textarea&gt;"</span></span><br><span class="line">* CommaSeparatedIntegerField 用于存放逗号分隔的整数值</span><br><span class="line">* DateField 日期字段,对应于html标签是<span class="string">"&lt;input type="</span>text<span class="string">"&gt;"</span></span><br><span class="line">* DateTimeField 类似于DateField,但同时支持于时间的输入</span><br><span class="line">* DurationField 存储时间周期</span><br><span class="line">* EmailField 一个带有检查Email合法性的CharField</span><br><span class="line">* FileField 一个文件上传字段</span><br><span class="line">* FilePathField 按目录限制规则选择文件,定义本字段时必须传入参数path,用于限定目录</span><br><span class="line">* FloatField 浮点型字段</span><br><span class="line">* ImageField 类似FileField,同时校验上传对象是否是一个合法图片</span><br><span class="line">* IntegerField 用于保存一个整数</span><br><span class="line">* IPAddressField 一个字符串形式的IP地址</span><br><span class="line">* NullBooleanField 类似BooleanField,但多出一个None选项</span><br><span class="line">* PhoneNumberField 带有美国风格的电话号码校验(xxx-xxx-xxxx)</span><br><span class="line">* PositiveIntegerField 只能输入非负数的IntegerField</span><br><span class="line">* SlugField 只包含字母,数字,下划线和连字符输入字段,用于URL</span><br><span class="line">* SmallIntegerField 类似IntegerField,但只有较小的输入范围</span><br><span class="line">* TimeField 时间字段,但只能表达和输入时间</span><br><span class="line">* URLField 用于保存URL</span><br><span class="line">* USStateField 美国州名缩小,由两个字段组成</span><br><span class="line">* XMLField XML字符字段</span><br><span class="line"></span><br><span class="line">* 字段类型参数</span><br><span class="line">每个字段类型都有一些特定的HTML标签和表单验证参数.但同时也有一些每个字段都可以设置的公共参数</span><br><span class="line">公共参数:</span><br><span class="line">* null 定义是否允许相对应的数据库字段为null,默认为False</span><br><span class="line">* blank 定义字段是否可以为空.blank用于字段HTML表单验证.null用于数据库中的非空约束</span><br><span class="line">* choices 定义字段可选值</span><br><span class="line">* default 定义默认值</span><br><span class="line">* help_text HTML页面中输入控件的帮助信息</span><br><span class="line">* primary_key 定义字段是否为主键</span><br><span class="line">* unique 定义字段数据是否是唯一</span><br><span class="line">* 无名参数,人性化设置</span><br><span class="line"></span><br><span class="line">* 基本查询</span><br><span class="line">Django有两种过滤器用于筛选数据:</span><br><span class="line">* filter(**kwargs)  返回符合筛选条件的数据集</span><br><span class="line">* exclude(**kwargs) 返回不符合筛选条件的数据集</span><br><span class="line">* 多个filter和exclude可以组合在一起使用</span><br><span class="line"></span><br><span class="line">* 数据保存和删除</span><br><span class="line">Django定义了一个统一的方法<span class="string">"save()"</span>,用于完成模型的Insert和update操作</span><br><span class="line">在执行模型实例Save()时,Django会根据模型的主键,判断记录是否存在,存在则Update操作,不存在则Insert操作</span><br><span class="line"></span><br><span class="line">Django提供了delete()方法用于删除记录,该方法即可以用于数据集,又可以用于单条记录</span><br><span class="line"></span><br><span class="line">* 关系操作</span><br><span class="line">利用数据表之间的关系进行数据建模和业务开发是关系数据库最主要的功能</span><br><span class="line"></span><br><span class="line">//一对一关系</span><br><span class="line">一对一关系通过在两个表之间定义相同的主键来完成(OneToOneField)</span><br><span class="line">//一堆多关系</span><br><span class="line">一对多关系通过<span class="string">"附表"</span>中设置到<span class="string">"主表"</span>的外键引用来完成(models.ForeignKey定义外键)</span><br><span class="line">//多对多关系</span><br><span class="line">多对多关系通过建立一个中间关系表来完成,该中间表定义了到两个主表的外键</span><br><span class="line"></span><br><span class="line">* 面向对象ORM</span><br><span class="line">Django支持三种风格的模型继承:</span><br><span class="line">* 抽象类继承</span><br><span class="line">  父类继承自models.Model,但不会在底层数据库中生成相应的数据表.父类的属性列存储在其子类的数据表中</span><br><span class="line">* 多表继承</span><br><span class="line">  多表继承的每个模型类都在底层数据库中生成相应的数据表管理数据</span><br><span class="line">* 代理模型继承</span><br><span class="line">  父类用于在底层数据库中管理数据表,而子类不顶用数据列,只定义查询数据集的排序方式等元数据</span><br></pre></td></tr></table></figure>
</li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.smallasa.com/2017/05/23/python-Django/" data-id="cjavy9k2x007x0coqoxjdj1pm" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-postgresql-数据库管理" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/05/23/postgresql-数据库管理/" class="article-date">
  <time datetime="2017-05-23T02:29:02.000Z" itemprop="datePublished">2017-05-23</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/database/">database</a>►<a class="article-category-link" href="/categories/database/Postgresql/">Postgresql</a>►<a class="article-category-link" href="/categories/database/Postgresql/postgresql-数据库管理/">postgresql 数据库管理</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/05/23/postgresql-数据库管理/">postgresql 数据库管理</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="postgrsql-数据库管理"><a href="#postgrsql-数据库管理" class="headerlink" title="postgrsql 数据库管理"></a>postgrsql 数据库管理</h3><ol>
<li><p>postgrsql登录</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">// postgresql 登录和退出</span><br><span class="line">-bash-4.2$ psql -U postgres -d postgres</span><br><span class="line">postgres=<span class="comment"># \q</span></span><br><span class="line"></span><br><span class="line">注意: 如果登录PG时,只指定了用户<span class="string">"psql -U postgres"</span>,未指定数据库<span class="string">"-d postgres"</span>,默认数据库会跟用户名一致(也就是说默认连接的数据库名=<span class="string">'postgres'</span>)</span><br><span class="line"></span><br><span class="line">//切换用户进行连接</span><br><span class="line">postgres=<span class="comment"># \c - role</span></span><br><span class="line"></span><br><span class="line">//切换到数据库</span><br><span class="line">postgres=<span class="comment"># \c database</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>连接管理</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">//查看活动连接表,以及其进程ID</span><br><span class="line">postgres=<span class="comment"># select * from pg_stat_activity;</span></span><br><span class="line">或者:</span><br><span class="line">postgres=<span class="comment"># \x</span></span><br><span class="line">postgres=<span class="comment"># select * from pg_stat_activity;</span></span><br><span class="line">postgres=<span class="comment"># \x</span></span><br><span class="line"></span><br><span class="line">//取消连接上的活动查询(该操作不会终止连接本身(不会中断session,事务回滚))</span><br><span class="line">postgres=<span class="comment"># select pg_cancel_backend(12950);</span></span><br><span class="line"></span><br><span class="line">//终止连接(中断session)</span><br><span class="line">postgres=<span class="comment"># select pg_terminate_backend(12950);</span></span><br><span class="line"></span><br><span class="line">//批量删除</span><br><span class="line">postgres=<span class="comment"># select pg_terminate_backend(pid) from pg_stat_activity where usename = 'some_role';</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>创建可登录角色</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">角色相当于岗位,用户就是具体的人.</span><br><span class="line">Postgresql中没有区分用户和角色,<span class="string">"create user"</span>为<span class="string">"create role"</span>的别名,这两个命令几乎是完全相同的,唯一的区别是<span class="string">"create user"</span>命令创建的用户默认带有LOGIN属性,而<span class="string">"create role"</span>命令创建的用户默认不带LOGIN属性</span><br><span class="line">我们建议使用<span class="string">"create role"</span>来创建用户!</span><br><span class="line"></span><br><span class="line">//创建角色</span><br><span class="line">postgres=<span class="comment"># create role penn;</span></span><br><span class="line"></span><br><span class="line">//删除角色</span><br><span class="line">postgres=<span class="comment"># drop role penn;</span></span><br><span class="line"></span><br><span class="line">//查看角色</span><br><span class="line">postgres=<span class="comment"># \du</span></span><br><span class="line">或者</span><br><span class="line">postgres=<span class="comment"># select * from pg_roles;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>为角色授权</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">//为角色授和取消LOGIN权限</span><br><span class="line">postgres=<span class="comment"># alter role penn login;</span></span><br><span class="line">postgres=<span class="comment"># alter role penn nologin;</span></span><br><span class="line"></span><br><span class="line">//为角色授权和取消SUPERUSER权限</span><br><span class="line">postgres=<span class="comment"># alter role penn superuser;</span></span><br><span class="line">postgres=<span class="comment"># alter role penn nosuperuser;</span></span><br><span class="line"></span><br><span class="line">//为角色授权和取消CREATEDB</span><br><span class="line">postgres=<span class="comment"># alter role penn createdb;</span></span><br><span class="line">postgres=<span class="comment"># alter role penn nocreatedb;</span></span><br><span class="line"></span><br><span class="line">//为角色授权和取消CREATEROLE</span><br><span class="line">postgres=<span class="comment"># alter role penn createrole;</span></span><br><span class="line">postgres=<span class="comment"># alter role penn nocreaterole;</span></span><br><span class="line"></span><br><span class="line">//为角色授权和取消REPLICATION</span><br><span class="line">postgres=<span class="comment"># alter role penn replication;</span></span><br><span class="line">postgres=<span class="comment"># alter role penn noreplication;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>创建角色并授权</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">//创建角色并授权LOGIN</span><br><span class="line">postgres=<span class="comment"># create role penn login;</span></span><br><span class="line"></span><br><span class="line">//创建角色并授权SUPERUSER</span><br><span class="line">postgres=<span class="comment"># create role penn superuser;</span></span><br><span class="line"></span><br><span class="line">//创建角色并授权CREATEDB</span><br><span class="line">postgres=<span class="comment"># create role penn createdb;</span></span><br><span class="line"></span><br><span class="line">//创建角色并授权CREATEROLE</span><br><span class="line">postgres=<span class="comment"># create role penn createrole;</span></span><br><span class="line"></span><br><span class="line">//创建角色并授权REPLICATION</span><br><span class="line">postgres=<span class="comment"># create role penn replication login;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>创建角色,授权,并为角色设置密码</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">//创建角色并授权LOGIN,并设置密码</span><br><span class="line">postgres=<span class="comment"># create role penn login password '123456';</span></span><br><span class="line">或者:</span><br><span class="line">postgres=<span class="comment"># create role penn;</span></span><br><span class="line">postgres=<span class="comment"># alter role penn login;</span></span><br><span class="line">postgres=<span class="comment"># alter role penn password '123456'</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>创建组角色</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">//创建组角色</span><br><span class="line">postgres=<span class="comment"># create role group_1 inherit;</span></span><br><span class="line">inherit 表示组角色group_1内的任何成员都会自动继承其除<span class="string">"超级用户权限"</span>之外的所有权限</span><br><span class="line">noinherit 表示禁止组角色group_1将其权限授予其成员角色</span><br><span class="line"></span><br><span class="line">//授权组角色</span><br><span class="line">postgres=<span class="comment"># alter role group_1 login;</span></span><br><span class="line"></span><br><span class="line">//将组角色权限授权给组成员(将用户加入到组角色中,继承权限)</span><br><span class="line">postgres=<span class="comment"># grant group_1 to penn;</span></span><br><span class="line"></span><br><span class="line">//撤销组角色权限</span><br><span class="line">postgres=<span class="comment"># revoke group_1 from penn;</span></span><br><span class="line"></span><br><span class="line">//一个角色成员使用组角色的权限</span><br><span class="line">两种方式:</span><br><span class="line">方式一: 每个组成员都可以用<span class="string">"SET ROLE"</span>命令将自己临时<span class="string">"变成"</span>该组成员,此后再创建的任何对象的所有者将属于该组,而不是原有的登录用户</span><br><span class="line">方式二: 拥有INHERIT属性的角色成员自动继承它们所属角色的权限</span><br><span class="line"></span><br><span class="line">postgres=<span class="comment"># create role penn inherit;</span></span><br><span class="line">postgres=<span class="comment"># create role haha noinherit;</span></span><br><span class="line">postgres=<span class="comment"># create role xixi noinherit;</span></span><br><span class="line">postgres=<span class="comment"># grant haha to penn;</span></span><br><span class="line">postgres=<span class="comment"># grant xixi to haha;</span></span><br><span class="line"></span><br><span class="line">用用角色penn与数据库建立连接,那么该会话同时拥有角色penn和角色haha的权限(inherit权限继承),然而赋予角色xixi的权限在会话中不可用,因为角色penn只是角色xixi的一个间接成员,它是通过haha角色间接传递过来的,这样xixi权限无法被penn用户继承</span><br><span class="line"></span><br><span class="line">如果想让penn继承xixi权限,我们在会话中这么操作:</span><br><span class="line"><span class="built_in">set</span> role haha;</span><br><span class="line"><span class="built_in">set</span> role xixi;</span><br><span class="line"></span><br><span class="line">如果想会话恢复原有角色权限,我们在会话中这么操作:</span><br><span class="line"><span class="built_in">set</span> role penn;</span><br><span class="line">or:</span><br><span class="line"><span class="built_in">set</span> role none;</span><br><span class="line">or:</span><br><span class="line">reset role;</span><br></pre></td></tr></table></figure>
</li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.smallasa.com/2017/05/23/postgresql-数据库管理/" data-id="cjavy9k2z007y0coqr5f2jmhp" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-postgresql-数据库对象" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/05/23/postgresql-数据库对象/" class="article-date">
  <time datetime="2017-05-23T01:18:14.000Z" itemprop="datePublished">2017-05-23</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/database/">database</a>►<a class="article-category-link" href="/categories/database/Postgresql/">Postgresql</a>►<a class="article-category-link" href="/categories/database/Postgresql/postgresql-数据库对象/">postgresql 数据库对象</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/05/23/postgresql-数据库对象/">postgresql 数据库对象</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="postgresql-数据库对象"><a href="#postgresql-数据库对象" class="headerlink" title="postgresql 数据库对象"></a>postgresql 数据库对象</h3><ol>
<li><p>服务</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Postgresql是一种服务(守护进程)安装的.多个Postgresql服务可以运行于同一台服务器上,它们的端口不能重复,也不能共享同一个数据存储目录</span><br></pre></td></tr></table></figure>
</li>
<li><p>database</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">每个Postgresql服务可以包含多个独立的database</span><br></pre></td></tr></table></figure>
</li>
<li><p>schema</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">database的下一层逻辑结构就是schema.</span><br><span class="line">大多数对象是隶属于某个schema的,然后schema又隶属于某个database</span><br><span class="line">在创建database时,postgresql会默认自动为其创建一个名为public的schema</span><br></pre></td></tr></table></figure>
</li>
<li><p>catalog</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">catalog是系统级的schema,用于存储系统函数和系统元数据</span><br><span class="line">每个database创建好后,默认会有两个catalog:</span><br><span class="line">* 一个名为pg_catalog,用于存储Postgresql系统自带的函数,表,系统视图,数据类型转换器以及数据类型定义等元数据</span><br><span class="line">* 一个是information_schema,用于存储ANSI标准中所需求提供的元数据查询视图</span><br></pre></td></tr></table></figure>
</li>
<li><p>变量</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">变量是Postgresql统一配置机制(GUC)的一部分,是可以在多个级别设置的各种选项,这些级别包括服务级别,database级别以及其它级别</span><br></pre></td></tr></table></figure>
</li>
<li><p>扩展包</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">开发人员可以通过该机制将一组相关的函数,数据类型,数据类型转换器,用户自定义索引,表以及GUC等对象打包成一个功能扩展包,该扩展包可以整体安装或整体删除</span><br><span class="line">安装扩展包可以指定到对应的database,而不必对所有database都安装一遍</span><br><span class="line">安装扩展包可以指定安装到哪个schema,若不指定,会默认安装到public schema中</span><br></pre></td></tr></table></figure>
</li>
<li><p>表</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">postgresql中,表先属于某个schema,schema又属于某个database,这样就构成了一个三级存储结构</span><br><span class="line">postgresql的表支持两种强大的功能:</span><br><span class="line">* 表继承,即一张表可以有父表,又可以有子表</span><br><span class="line">* 创建一张表的同时,系统会自动为此表创建一种对应的自定义数据类型.</span><br><span class="line">  换句话说,你可以将某个完整的数据结构定义为一张表,然后将该表用作另一个表的一个列</span><br></pre></td></tr></table></figure>
</li>
<li><p>外部表和外部数据封装器</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">外部表是一些虚拟表,通过它们可以直接在本地数据库中访问来自外部数据源的数据.只要数据映射关系配置正确,那么外部表的用法与普通表没有任何区别.</span><br><span class="line">外部表支持映射到以下类型的数据源:CSV文件,另一个服务器的Postgresql表,SQL Server,Oracle这些异构数据库中的表,redis这样的nosql数据库</span><br><span class="line">外部表映射关系的建立是通过配置外部数据封装器(FDW)实现的.FDW是Postgresql和外部数据源之间的&quot;桥梁&quot;,可实现两边数据的互联互通</span><br></pre></td></tr></table></figure>
</li>
<li><p>表空间</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">表空间是用于存储数据的物理空间</span><br><span class="line">Postgresql将用于物理存储的表空间和用于逻辑存储的schema分开管理,二者之间无耦合关系.</span><br><span class="line">这样就很容易在不影响业务逻辑的情况下,将database甚至是单张表和索引在不同物理驱动器之间进行移动</span><br></pre></td></tr></table></figure>
</li>
<li><p>视图</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">大多数关系型数据库都支持视图,通过视图可以大大简化复杂的查询逻辑,另外也可以通过对视图执行更新操作来修改其基表数据</span><br></pre></td></tr></table></figure>
</li>
<li><p>函数</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">postgresql中函数执行后的返回结果可以是一个标量值或几个记录集</span><br><span class="line">可以在函数中对表数据进行修改,其他数据库对于这种会修改表记录的函数一般称为存储过程</span><br></pre></td></tr></table></figure>
</li>
<li><p>内置编程语言</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">函数是以过程化语言(PL)编写的</span><br><span class="line">Postgresql默认支持三种内置编程语言: SQL,PL/pgSQL,C语言</span><br></pre></td></tr></table></figure>
</li>
<li><p>运算符</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">运算符本质上是符号化的已命名函数,它需要一个或两个实参,底层有一个相应的函数来实现其运算逻辑</span><br></pre></td></tr></table></figure>
</li>
<li><p>数据类型</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Postgresql支持常见数据类型:整型,字符型,数组等等,同时还支持符合数据类型</span><br></pre></td></tr></table></figure>
</li>
<li><p>数据类型转换器</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cast是数据类型转换器,就是将一种数据类型转换为另一种类型工具.</span><br><span class="line">转换器在其底层其实是通过调用函数来实现真正的转换逻辑的,Postgresql的独到之处在于支持用户自定义转换器,这样就可以改变系统默认的转换逻辑</span><br></pre></td></tr></table></figure>
</li>
<li><p>序列</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">序列控制serial数据类型的自动递增</span><br><span class="line">在Postgresql中定义serial列时,postgresql会自动创建序列,但你很容易改变初始值,增量和下一个值</span><br><span class="line">因为序列是独立对象,索引多个表可以共用一个序列对象</span><br></pre></td></tr></table></figure>
</li>
<li><p>行或记录</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">行或记录这两个术语可以互换</span><br><span class="line">在Postgresql中,记录 这个概念可以脱离表独立存在</span><br></pre></td></tr></table></figure>
</li>
<li><p>触发器</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">触发器机制可以实现对数据修改事件的捕获,并在之后触发用户自定义操作行为</span><br><span class="line">触发器的触发时机是可实现的,可以是语句级触发或者记录级触发,可以是修改前触发也可以是修改后触发</span><br></pre></td></tr></table></figure>
</li>
<li><p>规则</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">规则是一种能够将一种动作替换为另一种动作的机制</span><br><span class="line">Postgresql内部就是使用此机制来实现视图的</span><br></pre></td></tr></table></figure>
</li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.smallasa.com/2017/05/23/postgresql-数据库对象/" data-id="cjavy9k2v007w0coqidrmbkmu" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-postgresql-yum-install" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/05/22/postgresql-yum-install/" class="article-date">
  <time datetime="2017-05-22T01:47:14.000Z" itemprop="datePublished">2017-05-22</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/database/">database</a>►<a class="article-category-link" href="/categories/database/Postgresql/">Postgresql</a>►<a class="article-category-link" href="/categories/database/Postgresql/postgresql-yum-install/">postgresql yum install</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/05/22/postgresql-yum-install/">postgresql yum install</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="postgresql-yum-install"><a href="#postgresql-yum-install" class="headerlink" title="postgresql yum install"></a>postgresql yum install</h3><ol>
<li><p><a href="https://yum.postgresql.org" target="_blank" rel="noopener">open postgresql yum repo</a></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@dev ~]<span class="comment"># rpm -ivh https://download.postgresql.org/pub/repos/yum/9.3/redhat/rhel-7-x86_64/pgdg-centos93-9.3-3.noarch.rpm</span></span><br><span class="line">[root@dev ~]<span class="comment"># make cache</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>postgresql install</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@dev ~]<span class="comment"># yum -y install postgresql93-server postgresql93-contrib</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>postgresql init</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[root@dev ~]<span class="comment"># /usr/pgsql-9.3/bin/postgresql93-setup initdb</span></span><br><span class="line"></span><br><span class="line">[root@dev ~]<span class="comment"># tail -1 /etc/passwd</span></span><br><span class="line">postgres:x:26:26:PostgreSQL Server:/var/lib/pgsql:/bin/bash</span><br><span class="line"></span><br><span class="line">[root@dev ~]<span class="comment"># ls -l /var/lib/pgsql/9.3/</span></span><br><span class="line">total 8</span><br><span class="line">drwx------  2 postgres postgres    6 May 10 07:25 backups</span><br><span class="line">drwx------ 16 postgres postgres 4096 May 22 11:07 data</span><br><span class="line">-rw-------  1 postgres postgres 1330 May 22 11:04 initdb.log</span><br></pre></td></tr></table></figure>
</li>
<li><p>postgresql 修改配置文件</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@dev ~]<span class="comment"># vim /var/lib/pgsql/9.3/data/postgresql.conf</span></span><br><span class="line">listen_addresses = <span class="string">'*'</span></span><br><span class="line">port = 5432</span><br></pre></td></tr></table></figure>
</li>
<li><p>postgresql 启动</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@dev ~]<span class="comment"># systemctl start postgresql-9.3</span></span><br><span class="line">[root@dev ~]<span class="comment"># systemctl status postgresql-9.3</span></span><br><span class="line">[root@dev ~]<span class="comment"># systemctl enable postgresql-9.3</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>postgresql 登录,修改密码</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@dev ~]<span class="comment"># su - postgres</span></span><br><span class="line">-bash-4.2$ psql -U postgres</span><br><span class="line">postgres=<span class="comment"># alert user postgres with password 'postgres'</span></span><br><span class="line">postgres-<span class="comment"># \q</span></span><br></pre></td></tr></table></figure>
</li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.smallasa.com/2017/05/22/postgresql-yum-install/" data-id="cjavy9k2p007r0coqm97a63xh" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-wireshark-use" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/05/17/wireshark-use/" class="article-date">
  <time datetime="2017-05-17T03:00:07.000Z" itemprop="datePublished">2017-05-17</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/TCP-IP/">TCP.IP</a>►<a class="article-category-link" href="/categories/TCP-IP/Wireshark-use/">Wireshark use</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/05/17/wireshark-use/">wireshark use</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="wireshark-常用操作"><a href="#wireshark-常用操作" class="headerlink" title="wireshark 常用操作"></a>wireshark 常用操作</h3><ol>
<li>数据包过滤<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">//常见过滤条件</span><br><span class="line">ip.addr==1.1.1.1  过滤某个IP地址</span><br><span class="line">ip.src==1.1.1.1   过滤源地址</span><br><span class="line">ip.dst==1.1.1.1   过滤目标地址</span><br><span class="line"></span><br><span class="line">tcp.port==80      过滤端口</span><br><span class="line">tcp.dstport==80   过滤目标端口</span><br><span class="line">tcp.srcport==80   过滤源端口</span><br><span class="line"></span><br><span class="line">http                        过滤http协议</span><br><span class="line">http.request.method==&quot;GET&quot;  过滤get包</span><br><span class="line">http.request.method==&quot;POST&quot; 过滤post包</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">//组合过滤条件</span><br><span class="line">ip.src==1.1.1.1 and http</span><br><span class="line">tcp.srcport==38364 || tcp.dstport==38364</span><br></pre></td></tr></table></figure>
</li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.smallasa.com/2017/05/17/wireshark-use/" data-id="cjavy9k7v00bb0coq1h43irdl" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-kernel-共享内存" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/05/16/kernel-共享内存/" class="article-date">
  <time datetime="2017-05-16T12:18:41.000Z" itemprop="datePublished">2017-05-16</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Kernel/">Kernel</a>►<a class="article-category-link" href="/categories/Kernel/kernel-memory/">kernel memory</a>►<a class="article-category-link" href="/categories/Kernel/kernel-memory/kernel-共享内存/">kernel 共享内存</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/05/16/kernel-共享内存/">kernel 共享内存</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="kernel-共享内存"><a href="#kernel-共享内存" class="headerlink" title="kernel 共享内存"></a>kernel 共享内存</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line">当我们启动程序的时候,有时候发现程序启动失败,经检查日志,发现程序中的内存超出内存限制.</span><br><span class="line"></span><br><span class="line">//内核的 shmall 和 shmmax 参数</span><br><span class="line">SHMMAX参数:</span><br><span class="line">置了最大的内存segment的大小(这个设置的比SGA_MAX_SIZE大比较好)</span><br><span class="line">Linux进程可以分配的单独共享内存段的最大值.一般设置为内存总大小的一半.这个值的设置应该大于SGA_MAX_TARGET或MEMORY_MAX_TARGET的值,因此对于安装Oracle数据库的系统,shmmax的值应该比内存的二分之一大一些.</span><br><span class="line"></span><br><span class="line">SHMMIN参数:</span><br><span class="line">最小的内存segment的大小</span><br><span class="line">整个系统的内存segment的总个数.设置系统级最大共享内存段数量.Oracle10g推荐最小值为4096,可以适当比4096增加一些</span><br><span class="line"></span><br><span class="line">SHMSEG参数:</span><br><span class="line">每个进程可以使用的内存segment的最大个数</span><br><span class="line"></span><br><span class="line">SHMALL参数:</span><br><span class="line">全部允许使用的共享内存大小,shmmax是单个段允许使用的大小.这两个可以设置为内存的90%.例如 16G 内存，16*1024*1024*1024*90% = 15461882265，shmall 的大小为 15461882265/4096(getconf PAGESIZE) = 3774873</span><br><span class="line"></span><br><span class="line">shmall设置共享内存总页数.这个值太小有可能导致数据库启动报错.很多人调整系统内核参数的时候只关注SHMMAX参数,而忽略了SHMALL参数的设置</span><br><span class="line"></span><br><span class="line">//配置信号灯(semphore)的参数</span><br><span class="line">信号灯semaphores是进程或线程间访问共享内存时提供同步的计数器</span><br><span class="line"></span><br><span class="line">SEMMSL参数:</span><br><span class="line">设置每个信号灯组中信号灯最大数量,推荐的最小值是250.对于系统中存在大量并发连接的系统,推荐将这个值设置为PROCESSES初始化参数加10</span><br><span class="line"></span><br><span class="line">SEMMNI参数:</span><br><span class="line">设置系统中信号灯组的最大数量.Oracle10g和11g的推荐值为142</span><br><span class="line"></span><br><span class="line">SEMMNS参数:</span><br><span class="line">设置系统中信号灯的最大数量.操作系统在分配信号灯时不会超过LEAST(SEMMNS,SEMMSL*SEMMNI).事实上,如果SEMMNS的值超过了SEMMSL*SEMMNI是非法的,因此推荐SEMMNS的值就设置为SEMMSL*SEMMNI.Oracle推荐SEMMNS的设置不小于32000,假如数据库的PROCESSES参数设置为600,则SEMMNS的设置应为：</span><br><span class="line">SQL&gt; select (600+10)*142 from dual;</span><br><span class="line">(600+10)*142</span><br><span class="line">------------</span><br><span class="line">      86620</span><br><span class="line"></span><br><span class="line">SEMOPM参数:</span><br><span class="line">设置每次系统调用可以同时执行的最大信号灯操作的数量.由于一个信号灯组最多拥有SEMMSL个信号灯,因此有推荐将SEMOPM设置为SEMMSL的值.Oracle验证的10.2和11.1的SEMOPM的配置为100</span><br><span class="line"></span><br><span class="line">通过下面的命令可以检查信号灯相关配置：</span><br><span class="line"># cat /proc/sys/kernel/sem</span><br><span class="line">250 32000 100 128</span><br><span class="line">对应的4个值从左到右分别为SEMMSL、SEMMNS、SEMOPM和SEMMNI</span><br><span class="line"></span><br><span class="line">//修改/etc/sysctl.conf</span><br><span class="line">kernel.shmmax=15461882265</span><br><span class="line">kernel.shmall=3774873</span><br><span class="line">kernel.msgmax=65535</span><br><span class="line">kernel.msgmnb=65535</span><br><span class="line"></span><br><span class="line">执行 sysctl -p</span><br><span class="line">使用 ipcs -l 看结果</span><br><span class="line">使用 ipcs -u 可以看到实际使用的情况</span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.smallasa.com/2017/05/16/kernel-共享内存/" data-id="cjavy9jyu00520coqh5pfxnb9" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-command-pigz" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/05/12/command-pigz/" class="article-date">
  <time datetime="2017-05-12T12:23:47.000Z" itemprop="datePublished">2017-05-12</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/system-service/">system service</a>►<a class="article-category-link" href="/categories/system-service/command/">command</a>►<a class="article-category-link" href="/categories/system-service/command/pigz/">pigz</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/05/12/command-pigz/">command pigz</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <ol>
<li><p>pigz简介</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pigz是一个高效的压缩工具,可以将多核CPU的每一分剩余性能都用来做压缩计算.而传统的gzip则只能用单核CPU.比如一台2个8core cpu服务器采用pigz和gzip压缩相同的数据,一般性能差距至少在7-8倍以上(一般不会达到理论的16倍,因为受限于磁盘的读写速度和内存等资源)</span><br></pre></td></tr></table></figure>
</li>
<li><p>pigz 安装</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># yum -y install pigz</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>pigz 使用</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">//压缩</span><br><span class="line">tar cvf - &#123;dir_name&#125; | pigz -9 -p 24 &gt; file.tgz</span><br><span class="line"></span><br><span class="line">说明:</span><br><span class="line">-9 表示压缩比,数值越大压缩率越大</span><br><span class="line">-p 表示指定cpu的核数</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">//解压</span><br><span class="line">pigz -d file.tgz</span><br><span class="line">tar -xf --format=posix file</span><br></pre></td></tr></table></figure>
</li>
<li><p>pigz 扩展</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">之前,跨主机拷贝大数据时,通常做法如下:</span><br><span class="line">* 在源端打包压缩为tar.gz文件</span><br><span class="line">* 采用scp或者rsync等方式拷贝到目标主机</span><br><span class="line">* 在目标主机解压文件</span><br><span class="line">这三个过程是同步阻塞,即不能同时异步执行,导致效率低下</span><br><span class="line"></span><br><span class="line">现在,我们将过程优化为以数据流的方式,同时执行(非阻塞模式),则效率一般可以提高到原来的3倍以上,具体实现如下:</span><br><span class="line">磁盘读取--&gt;打包(tar)--&gt;压缩(gzip)--&gt;传输(ssh)--&gt;解压缩(gzip)--&gt;拆包(tar)--&gt;落盘</span><br><span class="line"></span><br><span class="line">比如,我要将本地的test目录拷贝到&quot;目标IP&quot;的的data目录,则命令如下:</span><br><span class="line">tar -c test/ |gzip |ssh -c arc 目标IP &quot;gzip -d|tar -xC /data&quot;</span><br><span class="line"></span><br><span class="line">如果不需要解压,则命令变为:</span><br><span class="line">tar -c test/ |pigz |ssh -c arc 目标IP &quot;cat &gt;/data/test.tar.gz&quot;</span><br><span class="line"></span><br><span class="line">注意: 因为采用了流式压缩,解压过程必须加上-i参数,及tar –ixf /data/test.tar.gz</span><br></pre></td></tr></table></figure>
</li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.smallasa.com/2017/05/12/command-pigz/" data-id="cjavy9jui001b0coq2t2pvhgf" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-nginx-rewrite" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/05/11/nginx-rewrite/" class="article-date">
  <time datetime="2017-05-11T12:11:44.000Z" itemprop="datePublished">2017-05-11</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/system-service/">system service</a>►<a class="article-category-link" href="/categories/system-service/nginx/">nginx</a>►<a class="article-category-link" href="/categories/system-service/nginx/nginx-rewrite/">nginx rewrite</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/05/11/nginx-rewrite/">nginx rewrite</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="nginx-rewrite"><a href="#nginx-rewrite" class="headerlink" title="nginx rewrite"></a>nginx rewrite</h3><ol>
<li>rewrite规则</li>
</ol>
<ol>
<li>示例1:<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">[root@192 vhost]<span class="comment"># cat zabbix.conf</span></span><br><span class="line"><span class="comment"># zabbix</span></span><br><span class="line">server &#123;</span><br><span class="line">  listen       80;</span><br><span class="line">  server_name  zabbix.test.cn;</span><br><span class="line"></span><br><span class="line">  location / &#123;</span><br><span class="line">    rewrite ^/ http://zabbix.test.cn/zabbix/;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  location /zabbix &#123;</span><br><span class="line">    proxy_pass  http://192.168.13.202;</span><br><span class="line">    proxy_set_header Host <span class="variable">$host</span>;</span><br><span class="line">    proxy_set_header X-Forwarded-For <span class="variable">$proxy_add_x_forwarded_for</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  access_log  /mnt/<span class="built_in">log</span>/nginx/zabbix.test.cn.log  main;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.smallasa.com/2017/05/11/nginx-rewrite/" data-id="cjavy9k1u00760coq1ep5g39u" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-logstash-filter-grok" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/05/11/logstash-filter-grok/" class="article-date">
  <time datetime="2017-05-11T02:26:42.000Z" itemprop="datePublished">2017-05-11</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/hadoop/">hadoop</a>►<a class="article-category-link" href="/categories/hadoop/logstash/">logstash</a>►<a class="article-category-link" href="/categories/hadoop/logstash/logstash-filter-grok/">logstash filter grok</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/05/11/logstash-filter-grok/">logstash filter grok</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="logstash-filter-grok"><a href="#logstash-filter-grok" class="headerlink" title="logstash filter grok"></a>logstash filter grok</h3><ul>
<li><a href="https://www.elastic.co/guide/en/logstash/2.3/plugins-filters-grok.html" target="_blank" rel="noopener">logstash-grok</a></li>
<li><a href="https://github.com/elastic/logstash/blob/v1.4.2/patterns/grok-patterns" target="_blank" rel="noopener">grok-patterns</a></li>
<li><a href="http://grokdebug.herokuapp.com/?#" target="_blank" rel="noopener">grok-debug</a></li>
</ul>
<ol>
<li>grok语法说明<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">grok的语法格式为 %&#123;SYNTAX:SEMANTIC&#125;</span><br><span class="line">* SYNTAX是文本要匹配的模式</span><br><span class="line">  例如: 3.14匹配NUMBER模式; 127.0.0.1匹配IP模式</span><br><span class="line">* SEMANTIC是匹配到的文本片段的标识</span><br><span class="line">  例如: 3.14可以是一个时间的持续时间,所以可以简单地叫做&quot;duration&quot;;字符串&quot;55.3.244.1&quot;可以被标识为&quot;client&quot;</span><br><span class="line">  默认情况下,所有的SEMANTIC是以字符串的方式保存,如果想要转换一个SEMANTIC的数据类型:%&#123;NUMBER:num:int&#125;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>log_format  main  ‘$remote_addr $remote_user [$time_local] “$request” ‘<br>                  ‘$status $body_bytes_sent ‘<br>                  ‘“$http_user_agent” $http_x_forwarded_for $request_time $upstream_response_time’;</p>
<p>101.201.57.207 - [11/May/2017:10:06:38 +0800] “POST /ssp-switch-automapping/ws/autoOnOff HTTP/1.1” 200 265 “Mozilla/4.0 (compatible; MSIE 6.0; MS Web Services Client Protocol 4.0.30319.42000)” - 0.301 0.297</p>
<p>%{IP:client}   101.201.57.207<br>%{WORD:method} POST</p>
<p>%{NUMBER:bytes} 265<br>%{NUMBER:duration} 0.301<br>%{NUMBER:duration} 0.297</p>
<hr>
<p>[root@smallasa conf]# cat test.conf<br>input{<br>    file {<br>        path =&gt; [“/mnt/log/nginx/test/inbound.log”]<br>        exclude =&gt; [“kibana<em>.log”,”toolstmp</em>.log”,”pennswitch*.log”]<br>        type =&gt; “nginx_log”<br>        discover_interval =&gt; 15<br>        sincedb_path =&gt; “/mnt/data/logstash”<br>        sincedb_write_interval =&gt; 15<br>        stat_interval =&gt; 1<br>        start_position =&gt; “beginning”<br>    }<br>}<br>filter{</p>
<p>}<br>output{<br>    stdout{<br>        codec =&gt; rubydebug<br>    }<br>}<br>[root@smallasa conf]# /mnt/app/logstash/bin/logstash -f /mnt/app/logstash/conf/test.conf –configtest<br>Configuration OK</p>
<p>[root@smallasa conf]# /mnt/app/logstash/bin/logstash -f /mnt/app/logstash/conf/test.conf<br>Settings: Default pipeline workers: 2<br>Pipeline main started</p>
<p>[root@smallasa test]# echo ‘101.201.57.207 - [11/May/2017:10:09:12 +0800] “POST /gateway-inbound/rest/inv.xml HTTP/1.1” 200 566 “-“ - 0.013 0.011’ | tee -a inbound.log</p>
<p>[root@smallasa conf]# /mnt/app/logstash/bin/logstash -f /mnt/app/logstash/conf/test.conf<br>Settings: Default pipeline workers: 2<br>Pipeline main started<br>{<br>       “message” =&gt; “101.201.57.207 - [11/May/2017:10:09:12 +0800] \”POST /gateway-inbound/rest/inv.xml HTTP/1.1\” 200 566 \”-\” - 0.013 0.011”,<br>      “@version” =&gt; “1”,<br>    “@timestamp” =&gt; “2017-05-14T02:59:53.713Z”,<br>          “path” =&gt; “/mnt/log/nginx/test/inbound.log”,<br>          “host” =&gt; “smallasa”,<br>          “type” =&gt; “nginx_log”</p>
<h2 id=""><a href="#" class="headerlink" title="}"></a>}</h2><p>[root@smallasa conf]# cat test.conf<br>input{<br>    file {<br>        path =&gt; [“/mnt/log/nginx/test/inbound.log”]<br>        exclude =&gt; [“kibana<em>.log”,”toolstmp</em>.log”,”pennswitch*.log”]<br>        type =&gt; “nginx_log”<br>        discover_interval =&gt; 15<br>        sincedb_path =&gt; “/mnt/data/logstash”<br>        sincedb_write_interval =&gt; 15<br>        stat_interval =&gt; 1<br>        start_position =&gt; “beginning”<br>    }<br>}<br>filter{<br>    if [type] == “nginx_log” {<br>        grok {<br>            match =&gt; [“message”,  “%{COMBINEDAPACHELOG}”]<br>        }<br>    }<br>}<br>output{<br>    stdout{<br>        codec =&gt; rubydebug<br>    }<br>}<br>[root@smallasa conf]# /mnt/app/logstash/bin/logstash -f /mnt/app/logstash/conf/test.conf –configtest<br>Configuration OK</p>
<p>[root@smallasa conf]# /mnt/app/logstash/bin/logstash -f /mnt/app/logstash/conf/test.conf<br>Settings: Default pipeline workers: 2<br>Pipeline main started</p>
<p>[root@smallasa test]# echo ‘101.201.57.207 - [11/May/2017:10:09:12 +0800] “POST /gateway-inbound/rest/inv.xml HTTP/1.1” 200 566 “-“ - 0.013 0.011’ | tee -a inbound.log</p>
<p>[root@smallasa conf]# /mnt/app/logstash/bin/logstash -f /mnt/app/logstash/conf/test.conf<br>Settings: Default pipeline workers: 2<br>Pipeline main started<br>{<br>       “message” =&gt; “101.201.57.207 - [11/May/2017:10:09:12 +0800] \”POST /gateway-inbound/rest/inv.xml HTTP/1.1\” 200 566 \”-\” - 0.013 0.011”,<br>      “@version” =&gt; “1”,<br>    “@timestamp” =&gt; “2017-05-14T03:07:45.105Z”,<br>          “path” =&gt; “/mnt/log/nginx/test/inbound.log”,<br>          “host” =&gt; “smallasa”,<br>          “type” =&gt; “nginx_log”,<br>          “tags” =&gt; [<br>        [0] “_grokparsefailure”<br>    ]<br>}</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.smallasa.com/2017/05/11/logstash-filter-grok/" data-id="cjavy9jzu005v0coqyxpmbkdb" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  


  <nav id="page-nav">
    
    <a class="extend prev" rel="prev" href="/page/11/">&laquo; 上一页</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/10/">10</a><a class="page-number" href="/page/11/">11</a><span class="page-number current">12</span><a class="page-number" href="/page/13/">13</a><a class="page-number" href="/page/14/">14</a><span class="space">&hellip;</span><a class="page-number" href="/page/29/">29</a><a class="extend next" rel="next" href="/page/13/">下一页 &raquo;</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">分类</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/AliCloud/">AliCloud</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/AliCloud/SDK/">SDK</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/AliCloud/SDK/Python-SDK/">Python SDK</a></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Android/">Android</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Android/Android-install/">Android install</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Android/Android-install/Android-studio-install/">Android studio install</a></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Development/">Development</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Development/Doc/">Doc</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Development/Doc/HTTP-严格传输安全HSTS/">HTTP 严格传输安全HSTS</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Development/Doc/HTTP协议/">HTTP协议</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Development/Doc/TCP-协议详解/">TCP 协议详解</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Development/Doc/TCP与socket区别/">TCP与socket区别</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Development/Doc/linux-文件描述符与打开文件之间的关系/">linux 文件描述符与打开文件之间的关系</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Development/Doc/linux-文件系统inode/">linux 文件系统inode</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Development/Doc/一次完整的HTTP请求/">一次完整的HTTP请求</a></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Disk/">Disk</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Disk/disk-io-performance/">disk io performance</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Disk/disk-iostat/">disk iostat</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Distributed-storage/">Distributed storage</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Distributed-storage/GlusterFS/">GlusterFS</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Distributed-storage/GlusterFS/GlusterFS-architecture/">GlusterFS architecture</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Distributed-storage/GlusterFS/GlusterFS-info/">GlusterFS info</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Distributed-storage/GlusterFS/GlusterFS-install/">GlusterFS install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Distributed-storage/GlusterFS/GlusterFS-workflow/">GlusterFS workflow</a></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/HA/">HA</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/HA/DRBD/">DRBD</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/HA/DRBD/DRBD-install/">DRBD install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/HA/keepalived/">keepalived</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/HA/keepalived/keepalived-install/">keepalived install</a></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/IDE/">IDE</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/IDE/Intellij/">Intellij</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/IDE/Intellij/Intellij-setting/">Intellij setting</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/IDE/vim/">vim</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/IDE/vim/vim-shortcut-key/">vim shortcut key</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/IDE/vim/vim-vimrc/">vim vimrc</a></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Kernel/">Kernel</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Kernel/kernel-memory/">kernel memory</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Kernel/kernel-memory/kernel-共享内存/">kernel 共享内存</a></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/">Monitor</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/ganglia/">ganglia</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/ganglia/ganglia-install/">ganglia install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/hmonitor/">hmonitor</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/hmonitor/hmonitor-install/">hmonitor install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/htmonitor/">htmonitor</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/htmonitor/htmonitor-install/">htmonitor install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/smokeping/">smokeping</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/smokeping/smokeping-install/">smokeping install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/zabbix/">zabbix</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/zabbix/monitor/">monitor</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/zabbix/monitor/zabbix-monitor-cpu/">zabbix monitor cpu</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/zabbix/monitor/zabbix-monitor-mem/">zabbix monitor mem</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/zabbix/zabbix-auto-discover/">zabbix auto discover</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/zabbix/zabbix-grafana-install/">zabbix grafana install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/zabbix/zabbix-install/">zabbix install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/zabbix/zabbix-install-distributed/">zabbix install distributed</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/zabbix/zabbix-item-and-tigger/">zabbix item and tigger</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/zabbix/zabbix-java-gateway/">zabbix java gateway</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/zabbix/zabbix-modify-login-user-passwd/">zabbix modify login user passwd</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/zabbix/zabbix-optimization/">zabbix optimization</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/zabbix/zabbix-proxy-install/">zabbix proxy install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/zabbix/zabbix-server-support-chinese/">zabbix server support chinese</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/zabbix/zabbix-windows-agent/">zabbix windows agent</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/树莓派/">树莓派</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/树莓派/树莓派-GSM-语音短信报警/">树莓派 GSM 语音短信报警</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/监控/">监控</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/监控/监控知识体系/">监控知识体系</a></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/">Python</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-Framework/">Python Framework</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-Framework/Python-Django/">Python Django</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-Framework/Python-Django-setting/">Python Django setting</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-Framework/Python-tornado-install/">Python tornado install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-Learn/">Python Learn</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-Learn/python-上下文管理器/">python 上下文管理器</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-Learn/python-内存管理/">python 内存管理</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-Learn/python-函数编程/">python 函数编程</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-Learn/python-变量/">python 变量</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-Learn/python-对象使用/">python 对象使用</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-Learn/python-对象的属性/">python 对象的属性</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-Learn/python-对象编程/">python 对象编程</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-Learn/python-数据类型/">python 数据类型</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-Learn/python-流程控制/">python 流程控制</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-Learn/python-爬虫/">python 爬虫</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-Learn/python-特殊方法/">python 特殊方法</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-Learn/python-特殊说明/">python 特殊说明</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-Learn/python-装饰器/">python 装饰器</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-Learn/python-过程编程/">python 过程编程</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-Learn/python-进阶/">python 进阶</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-Learn/python-闭包/">python 闭包</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-install/">Python install</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-install/python-error-info/">python error info</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-install/python-pip-source-image/">python pip source image</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-install/python-pip-use/">python pip use</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-install/python-pyenv-install/">python pyenv install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-install/python-setup-py/">python setup.py</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-install/python-source-install/">python source install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-install/python-virtualenv/">python virtualenv</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-library/">Python library</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-library/MySQLdb/">MySQLdb</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-library/memory-profiler/">memory_profiler</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-library/time-datetime-calendar/">time datetime calendar</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-modules/">Python modules</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-modules/python-modules-path/">python modules path</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-modules/python-modules-pylint-and-ipython/">python modules pylint and ipython</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-other/">Python other</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-other/python-import-and-reload/">python import and reload</a></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Ruby/">Ruby</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Ruby/Ruby-install/">Ruby install</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Ruby/Ruby-install/Ruby-install/">Ruby install</a></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/TCP-IP/">TCP.IP</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/TCP-IP/TCP-状态/">TCP 状态</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/TCP-IP/TCP-IP模型/">TCP/IP模型</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/TCP-IP/Wireshark-use/">Wireshark use</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/WeChat/">WeChat</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/WeChat/WeChat-enterprise/">WeChat enterprise</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/WeChat/WeChat-enterprise/WeChat-enterprise-API/">WeChat enterprise API</a></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/">automation</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/automation/git/">git</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/automation/git/git-command/">git command</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/git/git-error/">git error</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/git/git-gitlab/">git gitlab</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/git/git-gitolite/">git gitolite</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/git/git-gogs/">git gogs</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/git/git-gogs-source-install/">git gogs source install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/git/git-init/">git init</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/git/git-workflow/">git workflow</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/jenkins/">jenkins</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/automation/jenkins/jenkins-info/">jenkins info</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/jenkins/jenkins-install/">jenkins install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/kvm/">kvm</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/automation/kvm/kvm-install/">kvm install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/maven/">maven</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/automation/maven/maven-install/">maven install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/nexus/">nexus</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/automation/nexus/nexus-install/">nexus install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/nexus/nexus-proxy-maven/">nexus proxy maven</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/rpm/">rpm</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/automation/rpm/rpm-package-build/">rpm package build</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/rpm/rpmbuild-spec/">rpmbuild spec</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/salt/">salt</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/automation/salt/salt-advanced-topic/">salt advanced topic</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/salt/salt-highstate/">salt highstate</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/salt/salt-info/">salt info</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/salt/salt-install/">salt install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/salt/salt-install-HA/">salt install HA</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/salt/salt-install-distributed/">salt install distributed</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/salt/salt-install-standard/">salt install standard</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/salt/salt-jinja2-grain-pillar-module/">salt jinja2 grain pillar module</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/salt/salt-manage-event-reactor/">salt manage event reactor</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/salt/salt-manage-grains/">salt manage grains</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/salt/salt-manage-job/">salt manage job</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/salt/salt-manage-module/">salt manage module</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/salt/salt-manage-pillar/">salt manage pillar</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/salt/salt-manage-return/">salt manage return</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/salt/salt-manage-states/">salt manage states</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/salt/salt-manage-target/">salt manage target</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/salt/salt-master-syndic-install/">salt master syndic install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/salt/salt-master-conf/">salt master.conf</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/salt/salt-minion-conf/">salt minion.conf</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/salt/salt-raet/">salt raet</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/salt/salt-state-module/">salt state module</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/salt/salt-syndic-conf/">salt syndic.conf</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/salt/salt-write-module-code/">salt write module code</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/svn/">svn</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/automation/svn/svn-auto-update/">svn auto update</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/yum/">yum</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/automation/yum/yum-server-install/">yum server install</a></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/">database</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/database/Mongo/">Mongo</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/database/Mongo/mongo-auth/">mongo auth</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Mongo/mongo-error/">mongo error</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Mongo/mongo-replication-auth-install/">mongo replication auth install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Mongo/mongo-replication-standard-install/">mongo replication standard install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Mongo/mongo-standard-install/">mongo standard install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Mysql/">Mysql</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/database/Mysql/mysql-command/">mysql command</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Mysql/mysql-error-info/">mysql error info</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Mysql/mysql-explain/">mysql explain</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Mysql/mysql-grant/">mysql grant</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Mysql/mysql-index-options/">mysql index options</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Mysql/mysql-innodb-buffer-pool-flush/">mysql innodb buffer pool flush</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Mysql/mysql-master-slave/">mysql master slave</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Mysql/mysql-master-slave-switch/">mysql master slave switch</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Mysql/mysql-partition/">mysql partition</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Mysql/mysql-select-join/">mysql select join</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Mysql/mysql-slow-log/">mysql slow log</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Mysql/mysql-standard/">mysql standard</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Mysql/mysql-table-size/">mysql table size</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Mysql/mysql-use-memory-as-disk/">mysql use memory as disk</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Postgresql/">Postgresql</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/database/Postgresql/postgresql-book-use/">postgresql book use</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Postgresql/postgresql-master-slave-info/">postgresql master slave info</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Postgresql/postgresql-master-slave/">postgresql master/slave</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Postgresql/postgresql-plugin-install/">postgresql plugin install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Postgresql/postgresql-standard/">postgresql standard</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Postgresql/postgresql-tablespace-database-schema-table-user-role-relation/">postgresql tablespace database schema table user role relation</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Postgresql/postgresql-yum-install/">postgresql yum install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Postgresql/postgresql-常用命令/">postgresql 常用命令</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Postgresql/postgresql-数据库对象/">postgresql 数据库对象</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Postgresql/postgresql-数据库管理/">postgresql 数据库管理</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Redis/">Redis</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/database/Redis/redis-error/">redis error</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Redis/redis-install/">redis install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Redis/redis-redis-trib-rb/">redis redis-trib.rb</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Redis/redis-status/">redis status</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Redis/redis-use/">redis use</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/influxDB/">influxDB</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/database/influxDB/influxDB-install/">influxDB install</a></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/golang/">golang</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/golang/go-env/">go env</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/">hadoop</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/RabbitMQ/">RabbitMQ</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/RabbitMQ/RabbitMQ-cluster/">RabbitMQ cluster</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/RabbitMQ/RabbitMQ-high-availability/">RabbitMQ high availability</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/RabbitMQ/RabbitMQ-info/">RabbitMQ info</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/RabbitMQ/RabbitMQ-install/">RabbitMQ install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/RabbitMQ/RabbitMQ-python-pika/">RabbitMQ python pika</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/RabbitMQ/RabbitMQ-user-and-grant/">RabbitMQ user and grant</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/RabbitMQ/RabbitMQ-working-principle/">RabbitMQ working principle</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/beats/">beats</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/beats/beats-install/">beats install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/datax/">datax</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/datax/datax-info/">datax info</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/datax/datax-install/">datax install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/datax/datax-job/">datax job</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/elasticsearch/">elasticsearch</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/elasticsearch/elasticsearch-backup-and-restore/">elasticsearch backup and restore</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/elasticsearch/elasticsearch-command/">elasticsearch command</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/elasticsearch/elasticsearch-core-component/">elasticsearch core component</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/elasticsearch/elasticsearch-exploring-your-cluster/">elasticsearch exploring your cluster</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/elasticsearch/elasticsearch-exploring-your-data/">elasticsearch exploring your data</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/elasticsearch/elasticsearch-four-search-type/">elasticsearch four search type</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/elasticsearch/elasticsearch-full-cluster-restart-upgrade/">elasticsearch full cluster restart upgrade</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/elasticsearch/elasticsearch-install/">elasticsearch install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/elasticsearch/elasticsearch-modifying-your-data/">elasticsearch modifying your data</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/elasticsearch/elasticsearch-rolling-upgrades/">elasticsearch rolling upgrades</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/elasticsearch/elasticsearch-safe-restart/">elasticsearch safe restart</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/elasticsearch/elasticsearch-shard/">elasticsearch shard</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/elasticsearch/how-to-tune-for-indexing-speed/">how to tune for indexing speed</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/elasticsearch/how-to-tune-for-search-speed/">how to tune for search speed</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/flume/">flume</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/flume/flume-info/">flume info</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/flume/flume-install/">flume install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/grafana/">grafana</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/grafana/grafana-install/">grafana install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/hadoop/">hadoop</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/hadoop/hadoop-简介/">hadoop 简介</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/kafka/">kafka</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/kafka/kafka-add-topic-partition/">kafka add topic partition</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/kafka/kafka-add-topic-replicats/">kafka add topic replicats</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/kafka/kafka-broker-config/">kafka broker config</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/kafka/kafka-high-throughput/">kafka high throughput</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/kafka/kafka-info/">kafka info</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/kafka/kafka-install/">kafka install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/kafka/kafka-manage-web/">kafka manage web</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/kafka/kafka-migrate-and-scale/">kafka migrate and scale</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/kafka/kafka-offset-monitor/">kafka offset monitor</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/kafka/kafka-optimize/">kafka optimize</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/kafka/kafka-use/">kafka use</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/kafka/kafka-web-console/">kafka web console</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/kafka/kafka-with-zookeeper/">kafka with zookeeper</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/kibana/">kibana</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/kibana/kibana-install/">kibana install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/logstash/">logstash</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/logstash/logstash-config-file/">logstash config file</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/logstash/logstash-filter-grok/">logstash filter grok</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/logstash/logstash-info/">logstash info</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/logstash/logstash-install/">logstash install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/mycat/">mycat</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/mycat/mycat-jvm-optimize/">mycat jvm optimize</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/mycat/mycat-web-install/">mycat web install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/nsq/">nsq</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/nsq/nsq-command/">nsq command</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/nsq/nsq-info/">nsq info</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/nsq/nsq-install/">nsq install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/zookeeper/">zookeeper</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/zookeeper/zookeeper-install/">zookeeper install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/zookeeper/zookeeper-monitor/">zookeeper monitor</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/zookeeper/zookeeper-optimize/">zookeeper optimize</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/zookeeper/zookeeper-use/">zookeeper use</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/zookeeper/zookeeper-zab-protocol/">zookeeper zab protocol</a></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/java/">java</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/java/java-env/">java env</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/java/java-jvm-optimize/">java jvm optimize</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/java/java-jvm-opts/">java jvm opts</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/java/java-jvm-原理/">java jvm 原理</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/java/java-learn/">java learn</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/java/java-learn/java-学习笔记/">java 学习笔记</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/java/java-log4j/">java log4j</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/java/java-performance-analysis/">java performance analysis</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/java/java-performance-analysis/jps/">jps</a></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/k8s/">k8s</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/k8s/k8s-dashboard-install/">k8s dashboard install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/k8s/k8s-install/">k8s install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/k8s/k8s-registry-install/">k8s registry install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/node/">node</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/node/node-install/">node install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/other/">other</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/other/ACID/">ACID</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/other/分布式二阶段和三阶段提交协议/">分布式二阶段和三阶段提交协议</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/other/开源许可协议/">开源许可协议</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/other/网络带宽/">网络带宽</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/">system service</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/Atlassian/">Atlassian</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/Atlassian/confluence-https/">confluence https</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/Atlassian/confluence-install/">confluence install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/Atlassian/confluence-reset-passwd/">confluence reset passwd</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/Atlassian/confluence-update/">confluence update</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/Atlassian/jira-https/">jira https</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/Atlassian/jira-install/">jira install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/Atlassian/jira-update/">jira update</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/Atlassian/mariadb-install/">mariadb install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/CentOS/">CentOS</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/CentOS/Base-env/">Base env</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/CentOS/linux-common-use-scripts/">linux common use scripts</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/CentOS/linux-history-info-setting/">linux history info setting</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/CentOS/linux-login-info/">linux login info</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/CentOS/linux-nginx-install/">linux nginx install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/CentOS/linux-skill/">linux skill</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/CentOS/linux-system-init/">linux system init</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/CentOS/linux-内存插槽-内存信息/">linux 内存插槽 内存信息</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/CentOS/linux-扩容swap分区/">linux 扩容swap分区</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/CentOS/linux-物理CPU-CPU核数-逻辑CPU/">linux 物理CPU CPU核数 逻辑CPU</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/CentOS/linux-磁盘系统block区别/">linux 磁盘系统block区别</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/CentOS/linux-设置-包含头文件路径-和-动态库链接路径/">linux 设置 包含头文件路径 和 动态库链接路径</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/CentOS/make提高源码编译速度/">make提高源码编译速度</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/NFS/">NFS</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/NFS/nfs-exports-command/">nfs exports command</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/NFS/nfs-install/">nfs install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/Samba/">Samba</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/Samba/samba-conf/">samba conf</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/Samba/samba-install/">samba install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/command/">command</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/command/grep/">grep</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/command/linux/">linux</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/command/pigz/">pigz</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/command/sed/">sed</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/command/split/">split</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/command/tr/">tr</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/haproxy/">haproxy</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/haproxy/haproxy-install/">haproxy install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/nginx/">nginx</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/nginx/nginx-install/">nginx install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/nginx/nginx-location/">nginx location</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/nginx/nginx-rewrite/">nginx rewrite</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/nginx/nginx-status/">nginx status</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/ntpd/">ntpd</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/ntpd/ntpd-install/">ntpd install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/openssl/">openssl</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/openssl/openssl-certificate/">openssl certificate</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/openvpn/">openvpn</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/openvpn/openvpn-install/">openvpn install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/rsync/">rsync</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/rsync/rsync-install/">rsync install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/supersord/">supersord</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/supersord/supersord-install/">supersord install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/vsftpd/">vsftpd</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/vsftpd/ftp-proxy/">ftp proxy</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/vsftpd/vsftpd-error/">vsftpd error</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/vsftpd/vsftpd-info/">vsftpd info</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/vsftpd/vsftpd-install/">vsftpd install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/windows/">windows</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/windows/cygwin-install/">cygwin install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/windows/ipsec-set/">ipsec set</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/windows/windows-modify-hosts/">windows modify hosts</a></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/web/">web</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/web/SSL/">SSL</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/web/SSL/SSL-certificate/">SSL certificate</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/web/angular/">angular</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/web/angular/angular-install/">angular install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/web/hexo/">hexo</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/web/hexo/hexo-install/">hexo install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/web/sass/">sass</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/web/sass/sass-install/">sass install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/web/xml/">xml</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/web/xml/xml-format/">xml format</a></li></ul></li></ul></li></ul>
    </div>
  </div>


  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">归档</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/01/">一月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/11/">十一月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/10/">十月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/09/">九月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/08/">八月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/07/">七月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/06/">六月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/05/">五月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/04/">四月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/03/">三月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/02/">二月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/01/">一月 2017</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">最新文章</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2020/01/01/hello-everyone/">Hello Everyone</a>
          </li>
        
          <li>
            <a href="/2017/11/28/kafka-web-console/">kafka web console</a>
          </li>
        
          <li>
            <a href="/2017/11/27/svn-auto-update/">svn auto update</a>
          </li>
        
          <li>
            <a href="/2017/11/15/salt-manage-event-reactor/">salt manage event reactor</a>
          </li>
        
          <li>
            <a href="/2017/11/15/salt-manage-job/">salt manage job</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2017 penn<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>



  </div>
</body>
</html>