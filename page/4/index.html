<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  

  
  <title>smallasa</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="smallasa">
<meta property="og:url" content="http://www.smallasa.com/page/4/index.html">
<meta property="og:site_name" content="smallasa">
<meta property="og:locale" content="zh-CN">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="smallasa">
  
    <link rel="alternate" href="/atom.xml" title="smallasa" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">smallasa</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">I known what i do !</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="搜索"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://www.smallasa.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-linux-system-init" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/09/22/linux-system-init/" class="article-date">
  <time datetime="2017-09-22T00:45:56.000Z" itemprop="datePublished">2017-09-22</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/system-service/">system service</a>►<a class="article-category-link" href="/categories/system-service/CentOS/">CentOS</a>►<a class="article-category-link" href="/categories/system-service/CentOS/linux-system-init/">linux system init</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/09/22/linux-system-init/">linux system init</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="系统初始化"><a href="#系统初始化" class="headerlink" title="系统初始化"></a>系统初始化</h3><ol>
<li><p>查看系统版本</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># cat /etc/redhat-release</span></span><br><span class="line">CentOS Linux release 7.3.1611 (Core)</span><br></pre></td></tr></table></figure>
</li>
<li><p>设置主机名</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># hostname &#123;hostname&#125; &amp;&amp; echo &#123;hostname&#125; | tee /etc/hostname</span></span><br><span class="line">[root@localhost ~]<span class="comment"># echo '&#123;IP&#125; &#123;hostname&#125;' |tee -a /etc/hosts</span></span><br><span class="line">[root@localhost ~]<span class="comment"># $SHELL</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>硬盘格式化挂载</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@[x] ~]<span class="comment"># mkfs.xfs /dev/vdb</span></span><br><span class="line">[root@[x] ~]<span class="comment"># echo '/dev/vdb /mnt xfs defaults 0 0' | tee -a /etc/fstab</span></span><br><span class="line">[root@[x] ~]<span class="comment"># mount -a</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>设置打开最大文件数</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@[x] ~]<span class="comment"># echo '* - nproc  65535' | tee -a /etc/security/limits.conf</span></span><br><span class="line">[root@[x] ~]<span class="comment"># echo '* - nofile 65535' | tee -a /etc/security/limits.conf</span></span><br><span class="line">[root@[x] ~]<span class="comment"># ls /etc/security/limits.d/*|xargs rm -f</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>设置yum源</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@[x] ~]<span class="comment"># mkdir /etc/yum.repos.d/backup &amp;&amp; mv /etc/yum.repos.d/&#123;*,backup&#125;</span></span><br><span class="line">[root@[x] ~]<span class="comment"># rpm --import http://yum.ops.com/epel/RPM-GPG-KEY-EPEL-7</span></span><br><span class="line">[root@[x] ~]<span class="comment"># curl -o /etc/yum.repos.d/epel.repo http://yum.ops.com/epel-7.repo</span></span><br><span class="line">[root@[x] ~]<span class="comment"># rpm --import http://yum.ops.com/centos/RPM-GPG-KEY-CentOS-7</span></span><br><span class="line">[root@[x] ~]<span class="comment"># curl -o /etc/yum.repos.d/CentOS-Base.repo http://yum.ops.com/centos-7.repo</span></span><br><span class="line">[root@[x] ~]<span class="comment"># yum clean all &amp;&amp; yum makecache</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>安装基础依赖库和常用工具包</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">[root@[x] ~]<span class="comment"># yum -y groupinstall "Development Tools"</span></span><br><span class="line">[root@[x] ~]<span class="comment"># yum -y install \</span></span><br><span class="line">make cmake \</span><br><span class="line">bison-devel \</span><br><span class="line">bzip2-devel \</span><br><span class="line">zlib zlib-devel \</span><br><span class="line">openssl openssl-devel openssl-libs openssl-static \</span><br><span class="line">pcre pcre-devel pcre-static \</span><br><span class="line">ncurses ncurses-devel ncurses-libs \</span><br><span class="line">mariadb mariadb-devel\</span><br><span class="line">curl-devel \</span><br><span class="line">expat-devel \</span><br><span class="line">gettext-devel \</span><br><span class="line">openldap openldap-devel \</span><br><span class="line">readline readline-devel readline-static \</span><br><span class="line">libssh2 libssh2-devel \</span><br><span class="line">unixODBC unixODBC-devel \</span><br><span class="line">sqlite sqlite-devel \</span><br><span class="line">tcl tcl-devel \</span><br><span class="line">perl-Digest-SHA1 \</span><br><span class="line">python-libs python-devel python2-pip python-crypto \</span><br><span class="line">perl-libs \</span><br><span class="line">perl-ExtUtils-MakeMaker \</span><br><span class="line">GeoIP GeoIP-devel \</span><br><span class="line">gperftools gperftools-devel gperftools-libs \</span><br><span class="line">libatomic_ops-devel \</span><br><span class="line">gtest gtest-devel \</span><br><span class="line">gdk-pixbuf2 gdk-pixbuf2-deve \</span><br><span class="line">libffi libffi-devel \</span><br><span class="line">libcurl libcurl-devel \</span><br><span class="line">http-parser http-parser-devel \</span><br><span class="line">libxml2* \</span><br><span class="line">libmcrypt* \</span><br><span class="line">libtool-ltdl-devel*</span><br><span class="line">[root@[x] ~]<span class="comment"># yum -y install bash-completion fop lftp ntp ntpdate vim wget telnet dstat tree lrzsz net-tools nmap-ncat nmap sysstat dmidecode bc bind-utils</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>关闭selinux</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@[x] ~]<span class="comment"># setenforce 0</span></span><br><span class="line">[root@[x] ~]<span class="comment"># sed -i s/'SELINUX=enforcing'/'SELINUX=disabled'/g /etc/selinux/config</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>关闭防火墙</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@[x] ~]<span class="comment"># systemctl stop firewalld &amp;&amp; systemctl disable firewalld</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>设置系统时区</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">[root@[x] ~]<span class="comment"># ntpdate cn.pool.ntp.org</span></span><br><span class="line"></span><br><span class="line">[root@[x] ~]<span class="comment"># [ -f /etc/localtime ] &amp;&amp; cp -f /usr/share/zoneinfo/Asia/Shanghai /etc/localtime</span></span><br><span class="line">[root@[x] ~]<span class="comment"># [ -f /etc/sysconfig/clock ] &amp;&amp; echo 'ZONE="Asia/Shanghai"' | tee /etc/sysconfig/clock</span></span><br><span class="line">[root@[x] ~]<span class="comment"># [ -f /etc/timezone ] &amp;&amp; echo 'Asia/Shanghai' | tee /etc/timezone</span></span><br><span class="line">[root@[x] ~]<span class="comment"># [ -f /etc/sysconfig/ntpd ] &amp;&amp; echo 'SYNC_HWCLOCK=yes' | tee -a /etc/sysconfig/ntpd</span></span><br><span class="line"></span><br><span class="line">[root@[x] ~]<span class="comment"># cp -f /etc/&#123;ntp.conf,ntp.conf.bak&#125;</span></span><br><span class="line">[root@[x] ~]<span class="comment"># cat &gt; /etc/ntp.conf &lt;&lt;EOF</span></span><br><span class="line">driftfile /var/lib/ntp/drift</span><br><span class="line">restrict default nomodify notrap nopeer noquery</span><br><span class="line">restrict 127.0.0.1</span><br><span class="line">restrict ::1</span><br><span class="line">server cn.pool.ntp.org prefer</span><br><span class="line">server 0.centos.pool.ntp.org iburst</span><br><span class="line">server 1.centos.pool.ntp.org iburst</span><br><span class="line">server 2.centos.pool.ntp.org iburst</span><br><span class="line">server 3.centos.pool.ntp.org iburst</span><br><span class="line">includefile /etc/ntp/crypto/pw</span><br><span class="line">keys /etc/ntp/keys</span><br><span class="line"><span class="built_in">disable</span> monitor</span><br><span class="line">EOF</span><br><span class="line"></span><br><span class="line">[root@[x] ~]<span class="comment"># cp -f /etc/ntp/&#123;step-tickers,step-tickers.bak&#125;</span></span><br><span class="line">[root@[x] ~]<span class="comment"># cat &gt; /etc/ntp/step-tickers &lt;&lt;EOF</span></span><br><span class="line">cn.pool.ntp.org</span><br><span class="line">0.centos.pool.ntp.org</span><br><span class="line">1.centos.pool.ntp.org</span><br><span class="line">2.centos.pool.ntp.org</span><br><span class="line">3.centos.pool.ntp.org</span><br><span class="line">EOF</span><br><span class="line"></span><br><span class="line">[root@[x] ~]<span class="comment"># systemctl start ntpd &amp;&amp; systemctl enable ntpd</span></span><br><span class="line"></span><br><span class="line">[root@[x] ~]<span class="comment"># iptables -I INPUT -p udp --dport 123 -j ACCEPT</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>安装python,并设置python源</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">[root@[x] ~]<span class="comment"># git clone https://github.com/yyuu/pyenv.git /usr/local/pyenv</span></span><br><span class="line"></span><br><span class="line">[root@[x] ~]<span class="comment"># echo 'export PYENV_ROOT="/usr/local/pyenv"' | tee /etc/profile.d/pyenv.sh</span></span><br><span class="line">[root@[x] ~]<span class="comment"># echo 'export PATH="$PYENV_ROOT/bin:$PATH"' | tee -a /etc/profile.d/pyenv.sh</span></span><br><span class="line">[root@[x] ~]<span class="comment"># echo 'eval "$(pyenv init -)"' | tee -a /etc/profile.d/pyenv.sh</span></span><br><span class="line">[root@[x] ~]<span class="comment"># source /etc/profile</span></span><br><span class="line"></span><br><span class="line">[root@[x] ~]<span class="comment"># mkdir -p $&#123;PYENV_ROOT&#125;/cache</span></span><br><span class="line">[root@[x] ~]<span class="comment"># ls $&#123;PYENV_ROOT&#125;/cache/Python-2.7.13.tar.xz  将源码包放到这里</span></span><br><span class="line">[root@[x] ~]<span class="comment"># pyenv install 2.7.13</span></span><br><span class="line">[root@[x] ~]<span class="comment"># pyenv global 2.7.13</span></span><br><span class="line"></span><br><span class="line">[root@[x] ~]<span class="comment"># mkdir ~/.pip</span></span><br><span class="line">[root@[x] ~]<span class="comment"># cat &gt; ~/.pip/pip.conf &lt;&lt;EOF</span></span><br><span class="line">[global]</span><br><span class="line">trusted-host=mirrors.aliyun.com</span><br><span class="line">index-url=http://mirrors.aliyun.com/pypi/simple/</span><br><span class="line">[list]</span><br><span class="line">format=columns</span><br><span class="line">EOF</span><br></pre></td></tr></table></figure>
</li>
<li><p>设置开机启动文件权限</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@[x] ~]<span class="comment"># chmod +x /etc/rc.d/rc.local</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>创建常见目录</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@[x] ~]<span class="comment"># mkdir -p /mnt/&#123;app,data,log,web,ops/&#123;app,data,cron&#125;&#125;</span></span><br></pre></td></tr></table></figure>
</li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.smallasa.com/2017/09/22/linux-system-init/" data-id="cjazexzfw005hqcoqnkcwlfj7" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-HTTP-严格传输安全HSTS" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/09/18/HTTP-严格传输安全HSTS/" class="article-date">
  <time datetime="2017-09-18T02:51:48.000Z" itemprop="datePublished">2017-09-18</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Development/">Development</a>►<a class="article-category-link" href="/categories/Development/Doc/">Doc</a>►<a class="article-category-link" href="/categories/Development/Doc/HTTP-严格传输安全HSTS/">HTTP 严格传输安全HSTS</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/09/18/HTTP-严格传输安全HSTS/">HTTP 严格传输安全HSTS</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="HTTP-严格传输安全HSTS"><a href="#HTTP-严格传输安全HSTS" class="headerlink" title="HTTP 严格传输安全HSTS"></a>HTTP 严格传输安全HSTS</h3><ol>
<li><p>简介</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">HTTP严格传输安全(HSTS)是一种安全功能,WEB服务器通过它来告诉浏览器仅用HTTPS来与之通讯,而不是使用HTTP.</span><br></pre></td></tr></table></figure>
</li>
<li><p>HSTS是什么?</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">如果一个WEB服务器支持HTTP访问,并将其重定向到HTTPS访问的话,那么访问者在重定向前的初始会话是非加密的.这就给了中间人攻击的一个机会,重定向可能会被破坏,从而定向到一个恶意站点而不是应该访问的加密页面</span><br><span class="line"></span><br><span class="line">HTTP严格传输安全(HSTS)功能使WEB服务器告知浏览器绝不使用HTTP访问,在浏览器端自动将所有到该站点的HTTP访问替换为HTTPS访问</span><br><span class="line"></span><br><span class="line">HSTS可以用来抵御SSL剥离攻击: SSL剥离攻击是中间人攻击的一种,由Moxie Marlinspike于2009年发明.他在当年的黑帽大会上发表的题为&quot;New Tricks For Defeating SSL In Practice&quot;的演讲中将这种攻击方式公开.SSL剥离的实施方法是阻止浏览器与服务器创建HTTPS连接.它的前提是用户很少直接在地址栏输入&quot;https://&quot;,用户总是通过点击链接或3xx重定向,从HTTP页面进入HTTPS页面.所以攻击者可以在用户访问HTTP页面时替换所有&quot;https://&quot;开头的链接为&quot;http://&quot;,达到阻止HTTPS的目的</span><br><span class="line"></span><br><span class="line">HSTS可以很大程度上解决SSL剥离攻击,因为只要浏览器曾经与服务器创建过一次安全连接,之后浏览器会强制使用HTTPS,即使链接被换成了HTTP.另外,如果中间人使用自己的自签名证书来进行攻击,浏览器会给出警告,但是许多用户会忽略警告.HSTS解决了这一问题,一旦服务器发送了HSTS字段,用户将不再允许忽略警告</span><br><span class="line"></span><br><span class="line">注意: 如果你之前没有使用HTTPS访问过该站点,那么HSTS是不奏效的.网站需要通过HTTPS协议告诉你的浏览器它支持HSTS</span><br></pre></td></tr></table></figure>
</li>
<li><p>服务端开启HSTS</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">服务器开启HSTS的方法是,当客户端通过HTTPS发出请求时,在服务器返回的HTTP响应头中包含&quot;Strict-Transport-Security&quot;字段.非加密传输时设置的HSTS字段无效.</span><br><span class="line"></span><br><span class="line">nginx:</span><br><span class="line">在https的server中设置:</span><br><span class="line">add_header Strict-Transport-Security &quot;max-age:63072000;includeSubdomains;preload&quot;;</span><br><span class="line"></span><br><span class="line">apache:</span><br><span class="line">在virtualhost中添加:</span><br><span class="line">&lt;VirtualHost 1.1.1.1:443&gt;</span><br><span class="line">    Header always set Strict-Transport-Security &quot;max-age:63072000;includeSubdomains;preload&quot;</span><br><span class="line">&lt;/VirtualHost&gt;</span><br><span class="line"></span><br><span class="line">//HTTP重定向HTTPS</span><br><span class="line">&lt;VirtualHost *:80&gt;</span><br><span class="line">    ServerName test.com</span><br><span class="line">    Redirect permanent / https://test.com/</span><br><span class="line">&lt;/VirtualHost&gt;</span><br><span class="line"></span><br><span class="line">综上,</span><br><span class="line">在你的WEB站点在每次访问时都会发送该请求头,失效时间是两年(秒数).这个失效时间每次都会设置为两年后,所以,明天你访问时,它会设置为明天的两年后</span><br></pre></td></tr></table></figure>
</li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.smallasa.com/2017/09/18/HTTP-严格传输安全HSTS/" data-id="cjazexza9000dqcoqp03qdev1" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-一次完整的HTTP请求" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/09/15/一次完整的HTTP请求/" class="article-date">
  <time datetime="2017-09-15T03:23:33.000Z" itemprop="datePublished">2017-09-15</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Development/">Development</a>►<a class="article-category-link" href="/categories/Development/Doc/">Doc</a>►<a class="article-category-link" href="/categories/Development/Doc/一次完整的HTTP请求/">一次完整的HTTP请求</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/09/15/一次完整的HTTP请求/">一次完整的HTTP请求</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="一次完整的HTTP请求"><a href="#一次完整的HTTP请求" class="headerlink" title="一次完整的HTTP请求"></a>一次完整的HTTP请求</h3><ol>
<li>一次性完整的HTTP请求过程<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">1.域名解析 =&gt;</span><br><span class="line">2.发起TCP的3次握手 =&gt;</span><br><span class="line">3.发起HTTP请求 =&gt;</span><br><span class="line">4.服务器响应HTTP请求,浏览器得到HTML代码 =&gt;</span><br><span class="line">5.浏览器解析HTML代码,并请求HTML代码中的资源(如js,css,图片等)</span><br><span class="line">6.浏览器对页面进行渲染呈现给用户</span><br></pre></td></tr></table></figure>
</li>
</ol>
<hr>
<h3 id="详解请求过程"><a href="#详解请求过程" class="headerlink" title="详解请求过程"></a>详解请求过程</h3><ol>
<li><p>域名解析</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">在浏览器(Chrome)中输入域名&quot;www.smallasa.com&quot;,敲回车键,进行域名解析为IP地址:</span><br><span class="line">1.浏览器(Chrome)会首先搜索浏览器自身的DNS缓存</span><br><span class="line">  查看自身缓存中是否有&quot;www.smallasa.com&quot;对应的条目,而且没有过期.</span><br><span class="line">  如果有对应条目且没有过期,则解析到此结束</span><br><span class="line"></span><br><span class="line">  注意:浏览器缓存时间比较短,大概只有1分钟,且只能容纳1000条缓存</span><br><span class="line">  注意:浏览器(Chrome)自身缓存查看: chrome://net-internals/#dns</span><br><span class="line"></span><br><span class="line">2.如果浏览器自身的缓存里面没有找到对应的条目</span><br><span class="line">  那么浏览器会搜索操作系统自身的DNS缓存</span><br><span class="line">  如果找到且没有过期,则停止搜索解析并到此结束.</span><br><span class="line"></span><br><span class="line">  注意:</span><br><span class="line">  ipconfig/displaydns  windows查看dns缓存</span><br><span class="line">  nscg -d              linux查看dns缓存(linux系统一般默认关闭,yum -y install nscg)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">3.如果在系统自身的DNS缓存中也没有找到</span><br><span class="line">  那么尝试读取系统hosts文件,查找该域名对应的条目,如果有则解析成功</span><br><span class="line"></span><br><span class="line">  注意:</span><br><span class="line">  C:\Windows\System32\drivers\etc\hosts  windows hosts文件位置</span><br><span class="line">  /etc/hosts                             linux hosts文件位置</span><br><span class="line"></span><br><span class="line">4.如果在hosts文件中也没有找到对应的条目</span><br><span class="line">  浏览器就会发起一个DNS的系统调用,</span><br><span class="line">  该调用会向本地配置的首选DNS服务器发起域名解析请求(通过UDP协议向DNS的53端口发起请求,这个请求是递归的请求)</span><br><span class="line">  运营商的DNS服务器首先查找自身的缓存,找到对应的条目,且没有过期,则解析成功.</span><br><span class="line">  如果没有找到对应的条目,则由运营商的DNS代表我们的浏览器发起迭代DNS解析请求,它首先是会找根域的DNS的IP地址(这个DNS服务器都内置13台根域的DNS的IP地址),找到根域的DNS地址,就会向其发起请求(请问www.smallasa.com这个域名的IP地址是多少?),根域发现这是一个顶级域com域的一个域名,于是就告诉运营商的DNS我不知道这个域名的IP地址,但是我知道com域的IP地址,你去找它,于是运营商的DNS就得到了com域的IP地址,又向com域的IP地址发起了请求(请问www.smallasa.com这个域名的IP地址是多少?),com域这台服务器告诉运营商的DNS我不知道www.smallasa.com这个域名的IP地址,但是我知道smallasa.com这个域的DNS地址,你去找它,于是运营商的DNS又向smallasa.com这个域名的DNS地址发起请求(请问www.smallasa.com这个域名的IP地址是多少?),这个时候smallasa.com域的DNS服务器一查,果真在我这里,于是就把找到的结果发送给运营商的DNS服务器,这个时候运营商的DNS服务器就拿到了www.smallasa.com这个域名对应的IP地址,并返回给系统内核,内核又把结果返回给浏览器,终于浏览器拿到了www.smallasa.com对应的IP地址,该进行下一步TCP三次握手动作了</span><br><span class="line"></span><br><span class="line">如果经过以上的4个步骤,还没有解析成功,那么会进行如下步骤:</span><br><span class="line">(主要针对windows服务器)</span><br><span class="line">5.操作系统就会查找NetBIOS name Cache(NetBIOS名称缓存,就存在客户端电脑中的).凡是最近一段时间内和我成功通讯的计算机的计算机名和Ip地址,都会存在这个缓存里面.什么情况下该步能解析成功呢?就是该名称正好是几分钟前和我成功通信过,那么这一步就可以成功解析.</span><br><span class="line"></span><br><span class="line">6.如果NetBIOS name Cache解析不成功,那会查询WINS服务器(是NETBIOS名称和IP地址对应的服务器)</span><br><span class="line"></span><br><span class="line">7.如果查询WINS服务器也没有查询成功,那么客户端就要进行广播查找</span><br><span class="line"></span><br><span class="line">8.如果进行广播查找也没有成功,那么客户端就读取LMHOSTS文件(和HOSTS文件同一个目录下,写法也一样)</span><br><span class="line"></span><br><span class="line">9.如果读取LMHOSTS文件还没有解析成功,那么就宣告这次解析失败,那就无法跟目标计算机进行通信.</span><br><span class="line"></span><br><span class="line">只要这八步中有一步可以解析成功,那就可以成功和目标计算机进行通信</span><br></pre></td></tr></table></figure>
</li>
<li><p>发起TCP的三次握手</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">浏览器拿到域名对应的IP地址之后,浏览器User-Agent会以一个随机端口(1024&lt; 端口 &lt;65535)向服务器的WEB程序(httpd,nginx,IIS)80端口发起TCP的连接请求.这个连接请求(原始的http请求经过TCP/IP4层模型的层层封包)到达服务器端后(这中间通过各种路由设备,局域网内除外),进入到网卡,然后是进入到内核的TCP/IP协议栈(用于识别该连接请求,解封包,一层一层的剥开),还有可能要经过Netfilter防火墙(属于内核的模块)的过滤,最终到达WEB程序(本文就以Nginx为例),最终建立了TCP/IP的连接</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p><img src="一次完整的HTTP请求/TCP三次握手.jpg" alt="TCP三次握手"><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">1.客户端首先发送一个连接试探,ACK=0表示确认号无效,SYN=1表示这是一个连接请求或连接接受报文,同时表示这个数据报不能携带数据,seq=J表示客户端自己的初始序号(seq=0代表这是第0号包),这时候客户端进入SYN_SENT状态,表示客户端等待服务器的回复</span><br><span class="line"></span><br><span class="line">2.服务端监听到连接请求报文后,如同意建立连接,则向Client发送确认.TCP报文首部中的SYN和ACK都置1,ack=J+1表示期望收到对方下一个报文段的第一个数据字节序号是J+1,同时表明J为止的所有数据都已正确收到(ack=1其实是ack=0+1,也就是期望客户端的第1个包),seq=K表示服务端自己的初始序号(seq=0代表这是服务器这边发出的第0号包).这时服务器进入SYN_REVD,表示服务器已经收到客户端的连接请求,等待客户端的确认</span><br><span class="line"></span><br><span class="line">3.客户端收到确认后还需再次发送确认,同时携带要发送给服务端的数据.ACK=1表示确认号,ack=K+1代表期望收到服务器的第1个包,客户端自己的序号seq=J+1表示这就是我的第1个包,相对于第0个包来说的,一旦收到Client的确认之后,这个TCP连接就进入Established状态,就可以发起http请求了</span><br></pre></td></tr></table></figure></p>
<ol>
<li><p>建立TCP连接后发起HTTP请求</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">进过TCP3次握手之后,浏览器发起了http的请求,使用的http的方法GET方法,请求的URL是/,协议是HTTP/1.0</span><br></pre></td></tr></table></figure>
</li>
<li><p>服务器端响应HTTP请求,浏览器得到HTML代码</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">服务器端WEB程序接收到HTTP请求以后,就开始处理该请求,处理之后就返回给浏览器html文件</span><br><span class="line"></span><br><span class="line">假设服务器端使用nginx+PHP(fastcgi)架构提供服务:</span><br><span class="line">1.nginx读取配置文件</span><br><span class="line">  我们在浏览器的地址栏里面输入的是&quot;www.smallasa.com&quot;,其实完整的应该是&quot;http://www.smallasa.com./&quot;,后面还有个点(这个点代表就是根域,一般情况下我们不用输入,也不显示),后面的&quot;/&quot;也是不用添加,浏览器会自动帮我们添加.那么实际请求的URL是&quot;http://www.smallasa.com/&quot;,Nginx在收到浏览器&quot;GET /&quot;请求时,会读取http请求里面的头部信息,根据Host来匹配 自己的所有的虚拟主机的配置文件的server_name,看看有没有匹配的,有匹配那么就读取该虚拟主机的配置,发现如下配置:</span><br><span class="line">  root /web/echo</span><br><span class="line">  通过这个配置就知道所有网页文件的就在这个目录下,这个目录就是&quot;/&quot;.当我们访问&quot;http://www.smallasa.com/&quot;时就是访问这个目录下面的文件.例如,&quot;http://www.smallasa.com/index.html&quot;,那么代表&quot;/web/echo&quot;下面有个文件叫&quot;index.html&quot;</span><br><span class="line"></span><br><span class="line">  index index.html index.htm index.php</span><br><span class="line">  通过这个就能得知网站的首页文件是那个文件,也就是我们在输入&quot;http://www.smallasa.com/&quot;,nginx就会自动帮我们把index.html加到后面,那么添加之后的URL是&quot;/index.html&quot;,然后根据后面的配置进行处理.</span><br><span class="line">  注意:假设首页是index.php,当然是会尝试的去找到该文件,如果没有找到该文件就依次往下找,如果这3个文件都没有找到,那么就抛出一个404错误</span><br><span class="line"></span><br><span class="line">  location ~ .*\.php(\/.*)*$ &#123;</span><br><span class="line">     root /web/echo;</span><br><span class="line">     fastcgi_pass   127.0.0.1:9000;</span><br><span class="line">     fastcgi_index  index.php;</span><br><span class="line">     astcgi_param  SCRIPT_FILENAME  $document_root$fastcgi_script_name;</span><br><span class="line">     include        fastcgi_params;</span><br><span class="line">  &#125;</span><br><span class="line">  这一段配置指明凡是请求的URL中匹配(这里是启用了正则表达式进行匹配)&quot;*.php&quot;后缀的,后面跟的参数的,都交给后端的fastcgi进程进行处理</span><br><span class="line"></span><br><span class="line">  把php文件交给fastcgi进程去处理:</span><br><span class="line">  于是nginx把&quot;/index.php&quot;这个URL交给了后端的fastcgi进程处理,等待fastcgi处理完成后(结合数据库查询出数据,填充模板生成html文件)返回给nginx一个index.html文档,Nginx再把这个index.html返回给浏览器,于是乎浏览器就拿到了首页的html代码,同时nginx写一条访问日志到日志文件中去</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  注1:nginx是怎么找index.php文件的？</span><br><span class="line">      当nginx发现需要&quot;/web/echo/index.php&quot;文件时,就会向内核发起IO系统调用(因为要跟硬件打交道,这里的硬件是指硬盘,通常需要靠内核来操作,而内核提供的这些功能是通过系统调用来实现的),告诉内核,我需要这个文件,内核从&quot;/&quot;开始找到web目录,再在web目录下找到echo目录,最后在echo目录下找到index.php文件,于是把这个index.php从硬盘上读取到内核自身的内存空间,然后再把这个文件复制到nginx进程所在的内存空间,于是乎nginx就得到了自己想要的文件了</span><br><span class="line"></span><br><span class="line">  注2:寻找文件在文件系统层面是怎么操作的?</span><br><span class="line">      每个分区(像ext3 ext3等文件系统,block块是文件存储的最小单元 默认是4096字节)都是包含元数据区和数据区,每一个文件在元数据区都有元数据条目(一般是128字节大小),每一个条目都有一个编号,我们称之为inode(index node 索引节点),这个inode里面包含:文件类型、权限、连接次数、属主和数组的ID、时间戳、这个文件占据了那些磁盘块也就是块的编号（block，每个文件可以占用多个block,并且block不一定是连续的，每个block是有编号的）还有一个要点：目录其实也普通是文件,也需要占用磁盘块,目录不是一个容器.你看默认创建的目录就是4096字节,也就说只需要占用一个磁盘块,但这是不确定的.所以要找到目录也是需要到元数据区里面找到对应的条目,只有找到对应的inode就可找到目录所占用的磁盘块</span><br><span class="line"></span><br><span class="line">      那么内核究竟是怎么找到index.php这个文件的呢？</span><br><span class="line">      内核拿到nginx的IO系统调用要获取/web/echo/index.php这个文件请求之后</span><br><span class="line">① 内核读取元数据区 / 的inode，从inode里面读取/所对应的数据块的编号，然后在数据区找到其对应的块（1 2号块），读取1号块上的映射表找到web这个名称在元数据区对应的inode号</span><br><span class="line">② 内核读取web对应的inode（3号），从中得知web在数据区对应的块是5号块，于是到数据区找到5号块，从中读取映射表，知道echo对应的inode是5号，于是到元数据区找到5号inode</span><br><span class="line">③ 内核读取5号inode，得到echo在数据区对应的是11号块，于是到数据区读取11号块得到映射表，得到index.php对应的inode是9号</span><br><span class="line">④ 内核到元数据区读取9号inode，得到index.php对应的是15和16号数据块，于是就到数据区域找到15 16号块，读取其中的内容，得到index.php的完整内容</span><br></pre></td></tr></table></figure>
</li>
<li><p>浏览器解析html代码,并请求html代码中的资源</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">浏览器拿到index.html文件后,就开始解析其中的html代码,遇到js/css/image等静态资源时,就向服务器端去请求下载(会使用多线程下载,每个浏览器的线程数不一样),这个时候就用上keep-alive特性了,建立一次HTTP连接,可以请求多个资源,下载资源的顺序就是按照代码里的顺序,但是由于每个资源大小不一样,而浏览器又多线程请求请求资源,所以从下图看出,这里显示的顺序并不一定是代码里面的顺序</span><br><span class="line"></span><br><span class="line">浏览器在请求静态资源时(在未过期的情况下),向服务器端发起一个http请求(询问自从上一次修改时间到现在有没有对资源进行修改),如果服务器端返回304状态码(告诉浏览器服务器端没有修改),那么浏览器会直接读取本地的该资源的缓存文件</span><br></pre></td></tr></table></figure>
</li>
<li><p>浏览器对页面进行渲染呈现给用户</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">最后,浏览器利用自己内部的工作机制,把请求到的静态资源和HTML代码进行渲染,渲染之后呈现给用户</span><br><span class="line">自此一次完整的HTTP事务宣告完成</span><br></pre></td></tr></table></figure>
</li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.smallasa.com/2017/09/15/一次完整的HTTP请求/" data-id="cjazey0a80196qcoqbl8v88we" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-linux-文件系统inode" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/09/15/linux-文件系统inode/" class="article-date">
  <time datetime="2017-09-15T02:15:24.000Z" itemprop="datePublished">2017-09-15</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Development/">Development</a>►<a class="article-category-link" href="/categories/Development/Doc/">Doc</a>►<a class="article-category-link" href="/categories/Development/Doc/linux-文件系统inode/">linux 文件系统inode</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/09/15/linux-文件系统inode/">linux 文件系统inode</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="linux-文件系统inode"><a href="#linux-文件系统inode" class="headerlink" title="linux 文件系统inode"></a>linux 文件系统inode</h3><ol>
<li><p>简介</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">inode是一个重要概念,是理解Unix/Linux文件系统和硬盘储存的基础</span><br><span class="line"></span><br><span class="line">理解inode,不仅有助于提高系统操作水平,还有助于体会Unix设计哲学,即:</span><br><span class="line">如何把底层的复杂性抽象成一个简单概念,从而大大简化用户接口</span><br></pre></td></tr></table></figure>
</li>
<li><p>inode是什么?</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">理解inode,</span><br><span class="line">首先,需要从文件存储说起,文件存储在硬盘上</span><br><span class="line">其次,硬盘的最小存储单位叫做&quot;扇区&quot;(Sector),每个扇区存储512字节(相当于0.5KB).</span><br><span class="line">然后,操作系统读取硬盘的时候,不会一个个扇区地读取,这样效率太低,而是一次性连续读取多个扇区,即一次性读取一个&quot;块&quot;(block).这种由多个扇区组成的&quot;块&quot;,是文件存取的最小单位.&quot;块&quot;的大小,最常见的是4KB,即连续八个&quot;扇区&quot;组成一个&quot;块&quot;.</span><br><span class="line">最后,文件的数据都储存在&quot;块&quot;中,我们还必须找到一个地方储存文件的元信息(比如,文件的创建者,文件的创建日期,文件的大小等等).这种储存文件元信息的区域就叫做inode,中文译名为&quot;索引节点&quot;.每一个文件都有对应的inode,里面包含了与该文件有关的一些信息</span><br></pre></td></tr></table></figure>
</li>
<li><p>inode的内容</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">inode包含的元信息:</span><br><span class="line">* 文件的字节数</span><br><span class="line">* 文件属主</span><br><span class="line">* 文件数组</span><br><span class="line">* 文件的读,写,执行权限</span><br><span class="line">* 文件数据块的位置</span><br><span class="line">* 链接数,即有多少文件名指向这个inode</span><br><span class="line">* 文件的时间戳:</span><br><span class="line">  ctime指inode上一次变动的时间</span><br><span class="line">  mtime指文件内容上一次变动的时间</span><br><span class="line">  atime指文件上一次打开的时间</span><br><span class="line"></span><br><span class="line">[root@dev ~]# touch smallasa.txt</span><br><span class="line">[root@dev ~]# stat smallasa.txt</span><br><span class="line">  File: ‘smallasa.txt’</span><br><span class="line">  Size: 0               Blocks: 0          IO Block: 4096   regular empty file</span><br><span class="line">Device: fd01h/64769d    Inode: 67237570    Links: 1</span><br><span class="line">Access: (0644/-rw-r--r--)  Uid: (    0/    root)   Gid: (    0/    root)</span><br><span class="line">Access: 2017-09-15 10:28:57.304438000 +0800</span><br><span class="line">Modify: 2017-09-15 10:28:57.304438000 +0800</span><br><span class="line">Change: 2017-09-15 10:28:57.304438000 +0800</span><br><span class="line"> Birth: -</span><br></pre></td></tr></table></figure>
</li>
<li><p>inode的大小</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">inode也会消耗硬盘空间,所以硬盘格式化的时候,操作系统自动将硬盘分成两个区域:</span><br><span class="line">一个是数据区,用于存放文件数据</span><br><span class="line">一个是inode区(inode table),用于存放inode所包含的信息</span><br><span class="line"></span><br><span class="line">每个inode节点的大小，一般是128字节或256字节。inode节点的总数，在格式化时就给定，一般是每1KB或每2KB就设置一个inode。假定在一块1GB的硬盘中，每个inode节点的大小为128字节，每1KB就设置一个inode，那么inode table的大小就会达到128MB，占整块硬盘的12.8%。</span><br><span class="line"></span><br><span class="line">//查看磁盘inode总数,使用量</span><br><span class="line">[root@dev ~]# df -i</span><br><span class="line">Filesystem                 Inodes  IUsed     IFree IUse% Mounted on</span><br><span class="line">/dev/mapper/centos-root  18358272 113044  18245228    1% /</span><br><span class="line">devtmpfs                   483828    358    483470    1% /dev</span><br><span class="line">tmpfs                      485436      1    485435    1% /dev/shm</span><br><span class="line">tmpfs                      485436    424    485012    1% /run</span><br><span class="line">tmpfs                      485436     13    485423    1% /sys/fs/cgroup</span><br><span class="line">/dev/vdb                104857600  55773 104801827    1% /mnt</span><br><span class="line">/dev/vda1                  512000    330    511670    1% /boot</span><br><span class="line">tmpfs                      485436      1    485435    1% /run/user/0</span><br></pre></td></tr></table></figure>
</li>
<li><p>inode号码</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">每个inode都有一个号码,操作系统用inode号码来识别不同的文件</span><br><span class="line"></span><br><span class="line">注意: Unix/Linux系统内部不使用文件名,而使用inode号码来识别文件.对于系统来说,文件名只是inode号码便于识别的别称或者绰号</span><br><span class="line"></span><br><span class="line">用户打开文件,实际上系统内部经过了三个步骤:</span><br><span class="line">首先,系统找到这个文件名对应的inode号码</span><br><span class="line">其次,通过inode号码,获取inode信息</span><br><span class="line">最后,根据inode信息,找到文件数据所在的block,读出数据</span><br><span class="line"></span><br><span class="line">//查看文件inode号</span><br><span class="line">[root@dev ~]# ls -i smallasa.txt</span><br><span class="line">67237570 smallasa.txt</span><br></pre></td></tr></table></figure>
</li>
<li><p>目录文件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">Unix/Linux系统中,目录(directory)也是一种文件.打开目录,实际上就是打开目录文件</span><br><span class="line">目录文件的结构非常简单,就是一系列目录项(dirent)的列表.每个目录项,由两部分组成:所包含文件的文件名,以及该文件名对应的inode号码</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">[root@dev ~]# mkdir test</span><br><span class="line">[root@dev ~]# touch test/&#123;a,b,c&#125;</span><br><span class="line">[root@dev ~]# ls -i test/</span><br><span class="line">154095 a  154103 b  154104 c</span><br><span class="line">[root@dev ~]# ls -l test/</span><br><span class="line">total 0</span><br><span class="line">-rw-r--r-- 1 root root 0 Sep 15 10:55 a</span><br><span class="line">-rw-r--r-- 1 root root 0 Sep 15 10:55 b</span><br><span class="line">-rw-r--r-- 1 root root 0 Sep 15 10:55 c</span><br></pre></td></tr></table></figure>
</li>
<li><p>硬链接</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">一般情况下,文件名和inode号码是&quot;一一对应&quot;关系,每个inode号码对应一个文件名</span><br><span class="line">但是,Unix/Linux系统允许多个文件名指向同一个inode号码,这意味着可以用不同的文件名访问同样的内容,对文件内容进行修改,会影响到所有文件名,但是,删除一个文件名,不影响另一个文件名的访问.这种情况就被称为&quot;硬链接&quot;(hard link)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">[root@dev ~]# ls -li smallasa.txt</span><br><span class="line">67237570 -rw-r--r-- 1 root root 0 Sep 15 10:59 smallasa.txt</span><br><span class="line">[root@dev ~]# ln smallasa.txt smallasa.A</span><br><span class="line">[root@dev ~]# ls -li smallasa.txt smallasa.A</span><br><span class="line">67237570 -rw-r--r-- 2 root root 0 Sep 15 10:59 smallasa.A</span><br><span class="line">67237570 -rw-r--r-- 2 root root 0 Sep 15 10:59 smallasa.txt</span><br><span class="line"></span><br><span class="line">如上:</span><br><span class="line">inode信息中有一项叫做&quot;链接数&quot;,记录指向该inode的文件名总数.</span><br><span class="line">每创建一个硬链接,会使得inode节点中的&quot;链接数&quot;加1</span><br><span class="line">每删除一个硬链接,会使得inode节点中的&quot;链接数&quot;减1</span><br><span class="line">inode节点中的&quot;链接数&quot;减到0,表明没有文件名指向这个inode,系统就会回收这个inode号码,以及其所对应block区域</span><br><span class="line"></span><br><span class="line">[root@dev ~]# mkdir test</span><br><span class="line">[root@dev ~]# ls -lia test/</span><br><span class="line">total 4</span><br><span class="line">68058947 drwxr-xr-x   2 root root    6 Sep 15 11:08 .</span><br><span class="line">67149953 dr-xr-x---. 17 root root 4096 Sep 15 11:08 ..</span><br><span class="line">[root@dev ~]# ls -liad test/</span><br><span class="line">68058947 drwxr-xr-x 2 root root 6 Sep 15 11:08 test/</span><br><span class="line"></span><br><span class="line">如上,</span><br><span class="line">创建目录时,默认会生成两个目录项: &quot;.&quot; 和 &quot;..&quot;</span><br><span class="line">前者的inode号码就是当前目录的inode号码,等同于当前目录的&quot;硬链接&quot;</span><br><span class="line">后者的inode号码就是当前目录的父目录的inode号码,等同于父目录的&quot;硬链接&quot;</span><br><span class="line">所以,任何一个目录的&quot;硬链接&quot;总数,总是等于2</span><br></pre></td></tr></table></figure>
</li>
<li><p>软连接</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">文件A和文件B的inode号码虽然不一样,但是文件A的内容是文件B的路径.当读取文件A时,系统会自动将访问者导向文件B.因此,无论打开哪一个文件,最终读取的都是文件B.这时,文件A就称为文件B的&quot;软链接&quot;(soft link)或者&quot;符号链接&quot;(symbolic link)</span><br><span class="line"></span><br><span class="line">这意味着,文件A依赖于文件B而存在,如果删除了文件B,打开文件A就会报错: &quot;No such file or directory&quot;.这是软链接与硬链接最大的不同: 文件A指向文件B的文件名,而不是文件B的inode号码,文件B的inode&quot;链接数&quot;不会因此发生变化</span><br><span class="line"></span><br><span class="line">[root@dev ~]# ls -li smallasa.txt</span><br><span class="line">67237570 -rw-r--r-- 1 root root 0 Sep 15 10:59 smallasa.txt</span><br><span class="line">[root@dev ~]# ln -s smallasa.txt smallasa.A</span><br><span class="line">[root@dev ~]# ls -li smallasa.txt smallasa.A</span><br><span class="line">68058948 lrwxrwxrwx 1 root root 12 Sep 15 11:14 smallasa.A -&gt; smallasa.txt</span><br><span class="line">67237570 -rw-r--r-- 1 root root  0 Sep 15 10:59 smallasa.txt</span><br></pre></td></tr></table></figure>
</li>
<li><p>inode的特殊作用</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">由于inode号码与文件名分离,这种机制导致了一些Unix/Linux系统特有的现象:</span><br><span class="line">1.有时文件名包含特殊字符,无法正常删除.这时,直接删除inode节点,就能起到删除文件的作用</span><br><span class="line">2.移动文件或重命名文件时,只是改变文件名,不影响inode号码</span><br><span class="line">3.打开一个文件以后,系统就以inode号码来识别这个文件,不再考虑文件名.因此,系统无法从inode号码得知文件名</span><br><span class="line"></span><br><span class="line">第3点使得软件更新变得简单,可以在不关闭软件的情况下进行更新,不需要重启.因为系统通过inode号码,识别运行中的文件,不通过文件名.更新的时候,新版文件以同样的文件名,生成一个新的inode,不会影响到运行中的文件.等到下一次运行这个软件的时候,文件名就自动指向新版文件,旧版文件的inode则被回收.</span><br></pre></td></tr></table></figure>
</li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.smallasa.com/2017/09/15/linux-文件系统inode/" data-id="cjazexzgc005nqcoq8jgr6u9c" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-linux-文件描述符与打开文件之间的关系" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/09/13/linux-文件描述符与打开文件之间的关系/" class="article-date">
  <time datetime="2017-09-13T11:01:48.000Z" itemprop="datePublished">2017-09-13</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Development/">Development</a>►<a class="article-category-link" href="/categories/Development/Doc/">Doc</a>►<a class="article-category-link" href="/categories/Development/Doc/linux-文件描述符与打开文件之间的关系/">linux 文件描述符与打开文件之间的关系</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/09/13/linux-文件描述符与打开文件之间的关系/">linux 文件描述符与打开文件之间的关系</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="linux-文件描述符与打开文件之间的关系"><a href="#linux-文件描述符与打开文件之间的关系" class="headerlink" title="linux 文件描述符与打开文件之间的关系"></a>linux 文件描述符与打开文件之间的关系</h3><ol>
<li><p>简述</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">在Linux系统中一切皆可以看成是文件.文件又可分为:普通文件,目录文件,链接文件和设备文件</span><br><span class="line"></span><br><span class="line">文件描述符(file descriptor)是内核为了高效管理已被打开的文件所创建的索引,其是一个非负整数(通常是小整数),用于指代被打开的文件,所有执行I/O操作的系统调用都通过文件描述符.</span><br><span class="line">例如: 程序刚刚启动的时候,0是标准输入,1是标准输出,2是标准错误.如果此时去打开一个新的文件,它的文件描述符会是3.</span><br><span class="line"></span><br><span class="line">POSIX标准要求每次打开文件时(含socket)必须使用当前进程中最小可用的文件描述符号码,因此,在网络通信过程中稍不注意就有可能造成串话.</span><br><span class="line"></span><br><span class="line">标准文件描述符图如下:</span><br><span class="line">文件描述符:  0             1               2</span><br><span class="line">用途:       标准输入       标准输出         标准错误</span><br><span class="line">POSIX标准:  STDIN_FILENO  STDOUT_FILENO   STDERR_FILENO  </span><br><span class="line">stdio流:    stdin         stdout          stderr</span><br></pre></td></tr></table></figure>
</li>
<li><p>文件描述限制</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">在编写文件操作的或者网络通信的软件时,初学者一般可能会遇到&quot;Too many open files&quot;的问题.这主要是因为文件描述符是系统的一个重要资源.</span><br><span class="line"></span><br><span class="line">虽然说系统内存有多少就可以打开多少的文件描述符,但是在实际实现过程中内核是会做相应的处理的,一般最大打开文件数会是系统内存的10%(以KB来计算,称之为系统级限制)</span><br><span class="line">与此同时,内核为了不让某一个进程消耗掉所有的文件资源,其也会对单个进程最大打开文件数做默认值处理(称之为用户级限制),默认值一般是1024</span><br><span class="line"></span><br><span class="line">查看系统级别的最大打开文件数: sysctl -a|grep fs.file-max</span><br><span class="line">查看用户级别的最大打开文件数: ulimit -n</span><br></pre></td></tr></table></figure>
</li>
<li><p>文件描述符和打开文件之间的关系</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">每一个文件描述符会与一个打开文件相对应,不同的文件描述符也会指向同一个文件.</span><br><span class="line">相同的文件可以被不同的进程打开也可以在同一个进程中被多次打开.</span><br><span class="line"></span><br><span class="line">系统为每一个进程维护了一个文件描述符表,该表的值都是从0开始的,所以在不同的进程中你会看到相同的文件描述符,这种情况下相同文件描述符有可能指向同一个文件,也有可能指向不同的文件.</span><br><span class="line"></span><br><span class="line">具体情况要具体分析,要理解具体其概况如何,需要查看由内核维护的3个数据结构:</span><br><span class="line">1.进程级的打开文件描述符表</span><br><span class="line">2.系统级的打开文件描述符表</span><br><span class="line">3.文件系统的i-node表</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">进程级的打开描述符表中的每一条信息都记录了单个文件描述符的相关信息:</span><br><span class="line">1.控制文件描述符操作的一组标志</span><br><span class="line">2.对打开文件句柄的引用</span><br><span class="line"></span><br><span class="line">内核对所有打开的文件维护有一个系统级的描述符表格(open file description table),也称之为打开文件表(open file table),并将表格中每条信息称为打开文件句柄(open file handle)</span><br><span class="line"></span><br><span class="line">一个打开文件句柄存储了一个与打开文件相关的全部信息,如下:</span><br><span class="line">1.当前文件偏移量(调用read()和write()时更新,或使用lseek()直接修改)</span><br><span class="line">2.打开文件时所使用的状态标识(即,open()的flags参数)</span><br><span class="line">3.文件访问模式(如调用open()时所设置的只读模式,只写模式或读写模式)</span><br><span class="line">4.与信号驱动相关的设置</span><br><span class="line">5.对该文件i-node对象的引用</span><br><span class="line">6.文件类型(如,常规文件,套接字或FIFO)和访问权限</span><br><span class="line">7.一个指针,指向该文件所持有的锁列表</span><br><span class="line">8.文件的各种属性,包括文件大小以及与不同类型操作相关的时间戳</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p><img src="linux-文件描述符与打开文件之间的关系/文件描述符和打开文件之间的关系.jpg" alt="文件描述符与打开文件之间的关系"><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">如上,文件描述符,打开的文件句柄以及i-node之间的关系</span><br><span class="line">图中,两个进程拥有诸多打开的文件描述符</span><br><span class="line">在进程A中,文件描述符1和30都指向了同一个打开的文件句柄(标号23).这可能是通过调用dup(),dup2(),fcntl()或者对同一个文件多次调用了open()函数而形成的</span><br><span class="line"></span><br><span class="line">进程A的文件描述符2和进程B的文件描述符2都指向了同一个打开的文件句柄(标号73).这种情形可能是在调用fork()后出现的(即,进程A,B是父子进程关系),或者当某进程通过UNIX域套接字将一个打开的文件描述符传递给另一个进程时,也会发生.再者是不同的进程独自去调用open函数打开了同一个文件,此时进程内部的描述符正好分配到与其他进程打开该文件的描述符一样</span><br><span class="line"></span><br><span class="line">此外,进程A的描述符0和进程B的描述符3分别指向不同的打开文件句柄,但这些句柄均指向i-node表的相同条目(1976).换言之,指向同一个文件.发生这种情况是因为每个进程各自对同一个文件发起了open()调用.同一个进程两次打开同一个文件,也会发生类似情况.</span><br></pre></td></tr></table></figure></p>
<ol>
<li>综上总结<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">1.由于进程级文件描述符表的存在,不同的进程中会出现相同的文件描述符,它们可能指向同一个文件,也可能指向不同的文件</span><br><span class="line">2.两个不同的文件描述符,若指向同一个打开文件句柄,将共享同一文件偏移量.因此,如果通过其中一个文件描述符来修改文件偏移量(调用read(),write()或lseek()),那么从另一个描述符中也会观察到变化,无论这两个文件描述符是否属于不同进程,还是同一个进程,情况都是如此</span><br><span class="line">3.要获取和修改打开的文件标志(如:O_APPEND,O_NONBLOCK和O_ASYNC),可执行fcntl()的F_GETFL和F_SETFL操作,其对作用域的约束与上一条颇为类似</span><br><span class="line">4.文件描述符标志(即,close-on-exec)为进程和文件描述符所私有.对这一标志的修改将不会影响同一进程或不同进程中的其他文件描述符</span><br></pre></td></tr></table></figure>
</li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.smallasa.com/2017/09/13/linux-文件描述符与打开文件之间的关系/" data-id="cjazexzgc005mqcoqau7e2ino" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-linux-内存插槽-内存信息" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/09/13/linux-内存插槽-内存信息/" class="article-date">
  <time datetime="2017-09-13T04:23:41.000Z" itemprop="datePublished">2017-09-13</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/system-service/">system service</a>►<a class="article-category-link" href="/categories/system-service/CentOS/">CentOS</a>►<a class="article-category-link" href="/categories/system-service/CentOS/linux-内存插槽-内存信息/">linux 内存插槽 内存信息</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/09/13/linux-内存插槽-内存信息/">linux 内存插槽 内存信息</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="linux-内存插槽-内存信息"><a href="#linux-内存插槽-内存信息" class="headerlink" title="linux 内存插槽 内存信息"></a>linux 内存插槽 内存信息</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">//查看内存插槽数</span><br><span class="line">dmidecode|grep &apos;Memory Device&apos;|wc -l</span><br><span class="line"></span><br><span class="line">//查看内存插槽上有几条内存</span><br><span class="line">dmidecode|grep -P -A5 &quot;Memory\s+Device&quot;|grep Size|grep -v Installed|wc -l</span><br><span class="line"></span><br><span class="line">//查看插槽上的内存大小</span><br><span class="line">dmidecode|grep -P -A5 &quot;Memory\s+Device&quot;|grep Size|grep -v Installed</span><br><span class="line"></span><br><span class="line">//查看最大支持内存数</span><br><span class="line">dmidecode|grep -P &apos;Maximum\s+Capacity&apos;</span><br><span class="line"></span><br><span class="line">//查看槽位上内存的速率,没插就是unknown</span><br><span class="line">dmidecode|grep -A16 &quot;Memory Device&quot;|grep &apos;Speed&apos;|grep -v Unknown</span><br><span class="line"></span><br><span class="line">//查看服务器机型</span><br><span class="line">dmidecode |grep -A 5 &quot;System Information&quot; |grep &quot;Product Name&quot;</span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.smallasa.com/2017/09/13/linux-内存插槽-内存信息/" data-id="cjazexzfw005jqcoqf70dw8wt" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-linux-物理CPU-CPU核数-逻辑CPU" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/09/13/linux-物理CPU-CPU核数-逻辑CPU/" class="article-date">
  <time datetime="2017-09-13T04:07:06.000Z" itemprop="datePublished">2017-09-13</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/system-service/">system service</a>►<a class="article-category-link" href="/categories/system-service/CentOS/">CentOS</a>►<a class="article-category-link" href="/categories/system-service/CentOS/linux-物理CPU-CPU核数-逻辑CPU/">linux 物理CPU CPU核数 逻辑CPU</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/09/13/linux-物理CPU-CPU核数-逻辑CPU/">linux 物理CPU CPU核数 逻辑CPU</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="linux-物理CPU-CPU核数-逻辑CPU"><a href="#linux-物理CPU-CPU核数-逻辑CPU" class="headerlink" title="linux 物理CPU CPU核数 逻辑CPU"></a>linux 物理CPU CPU核数 逻辑CPU</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">物理CPU:</span><br><span class="line">       物理服务器上中插槽上的CPU个数</span><br><span class="line">       物理cpu数量,可以统计&quot;/proc/cpuinfo&quot;中不重复的&quot;physical id&quot;:</span><br><span class="line">       统计: cat /proc/cpuinfo| grep &quot;physical id&quot;| sort| uniq| wc -l</span><br><span class="line"></span><br><span class="line">CPU核数:           </span><br><span class="line">       一块CPU上面能处理数据的芯片组的数量</span><br><span class="line">       一般来说,&quot;物理CPU个数&quot; × &quot;每颗核数&quot; 就应该等于逻辑CPU的个数,如果不相等的话,则表示服务器的CPU支持超线程技术</span><br><span class="line">       统计: cat /proc/cpuinfo| grep &quot;cpu cores&quot;| uniq</span><br><span class="line"></span><br><span class="line">逻辑CPU:               </span><br><span class="line">       &quot;/proc/cpuinfo&quot;用来存储cpu硬件信息,其中列出了&quot;processor N&quot;,N表示逻辑CPU数,从0开始</span><br><span class="line">       一般情况,我们认为一颗cpu可以有多核,加上intel的超线程技术(HT),可以在逻辑上再分一倍数量的cpu core出来</span><br><span class="line">       逻辑CPU数量=物理cpu数量 x cpu cores 这个规格值 x 2(如果支持并开启ht,有的是4)</span><br><span class="line">       统计:  cat /proc/cpuinfo| grep &quot;processor&quot;| wc -l         </span><br><span class="line"></span><br><span class="line">CPU型号: cat /proc/cpuinfo | grep name |cut -f2 -d:|sort|uniq</span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.smallasa.com/2017/09/13/linux-物理CPU-CPU核数-逻辑CPU/" data-id="cjazexzgc005pqcoqk11bm5r0" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-TCP与socket区别" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/09/13/TCP与socket区别/" class="article-date">
  <time datetime="2017-09-13T03:08:10.000Z" itemprop="datePublished">2017-09-13</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Development/">Development</a>►<a class="article-category-link" href="/categories/Development/Doc/">Doc</a>►<a class="article-category-link" href="/categories/Development/Doc/TCP与socket区别/">TCP与socket区别</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/09/13/TCP与socket区别/">TCP与socket区别</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="TCP与socket区别"><a href="#TCP与socket区别" class="headerlink" title="TCP与socket区别"></a>TCP与socket区别</h3><ol>
<li><p>网络中进程之间如何通信?</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">进程通信的概念最初来源于单机系统.</span><br><span class="line">由于每个进程都在自己的地址范围内运行,为保证两个相互通信的进程之间既互不干扰又协调一致工作,</span><br><span class="line">操作系统为进程通信提供了相应设施,如:</span><br><span class="line">* UNIX BSD有: 管道(pipe),命名管道(named pipe),软中断信号(signal)</span><br><span class="line">* UNIX system V有: 消息(message),共享存储区(shared memory)和信号量(semaphore)等</span><br><span class="line">注意,他们都仅限于用在本机进程之间通信!</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">网络间进程通信要解决的是不同主机进程间的相互通信问题:</span><br><span class="line">首先,要解决网络间进程标识问题.同一主机上,不同进程可用进程号唯一标识;不同主机上,各自独立分配的进程号不能唯一标识该进程</span><br><span class="line">其次,要解决网络进程间多重协议的识别问题.操作系统支持的网络协议众多,不同协议的工作方式不同,地址格式也不同</span><br><span class="line"></span><br><span class="line">以上两个问题,TCP/IP协议族已经帮我们解决了:</span><br><span class="line">网络层的&quot;ip地址&quot;可以唯一标识网络中的主机;传输层的&quot;协议+端口&quot;可以唯一标识主机中的应用程序(进程)</span><br><span class="line">这样利用三元组(ip地址,协议,端口)就可以标识网络进程了,网络中的进程通信就可以利用这个标志与其它进程进行交互</span><br><span class="line"></span><br><span class="line">使用TCP/IP协议的应用程序通常采用应用编程接口 &quot;UNIX BSD的套接字(socket)&quot; 和 &quot;UNIX System V的TLI(已被淘汰)&quot; 来实现网络进程之间的通信.就目前而言,几乎所有的应用程序都是采用socket,而现在又是网络时代,网络中进程通信是无处不在,这就是我为什么说&quot;一切皆socket&quot;</span><br></pre></td></tr></table></figure>
</li>
<li><p>Socket在TCP/IP模型中的位置</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">TCP/IP协议存在于系统中,网络服务通过系统提供,在系统中增加支持TCP/IP的系统调用---Berkeley套接字,如:Socket,Connect,Send,Recv等</span><br><span class="line"></span><br><span class="line">TCP/IP协议族包括应用层,传输层,网络层,数据链路层,Socket是 应用层 与 TCP/IP协议族 通信的中间软件抽象层</span><br><span class="line">如图:</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p><img src="TCP与socket区别/TCPIPsocket抽象层位置.jpg" alt="TCP/IP Socket抽象层位置"></p>
<ol>
<li><p>Socket是什么?</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">网络中的进程是通过socket来通信的,那什么是socket呢?</span><br><span class="line">Socket起源于UNIX,在Unix一切皆文件哲学的思想下.Socket可以用&quot;打开(open) –&gt; 读写(write/read) –&gt; 关闭(close)&quot;模式实现.服务器和客户端各自维护一个&quot;文件&quot;，在建立连接打开后，可以向自己文件写入内容供对方读取或者读取对方内容，通讯结束时关闭文件。</span><br><span class="line"></span><br><span class="line">通俗讲,Socket是应用层与TCP/IP协议族通信的中间软件抽象层,它是一组接口.在设计模式中,Socket其实就是一个门面模式,它把复杂的TCP/IP协议族隐藏在Socket接口后面,对用户来说,一组简单的接口就是全部,让Socket去组织数据,以符合指定的协议</span><br></pre></td></tr></table></figure>
</li>
<li><p>Socket通信流<br><img src="TCP与socket区别/Socket通信流.jpg" alt="Socket通信流"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><span class="line">* socket()函数</span><br><span class="line">  int socket(int domain, int type, int protocol);</span><br><span class="line"></span><br><span class="line">  Socket函数对应于普通文件的打开操作.</span><br><span class="line">  普通文件的打开操作返回一个文件描述字,而socket()函数用于创建一个socket描述符(socket descriptor),它唯一标识一个socket.这个socket描述字跟文件描述字一样,后续的操作都有用到它,把它作为参数,通过它来进行一些读写操作.</span><br><span class="line"></span><br><span class="line">  创建socket的时候,可以指定不同的参数创建不同的socket描述符</span><br><span class="line">  Socket函数的三个参数分别为:</span><br><span class="line">  * domain,即协议域,又称为协议族(family)</span><br><span class="line">    常用的协议族有: AF_INET,AF_INET6,AF_LOCAL(或称AF_UNIX,Unix域socket),AF_ROUTE等等</span><br><span class="line">    协议族决定了socket的地址类型,在通信中必须采用对应的地址,如: AF_INET决定了要用ipv4地址(32位的)与端口号(16位的)的组合;AF_UNIX决定了要用一个绝对路径名作为地址</span><br><span class="line">  * type,指定socket类型</span><br><span class="line">    常用的socket类型有: SOCK_STREAM,SOCK_DGRAM,SOCK_RAW,SOCK_PACKET,SOCK_SEQPACKET等等</span><br><span class="line">  * protocol,指定协议</span><br><span class="line">    常用的协议有: IPPROTO_TCP,IPPTOTO_UDP,IPPROTO_SCTP,IPPROTO_TIPC等,它们分别对应TCP传输协议,UDP传输协议,STCP传输协议,TIPC传输协议</span><br><span class="line">  注意: 上面的type和protocol并不可以随意组合的,如: SOCK_STREAM不可以跟IPPROTO_UDP组合;当protocol为0时,会自动选择type类型对应的默认协议</span><br><span class="line"></span><br><span class="line">  当我们调用socket创建一个socket时,返回的socket描述符存在于协议族(address family，AF_XXX)空间中,但没有一个具体的地址.如果想要给它赋值一个地址,就必须调用bind()函数,否则就当调用connect(),listen()时系统会自动随机分配一个端口</span><br><span class="line"></span><br><span class="line">* bind()函数</span><br><span class="line">  bind()函数把一个地址族中的特定地址赋给socket</span><br><span class="line">  例如,对应AF_INET,AF_INET6就是把一个ipv4或ipv6地址和端口号组合赋给socket</span><br><span class="line"></span><br><span class="line">  int bind(int sockfd, const struct sockaddr *addr, socklen_t addrlen);</span><br><span class="line">  函数的三个参数分别为:</span><br><span class="line">  * sockfd,即socket描述字</span><br><span class="line">    它是通过socket()函数创建了,唯一标识一个socket.bind()函数就是将给这个描述字绑定一个名字</span><br><span class="line">  * addr,一个const struct sockaddr *指针,指向要绑定给sockfd的协议地址</span><br><span class="line">    这个地址结构根据地址创建socket时的地址协议族的不同而不同</span><br><span class="line">  * addrlen：对应的是地址的长度</span><br><span class="line"></span><br><span class="line">  通常服务器在启动的时候都会绑定一个众所周知的地址(如ip地址+端口号),用于提供服务,客户就可以通过它来接连服务器.而客户端就不用指定,有系统自动分配一个端口号和自身的ip地址组合.这就是为什么通常服务器端在listen之前会调用bind(),而客户端就不会调用,而是在connect()时由系统随机生成一个</span><br><span class="line"></span><br><span class="line">* listen(),connect()函数</span><br><span class="line">  如果作为一个服务器,在调用socket(),bind()之后就会调用listen()来监听这个socket</span><br><span class="line">  如果客户端这时调用connect()发出连接请求,服务器端就会接收到这个请求</span><br><span class="line"></span><br><span class="line">  int listen(int sockfd, int backlog);</span><br><span class="line">  int connect(int sockfd, const struct sockaddr *addr, socklen_t addrlen);</span><br><span class="line"></span><br><span class="line">  listen()函数的第一个参数即为要监听的socket描述字,第二个参数为相应socket可以排队的最大连接个数</span><br><span class="line">  socket()函数创建的socket默认是一个主动类型的,listen函数将socket变为被动类型的,等待客户的连接请求</span><br><span class="line"></span><br><span class="line">  connect()函数的第一个参数即为客户端的socket描述字,第二参数为服务器的socket地址,第三个参数为socket地址的长度.</span><br><span class="line">  客户端通过调用connect函数来建立与TCP服务器的连接</span><br><span class="line"></span><br><span class="line">* accept()函数</span><br><span class="line">  TCP服务器端依次调用socket(),bind(),listen()之后,就会监听指定的socket地址了</span><br><span class="line">  TCP客户端依次调用socket(),connect()之后就向TCP服务器发送了一个连接请求,TCP服务器监听到这个请求之后,就会调用accept()函数取接收请求,这样就建立好了连接.之后就可以开始网络I/O操作了,即类同于普通文件的读写I/O操作</span><br><span class="line"></span><br><span class="line">  int accept(int sockfd, struct sockaddr *addr, socklen_t *addrlen);</span><br><span class="line"></span><br><span class="line">  accept()函数的第一个参数为服务器的socket描述字,第二个参数为指向struct sockaddr *的指针,用于返回客户端的协议地址,第三个参数为协议地址的长度.如果accpet成功,那么其返回值是由内核自动生成的一个全新的描述字,代表与返回客户的TCP连接</span><br><span class="line"></span><br><span class="line">  注意:</span><br><span class="line">  accept的第一个参数为服务器的socket描述字,是服务器开始调用socket()函数生成的,称为监听socket描述字,而accept函数返回的是已连接的socket描述字.</span><br><span class="line">  一个服务器通常通常仅仅只创建一个监听socket描述字,它在该服务器的生命周期内一直存在.内核为每个由服务器进程接受的客户连接创建了一个已连接socket描述字,当服务器完成了对某个客户的服务,相应的已连接socket描述字就被关闭.</span><br><span class="line"></span><br><span class="line">* read()、write()函数等</span><br><span class="line">  建立好连接后,可以调用网络I/O进行读写操作了,即实现了网络中不同进程之间的通信.</span><br><span class="line">  网络I/O操作有下面几组:</span><br><span class="line">  * read()/write()</span><br><span class="line">  * recv()/send()</span><br><span class="line">  * readv()/writev()</span><br><span class="line">  * recvmsg()/sendmsg()</span><br><span class="line">  * recvfrom()/sendto()</span><br><span class="line">  推荐使用&quot;recvmsg()/sendmsg()&quot;函数,这两个函数是最通用的I/O函数,实际上可以把上面的其它函数都替换成这两个函数</span><br><span class="line"></span><br><span class="line">  read()函数是负责从fd中读取内容.当读成功时,read返回实际所读的字节数,如果返回的值是0表示已经读到文件的结束了,小于0表示出现了错误.如果错误为EINTR说明读是由中断引起的,如果是ECONNREST表示网络连接出了问题.</span><br><span class="line">  write()函数将buf中的nbytes字节内容写入文件描述符fd.成功时返回写的字节数.失败时返回-1,并设置errno变量.在网络程序中,当我们向套接字文件描述符写时有俩种可能:一个是write的返回值大于0,表示写了部分或者是全部的数据;一个是返回的值小于0,此时出现了错误.我们要根据错误类型来处理.如果错误为EINTR表示在写的时候出现了中断错误;如果为EPIPE表示网络连接出现了问题(对方已经关闭了连接)</span><br><span class="line"></span><br><span class="line">* close()函数</span><br><span class="line">  在服务器与客户端建立连接之后,会进行一些读写操作,完成了读写操作就要关闭相应的socket描述字,好比操作完打开的文件要调用fclose关闭打开的文件</span><br><span class="line"></span><br><span class="line">  int close(int fd);</span><br><span class="line">  close一个TCP socket的缺省行为时把该socket标记为以关闭,然后立即返回到调用进程.该描述字不能再由调用进程使用,也就是说不能再作为read或write的第一个参数.</span><br><span class="line"></span><br><span class="line">  注意: close操作只是使相应socket描述字的引用计数减1,只有当引用计数为0的时候,才会触发TCP客户端向服务器发送终止连接请求</span><br></pre></td></tr></table></figure>
</li>
<li><p>TCP三次握手之Socket<br><img src="TCP与socket区别/TCP三次握手之Socket.jpg" alt="TCP三次握手之Socket"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">第一次,当客户端调用connect时,触发了连接请求,向服务器发送了&quot;SYN=1,Seq=J&quot;包,这时connect进入阻塞状态</span><br><span class="line">第二次,服务器监听到连接请求(即收到&quot;SYN=1,Seq=J&quot;包),调用accept函数接收请求并向客户端发送&quot;ACK=1,ack=J+1 SYN=1,Seq=K&quot;,这时accept进入阻塞状态.</span><br><span class="line">第三次,客户端收到服务器的&quot;ACK=1,ack=J+1 SYN=1,Seq=K&quot;之后,这时connect返回,并对&quot;SYN=1,Seq=K&quot;进行确认.服务器收到&quot;ACK=1,ack=K+1，Seq=J+1&quot;时,accept返回.至此三次握手完毕,连接建立</span><br><span class="line"></span><br><span class="line">综上,客户端的connect在三次握手的第二个次返回,而服务器端的accept在三次握手的第三次返回</span><br></pre></td></tr></table></figure>
</li>
<li><p>TCP四次挥手之Socket<br><img src="TCP与socket区别/TCP四次挥手之Socket.jpg" alt="TCP四次挥手之Socket"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">第一次,某个应用进程首先调用close主动关闭连接,这时TCP发送一个&quot;FIN=1 Seq=M&quot;,客户端进入FIN_WAIT_1</span><br><span class="line">第二次,服务端接收到&quot;FIN=1 Seq=M&quot;之后,执行被动关闭,并返回&quot;ACK=1,ack=M+1 Seq=V&quot;进行确认.它的接收也作为文件结束符传递给应用进程,因为FIN的接收意味着应用进程在相应的连接上再也接收不到额外数据.此时服务端进入CLOSE_WAIT</span><br><span class="line">第三次,一段时间之后,接收到文件结束符的应用进程调用close关闭它的socket.这导致它的TCP也发送一个&quot;ACK=1,ack=M+1,FIN=1,Seq=K&quot;,此时服务端进入LAST_WAIT</span><br><span class="line">第四次,客户端接收到这个&quot;ACK=1,ack=M+1,FIN=1,Seq=K&quot;后,进入TIME_WAIT,同时发送一个确认包&quot;ACK=1,ack=K+1，Seq=M+1&quot;给服务端,服务端进入CLOSE状态,完成四次挥手.</span><br><span class="line"></span><br><span class="line">综上,客户端和服务端两边都会有一个FIN和ACK</span><br></pre></td></tr></table></figure>
</li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.smallasa.com/2017/09/13/TCP与socket区别/" data-id="cjazexzap000zqcoqns72nty5" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-TCP-协议详解" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/09/12/TCP-协议详解/" class="article-date">
  <time datetime="2017-09-12T10:03:37.000Z" itemprop="datePublished">2017-09-12</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Development/">Development</a>►<a class="article-category-link" href="/categories/Development/Doc/">Doc</a>►<a class="article-category-link" href="/categories/Development/Doc/TCP-协议详解/">TCP 协议详解</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/09/12/TCP-协议详解/">TCP 协议详解</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="TCP-协议详解"><a href="#TCP-协议详解" class="headerlink" title="TCP 协议详解"></a>TCP 协议详解</h3><ol>
<li><p>为什么会有TCP/IP协议</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">在世界上各地,各种各样的电脑运行着各自不同的操作系统为人提供服务,这些电脑在表达同一种信息的时候所使用的方法是千差万别.计算机使用者意识到,计算机只是单兵作战并不会发挥太大的作用,只有把它们联合起来,电脑才会发挥出它最大的潜力.于是人们就想方设法的用电线把电脑连接到了一起.但简单的连到一起是远远不够的,就好像语言不同的两个人互相见了面,完全不能交流信息.因此他们需要定义一些共通的东西来进行交流,TCP/IP就是为此而生</span><br><span class="line"></span><br><span class="line">TCP/IP不是一个协议,而是一个协议族的统称.里面包含的协议:</span><br><span class="line">应用层: TFTP,HTTP,SNMP,FTP,SMTP,DNS,Telnet等等</span><br><span class="line">传输层: TCP,UDP</span><br><span class="line">网络层: IP,ICMP,OSPF,EIGRP,IGMP</span><br><span class="line">数据链路层: SLIP,CSLIP,PPP,MTU</span><br></pre></td></tr></table></figure>
</li>
<li><p>TCP/IP协议分层<br><img src="TCP-协议详解/TCPIP协议分层.jpg" alt="TCP/IP协议分层"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">TCP/IP协议族按照层次由上到下,层层包装:</span><br><span class="line">* 应用层</span><br><span class="line">  向用户提供一组常用的应用程序,比如: 电子邮件,文件传输访问,远程登录等</span><br><span class="line">* 传输层</span><br><span class="line">  提供应用程序间的通信.其功能包括:</span><br><span class="line">  1.格式化信息流</span><br><span class="line">  2.提供可靠传输</span><br><span class="line">  为实现后者,传输层协议规定接收端必须发回确认,并且假如分组丢失,必须重新发送</span><br><span class="line">* 网络层</span><br><span class="line">  负责相邻计算机之间的通信.其功能包括三方面:</span><br><span class="line">  1.处理来自传输层的分组发送请求,收到请求后,将分组装入IP数据报,填充报头,选择去往信宿机的路径,然后将数据报发往适当的网络接口</span><br><span class="line">  2.处理输入数据报,首先检查其合法性,然后进行寻径</span><br><span class="line">    假如该数据报已到达信宿机,则去掉报头,将剩下部分交给适当的传输协议</span><br><span class="line">    假如该数据报尚未到达信宿,则转发该数据报</span><br><span class="line">  3.处理路径,流控,拥塞等问题</span><br><span class="line">* 网络接口层</span><br><span class="line">  这是TCP/IP软件的最低层,负责接收IP数据报并通过网络发送之,或者从网络上接收物理帧,抽出IP数据报,交给IP层</span><br></pre></td></tr></table></figure>
</li>
<li><p>IP是无连接的</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">IP用于计算机之间的通信</span><br><span class="line"></span><br><span class="line">IP是无连接的通信协议.它不会占用两个正在通信的计算机之间的通信线路.这样,IP就降低了对网络线路的需求.每条线可以同时满足许多不同的计算机之间的通信需要.通过IP,消息(或者其他数据)被分割为小的独立的包,并通过因特网在计算机之间传送</span><br><span class="line"></span><br><span class="line">IP负责将每个包路由至它的目的地</span><br></pre></td></tr></table></figure>
</li>
<li><p>IP地址</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">每个计算机必须有一个IP地址才能够连入因特网.每个IP包必须有一个地址才能够发送到另一台计算机</span><br><span class="line"></span><br><span class="line">网络上每一个节点都必须有一个独立的Internet地址(也叫做IP地址).现在,通常使用的IP地址是一个32bit的数字,也就是我们常说的IPv4标准,这32bit的数字分成四组,也就是常见的255.255.255.255的样式.IPv4标准上,地址被分为五类,我们常用的是B类地址.需要注意的是IP地址是&quot;网络号+主机号&quot;的组合,这非常重要</span><br><span class="line"></span><br><span class="line">TCP/IP使用32个比特来编址.一个计算机字节是8比特.所以TCP/IP使用了4个字节</span><br><span class="line">一个计算机字节可以包含256个不同的值:</span><br><span class="line">00000000,00000001,00000010,00000011,00000100......11111111</span><br><span class="line">现在,你知道了为什么TCP/IP地址是介于0到255之间的4个数字</span><br></pre></td></tr></table></figure>
</li>
<li><p>TCP 使用固定的连接</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">TCP用于应用程序之间的通信</span><br><span class="line"></span><br><span class="line">当应用程序希望通过TCP与另一个应用程序通信时,它会发送一个通信请求.这个请求必须被送到一个确切的地址.在双方&quot;握手&quot;之后,TCP将在两个应用程序之间建立一个全双工(full-duplex)的通信</span><br><span class="line"></span><br><span class="line">这个全双工的通信将占用两个计算机之间的通信线路,直到它被一方或双方关闭为止</span><br><span class="line"></span><br><span class="line">UDP和TCP很相似,但是更简单,同时可靠性低于TCP</span><br></pre></td></tr></table></figure>
</li>
<li><p>IP 路由器</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">当一个IP包从一台计算机被发送,它会到达一个IP路由器</span><br><span class="line">IP路由器负责将这个包路由至它的目的地,直接地或者通过其他的路由器.</span><br><span class="line">在一个相同的通信中,一个包所经由的路径可能会和其他的包不同.而路由器负责根据通信量,网络中的错误或者其他参数来进行正确地寻址</span><br></pre></td></tr></table></figure>
</li>
<li><p>域名</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">12个阿拉伯数字很难记忆.使用一个名称更容易.</span><br><span class="line">用于TCP/IP地址的名字被称为域名.例如: www.baidu.com</span><br><span class="line"></span><br><span class="line">当你在浏览器输入&quot;http://www.baidu.com&quot;,并按下回车键后,域名会被一种DNS程序翻译为IP地址</span><br><span class="line">在全世界,数量庞大的DNS服务器被连入因特网.DNS服务器负责将域名翻译为TCP/IP地址,同时负责使用新的域名信息更新彼此的系统.当一个新的域名连同其TCP/IP地址一同注册后,全世界的DNS服务器都会对此信息进行更新</span><br></pre></td></tr></table></figure>
</li>
<li><p>TCP/IP</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">TCP/IP 意味着TCP和IP在一起协同工作</span><br><span class="line">TCP负责应用软件和网络软件之间的通信;IP负责计算机之间的通信</span><br><span class="line">TCP负责将数据分割并装入IP包,然后在它们到达的时候重新组合它们;IP负责将包发送至接受者</span><br></pre></td></tr></table></figure>
</li>
<li><p>TCP报文格式<br><img src="TCP-协议详解/TCP报文格式.jpg" alt="TCP报文格式"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line">* 16位源端口号 和 16位目标端口号</span><br><span class="line">  16位的源端口占用2个字节(1个字节占用8位)</span><br><span class="line">  端口是传输层与应用层的服务接口,传输层的复用和分用功能都需要通过端口才能实现</span><br><span class="line"></span><br><span class="line">* 32位序列号</span><br><span class="line">  32位序列号占用四个字节</span><br><span class="line">  TCP连接中传送的数据流中,当SYN出现,序列码实际上是初始序列码(Initial Sequence Number,ISN),而第一个数据字节是ISN+1.这个序列号(序列码)可用来补偿传输中的不一致</span><br><span class="line"></span><br><span class="line">* 32位确认序号</span><br><span class="line">  32位确认序号占用四个字节</span><br><span class="line">  32位的序列号是期望收到对方的下一个报文段的数据的第一个字节的序号,</span><br><span class="line">  如果设置了ACK控制位,这个值表示一个准备接收的包的序列码</span><br><span class="line"></span><br><span class="line">* 4位数据偏移(首部长度)</span><br><span class="line">  4位数据偏移(首部长度)占用1个字节</span><br><span class="line">  4位包括TCP头大小,指示何处数据开始</span><br><span class="line"></span><br><span class="line">* 6位保留</span><br><span class="line">  6位保留为了将来定义新的用途而保留,目前设置为0</span><br><span class="line"></span><br><span class="line">* 标志</span><br><span class="line">  6位标志域:</span><br><span class="line">  URG 紧急标志,当URG=1时,表明紧急指针字段有效.它告诉系统此报文段中有紧急数据,应尽快传送(相当于高优先级的数据)</span><br><span class="line">  ACK 有意义的应答标志,只有当ACK=1时确认号字段才有效,当ACK=0时,确认号无效</span><br><span class="line">  PSH 推,TCP接收到PSH=1的报文段,就尽快地交付接收应用进程,而不再等到整个缓存都填满了后再向上交付</span><br><span class="line">  RST 重置连接标志,当RST=1时,表明TCP连接中出现严重差错,必须释放连接,然后再重新建立运输连接</span><br><span class="line">  SYN 同步序列号标志,当SYN=1表示这是一个连接请求或连接接受报文</span><br><span class="line">  FIN 完成发送数据标志,当FIN=1表明此报文段的发送端的数据已发送完毕,并要求释放连接</span><br><span class="line"></span><br><span class="line">* 16位窗口大小</span><br><span class="line">  用来表示想收到的每个TCP数据段的大小.TCP的流量控制由连接的每一端通过声明的窗口大小来提供.窗口大小为字节数,起始于确认序号字段指明的值,这个值是接收端正期望接收的字节.窗口大小是一个16字节字段,因而窗口大小最大为65535字节</span><br><span class="line"></span><br><span class="line">* 16位校验和</span><br><span class="line">  16位TCP头.源机器基于数据内容计算一个数值,收信息机要与源机器数值结果完全一样,从而证明数据的有效性.检验和覆盖了整个的TCP报文段:这是一个强制性的字段,一定是由发送端计算和存储,并由接收端进行验证的</span><br><span class="line"></span><br><span class="line">* 16位紧急指针</span><br><span class="line">  指向后面是优先数据的字节,在URG标志设置了时才有效</span><br><span class="line">  如果URG标志没有被设置,紧急域作为填充.加快处理标示为紧急的数据段</span><br><span class="line"></span><br><span class="line">* 选项</span><br><span class="line">  长度不定,但长度必须为1个字节.如果没有选项就表示这个1字节的域等于0</span><br><span class="line"></span><br><span class="line">* 数据</span><br><span class="line">  该TCP协议包负载的数据</span><br><span class="line"></span><br><span class="line">六位标志域的各个选项功能如下:</span><br><span class="line">URG: 紧急标志.紧急标志为&quot;1&quot;表明该位有效</span><br><span class="line">ACK: 确认标志.表明确认编号栏有效.大多数情况下该标志位是置位的.TCP报头内的确认编号栏内包含的确认编号(w+1)为下一个预期的序列编号,同时提示远端系统已经成功接收所有数据</span><br><span class="line">PSH: 推标志.该标志置位时,接收端不将该数据进行队列处理,而是尽可能快地将数据转由应用处理.在处理Telnet或rlogin等交互模式的连接时,该标志总是置位的</span><br><span class="line">RST: 复位标志.用于复位相应的TCP连接</span><br><span class="line">SYN: 同步标志.表明同步序列编号栏有效.该标志仅在三次握手建立TCP连接时有效.它提示TCP连接的服务端检查序列编号,该序列编号为TCP连接初始端的初始序列编号.在这里,可以把TCP序列编号看作是一个范围从0到4,294,967,295的32位计数器.通过TCP连接交换的数据中每一个字节都经过序列编号.在TCP报头中的序列编号栏包括了TCP分段中第一个字节的序列编号</span><br><span class="line">FIN: 结束标志</span><br></pre></td></tr></table></figure>
</li>
<li><p>TCP三次握手<br><img src="TCP-协议详解/TCP三次握手.jpg" alt="TCP三次握手"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">第一次握手: Client将标志位SYN置为1,随机产生一个值seq=J,并将该数据包发送给Server,Client进入SYN_SENT状态,等待Server确认</span><br><span class="line">第二次握手: Server收到数据包后,由标志位SYN=1知道Client请求建立连接,Server将标志位ACK设置为1,ack设置为J+1,将标志位SYN设置为1,并随机产生一个值seq=K,Server将该数据包发送给Client以确认连接请求,Server进入SYN_RCVD状态</span><br><span class="line">第三次握手: Client收到确认后,检查ack是否为J+1,ACK是否为1.如果正确则将标志位ACK置为1,ack=K+1,并将该数据包发送给Server.Server检查ack是否为K+1,ACK是否为1,如果正确则连接建立成功.Client和Server进入ESTABLISHED状态,完成三次握手,随后Client与Server之间可以开始传输数据了</span><br><span class="line"></span><br><span class="line">SYN攻击:</span><br><span class="line">在三次握手过程中,Server发送SYN-ACK之后,收到Client的ACK之前的TCP连接称为半连接(half-open connect),此时Server处于SYN_RCVD状态,当收到ACK后,Server转入ESTABLISHED状态.SYN攻击就是Client在短时间内伪造大量不存在的IP地址,并向Server不断地发送SYN包,Server回复确认包,并等待Client的确认,由于源地址是不存在的,因此Server需要不断重发直至超时,这些伪造的SYN包将长时间占用未连接队列,导致正常的SYN请求因为队列满而被丢弃,从而引起网络堵塞甚至系统瘫痪.SYN攻击时一种典型的DDOS攻击,检测SYN攻击的方式非常简单,即当Server上有大量半连接状态且源IP地址是随机的,则可以断定遭到SYN攻击了,使用如下命令可以让之现行: netstat -nap | grep SYN_RECV</span><br></pre></td></tr></table></figure>
</li>
<li><p>TCP四次挥手<br><img src="TCP-协议详解/TCP四次挥手.jpg" alt="TCP报文格式"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">四次挥手(Four-Way Wavehand),即终止TCP连接,就是指断开一个TCP连接时,需要客户端和服务端总共发送4个包以确认连接的断开.在socket编程中,这一过程由客户端或服务端任一方执行close来触发.</span><br><span class="line"></span><br><span class="line">由于TCP连接时全双工的,因此每个方向都必须要单独进行关闭.这一原则是当一方完成数据发送任务后,发送一个FIN来终止这一方向的连接,收到一个FIN只是意味着这一方向上没有数据流动了,即不会再收到数据了.但是在这个TCP连接上仍然能够发送数据,直到这一方向也发送了FIN.首先进行关闭的一方将执行主动关闭,而另一方则执行被动关闭.</span><br><span class="line"></span><br><span class="line">第一次挥手: Client发送一个&quot;FIN M&quot;,用来关闭Client到Server的数据传送,Client进入FIN_WAIT_1状态</span><br><span class="line">第二次挥手: Server收到&quot;FIN M&quot;后,发送一个&quot;ACK=1,ack=M+1&quot;给Client,确认序号为&quot;M+1&quot;,Server进入CLOSE_WAIT状态,client进入FIN_WAIT_2状态</span><br><span class="line">第三次挥手: Server发送一个&quot;FIN N&quot;,用来关闭Server到Client的数据传送,Server进入LAST_ACK状态</span><br><span class="line">第四次挥手: Client收到&quot;FIN N&quot;后,Client进入TIME_WAIT状态,接着发送一个&quot;ACK=1,ack=N+1&quot;给Server,确认序号为&quot;N+1&quot;,Server进入CLOSED状态,完成四次挥手</span><br></pre></td></tr></table></figure>
</li>
<li><p>TCP 三次握手 和 四次挥手问题</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">问题一: 为什么建立连接是三次握手,而关闭连接却是四次挥手呢?</span><br><span class="line">解答:</span><br><span class="line">这是因为服务端在LISTEN状态下,收到建立连接请求的SYN报文后,把ACK和SYN放在一个报文里发送给客户端.而关闭连接时,当收到对方的FIN报文时,仅仅表示对方不再发送数据了但是还能接收数据,己方也未必全部数据都发送给对方了,所以己方可以立即close,也可以发送一些数据给对方后,再发送FIN报文给对方来表示同意现在关闭连接,因此,己方ACK和FIN一般都会分开发送</span><br><span class="line"></span><br><span class="line">问题二: 为什么TIME_WAIT状态需要经过2MSL(最大报文段生存时间)才能返回到CLOSE状态?</span><br><span class="line">解答:</span><br><span class="line">原因一: 保证TCP协议的全双工连接能够可靠关闭</span><br><span class="line">原因二: 保证这次连接的重复数据段从网络中消失</span><br><span class="line"></span><br><span class="line">先说原因一,如果Client直接CLOSED了,那么由于IP协议的不可靠性或者是其它网络原因,导致Server没有收到Client最后回复的ACK.那么Server就会在超时之后继续发送FIN,此时由于Client已经CLOSED了,就找不到与重发的FIN对应的连接,最后Server就会收到RST而不是ACK,Server就会以为是连接错误把问题报告给高层.这样的情况虽然不会造成数据丢失,但是却导致TCP协议不符合可靠连接的要求.所以,Client不是直接进入CLOSED,而是要保持TIME_WAIT,当再次收到FIN的时候,能够保证对方收到ACK,最后正确的关闭连接</span><br><span class="line"></span><br><span class="line">再说原因二,如果Client直接CLOSED,然后又再向Server发起一个新连接,我们不能保证这个新连接与刚关闭的连接的端口号是不同的.也就是说有可能新连接和老连接的端口号是相同的.一般来说不会发生什么问题,但是还是有特殊情况出现:假设新连接和已经关闭的老连接端口号是一样的,如果前一次连接的某些数据仍然滞留在网络中,这些延迟数据在建立新连接之后才到达Server,由于新连接和老连接的端口号是一样的,又因为TCP协议判断不同连接的依据是socket pair,于是,TCP协议就认为那个延迟的数据是属于新连接的,这样就和真正的新连接的数据包发生混淆了.所以TCP连接还要在TIME_WAIT状态等待2倍MSL,这样可以保证本次连接的所有数据都从网络中消失</span><br></pre></td></tr></table></figure>
</li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.smallasa.com/2017/09/12/TCP-协议详解/" data-id="cjazexzap000wqcoqz5wl3xr3" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-linux-磁盘系统block区别" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/09/11/linux-磁盘系统block区别/" class="article-date">
  <time datetime="2017-09-11T11:10:11.000Z" itemprop="datePublished">2017-09-11</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/system-service/">system service</a>►<a class="article-category-link" href="/categories/system-service/CentOS/">CentOS</a>►<a class="article-category-link" href="/categories/system-service/CentOS/linux-磁盘系统block区别/">linux 磁盘系统block区别</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/09/11/linux-磁盘系统block区别/">linux 磁盘系统block区别</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="linux磁盘block和系统block区别"><a href="#linux磁盘block和系统block区别" class="headerlink" title="linux磁盘block和系统block区别"></a>linux磁盘block和系统block区别</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">磁盘里面和文件系统里面都有一个叫&quot;block size&quot;的值,但它们的大小不一定一样.</span><br><span class="line">磁盘里面一般都是512bytes;文件系统里面的不一定也是512bytes,一般是1024bytes</span><br><span class="line"></span><br><span class="line">例如:</span><br><span class="line">[root@dev ~]# fdisk -l /dev/vda</span><br><span class="line">Disk /dev/vda: 21.5 GB, 21474836480 bytes, 41943040 sectors</span><br><span class="line">Units = sectors of 1 * 512 = 512 bytes   # 512 表示单个磁盘 block 是 512字节</span><br><span class="line">Sector size (logical/physical): 512 bytes / 512 bytes</span><br><span class="line">I/O size (minimum/optimal): 512 bytes / 512 bytes</span><br><span class="line">Disk label type: dos</span><br><span class="line">Disk identifier: 0x0009d5a6</span><br><span class="line"></span><br><span class="line">   Device Boot      Start         End      Blocks   Id  System</span><br><span class="line">/dev/vda1   *        2048     1026047      512000   83  Linux</span><br><span class="line">/dev/vda2         1026048    41943039    20458496   8e  Linux LVM</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">[root@dev ~]# tune2fs -l /dev/vda1 |grep &quot;Block size&quot;</span><br><span class="line">Block size:               1024</span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.smallasa.com/2017/09/11/linux-磁盘系统block区别/" data-id="cjazexzgc005qqcoq6d3aif14" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  


  <nav id="page-nav">
    
    <a class="extend prev" rel="prev" href="/page/3/">&laquo; 上一页</a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><span class="page-number current">4</span><a class="page-number" href="/page/5/">5</a><a class="page-number" href="/page/6/">6</a><span class="space">&hellip;</span><a class="page-number" href="/page/29/">29</a><a class="extend next" rel="next" href="/page/5/">下一页 &raquo;</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">分类</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/AliCloud/">AliCloud</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/AliCloud/SDK/">SDK</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/AliCloud/SDK/Python-SDK/">Python SDK</a></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Android/">Android</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Android/Android-install/">Android install</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Android/Android-install/Android-studio-install/">Android studio install</a></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Development/">Development</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Development/Doc/">Doc</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Development/Doc/HTTP-严格传输安全HSTS/">HTTP 严格传输安全HSTS</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Development/Doc/HTTP协议/">HTTP协议</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Development/Doc/TCP-协议详解/">TCP 协议详解</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Development/Doc/TCP与socket区别/">TCP与socket区别</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Development/Doc/linux-文件描述符与打开文件之间的关系/">linux 文件描述符与打开文件之间的关系</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Development/Doc/linux-文件系统inode/">linux 文件系统inode</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Development/Doc/一次完整的HTTP请求/">一次完整的HTTP请求</a></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Disk/">Disk</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Disk/disk-io-performance/">disk io performance</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Disk/disk-iostat/">disk iostat</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Distributed-storage/">Distributed storage</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Distributed-storage/GlusterFS/">GlusterFS</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Distributed-storage/GlusterFS/GlusterFS-architecture/">GlusterFS architecture</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Distributed-storage/GlusterFS/GlusterFS-info/">GlusterFS info</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Distributed-storage/GlusterFS/GlusterFS-install/">GlusterFS install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Distributed-storage/GlusterFS/GlusterFS-workflow/">GlusterFS workflow</a></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Domain/">Domain</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Domain/nslookup-dns-search/">nslookup dns search</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/HA/">HA</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/HA/DRBD/">DRBD</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/HA/DRBD/DRBD-install/">DRBD install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/HA/keepalived/">keepalived</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/HA/keepalived/keepalived-install/">keepalived install</a></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/IDE/">IDE</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/IDE/Intellij/">Intellij</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/IDE/Intellij/Intellij-setting/">Intellij setting</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/IDE/vim/">vim</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/IDE/vim/vim-shortcut-key/">vim shortcut key</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/IDE/vim/vim-vimrc/">vim vimrc</a></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Kernel/">Kernel</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Kernel/kernel-memory/">kernel memory</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Kernel/kernel-memory/kernel-共享内存/">kernel 共享内存</a></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/">Monitor</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/ganglia/">ganglia</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/ganglia/ganglia-install/">ganglia install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/hmonitor/">hmonitor</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/hmonitor/hmonitor-install/">hmonitor install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/htmonitor/">htmonitor</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/htmonitor/htmonitor-install/">htmonitor install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/smokeping/">smokeping</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/smokeping/smokeping-install/">smokeping install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/zabbix/">zabbix</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/zabbix/monitor/">monitor</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/zabbix/monitor/zabbix-monitor-cpu/">zabbix monitor cpu</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/zabbix/monitor/zabbix-monitor-mem/">zabbix monitor mem</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/zabbix/zabbix-auto-discover/">zabbix auto discover</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/zabbix/zabbix-grafana-install/">zabbix grafana install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/zabbix/zabbix-install/">zabbix install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/zabbix/zabbix-install-distributed/">zabbix install distributed</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/zabbix/zabbix-item-and-tigger/">zabbix item and tigger</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/zabbix/zabbix-java-gateway/">zabbix java gateway</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/zabbix/zabbix-modify-login-user-passwd/">zabbix modify login user passwd</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/zabbix/zabbix-optimization/">zabbix optimization</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/zabbix/zabbix-proxy-install/">zabbix proxy install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/zabbix/zabbix-server-support-chinese/">zabbix server support chinese</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/zabbix/zabbix-windows-agent/">zabbix windows agent</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/树莓派/">树莓派</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/树莓派/树莓派-GSM-语音短信报警/">树莓派 GSM 语音短信报警</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/监控/">监控</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/监控/监控知识体系/">监控知识体系</a></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/">Python</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-Framework/">Python Framework</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-Framework/Python-Django/">Python Django</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-Framework/Python-Django-setting/">Python Django setting</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-Framework/Python-tornado-install/">Python tornado install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-Learn/">Python Learn</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-Learn/python-上下文管理器/">python 上下文管理器</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-Learn/python-内存管理/">python 内存管理</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-Learn/python-函数编程/">python 函数编程</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-Learn/python-变量/">python 变量</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-Learn/python-对象使用/">python 对象使用</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-Learn/python-对象的属性/">python 对象的属性</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-Learn/python-对象编程/">python 对象编程</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-Learn/python-数据类型/">python 数据类型</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-Learn/python-流程控制/">python 流程控制</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-Learn/python-爬虫/">python 爬虫</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-Learn/python-特殊方法/">python 特殊方法</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-Learn/python-特殊说明/">python 特殊说明</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-Learn/python-装饰器/">python 装饰器</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-Learn/python-过程编程/">python 过程编程</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-Learn/python-进阶/">python 进阶</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-Learn/python-闭包/">python 闭包</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-install/">Python install</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-install/python-error-info/">python error info</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-install/python-pip-source-image/">python pip source image</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-install/python-pip-use/">python pip use</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-install/python-pyenv-install/">python pyenv install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-install/python-setup-py/">python setup.py</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-install/python-source-install/">python source install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-install/python-virtualenv/">python virtualenv</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-library/">Python library</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-library/MySQLdb/">MySQLdb</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-library/memory-profiler/">memory_profiler</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-library/time-datetime-calendar/">time datetime calendar</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-modules/">Python modules</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-modules/python-modules-path/">python modules path</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-modules/python-modules-pylint-and-ipython/">python modules pylint and ipython</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-other/">Python other</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-other/python-import-and-reload/">python import and reload</a></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Ruby/">Ruby</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Ruby/Ruby-install/">Ruby install</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Ruby/Ruby-install/Ruby-install/">Ruby install</a></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/TCP-IP/">TCP.IP</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/TCP-IP/TCP-状态/">TCP 状态</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/TCP-IP/TCP-IP模型/">TCP/IP模型</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/TCP-IP/Wireshark-use/">Wireshark use</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/WeChat/">WeChat</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/WeChat/WeChat-enterprise/">WeChat enterprise</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/WeChat/WeChat-enterprise/WeChat-enterprise-API/">WeChat enterprise API</a></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/">automation</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/automation/git/">git</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/automation/git/git-command/">git command</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/git/git-error/">git error</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/git/git-gitlab/">git gitlab</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/git/git-gitolite/">git gitolite</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/git/git-gogs/">git gogs</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/git/git-gogs-source-install/">git gogs source install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/git/git-init/">git init</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/git/git-workflow/">git workflow</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/jenkins/">jenkins</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/automation/jenkins/jenkins-info/">jenkins info</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/jenkins/jenkins-install/">jenkins install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/kvm/">kvm</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/automation/kvm/kvm-install/">kvm install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/maven/">maven</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/automation/maven/maven-install/">maven install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/nexus/">nexus</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/automation/nexus/nexus-install/">nexus install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/nexus/nexus-proxy-maven/">nexus proxy maven</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/rpm/">rpm</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/automation/rpm/rpm-package-build/">rpm package build</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/rpm/rpmbuild-spec/">rpmbuild spec</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/salt/">salt</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/automation/salt/salt-advanced-topic/">salt advanced topic</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/salt/salt-highstate/">salt highstate</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/salt/salt-info/">salt info</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/salt/salt-install/">salt install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/salt/salt-install-HA/">salt install HA</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/salt/salt-install-distributed/">salt install distributed</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/salt/salt-install-standard/">salt install standard</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/salt/salt-jinja2-grain-pillar-module/">salt jinja2 grain pillar module</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/salt/salt-manage-event-reactor/">salt manage event reactor</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/salt/salt-manage-grains/">salt manage grains</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/salt/salt-manage-job/">salt manage job</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/salt/salt-manage-module/">salt manage module</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/salt/salt-manage-pillar/">salt manage pillar</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/salt/salt-manage-return/">salt manage return</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/salt/salt-manage-states/">salt manage states</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/salt/salt-manage-target/">salt manage target</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/salt/salt-master-syndic-install/">salt master syndic install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/salt/salt-master-conf/">salt master.conf</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/salt/salt-minion-conf/">salt minion.conf</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/salt/salt-raet/">salt raet</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/salt/salt-state-module/">salt state module</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/salt/salt-syndic-conf/">salt syndic.conf</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/salt/salt-write-module-code/">salt write module code</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/svn/">svn</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/automation/svn/svn-auto-update/">svn auto update</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/svn/svn-checkout-bat/">svn checkout bat</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/svn/svn-server-for-windows/">svn server for windows</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/yum/">yum</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/automation/yum/yum-server-install/">yum server install</a></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/">database</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/database/Mongo/">Mongo</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/database/Mongo/mongo-auth/">mongo auth</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Mongo/mongo-error/">mongo error</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Mongo/mongo-replication-auth-install/">mongo replication auth install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Mongo/mongo-replication-standard-install/">mongo replication standard install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Mongo/mongo-standard-install/">mongo standard install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Mysql/">Mysql</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/database/Mysql/mysql-command/">mysql command</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Mysql/mysql-error-info/">mysql error info</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Mysql/mysql-explain/">mysql explain</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Mysql/mysql-grant/">mysql grant</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Mysql/mysql-index-options/">mysql index options</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Mysql/mysql-innodb-buffer-pool-flush/">mysql innodb buffer pool flush</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Mysql/mysql-master-slave/">mysql master slave</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Mysql/mysql-master-slave-switch/">mysql master slave switch</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Mysql/mysql-partition/">mysql partition</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Mysql/mysql-select-join/">mysql select join</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Mysql/mysql-slow-log/">mysql slow log</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Mysql/mysql-standard/">mysql standard</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Mysql/mysql-table-size/">mysql table size</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Mysql/mysql-use-memory-as-disk/">mysql use memory as disk</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Postgresql/">Postgresql</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/database/Postgresql/postgresql-book-use/">postgresql book use</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Postgresql/postgresql-master-slave-info/">postgresql master slave info</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Postgresql/postgresql-master-slave/">postgresql master/slave</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Postgresql/postgresql-plugin-install/">postgresql plugin install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Postgresql/postgresql-standard/">postgresql standard</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Postgresql/postgresql-tablespace-database-schema-table-user-role-relation/">postgresql tablespace database schema table user role relation</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Postgresql/postgresql-yum-install/">postgresql yum install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Postgresql/postgresql-常用命令/">postgresql 常用命令</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Postgresql/postgresql-数据库对象/">postgresql 数据库对象</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Postgresql/postgresql-数据库管理/">postgresql 数据库管理</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Redis/">Redis</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/database/Redis/redis-error/">redis error</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Redis/redis-install/">redis install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Redis/redis-redis-trib-rb/">redis redis-trib.rb</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Redis/redis-status/">redis status</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Redis/redis-use/">redis use</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/influxDB/">influxDB</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/database/influxDB/influxDB-install/">influxDB install</a></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/golang/">golang</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/golang/go-env/">go env</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/">hadoop</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/RabbitMQ/">RabbitMQ</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/RabbitMQ/RabbitMQ-cluster/">RabbitMQ cluster</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/RabbitMQ/RabbitMQ-high-availability/">RabbitMQ high availability</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/RabbitMQ/RabbitMQ-info/">RabbitMQ info</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/RabbitMQ/RabbitMQ-install/">RabbitMQ install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/RabbitMQ/RabbitMQ-python-pika/">RabbitMQ python pika</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/RabbitMQ/RabbitMQ-user-and-grant/">RabbitMQ user and grant</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/RabbitMQ/RabbitMQ-working-principle/">RabbitMQ working principle</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/beats/">beats</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/beats/beats-install/">beats install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/datax/">datax</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/datax/datax-info/">datax info</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/datax/datax-install/">datax install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/datax/datax-job/">datax job</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/elasticsearch/">elasticsearch</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/elasticsearch/elasticsearch-backup-and-restore/">elasticsearch backup and restore</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/elasticsearch/elasticsearch-command/">elasticsearch command</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/elasticsearch/elasticsearch-core-component/">elasticsearch core component</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/elasticsearch/elasticsearch-exploring-your-cluster/">elasticsearch exploring your cluster</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/elasticsearch/elasticsearch-exploring-your-data/">elasticsearch exploring your data</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/elasticsearch/elasticsearch-four-search-type/">elasticsearch four search type</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/elasticsearch/elasticsearch-full-cluster-restart-upgrade/">elasticsearch full cluster restart upgrade</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/elasticsearch/elasticsearch-install/">elasticsearch install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/elasticsearch/elasticsearch-modifying-your-data/">elasticsearch modifying your data</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/elasticsearch/elasticsearch-rolling-upgrades/">elasticsearch rolling upgrades</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/elasticsearch/elasticsearch-safe-restart/">elasticsearch safe restart</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/elasticsearch/elasticsearch-shard/">elasticsearch shard</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/elasticsearch/how-to-tune-for-indexing-speed/">how to tune for indexing speed</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/elasticsearch/how-to-tune-for-search-speed/">how to tune for search speed</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/flume/">flume</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/flume/flume-info/">flume info</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/flume/flume-install/">flume install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/grafana/">grafana</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/grafana/grafana-install/">grafana install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/hadoop/">hadoop</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/hadoop/hadoop-简介/">hadoop 简介</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/kafka/">kafka</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/kafka/kafka-add-topic-partition/">kafka add topic partition</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/kafka/kafka-add-topic-replicats/">kafka add topic replicats</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/kafka/kafka-broker-config/">kafka broker config</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/kafka/kafka-high-throughput/">kafka high throughput</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/kafka/kafka-info/">kafka info</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/kafka/kafka-install/">kafka install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/kafka/kafka-manage-web/">kafka manage web</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/kafka/kafka-migrate-and-scale/">kafka migrate and scale</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/kafka/kafka-offset-monitor/">kafka offset monitor</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/kafka/kafka-optimize/">kafka optimize</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/kafka/kafka-use/">kafka use</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/kafka/kafka-web-console/">kafka web console</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/kafka/kafka-with-zookeeper/">kafka with zookeeper</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/kibana/">kibana</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/kibana/kibana-install/">kibana install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/logstash/">logstash</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/logstash/logstash-config-file/">logstash config file</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/logstash/logstash-filter-grok/">logstash filter grok</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/logstash/logstash-info/">logstash info</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/logstash/logstash-install/">logstash install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/mycat/">mycat</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/mycat/mycat-jvm-optimize/">mycat jvm optimize</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/mycat/mycat-web-install/">mycat web install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/nsq/">nsq</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/nsq/nsq-command/">nsq command</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/nsq/nsq-info/">nsq info</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/nsq/nsq-install/">nsq install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/zookeeper/">zookeeper</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/zookeeper/zookeeper-install/">zookeeper install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/zookeeper/zookeeper-monitor/">zookeeper monitor</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/zookeeper/zookeeper-optimize/">zookeeper optimize</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/zookeeper/zookeeper-use/">zookeeper use</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/zookeeper/zookeeper-zab-protocol/">zookeeper zab protocol</a></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/java/">java</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/java/java-env/">java env</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/java/java-jvm-optimize/">java jvm optimize</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/java/java-jvm-opts/">java jvm opts</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/java/java-jvm-原理/">java jvm 原理</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/java/java-learn/">java learn</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/java/java-learn/java-学习笔记/">java 学习笔记</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/java/java-log4j/">java log4j</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/java/java-performance-analysis/">java performance analysis</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/java/java-performance-analysis/jps/">jps</a></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/k8s/">k8s</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/k8s/k8s-dashboard-install/">k8s dashboard install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/k8s/k8s-install/">k8s install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/k8s/k8s-registry-install/">k8s registry install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/node/">node</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/node/node-install/">node install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/other/">other</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/other/ACID/">ACID</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/other/分布式二阶段和三阶段提交协议/">分布式二阶段和三阶段提交协议</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/other/开源许可协议/">开源许可协议</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/other/网络带宽/">网络带宽</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/">system service</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/Atlassian/">Atlassian</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/Atlassian/confluence-https/">confluence https</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/Atlassian/confluence-install/">confluence install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/Atlassian/confluence-reset-passwd/">confluence reset passwd</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/Atlassian/confluence-update/">confluence update</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/Atlassian/jira-https/">jira https</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/Atlassian/jira-install/">jira install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/Atlassian/jira-update/">jira update</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/Atlassian/mariadb-install/">mariadb install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/CentOS/">CentOS</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/CentOS/Base-env/">Base env</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/CentOS/linux-common-use-scripts/">linux common use scripts</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/CentOS/linux-history-info-setting/">linux history info setting</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/CentOS/linux-login-info/">linux login info</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/CentOS/linux-nginx-install/">linux nginx install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/CentOS/linux-skill/">linux skill</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/CentOS/linux-system-init/">linux system init</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/CentOS/linux-内存插槽-内存信息/">linux 内存插槽 内存信息</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/CentOS/linux-扩容swap分区/">linux 扩容swap分区</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/CentOS/linux-物理CPU-CPU核数-逻辑CPU/">linux 物理CPU CPU核数 逻辑CPU</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/CentOS/linux-磁盘系统block区别/">linux 磁盘系统block区别</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/CentOS/linux-设置-包含头文件路径-和-动态库链接路径/">linux 设置 包含头文件路径 和 动态库链接路径</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/CentOS/make提高源码编译速度/">make提高源码编译速度</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/NFS/">NFS</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/NFS/nfs-exports-command/">nfs exports command</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/NFS/nfs-install/">nfs install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/Samba/">Samba</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/Samba/samba-conf/">samba conf</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/Samba/samba-install/">samba install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/command/">command</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/command/grep/">grep</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/command/linux/">linux</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/command/pigz/">pigz</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/command/sed/">sed</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/command/split/">split</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/command/tr/">tr</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/haproxy/">haproxy</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/haproxy/haproxy-install/">haproxy install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/nginx/">nginx</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/nginx/nginx-install/">nginx install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/nginx/nginx-location/">nginx location</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/nginx/nginx-rewrite/">nginx rewrite</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/nginx/nginx-status/">nginx status</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/ntpd/">ntpd</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/ntpd/ntpd-install/">ntpd install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/openssl/">openssl</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/openssl/openssl-certificate/">openssl certificate</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/openvpn/">openvpn</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/openvpn/openvpn-install/">openvpn install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/rsync/">rsync</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/rsync/rsync-install/">rsync install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/supersord/">supersord</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/supersord/supersord-install/">supersord install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/vsftpd/">vsftpd</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/vsftpd/ftp-proxy/">ftp proxy</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/vsftpd/vsftpd-error/">vsftpd error</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/vsftpd/vsftpd-info/">vsftpd info</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/vsftpd/vsftpd-install/">vsftpd install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/windows/">windows</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/windows/cygwin-install/">cygwin install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/windows/ipsec-set/">ipsec set</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/windows/windows-modify-hosts/">windows modify hosts</a></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/web/">web</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/web/SSL/">SSL</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/web/SSL/SSL-certificate/">SSL certificate</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/web/angular/">angular</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/web/angular/angular-install/">angular install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/web/hexo/">hexo</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/web/hexo/hexo-install/">hexo install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/web/sass/">sass</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/web/sass/sass-install/">sass install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/web/xml/">xml</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/web/xml/xml-format/">xml format</a></li></ul></li></ul></li></ul>
    </div>
  </div>


  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">归档</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/01/">一月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/12/">十二月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/11/">十一月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/10/">十月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/09/">九月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/08/">八月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/07/">七月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/06/">六月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/05/">五月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/04/">四月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/03/">三月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/02/">二月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/01/">一月 2017</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">最新文章</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2020/01/01/hello-everyone/">Hello Everyone</a>
          </li>
        
          <li>
            <a href="/2017/12/08/svn-checkout-bat/">svn checkout bat</a>
          </li>
        
          <li>
            <a href="/2017/12/08/svn-server-for-windows/">svn server for windows</a>
          </li>
        
          <li>
            <a href="/2017/12/08/nslookup-dns-search/">nslookup dns search</a>
          </li>
        
          <li>
            <a href="/2017/11/28/kafka-web-console/">kafka web console</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2017 penn<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>



  </div>
</body>
</html>