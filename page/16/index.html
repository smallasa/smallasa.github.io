<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  

  
  <title>smallasa</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="smallasa">
<meta property="og:url" content="http://www.smallasa.com/page/16/index.html">
<meta property="og:site_name" content="smallasa">
<meta property="og:locale" content="zh-CN">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="smallasa">
  
    <link rel="alternate" href="/atom.xml" title="smallasa" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">smallasa</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">I known what i do !</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="搜索"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://www.smallasa.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-glusterfs-install" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/03/22/glusterfs-install/" class="article-date">
  <time datetime="2017-03-22T02:14:48.000Z" itemprop="datePublished">2017-03-22</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Distributed-storage/">Distributed storage</a>►<a class="article-category-link" href="/categories/Distributed-storage/GlusterFS/">GlusterFS</a>►<a class="article-category-link" href="/categories/Distributed-storage/GlusterFS/GlusterFS-install/">GlusterFS install</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/03/22/glusterfs-install/">glusterfs install</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="GlusterFS-install"><a href="#GlusterFS-install" class="headerlink" title="GlusterFS install"></a>GlusterFS install</h3><ol>
<li><p>格式化磁盘</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">* 通过LVM 创建磁盘</span><br><span class="line">* 通过mkfs.xfs 格式化磁盘</span><br><span class="line">  mkfs.xfs -i size=512 /dev/sdb</span><br><span class="line">  mkdir -p /data/brick</span><br><span class="line">  echo &apos;/dev/sdb /data/brick xfs defaults 1 2&apos; |tee -a  /etc/fstab</span><br><span class="line">  mount -a</span><br></pre></td></tr></table></figure>
</li>
<li><p>GlusterFS基础依赖包安装</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@10 app]<span class="comment"># yum -y install xfsprogs fuse fuse-libs</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>GlusterFS yum源</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@10 app]<span class="comment"># wget -O /etc/yum.repo.d/glusterfs.repo http://download.gluster.org/pub/gluster/glusterfs/LATEST/CentOS/gluster-epel.repo</span></span><br><span class="line">[root@10 app]<span class="comment"># yum makecache</span></span><br><span class="line">or:</span><br><span class="line">[root@10 app]<span class="comment"># wget -O /etc/yum.repo.d/glusterfs.repo http://download.gluster.org/pub/gluster/glusterfs/LATEST/CentOS/gluster-epel.repo</span></span><br><span class="line">[root@10 app]<span class="comment"># sed -in 's/LATEST/3.7.14/g' /etc/yum.repos.d/glusterfs-epel.repo</span></span><br><span class="line">[root@10 app]<span class="comment"># sed -in 's/EPEL.repo/CentOS/g' /etc/yum.repos.d/glusterfs-epel.repo</span></span><br><span class="line">[root@10 app]<span class="comment"># yum makecache</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>GlusterFS 安装</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@10 app]<span class="comment"># yum -y install glusterfs glusterfs-server glusterfs-fuse glusterfs-geo-replication</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>GlusterFS 启动</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@10 app]<span class="comment"># systemctl start glusterd</span></span><br><span class="line">[root@10 app]<span class="comment"># systemctl enable glusterd</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>GlusterFS 设置可信任存储池</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">//在server1上执行:</span><br><span class="line">[root@10 app]<span class="comment"># gluster peer probe 192.168.1.12</span></span><br><span class="line"></span><br><span class="line">//在server2上执行:</span><br><span class="line">[root@10 app]<span class="comment"># gluster peer probe 192.168.1.11</span></span><br><span class="line"></span><br><span class="line">//查看存储池状态:</span><br><span class="line">[root@10 app]<span class="comment"># gluster peer status</span></span><br><span class="line"></span><br><span class="line">//从存储池中移除节点</span><br><span class="line">[root@10 app]<span class="comment"># gluster peer detach 192.168.1.12</span></span><br><span class="line"></span><br><span class="line">注意:</span><br><span class="line">* 一旦设置了可信的存储池,就会仅允许存储池中的被信任的节点主动发现其它的新节点,并将其加入到池中.而一个独立的新节点,是不被允许自行加入可信存储池中的.</span><br><span class="line">* GlusterFS对于每个节点都会生成一个UUID来标识,因此如果节点的IP或主机名发生了变化,只需要重新执行peer probe即可.不过如果一个主机名曾经用过,想再改回去,则gluster会提示已经保存过.此时只能把节点detach掉,然后重新probe.</span><br></pre></td></tr></table></figure>
</li>
<li><p>GlusterFS 创建 一个GlusterFS卷</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">GlusterFS卷共有三基本类型:</span><br><span class="line">* Distributed(分布存储)</span><br><span class="line">* Striped(将一个文件分成多个固定长度的数据,分布存放在所有存储块,相当于RAID0)</span><br><span class="line">* Replicated(镜像存储,相当于RAID1)</span><br><span class="line"></span><br><span class="line">基于striped和replicated,结合使用distributed后,又可以扩展出分布式分片存储卷和分布式镜像存储卷两种新的类型.而后两种扩展类型并没有新的命令格式,仅是通过设置数据冗余份数和添加进逻辑卷的bricks数量来动态定义的.</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">//创建一个GlusterFS Replicated卷</span><br><span class="line">[root@10 app]<span class="comment"># gluster volume create gv0 replica 2 192.168.1.11:/data/brick/gv0 192.168.1.12:/data/brick/gv0 force</span></span><br><span class="line">[root@10 app]<span class="comment"># gluster volume start gv0</span></span><br><span class="line"></span><br><span class="line">[root@10 app]<span class="comment"># gluster volume info</span></span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">//创建一个GlusterFS Striped逻辑卷(创建一个名字为gv1,包含两个存储块,使用TCP协议的Striped逻辑卷)</span><br><span class="line">[root@10 app]<span class="comment"># gluster volume create gv1 stripe 2 transport tcp 192.168.1.11:/data 192.168.1.12:/data</span></span><br><span class="line">[root@10 app]<span class="comment"># gluster volume start gv1</span></span><br><span class="line"></span><br><span class="line">[root@10 app]<span class="comment"># gluster volume info</span></span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">//创建一个GlusterFS Distributed逻辑卷</span><br><span class="line">[root@10 app]<span class="comment"># gluster volume create gv2 192.168.1.11:/data 192.168.1.12:/data</span></span><br><span class="line">[root@10 app]<span class="comment"># gluster volume start gv2</span></span><br><span class="line"></span><br><span class="line">[root@10 app]<span class="comment"># gluster volume info</span></span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">//停止和删除逻辑卷</span><br><span class="line">[root@10 app]<span class="comment"># gluster volume stop gv0</span></span><br><span class="line">[root@10 app]<span class="comment"># gluster volume delete gv0</span></span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">//与存储块brick相关的逻辑卷管理(在gv0卷中增加一个存储块192.168.1.13:/data)</span><br><span class="line">[root@10 app]<span class="comment"># gluster volume add-brick gv0 192.168.1.13:/data</span></span><br><span class="line">[root@10 app]<span class="comment"># gluster volume rebalance gv0 start</span></span><br><span class="line"></span><br><span class="line">//删除Brick</span><br><span class="line">[root@10 app]<span class="comment"># gluster volume remove-brick gv0 192.168.1.13:/data</span></span><br><span class="line">[root@10 app]<span class="comment"># gluster volume rebalance gv0 start</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>GlusterFS 设置卷参数</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">//设置服务器仲裁</span><br><span class="line">[root@10 app]<span class="comment"># gluster volume set volume1 cluster.server-quorum-type server</span></span><br><span class="line">[root@10 app]<span class="comment"># gluster volume set all cluster.server-quorum-ratio 50%</span></span><br><span class="line"></span><br><span class="line">//配置允许的链接的client</span><br><span class="line">[root@10 app]<span class="comment"># gluster volume set volume1 auth.allow 192.168.1.12,192.168.1.13</span></span><br><span class="line"></span><br><span class="line">//操作超时</span><br><span class="line">[root@10 app]<span class="comment"># gluster volume set volume1 network.frame-timeout 1800</span></span><br><span class="line"></span><br><span class="line">//网络超时超时</span><br><span class="line">[root@10 app]<span class="comment"># gluster volume set volume1 network.ping-timeout 10</span></span><br><span class="line"></span><br><span class="line">//IO线程</span><br><span class="line">[root@10 app]<span class="comment"># gluster volume set volume1 performance.io-thread-count 32</span></span><br><span class="line"></span><br><span class="line">//IO缓存，注意此配置需要客户端提供不低于此内存的配置</span><br><span class="line">[root@10 app]<span class="comment"># gluster volume set data performance.cache-size 200MB</span></span><br><span class="line"></span><br><span class="line">//禁用nfs</span><br><span class="line">[root@10 app]<span class="comment"># gluster volume set data nfs.disable on</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>GlusterFS 客户端连接</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@10 app]<span class="comment"># yum install -y glusterfs-fuse</span></span><br><span class="line">[root@10 app]<span class="comment"># mkdir /volume1</span></span><br><span class="line">[root@10 app]<span class="comment"># mount –t glusterfs 192.168.1.11:/volume1 /volume1</span></span><br><span class="line">or:</span><br><span class="line">[root@10 app]<span class="comment"># echo "192.168.13.1:/data /mnt/glusterfs glusterfs defaults 0 0" |tee -a /etc/fstab</span></span><br><span class="line">[root@10 app]<span class="comment"># mount -a</span></span><br></pre></td></tr></table></figure>
</li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.smallasa.com/2017/03/22/glusterfs-install/" data-id="cjavy9jwl003e0coq095lgkyq" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-glusterfs-info" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/03/22/glusterfs-info/" class="article-date">
  <time datetime="2017-03-22T01:30:44.000Z" itemprop="datePublished">2017-03-22</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Distributed-storage/">Distributed storage</a>►<a class="article-category-link" href="/categories/Distributed-storage/GlusterFS/">GlusterFS</a>►<a class="article-category-link" href="/categories/Distributed-storage/GlusterFS/GlusterFS-info/">GlusterFS info</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/03/22/glusterfs-info/">glusterfs info</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="GlusterFS-简介"><a href="#GlusterFS-简介" class="headerlink" title="GlusterFS 简介"></a>GlusterFS 简介</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">GlusterFS是Scale-Out存储解决方案Gluster的核心,它是一个开源的分布式文件系统,具有强大的横向扩展能力,通过扩展能够支持数PB存储容量和处理数千客户端.GlusterFS借助TCP/IP或InfiniBandRDMA网络将物理分布的存储资源聚集在一起,使用单一全局命名空间来管理数据.</span><br><span class="line"></span><br><span class="line">说起glusterfs可能比较陌生,可能大家更多的听说和使用的是NFS,GFS,HDFS之类的,这之中的NFS应该是使用最为广泛的,简单易于管理,但是NFS以及后边会说到MooseFS都会存在单点故障,为了解决这个问题一般情况下都会结合DRBD进行块儿复制.但是glusterfs就完全不用考虑这个问题了,因为它是一个完全的无中心的系统.</span><br></pre></td></tr></table></figure>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">* GlusterFS是一个分布式的可横向扩展的文件系统,支持快速扩充更多的存储空间.自动地失效转移是它的一项基础功能.GlusterFS没有一个集中式的元数据管理服务.</span><br><span class="line">* 你可以尽可能多得向GlusterFS中添加存储,即使在使用中发现存储不足了,也可以通过简单的几个步骤完成添加新存储空间的工作.</span><br><span class="line">* 你可以设置为自动处理失效转移,这样即可在一个主机节点当机后,你仍然可以访问你的数据,不需要手工干预.当你修复了故障主机并重新上线后,你也不需要做任何手工干预.</span><br><span class="line">* 可以使用传统的NFS,SMB/CIFS协议访问GlusterFS的数据,也可以直接使用一个本地化的GlusterFS文件系统</span><br><span class="line">* GlusterFS不适合于存储结构化数据,建议不要直接作为数据库的数据存储空间使用,存储数据库的备份数据并没有问题.一般地,我们建议使用GlusterFS存储的数据应该是大小大于16KB的文件.当然如果能大于128KB,效果会更好</span><br><span class="line">* 建议存储主机使用XFS的文件系统,当然EXT4也还不错</span><br><span class="line">* 在生产环境中使用GlusterFS,建议部署DNS和NTP服务</span><br><span class="line">* 在安装主机的操作系统时,不需要对用于GlusterFS的分区进行格式化,因为在创建GlusterFS集群时会对加入到逻辑卷的brick进行特殊的格式化处理</span><br><span class="line">* 建议关闭系统防火墙</span><br></pre></td></tr></table></figure>
<h3 id="GlusterFS-特点"><a href="#GlusterFS-特点" class="headerlink" title="GlusterFS 特点"></a>GlusterFS 特点</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">* 扩展性和高性能</span><br><span class="line">  GlusterFS利用双重特性来提供几TB至数PB的高扩展存储解决方案.Scale-Out架构允许通过简单地增加资源来提高存储容量和性能,磁盘,计算和I/O资源都可以独立增加,支持10GbE和InfiniBand等高速网络互联.Gluster弹性哈希(ElasticHash)解除了GlusterFS对元数据服务器的需求,消除了单点故障和性能瓶颈,真正实现了并行化数据访问</span><br><span class="line">* 高可用性</span><br><span class="line">  GlusterFS可以对文件进行自动复制,如镜像或多次复制,从而确保数据总是可以访问,甚至是在硬件故障的情况下也能正常访问.自我修复功能能够把数据恢复到正确的状态,而且修复是以增量的方式在后台执行,几乎不会产生性能负载.GlusterFS没有设计自己的私有数据文件格式,而是采用操作系统中主流标准的磁盘文件系统(如EXT3,ZFS)来存储文件,因此数据可以使用各种标准工具进行复制和访问</span><br><span class="line">* 弹性卷管理</span><br><span class="line">  数据储存在逻辑卷中,逻辑卷可以从虚拟化的物理存储池进行独立逻辑划分而得到.存储服务器可以在线进行增加和移除,不会导致应用中断.逻辑卷可以在所有配置服务器中增长和缩减,可以在不同服务器迁移进行容量均衡,或者增加和移除系统,这些操作都可在线进行.文件系统配置更改也可以实时在线进行并应用,从而可以适应工作负载条件变化或在线性能调优</span><br></pre></td></tr></table></figure>
<h3 id="GlusterFS-术语"><a href="#GlusterFS-术语" class="headerlink" title="GlusterFS 术语"></a>GlusterFS 术语</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">* GNFS和KNFS</span><br><span class="line">  前者是GlusterFS自带的NFS Server,而后者指的是操作系统内核提供的kernel NFS服务.两者可选其一,也可以配置成同时提供服务</span><br><span class="line">* Brick</span><br><span class="line">  存储块,指可信主机池中由主机提供的用于存储的专用分区,是GlusterFS中的基本存储单元</span><br><span class="line">* Volume</span><br><span class="line">  逻辑卷,一个逻辑卷是一组bricks的集合</span><br><span class="line">* Subvolume</span><br><span class="line">  一个在经由至少一个的转换器处理之后的brick,被称为sub-volume</span><br><span class="line">* Volfile</span><br><span class="line">  指GlusterFS的各种配置文件,定义了服务端和客户端使用到的各种转换器以及卷和块的配置信息</span><br><span class="line">  GlusterFS共包含三部分,服务端,客户端和管理进程,每部分都有自己的配置文件.其中服务端和客户端的vol files放置在/var/lib/glusterd/vols/VOLNAME目录下,后台管理进程的配置文件在/etc/glusterfs/目录下</span><br><span class="line">* Glusterd</span><br><span class="line">  后台管理进程,需要在存储集群中的每个节点上都要运行</span><br><span class="line">* Extended Attributes</span><br><span class="line">  扩展属性是文件系统的一个特性,允许用户或应用为文件和目录关联更多的元数据信息</span><br><span class="line">* FUSE</span><br><span class="line">  用户空间内的文件系统</span><br><span class="line">* GFID</span><br><span class="line">  每个GlusterFS中的文件或目录都有一个128bit的数字标识,称为GFID</span><br><span class="line">* Quorum</span><br><span class="line">  该参数设置了在一个可信的存储池中最多可失效的主机节点数量,超出该值则认为该可信存储池已不可用了</span><br><span class="line">* Rebalance</span><br><span class="line">  当一个brick被加入或移除后,会有一个修复进程对数据分布进行重新计算与优化</span><br><span class="line">* RRDNS</span><br><span class="line">  是随机式域名解析的缩写,用于对一个域名设置多个IP解析时,实现数据读负载的分布式处理</span><br><span class="line">* Split-brain</span><br><span class="line">  脑裂,即处于一个镜像复制关系中的bricks之间,发生了数据或元数据的不一致问题,而无法认定哪边的数据正确</span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.smallasa.com/2017/03/22/glusterfs-info/" data-id="cjavy9jwj003d0coqo2tcxdpw" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-elasticsearch-four-search-type" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/03/21/elasticsearch-four-search-type/" class="article-date">
  <time datetime="2017-03-21T02:49:32.000Z" itemprop="datePublished">2017-03-21</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/hadoop/">hadoop</a>►<a class="article-category-link" href="/categories/hadoop/elasticsearch/">elasticsearch</a>►<a class="article-category-link" href="/categories/hadoop/elasticsearch/elasticsearch-four-search-type/">elasticsearch four search type</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/03/21/elasticsearch-four-search-type/">elasticsearch four search type</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="elasticsearch-四种搜素类型"><a href="#elasticsearch-四种搜素类型" class="headerlink" title="elasticsearch 四种搜素类型"></a>elasticsearch 四种搜素类型</h3><ol>
<li><p>ES 四种搜索类型</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ES 在查询时,可以指定搜索类型有四种：</span><br><span class="line">* QUERY_THEN_FETCH</span><br><span class="line">* QUERY_AND_FEATCH</span><br><span class="line">* DFS_QUERY_THEN_FEATCH</span><br><span class="line">* DFS_QUERY_AND_FEATCH</span><br></pre></td></tr></table></figure>
</li>
<li><p>理解分布式搜索</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">分布式搜索背景介绍:</span><br><span class="line">ES 天生就是为分布式而生,但分布式有分布式的缺点,比如: 要搜索某个单词,但是数据却分别在5个分片(Shard)上,这5个分片可能在5台主机上面.因为全文搜索天生就要排序(照匹配度进行排名),但数据却在5个分片上,如何得到最后正确的排序呢?ES是这样做的,大概分三步:</span><br><span class="line">1.ES 客户端将会同时向5个分片发起搜索请求</span><br><span class="line">2.这5个分片基于本分片的内容独立完成搜索,然后将符合条件的结果全部返回</span><br><span class="line">3.客户端将返回的结果进行重新排序和排名,最后返回给用户.也就是说,ES的一次搜索,是一次scatter/gather过程(这个跟mapreduce也很类似)</span><br><span class="line"></span><br><span class="line">然而这其中有两个问题：</span><br><span class="line">1.数量问题</span><br><span class="line">  比如,用户需要搜索&quot;衣服&quot;,要求返回符合条件的前10条.但在5个分片中,可能都存储着衣服相关的数据.所以ES会向这5个分片都发出查询请求,并且要求每个分片都返回符合条件的10条记录.当ES得到返回的结果后,进行整体排序,然后取最符合条件的前10条返给用户.这种情况,ES中5个shard最多会收到10*5=50条记录,这样返回给用户的结果数量会多于用户请求的数量.</span><br><span class="line">2.排名问题</span><br><span class="line">  上面说的搜索,每个分片计算符合条件的前10条数据都是基于自己分片的数据进行打分计算的.计算分值使用的词频和文档频率等信息都是基于自己分片的数据进行的,而ES进行整体排名是基于每个分片计算后的分值进行排序的(相当于打分依据就不一样,最终对这些数据统一排名的时候就不准确了),这就可能会导致排名不准确的问题.如果我们想更精确的控制排序,应该先将计算排序和排名相关的信息(词频和文档频率等打分依据)从5个分片收集上来,进行统一计算,然后使用整体的词频和文档频率为每个分片中的数据进行打分,这样打分依据就一样了.</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">再举个例子解释一下[排名问题]：</span><br><span class="line">假设某学校有一班和二班两个班级.期末考试之后,学校要给全校前十名学员发奖金.但是一班和二班考试的时候使用的不是一套试卷.一班使用的是A卷[ A 卷偏容易];二班使用的是B卷[ B 卷偏难].结果就是一班的最高分是100分,最低分是80分.二班的最高分是70分,最低分是30分.这样全校前十名就都是一班的学员了.这显然是不合理的.因为一班和二班的试卷难易程度不一样,也就是打分依据不一样,所以不能放在一块排名.</span><br><span class="line">如果想要保证排名准确的话,需要保证一班和二班使用的试卷内容一样.可以这样做,把A卷和B卷的内容组合到一块,作为C卷.一班和二班考试都使用C卷，这样他们的打分依据就一样了,最终再根据所有学员的成绩排名求前十名就准确合理了。</span><br></pre></td></tr></table></figure>
</li>
<li><p>四种搜索类型介绍</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">* query and fetch</span><br><span class="line">　向索引的所有分片(shard)都发出查询请求,各分片返回的时候把元素文档(document)和计算后的排名信息一起返回.</span><br><span class="line">  这种搜索方式是最快的.因为相比下面的几种搜索方式,这种查询方法只需要去shard查询一次.但是各个shard返回的结果的数量之和可能是用户要求的size的n倍.</span><br><span class="line">　优点：只需要查询一次</span><br><span class="line">　缺点：返回的数据量不准确,可能返回(N*分片数量)的数据并且数据排名也不准确</span><br><span class="line"></span><br><span class="line">* query then fetch(ES默认的搜索方式)</span><br><span class="line">　如果你搜索时,没有指定搜索方式,就是使用的这种搜索方式.这种搜索方式.大概分两个步骤:</span><br><span class="line">　第一步,先向所有的shard发出请求,各分片只返回文档id(注意,不包括文档document)和排名相关的信息(也就是文档对应的分值),然后按照各分片返回的文档的分数进行重新排序和排名,取前size个文档</span><br><span class="line">　第二步,根据文档id去相关的shard取document.这种方式返回的document数量与用户要求的大小是相等的</span><br><span class="line">　优点：返回的数据量是准确的</span><br><span class="line">　缺点：性能一般,并且数据排名不准确</span><br><span class="line"></span><br><span class="line">* DFS query and fetch</span><br><span class="line">　这种方式比第一种方式多了一个DFS步骤,有这一步,可以更精确控制搜索打分和排名.也就是在进行查询之前,先对所有分片发送请求,把所有分片中的词频和文档频率等打分依据全部汇总到一块,再执行后面的操作.</span><br><span class="line">　优点：数据排名准确</span><br><span class="line">　缺点：性能一般,返回的数据量不准确,可能返回(N*分片数量)的数据</span><br><span class="line"></span><br><span class="line">* DFS query then fetch</span><br><span class="line">　比第2种方式多了一个DFS步骤,也就是在进行查询之前,先对所有分片发送请求,把所有分片中的词频和文档频率等打分依据全部汇总到一块,再执行后面的操作.</span><br><span class="line">  优点：返回的数据量是准确的,数据排名准确</span><br><span class="line">　缺点：性能最差(这个最差只是表示在这四种查询方式中性能最慢,也不至于不能忍受,如果对查询性能要求不是非常高,而对查询准确度要求比较高的时候可以考虑这个)</span><br><span class="line"></span><br><span class="line">其他: DFS 是一个什么样的过程？</span><br><span class="line">DFS其实就是在进行真正的查询之前,先把各个分片的词频率和文档频率收集一下,然后进行词搜索的时候,各分片依据全局的词频率和文档频率进行搜索和排名.显然如果使用DFS_QUERY_THEN_FETCH这种查询方式,效率是最低的,因为一个搜索,可能要请求3次分片.但使用DFS方法,搜索精度是最高的.</span><br><span class="line"></span><br><span class="line">总结一下:</span><br><span class="line">1.从性能考虑QUERY_AND_FETCH是最快的,DFS_QUERY_THEN_FETCH是最慢的</span><br><span class="line">2.从搜索的准确度来说,DFS要比非DFS的准确度更高</span><br></pre></td></tr></table></figure>
</li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.smallasa.com/2017/03/21/elasticsearch-four-search-type/" data-id="cjavy9jve00260coq1jtm5ukh" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-xml-format" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/03/21/xml-format/" class="article-date">
  <time datetime="2017-03-20T17:00:07.000Z" itemprop="datePublished">2017-03-21</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/web/">web</a>►<a class="article-category-link" href="/categories/web/xml/">xml</a>►<a class="article-category-link" href="/categories/web/xml/xml-format/">xml format</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/03/21/xml-format/">xml format</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="xml-格式化"><a href="#xml-格式化" class="headerlink" title="xml 格式化"></a>xml 格式化</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">yum -y install libxml2</span><br><span class="line"></span><br><span class="line">xmllint --format file.xml</span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.smallasa.com/2017/03/21/xml-format/" data-id="cjavy9k7z00be0coqm64i19vz" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-windows-modify-hosts" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/03/21/windows-modify-hosts/" class="article-date">
  <time datetime="2017-03-20T16:55:40.000Z" itemprop="datePublished">2017-03-21</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/system-service/">system service</a>►<a class="article-category-link" href="/categories/system-service/windows/">windows</a>►<a class="article-category-link" href="/categories/system-service/windows/windows-modify-hosts/">windows modify hosts</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/03/21/windows-modify-hosts/">windows modify hosts</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="HOSTS文件无法修改以及禁止修改的解决办法"><a href="#HOSTS文件无法修改以及禁止修改的解决办法" class="headerlink" title="HOSTS文件无法修改以及禁止修改的解决办法"></a>HOSTS文件无法修改以及禁止修改的解决办法</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">在修改HOSTS文件时,总是提示路径不对,无法保存</span><br><span class="line"></span><br><span class="line">Hosts是一个没有扩展名的系统文件,路径&quot;C:\WINDOWS\system32\drivers\etc&quot;目录下,可以用记事本等工具打开,其作用就是将一些常用的网址域名与其对应的IP地址建立一个关联&quot;数据库&quot;.当用户在浏览器中输入一个需要登录的网址时,系统会首先自动从Hosts文件中寻找对应的IP地址,一旦找到,系统会立即打开对应网页,如果没有找到,则系统再会将网址提交DNS域名解析服务器进行IP地址的解析.</span><br><span class="line"></span><br><span class="line">下面是禁止和允许修改HOSTS文件的2条命令：</span><br><span class="line">1.禁止修改HOSTS文件:</span><br><span class="line">attrib +r +a +s +h %windir%\system32\drivers\etc\hosts</span><br><span class="line">echo y|cacls %windir%\system32\drivers\etc\hosts /g everyone:r</span><br><span class="line"></span><br><span class="line">2.允许修改HOSTS文件:</span><br><span class="line">echo y|cacls %windir%\system32\drivers\etc\hosts /g everyone:f</span><br><span class="line">attrib -r -a -s -h %windir%\system32\drivers\etc\hosts</span><br><span class="line"></span><br><span class="line">将命令在CMD中输入运行即可!</span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.smallasa.com/2017/03/21/windows-modify-hosts/" data-id="cjavy9k7x00bd0coqp6o51zfl" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-windows-ipsec-set" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/03/21/windows-ipsec-set/" class="article-date">
  <time datetime="2017-03-20T16:47:08.000Z" itemprop="datePublished">2017-03-21</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/system-service/">system service</a>►<a class="article-category-link" href="/categories/system-service/windows/">windows</a>►<a class="article-category-link" href="/categories/system-service/windows/ipsec-set/">ipsec set</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/03/21/windows-ipsec-set/">windows ipsec set</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="windows-ipsec-set"><a href="#windows-ipsec-set" class="headerlink" title="windows ipsec set"></a>windows ipsec set</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">导出IPsec安全策略：Netsh ipsec static exportpolicy file = d:\ExportSecurity.ipsec</span><br><span class="line">导入IPsec安全策略：Netsh ipsec static importpolicy file = d:\ImportSecurity.ipsec</span><br><span class="line"></span><br><span class="line">设置过滤规则: netsh -f &quot;c:/temp.ips&quot;</span><br></pre></td></tr></table></figure>
<ol>
<li><p>删除所有的安全策略</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo ipsec static delete all &gt; c:/temp.ips</span><br></pre></td></tr></table></figure>
</li>
<li><p>建立一个新的安全策略</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">rem 创建安全策略mrdTomcat</span><br><span class="line">echo ipsec static add policy name = mrdTomcat &gt;&gt; c:/temp.ips</span><br></pre></td></tr></table></figure>
</li>
<li><p>创建筛选操作(允许和拒绝)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">rem 创建筛选操作</span><br><span class="line">echo ipsec static add filteraction name = allow action = permit &gt;&gt; c:/temp.ips</span><br><span class="line">echo ipsec static add filteraction name = deny action = block  &gt;&gt; c:/temp.ips</span><br></pre></td></tr></table></figure>
</li>
<li><p>创建筛选器并对其设置过滤规则</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">rem 自身连接</span><br><span class="line">echo ipsec static add filterlist name = allow_me &gt;&gt; c:/temp.ips</span><br><span class="line">echo ipsec static add filter filterlist = allow_me srcaddr = me dstaddr = 10.0.0.0 dstmask = 255.0.0.0  protocol = any  mirrored = yes &gt;&gt; c:/temp.ips</span><br><span class="line">echo ipsec static add filter filterlist = allow_me srcaddr = me dstaddr = 127.0.0.1   protocol = any  mirrored = yes  &gt;&gt; c:/temp.ips</span><br><span class="line"></span><br><span class="line">rem 中控连接22</span><br><span class="line">echo ipsec static add filterlist name = allow_22 &gt;&gt; c:/temp.ips</span><br><span class="line">echo ipsec static add filter filterlist = allow_22 srcaddr = 111.206.12.11 dstaddr = me dstport = 22 description = cc_access protocol = TCP mirrored = yes &gt;&gt; c:/temp.ips</span><br><span class="line">echo ipsec static add filter filterlist = allow_22 srcaddr = 220.181.142.11 dstaddr = me dstport = 22 description = cc_access protocol = TCP mirrored = yes &gt;&gt; c:/temp.ips</span><br><span class="line"></span><br><span class="line">rem 拒绝其他所有ip</span><br><span class="line">echo ipsec static add filterlist name = deny_all &gt;&gt; c:/temp.ips</span><br><span class="line">echo ipsec static add filter filterlist = deny_all srcaddr = me dstaddr = any dstport = 0  protocol = any mirrored = yes &gt;&gt; c:/temp.ips</span><br><span class="line">echo ipsec static add filter filterlist = deny_all srcaddr = any dstaddr = me dstport = 0  protocol = any mirrored = yes &gt;&gt; c:/temp.ips</span><br></pre></td></tr></table></figure>
</li>
<li><p>将筛选器规则加入到安全策略</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">echo ipsec static add rule name = allow_me Policy = mrdTomcat filterlist = allow_me filteraction = allow   &gt;&gt; c:/temp.ips</span><br><span class="line">echo ipsec static add rule name = allow_22 Policy = mrdTomcat filterlist = allow_22 filteraction = allow   &gt;&gt; c:/temp.ips</span><br><span class="line">echo ipsec static add rule name = allow_3389  Policy = mrdTomcat filterlist = allow_3389  filteraction = allow   &gt;&gt; c:/temp.ips</span><br><span class="line">echo ipsec static add rule name = deny_all Policy = mrdTomcat filterlist = deny_all filteraction = deny  &gt;&gt; c:/temp.ips</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">rem 连接zabbix</span><br><span class="line">echo ipsec static add filterlist name   = allow_zabbix &gt;&gt; c:/temp.ips</span><br><span class="line">echo ipsec static add filter filterlist = allow_zabbix srcaddr = x.x.x.0  srcmask = 255.255.255.0  dstaddr = me dstport = 10050 description = zabbix_to_me protocol = TCP mirrored = yes &gt;&gt; c:/temp.ips</span><br><span class="line">echo ipsec static add filter filterlist = allow_zabbix srcaddr = me  dstaddr = any dstport = 10051  description = me_to_zabbix protocol = TCP mirrored = yes &gt;&gt; c:/temp.ips</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">rem 连接snmp</span><br><span class="line">echo ipsec static add filterlist name   = allow_snmp &gt;&gt; c:/temp.ips</span><br><span class="line">echo ipsec static add filter filterlist = allow_snmp srcaddr = x.x.x.0  srcmask = 255.255.255.0 dstaddr = me dstport = 161 description = snmp_to_me protocol = UDP mirrored = yes &gt;&gt; c:/temp.ips</span><br><span class="line">echo ipsec static add filter filterlist = allow_snmp srcaddr = me  dstaddr = any dstport = 161  description = me_to_snmp protocol = UDP mirrored = yes &gt;&gt; c:/temp.ips</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">rem 连接icmp</span><br><span class="line">echo ipsec static add filterlist name   = allow_icmp &gt;&gt; c:/temp.ips</span><br><span class="line">echo ipsec static add filter filterlist = allow_icmp srcaddr = x.x.x.0  srcmask = 255.255.255.0 dstaddr = me description = snmp_to_me protocol = ICMP mirrored = yes &gt;&gt; c:/temp.ips</span><br><span class="line">echo ipsec static add filter filterlist = allow_icmp srcaddr = me dstaddr = any description = me_to_icmp protocol = ICMP mirrored = yes &gt;&gt; c:/temp.ips</span><br></pre></td></tr></table></figure>
</li>
<li><p>激活安全策略</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo ipsec static set policy name = mrdTomcat assign = y &gt;&gt; c:/temp.ips</span><br></pre></td></tr></table></figure>
</li>
<li><p>应用配置</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">netsh -f &quot;c:/temp.ips&quot;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<hr>
<h3 id="ipsec-参数"><a href="#ipsec-参数" class="headerlink" title="ipsec 参数"></a>ipsec 参数</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">C:\Users\Administrator&gt;netsh ipsec static add filter /?</span><br><span class="line">用法:</span><br><span class="line">  filter [ filterlist = ] &lt;string&gt;</span><br><span class="line">         [ srcaddr = ] (ipv4 | ipv6 | ipv4-ipv4 | ipv6-ipv6 | dns | server)</span><br><span class="line">         [ dstaddr = ] (ipv4 | ipv6 | ipv4-ipv4 | ipv6-ipv6 | dns | server)</span><br><span class="line">         [ [ description = ] &lt;string&gt; ]</span><br><span class="line">         [ [ protocol = ] (ANY | ICMP | TCP | UDP | RAW | &lt;<span class="built_in">integer</span>&gt;) ]</span><br><span class="line">         [ [ mirrored = ] (yes  |  no) ]</span><br><span class="line">         [ [ srcmask = ] (mask | prefix) ]</span><br><span class="line">         [ [ dstmask = ] (mask | prefix) ]</span><br><span class="line">         [ [ srcport = ] &lt;port&gt; ]</span><br><span class="line">         [ [ dstport = ] &lt;port&gt; ]</span><br><span class="line"></span><br><span class="line">  将筛选器添加到指定的筛选器列表。</span><br><span class="line"></span><br><span class="line">参数:</span><br><span class="line">  标记           值</span><br><span class="line">  filterlist    -筛选器要添加到其中的筛选器列表的名称。</span><br><span class="line">  srcaddr       -源 ip 地址(ipv4 或 ipv6)、地址范围、dns 名称或服务器类型。</span><br><span class="line">  dstaddr       -目标 ip 地址(ipv4 或 ipv6)、dns 名称或服务器类型。</span><br><span class="line">  description   -筛选器的简介信息。</span><br><span class="line">  protocol      -可以是 ANY，ICMP，TCP，UDP，RAW，或者一个整数。</span><br><span class="line">  mirrored      -值为 <span class="string">'Yes'</span> 将创建两个筛选器，每个方向均有一个。</span><br><span class="line">  srcmask       -源地址掩码或一个 1 到 32 的前缀。如果 srcaddr 设置为某一范围,则不适用。</span><br><span class="line">  dstmask       -目标地址掩码或一个 1 到 32 的前缀。如果 dstaddr 设置为某一范围，则不适用。</span><br><span class="line">  srcport       -数据包的源端口。值为 0 表示任意端口。</span><br><span class="line">  dstport       -数据包的目标端口。值为 0 表示任意端口。</span><br><span class="line"></span><br><span class="line">注释:  1. 如果筛选器列表不存在，将创建它。</span><br><span class="line">       2. 要指定当前计算机地址，请设置 srcaddr/dstaddr=me</span><br><span class="line">          要指定所有计算机地址，请设置 srcaddr/dstaddr=any</span><br><span class="line">       3. 服务器类型可以是 WINS、DNS、DHCP 或 GATEWAY。</span><br><span class="line">       4. 如果源是一个服务器类型，则目标为 <span class="string">"me"</span>，反之亦然。</span><br><span class="line">       5. 如果指定了地址范围，终结点必须为特定地址(非列表或子网)和相同类型地址(两者均应为 v4 或 v6)</span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.smallasa.com/2017/03/21/windows-ipsec-set/" data-id="cjavy9k7t00ba0coqlgj78e80" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-windows-cygwin-install" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/03/21/windows-cygwin-install/" class="article-date">
  <time datetime="2017-03-20T16:38:42.000Z" itemprop="datePublished">2017-03-21</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/system-service/">system service</a>►<a class="article-category-link" href="/categories/system-service/windows/">windows</a>►<a class="article-category-link" href="/categories/system-service/windows/cygwin-install/">cygwin install</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/03/21/windows-cygwin-install/">windows cygwin install</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <ol>
<li>在windows 2008 R2上安装sshd服务(cygwin)<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line">=&gt; 1. 通过&quot;远程桌面&quot;登录到Win服务器(Ctrl+R =&gt; mstsc =&gt; Login)</span><br><span class="line">=&gt; 2. 下载cygwin软件包,并安装(默认安装位置即可)</span><br><span class="line">=&gt; 3. cygwin安装软件(基础软件包,根据自己项目需求):</span><br><span class="line">      zip        =&gt;必须</span><br><span class="line">      unzip      =&gt;必须</span><br><span class="line">      openssh    =&gt;必须</span><br><span class="line">      openssl    =&gt;必须</span><br><span class="line">      rsync</span><br><span class="line">      crontab</span><br><span class="line">      autoconf2.5</span><br><span class="line">      automake1.9</span><br><span class="line">      binutils</span><br><span class="line">      gcc</span><br><span class="line">      gcc-core</span><br><span class="line">      gcc-g++</span><br><span class="line">      gcc-mingw-core</span><br><span class="line">      gcc-mingw-g++</span><br><span class="line">      gdb</span><br><span class="line">      sed</span><br><span class="line">      vim</span><br><span class="line">      telnet</span><br><span class="line">=&gt; 4. cygwin软件安装</span><br><span class="line"></span><br><span class="line">=&gt; 5.在下方的系统变量里点击新建,在弹出的对话框里新建变量CYGWIN,值为ntsec tty,然后双击打开系统变量里的PATH,追加C:\Cygwin64\bin\</span><br><span class="line"></span><br><span class="line">=&gt; 6.ssh</span><br><span class="line">     $ mkpasswd -l &gt; /etc/passwd</span><br><span class="line">     $ mkgroup -l &gt; /etc/group</span><br><span class="line"></span><br><span class="line">=&gt; 7. cygwin安装sshd服务</span><br><span class="line">      =&gt; ssh-host-config  =&gt;(管理员身份运行)</span><br><span class="line"></span><br><span class="line">=&gt; 8. cygwin启动sshd服务</span><br><span class="line">      =&gt; cygrunsrv --start sshd</span><br><span class="line">         cygrunsrv --stop sshd</span><br><span class="line">         cygrunsrv -R sshd</span><br><span class="line"></span><br><span class="line">=&gt; 9. cygwin常用命令</span><br><span class="line">      =&gt; cygrunsrv -L  查看安装的服务</span><br><span class="line"></span><br><span class="line">=&gt; 10. cygwin 删除之前安装的sshd配置,重新初始化配置</span><br><span class="line">      =&gt; rm -rf /etc/ssh*</span><br><span class="line">         rm -rf /var/log/sshd.log</span><br><span class="line">         ssh-host-config</span><br><span class="line"></span><br><span class="line">=&gt; 11. 注意</span><br><span class="line">      sshd在cyg_server帐户下运行,你在初始化sshd配置的时候会创建一个用户,默认用户为cyg_server</span><br><span class="line"></span><br><span class="line">=&gt; 12. login</span><br><span class="line">      =&gt; ssh Administrator@IP</span><br><span class="line">         注意: 用户名第一个字母必须大写</span><br><span class="line"></span><br><span class="line">=&gt; 13. 无密码登录</span><br><span class="line">     ssh-copy-id -i ~/.ssh/id_dsa.pub Administrator@115.159.101.156</span><br></pre></td></tr></table></figure>
</li>
</ol>
<hr>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line">$ ssh-host-config</span><br><span class="line">*** Info: Generating missing SSH host keys</span><br><span class="line">*** Query: Overwrite existing /etc/ssh_config file? (yes/no) yes   =&gt;yes</span><br><span class="line">*** Info: Creating default /etc/ssh_config file</span><br><span class="line">*** Query: Overwrite existing /etc/sshd_config file? (yes/no) yes  =&gt;yes</span><br><span class="line">*** Info: Creating default /etc/sshd_config file</span><br><span class="line"></span><br><span class="line">*** Info: StrictModes is <span class="built_in">set</span> to <span class="string">'yes'</span> by default.</span><br><span class="line">*** Info: This is the recommended setting, but it requires that the POSIX</span><br><span class="line">*** Info: permissions of the user<span class="string">'s home directory, the user'</span>s .ssh</span><br><span class="line">*** Info: directory, and the user<span class="string">'s ssh key files are tight so that</span></span><br><span class="line"><span class="string">*** Info: only the user has write permissions.</span></span><br><span class="line"><span class="string">*** Info: On the other hand, StrictModes don'</span>t work well with default</span><br><span class="line">*** Info: Windows permissions of a home directory mounted with the</span><br><span class="line">*** Info: <span class="string">'noacl'</span> option, and they don<span class="string">'t work at all if the home</span></span><br><span class="line"><span class="string">*** Info: directory is on a FAT or FAT32 partition.</span></span><br><span class="line"><span class="string">*** Query: Should StrictModes be used? (yes/no) no  =&gt;注意:这里选择no,不是yes,我选择yes的时候启动不了ssh服务</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">*** Info: Privilege separation is set to '</span>sandbox<span class="string">' by default since</span></span><br><span class="line"><span class="string">*** Info: OpenSSH 6.1.  This is unsupported by Cygwin and has to be set</span></span><br><span class="line"><span class="string">*** Info: to '</span>yes<span class="string">' or '</span>no<span class="string">'.</span></span><br><span class="line"><span class="string">*** Info: However, using privilege separation requires a non-privileged account</span></span><br><span class="line"><span class="string">*** Info: called '</span>sshd<span class="string">'.</span></span><br><span class="line"><span class="string">*** Info: For more info on privilege separation read /usr/share/doc/openssh/READ  ME.privsep.</span></span><br><span class="line"><span class="string">*** Query: Should privilege separation be used? (yes/no) yes</span></span><br><span class="line"><span class="string">*** Info: Updating /etc/sshd_config file</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">*** Query: Do you want to install sshd as a service?</span></span><br><span class="line"><span class="string">*** Query: (Say "no" if it is already installed as a service) (yes/no) yes  =yes</span></span><br><span class="line"><span class="string">*** Query: Enter the value of CYGWIN for the daemon: []</span></span><br><span class="line"><span class="string">*** Info: On Windows Server 2003, Windows Vista, and above, the</span></span><br><span class="line"><span class="string">*** Info: SYSTEM account cannot setuid to other users -- a capability</span></span><br><span class="line"><span class="string">*** Info: sshd requires.  You need to have or to create a privileged</span></span><br><span class="line"><span class="string">*** Info: account.  This script will help you do so.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">*** Info: It'</span>s not possible to use the LocalSystem account <span class="keyword">for</span> services</span><br><span class="line">*** Info: that can change the user id without an explicit password</span><br><span class="line">*** Info: (such as passwordless logins [e.g. public key authentication]</span><br><span class="line">*** Info: via sshd) when having to create the user token from scratch.</span><br><span class="line">*** Info: For more information on this requirement, see</span><br><span class="line">*** Info: https://cygwin.com/cygwin-ug-net/ntsec.html<span class="comment">#ntsec-nopasswd1</span></span><br><span class="line"></span><br><span class="line">*** Info: If you want to <span class="built_in">enable</span> that functionality, it<span class="string">'s required to create</span></span><br><span class="line"><span class="string">*** Info: a new account with special privileges (unless such an account</span></span><br><span class="line"><span class="string">*** Info: already exists). This account is then used to run these special</span></span><br><span class="line"><span class="string">*** Info: servers.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">*** Info: Note that creating a new user requires that the current account</span></span><br><span class="line"><span class="string">*** Info: have Administrator privileges itself.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">*** Info: The following privileged accounts were found: '</span>sshd_server<span class="string">' '</span>cron_serv  er<span class="string">' .</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">*** Info: This script plans to use '</span>sshd_server<span class="string">'.</span></span><br><span class="line"><span class="string">*** Info: '</span>sshd_server<span class="string">' will only be used by registered services.</span></span><br><span class="line"><span class="string">*** Query: Do you want to use a different name? (yes/no) no   =&gt;no</span></span><br><span class="line"><span class="string">*** Query: Please enter the password for user '</span>sshd_server<span class="string">':  =&gt;fy@2015</span></span><br><span class="line"><span class="string">*** Query: Reenter:</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">*** Info: The sshd service has been installed under the '</span>sshd_server<span class="string">'</span></span><br><span class="line"><span class="string">*** Info: account.  To start the service now, call `net start sshd'</span> or</span><br><span class="line">*** Info: `cygrunsrv -S sshd<span class="string">'.  Otherwise, it will start automatically</span></span><br><span class="line"><span class="string">*** Info: after the next reboot.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">*** Info: Host configuration finished. Have fun!</span></span><br></pre></td></tr></table></figure>
<hr>
<h3 id="cygwin-install"><a href="#cygwin-install" class="headerlink" title="cygwin install"></a>cygwin install</h3><ol>
<li><p><a href="https://cygwin.com/install.html" target="_blank" rel="noopener">cygwin download</a></p>
</li>
<li><p>创建目录</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">软件包存放位置: C:\install\setup-x86_64.exe</span><br><span class="line">双击软件包: setup-x86_64.exe</span><br></pre></td></tr></table></figure>
</li>
<li><p>选择国内源</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">http://mirrors.ustc.edu.cn/cygwin/    推荐</span><br><span class="line">http://mirrors.163.com/cygwin/</span><br><span class="line">http://mirrors.sohu.com/cygwin/</span><br></pre></td></tr></table></figure>
</li>
<li><p>安装软件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">Category:</span><br><span class="line">  Admin</span><br><span class="line">  Base</span><br><span class="line">  Devel</span><br><span class="line">  Editors:</span><br><span class="line">    vim</span><br><span class="line">  Net</span><br><span class="line">  System</span><br><span class="line">  Utils</span><br><span class="line"></span><br><span class="line">openssh</span><br><span class="line">vim</span><br><span class="line">zip</span><br><span class="line">unzip</span><br><span class="line">curl</span><br><span class="line">wget</span><br></pre></td></tr></table></figure>
</li>
<li><p>将”C:\cygwin64\bin”添加到windows环境变量中</p>
</li>
<li><p>配置openssh</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line">$ ssh-host-config</span><br><span class="line">*** Info: Generating missing SSH host keys</span><br><span class="line">ssh-keygen: generating new host keys: RSA DSA ECDSA ED25519</span><br><span class="line">*** Info: Creating default /etc/ssh_config file</span><br><span class="line">*** Info: Creating default /etc/sshd_config file</span><br><span class="line"></span><br><span class="line">*** Info: StrictModes is set to &apos;yes&apos; by default.</span><br><span class="line">*** Info: This is the recommended setting, but it requires that the POSIX</span><br><span class="line">*** Info: permissions of the user&apos;s home directory, the user&apos;s .ssh</span><br><span class="line">*** Info: directory, and the user&apos;s ssh key files are tight so that</span><br><span class="line">*** Info: only the user has write permissions.</span><br><span class="line">*** Info: On the other hand, StrictModes don&apos;t work well with default</span><br><span class="line">*** Info: Windows permissions of a home directory mounted with the</span><br><span class="line">*** Info: &apos;noacl&apos; option, and they don&apos;t work at all if the home</span><br><span class="line">*** Info: directory is on a FAT or FAT32 partition.</span><br><span class="line"># &quot;StrictModes&quot;设置ssh在接收登录请求之前是否检查&apos;用户家目录&apos;和&apos;rhosts文件&apos;的权限和所有权</span><br><span class="line"># 这通常是必要的,因为新手经常会把自己的目录和文件设成任何人都有写权限,我建议选择&apos;no&apos;</span><br><span class="line">*** Query: Should StrictModes be used? (yes/no) no</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">*** Info: Note that creating a new user requires that the current account have</span><br><span class="line">*** Info: Administrator privileges.  Should this script attempt to create a</span><br><span class="line"># 创建一个新的本地用户,叫sshd,默认用户被禁止登陆</span><br><span class="line">*** Query: new local account &apos;sshd&apos;? (yes/no) yes</span><br><span class="line">*** Info: Updating /etc/sshd_config file</span><br><span class="line"></span><br><span class="line">*** Query: Do you want to install sshd as a service?</span><br><span class="line"># 是否想将sshd服务加入到windows 服务中</span><br><span class="line">*** Query: (Say &quot;no&quot; if it is already installed as a service) (yes/no) yes</span><br><span class="line">#</span><br><span class="line">*** Query: Enter the value of CYGWIN for the daemon: [] binmode ntsec</span><br><span class="line">*** Info: On Windows Server 2003, Windows Vista, and above, the</span><br><span class="line">*** Info: SYSTEM account cannot setuid to other users -- a capability</span><br><span class="line">*** Info: sshd requires.  You need to have or to create a privileged</span><br><span class="line">*** Info: account.  This script will help you do so.</span><br><span class="line"></span><br><span class="line">*** Info: It&apos;s not possible to use the LocalSystem account for services</span><br><span class="line">*** Info: that can change the user id without an explicit password</span><br><span class="line">*** Info: (such as passwordless logins [e.g. public key authentication]</span><br><span class="line">*** Info: via sshd) when having to create the user token from scratch.</span><br><span class="line">*** Info: For more information on this requirement, see</span><br><span class="line">*** Info: https://cygwin.com/cygwin-ug-net/ntsec.html#ntsec-nopasswd1</span><br><span class="line"></span><br><span class="line">*** Info: If you want to enable that functionality, it&apos;s required to create</span><br><span class="line">*** Info: a new account with special privileges (unless such an account</span><br><span class="line">*** Info: already exists). This account is then used to run these special</span><br><span class="line">*** Info: servers.</span><br><span class="line"></span><br><span class="line">*** Info: Note that creating a new user requires that the current account</span><br><span class="line">*** Info: have Administrator privileges itself.</span><br><span class="line"></span><br><span class="line">*** Info: No privileged account could be found.</span><br><span class="line"></span><br><span class="line">*** Info: This script plans to use &apos;cyg_server&apos;.</span><br><span class="line">*** Info: &apos;cyg_server&apos; will only be used by registered services.</span><br><span class="line"># 如果用相同的名字cyg_server,输入no</span><br><span class="line">*** Query: Do you want to use a different name? (yes/no) no</span><br><span class="line">*** Query: Create new privileged user account &apos;WIN-5GSU1CSQSAB\cyg_server&apos; (Cygwin name: &apos;cyg_server&apos;)? (yes/no) yes</span><br><span class="line">*** Info: Please enter a password for new user cyg_server.  Please be sure</span><br><span class="line">*** Info: that this password matches the password rules given on your system.</span><br><span class="line">*** Info: Entering no password will exit the configuration.</span><br><span class="line"># 为cyg_server设置密码</span><br><span class="line">*** Query: Please enter the password:</span><br><span class="line">*** Query: Reenter:</span><br><span class="line"></span><br><span class="line">*** Info: User &apos;cyg_server&apos; has been created with password &apos;FT7m4VhgN9W1212&apos;.</span><br><span class="line">*** Info: If you change the password, please remember also to change the</span><br><span class="line">*** Info: password for the installed services which use (or will soon use)</span><br><span class="line">*** Info: the &apos;cyg_server&apos; account.</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">*** Info: The sshd service has been installed under the &apos;cyg_server&apos;</span><br><span class="line">*** Info: account.  To start the service now, call `net start sshd&apos; or</span><br><span class="line">*** Info: `cygrunsrv -S sshd&apos;.  Otherwise, it will start automatically</span><br><span class="line">*** Info: after the next reboot.</span><br><span class="line"></span><br><span class="line">*** Info: Host configuration finished. Have fun!</span><br></pre></td></tr></table></figure>
</li>
<li><p>启动openssh服务</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">net start sshd  启动</span><br><span class="line">net stop sshd   关闭</span><br><span class="line"></span><br><span class="line">cygrunsrv --start sshd  启动</span><br><span class="line">cygrunsrv --stop  sshd  关闭</span><br></pre></td></tr></table></figure>
</li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.smallasa.com/2017/03/21/windows-cygwin-install/" data-id="cjavy9k7r00b80coq3aiudsr3" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-linux-common-use-scripts" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/03/21/linux-common-use-scripts/" class="article-date">
  <time datetime="2017-03-20T16:35:57.000Z" itemprop="datePublished">2017-03-21</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/system-service/">system service</a>►<a class="article-category-link" href="/categories/system-service/CentOS/">CentOS</a>►<a class="article-category-link" href="/categories/system-service/CentOS/linux-common-use-scripts/">linux common use scripts</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/03/21/linux-common-use-scripts/">linux common use scripts</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <ol>
<li><p>switch 切换目录</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/expect -f</span></span><br><span class="line"><span class="built_in">set</span> dirname [lindex <span class="variable">$argv</span> 0]</span><br><span class="line">spawn sudo su - <span class="variable">$dirname</span></span><br><span class="line">expect <span class="string">"adminlp:"</span></span><br><span class="line">send <span class="string">"adminlp@v\$3234\r"</span></span><br><span class="line">interact</span><br></pre></td></tr></table></figure>
</li>
<li><p>cp 拷贝</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/expect -f</span></span><br><span class="line"><span class="built_in">set</span> file [lindex <span class="variable">$argv</span> 0]</span><br><span class="line"><span class="built_in">set</span> dir  [lindex <span class="variable">$argv</span> 1]</span><br><span class="line">spawn sudo cp <span class="variable">$file</span> <span class="variable">$dir</span></span><br><span class="line">expect <span class="string">"adminlp:"</span></span><br><span class="line">send <span class="string">"adminlp@v\$3234\r"</span></span><br><span class="line">interact</span><br></pre></td></tr></table></figure>
</li>
<li><p>cmd 串行执行</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line">file=<span class="variable">$1</span></span><br><span class="line">cmd=<span class="variable">$2</span></span><br><span class="line">num=1</span><br><span class="line"><span class="keyword">for</span> ip <span class="keyword">in</span> `cat <span class="variable">$file</span>|grep -v <span class="string">"#"</span>|awk <span class="string">'&#123;print $2&#125;'</span>|sort|uniq`;<span class="keyword">do</span></span><br><span class="line">  <span class="built_in">echo</span> <span class="string">"<span class="variable">$num</span>: <span class="variable">$ip</span>:"</span></span><br><span class="line">  <span class="comment">#ssh mrdTomcat@$ip "$cmd"</span></span><br><span class="line">  ssh <span class="variable">$ip</span> <span class="string">"<span class="variable">$cmd</span>"</span></span><br><span class="line">  <span class="built_in">echo</span></span><br><span class="line">  num=$((<span class="variable">$num</span>+1))</span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>scp 串行拷贝</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line">file=<span class="variable">$1</span></span><br><span class="line">scp_s=<span class="variable">$2</span></span><br><span class="line">scp_d=<span class="variable">$3</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> ip <span class="keyword">in</span> `cat <span class="variable">$file</span>|grep -v <span class="string">"#"</span>|awk <span class="string">'&#123;print $2&#125;'</span>|sort|uniq`;<span class="keyword">do</span></span><br><span class="line">  <span class="built_in">echo</span> <span class="string">"<span class="variable">$ip</span>:"</span></span><br><span class="line">  scp <span class="variable">$scp_s</span> mrdTomcat@<span class="variable">$ip</span>:<span class="variable">$scp_d</span></span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure>
</li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.smallasa.com/2017/03/21/linux-common-use-scripts/" data-id="cjavy9jyy00550coqyapmal8a" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-TCP-IP-模型" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/03/20/TCP-IP-模型/" class="article-date">
  <time datetime="2017-03-20T15:58:42.000Z" itemprop="datePublished">2017-03-20</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/TCP-IP/">TCP.IP</a>►<a class="article-category-link" href="/categories/TCP-IP/TCP-IP模型/">TCP/IP模型</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/03/20/TCP-IP-模型/">TCP IP 模型</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="TCP-IP"><a href="#TCP-IP" class="headerlink" title="TCP/IP"></a>TCP/IP</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">TCP划分两个协议:</span><br><span class="line">* 传输控制协议(TCP)</span><br><span class="line">* 网际协议(IP)</span><br><span class="line">* *IP处理数据报的路由选择;TCP负责更高层的一些功能,如:分段,重装和差错检测*</span><br><span class="line">* 逻辑拓扑图:</span><br><span class="line">  本地ISP =&gt; 地区ISP =&gt; 主干ISP =&gt; NAP = NAP &lt;= 主干ISP &lt;= 地区ISP &lt;= 本地ISP</span><br></pre></td></tr></table></figure>
<h3 id="协议和标准"><a href="#协议和标准" class="headerlink" title="协议和标准"></a>协议和标准</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">* 协议</span><br><span class="line">  协议就是用以管理通信的一组规则</span><br><span class="line">  协议要素:</span><br><span class="line">  1. 语法</span><br><span class="line">     语法就是数据的结构或格式,也就是数据呈现的顺序</span><br><span class="line">  2. 语义</span><br><span class="line">     语义指的是每一段比特流分别表示什么意思</span><br><span class="line">  3. 时序</span><br><span class="line">     时序涉及两个方面:</span><br><span class="line">     * 数据应当在何时发送出去</span><br><span class="line">     * 数据能够以多快的速度发送</span><br><span class="line">* 标准</span><br><span class="line">  数据通信标准分两类:</span><br><span class="line">  1. 事实上的标准</span><br><span class="line">     事实上的标准往往最初被一些厂家在试图定义某个新产品或技术的功能时采用</span><br><span class="line">  2. 法律上的标准</span><br><span class="line">     法律上的标准指那些已经被官方认可的组织通过并确定的标准</span><br><span class="line"></span><br><span class="line">  标准化组织:</span><br><span class="line">  标准的开发通过一些标准创建委员会,论坛以及政府管理机构之间的合作来完成</span><br><span class="line">  * 标准创建委员会</span><br><span class="line">    * 国际化标准组织(ISO)</span><br><span class="line">    * 国际电信联盟-电信标准部(ITU-T)</span><br><span class="line">    * 美国国家标准化局(ANSI)</span><br><span class="line">    * 电气和电子工程师学会(IEEE)</span><br><span class="line">    * 电子工业协会(EIA)</span><br><span class="line">    * 万维网联盟(W3C)</span><br><span class="line">    * 开放移动联盟(OMA)</span><br><span class="line">  * 论坛</span><br><span class="line">    * 帧中继论坛</span><br><span class="line">    * ATM 论坛</span><br><span class="line">    * 通用即插即用论坛(UPnP)</span><br><span class="line">  * 管理机构</span><br><span class="line">    * 联邦通信委员会(FCC)</span><br></pre></td></tr></table></figure>
<h3 id="OSI模型和TCP-IP协议族"><a href="#OSI模型和TCP-IP协议族" class="headerlink" title="OSI模型和TCP/IP协议族"></a>OSI模型和TCP/IP协议族</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">TCP/IP被广泛应用在因特网中,现在成为了占主导地位的商用体系结构;而OSI模型则从来没有被完全实现过</span><br></pre></td></tr></table></figure>
<h3 id="OSI模型"><a href="#OSI模型" class="headerlink" title="OSI模型"></a>OSI模型</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">OSI模型的作用就是展示两个不同的系统怎样做到互相通信,且不需要改变底层的硬件或软件逻辑</span><br><span class="line">OSI模型不是一个协议,它是一个分层框架结构,其目的是为了设计出能够让各种类型的计算机系统互相通信的网络系统</span><br></pre></td></tr></table></figure>
<ol>
<li><p>分层的体系结构</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">OSI模型由7个排列的层组成:</span><br><span class="line">1. 物理层</span><br><span class="line">2. 数据链路层</span><br><span class="line">3. 网络层</span><br><span class="line">4. 传输层</span><br><span class="line">5. 会话层</span><br><span class="line">6. 表示层</span><br><span class="line">7. 应用层</span><br><span class="line">*报文的传输一般只涉及OSI模型的下三层:物理层,数据链路层,网络层*</span><br></pre></td></tr></table></figure>
</li>
<li><p>层与层之间的通信</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">1. 层之间的接口</span><br><span class="line">   每个接口都定义了该层必须向它的上层提供什么样的信息和服务</span><br><span class="line">2. 层的组织方式</span><br><span class="line">   OSI七层可以看属于三个组:</span><br><span class="line">   * 物理层,数据链路层,网络层 是 网络支撑层,这些层的任务是把数据从一个设备传送到另一个设备</span><br><span class="line">   * 会话层,表示层,应用层 是 用户支撑层,这些层使得一些本来没有关系的软件系统之间有了互相操作性</span><br><span class="line">   * 传输层 是将这两层连接起来,使得底层发送的是高层可以使用的形式</span><br></pre></td></tr></table></figure>
</li>
<li><p>封装</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">第7层的分组被封装在第6层的分组中;第6层的分组被封装在第5层的分组中,以此类推</span><br></pre></td></tr></table></figure>
</li>
<li><p>OSI模型中的各层</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line">* 物理层</span><br><span class="line">  物理层通过物理媒体传送比特流时所需要的各种功能</span><br><span class="line">  物理层涉及到接口和传送媒体的机械和电气规约</span><br><span class="line">  物理层关心的内容:</span><br><span class="line">  * 接口和媒体的物理特性</span><br><span class="line">  * 比特的表示(比特流(0和1序列)经过编码变成信号:电或光)</span><br><span class="line">  * 数据率(传输速率,每秒发送比特数)</span><br><span class="line">  * 比特的同步(发送和接收设备时钟同步)</span><br><span class="line">  * 线路配置(点对点配置,多点配置)</span><br><span class="line">  * 物理拓扑(网状拓扑,星状拓扑,环状拓扑,总线拓扑)</span><br><span class="line">  * 传输方式(单工方式,半双工方式,全双工方式)  </span><br><span class="line">* 数据链路层</span><br><span class="line">  数据链路层的任务:</span><br><span class="line">  * 组帧(将比特流划分成可以处理的数据单元,称为帧)</span><br><span class="line">  * 物理编址(在帧上附加一个首部,指明帧的发送方或接收方,本地寻址)</span><br><span class="line">  * 流量控制(接收方接收数据的速度小于发送方发送数据的速率,那么链路层使用流量控制来限速)</span><br><span class="line">  * 差错控制(检测并重传损伤或丢失的帧,增加了物理层的可靠性.帧后加尾部实现)</span><br><span class="line">  * 接入控制(当多个设备连接到同一个链路时,数据链路层必须决定任意时刻该由哪个设备对链路有控制权)</span><br><span class="line">* 网络层</span><br><span class="line">  网络层负责把分组从源点交付到终点,这可能哟啊跨越多个网络(链路)</span><br><span class="line">  网络层的任务:</span><br><span class="line">  * 逻辑编址(网络层给从上层传来的分组附加一个首部,包括发送方和接收方的逻辑地址和其他信息)</span><br><span class="line">  * 路由选择(多个独立网络或链路互相连接组成互联网,这些连接设备就要为数据分组选路或交换到达目的地)</span><br><span class="line">* 传输层</span><br><span class="line">  传输层负责报文的进程到进程的交付.进程是运行在主机上的应用程序</span><br><span class="line">  传输层确保整个报文原封不动的按顺序到达,它监督从源点到终点这一级的差错控制和流量控制</span><br><span class="line">  传输层任务:</span><br><span class="line">  * 服务点编址(传输层首部必须包含服务点地址(端口地址))</span><br><span class="line">  * 分段与重装(一个报文划分若干报文段,每个报文段包含一个序号.报文到达时,传输层利用序号将它们重装起来,丢失的分组也能识别并替换为正确的分组)</span><br><span class="line">  * 连接控制(传输层可以是无连接的,也可以面向连接的)</span><br><span class="line">  * 流量控制(传输层的流量是端到端的)</span><br><span class="line">  * 差错控制(传输层的差错控制是端到端的)</span><br><span class="line">* 会话层</span><br><span class="line">  对某些进程来说,下四层提供的服务还不够充分.</span><br><span class="line">  会话层就是网络的对话控制器,它用于建立,维持并同步正在通信的系统之间的交互</span><br><span class="line">  会话层任务:</span><br><span class="line">  * 对话控制(运行两个进程之间的通信按半双工或全双工方式进行)</span><br><span class="line">  * 同步(会话层允许在数据流中插入若干检查点,用于确认数据是否正常,是否需要重传)</span><br><span class="line">* 表示层</span><br><span class="line">  表示层考虑的问题是两个系统所交换的信息的语法和语义</span><br><span class="line">  表示层任务:</span><br><span class="line">  * 转换(在不同的编码方法之间提供互操作性,发送方转换成公共格式,接收方将公共格式转换为相应格式)</span><br><span class="line">  * 加密(将原始信息转换为另一种形式,然后发送到网上)</span><br><span class="line">  * 压缩(数据压缩减少了信息中包含的比特数)</span><br><span class="line">* 应用层</span><br><span class="line">  应用层让用户能够接入网络(给用户提供接口,也提供服务支持)</span><br><span class="line">  应用层提供特定服务:</span><br><span class="line">  * 网络虚拟终端</span><br><span class="line">  * 文件传送,存取和管理(FTAM)</span><br><span class="line">  * 邮件服务</span><br><span class="line">  * 名录服务</span><br></pre></td></tr></table></figure>
</li>
<li><p>TCP/IP协议族</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">TCP/IP协议族目前被认为是一个五层模型:</span><br><span class="line">* 物理层</span><br><span class="line">* 数据链路层</span><br><span class="line">* 网络层</span><br><span class="line">* 传输层</span><br><span class="line">* 应用层</span><br><span class="line">*TCP/IP 与 OSI模型相比少了会话层和表示层:*</span><br><span class="line">* TCP/IP有很多传输层协议,会话层的某些功能在传输层协议中已经具备</span><br><span class="line">* 应用层并不仅仅是一个软件,这一层允许开发的应用很多.特定的应用程序需要使用到会话层和表示层中的某些功能,这些功能可以包含在应用软件中进行开发</span><br><span class="line">* TCP/IP是一个分层协议,它由多个交互的模块构成,每个模块有特定的功能,这些模块并不是必须互相依赖的</span><br><span class="line">* OSI模型具体规定了哪一层应该具备哪些功能,而TCP/IP协议族的每一层包含的是一些相对独立的协议,可以根据系统的需要把这些协议混合并重新搭配使用</span><br></pre></td></tr></table></figure>
</li>
<li><p>TCP/IP中的各层</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">* 物理层</span><br><span class="line">  TCP/IP没有定义任何特定的协议,它支持所有标准和专用协议</span><br><span class="line">  通信以比特为单位,当两个节点之间建立连接后，就会有一个比特流在它们之间流动.</span><br><span class="line">  但对于物理层来说每个比特都将被独立对待</span><br><span class="line">  *注意: 如果一个节点与n条链路相连,那么它需要n个物理层协议,每条链路各需要一个,原因在于不同的链路可能使用不能的物理层协议*</span><br><span class="line">* 数据链路层</span><br><span class="line">  TCP/IP没有为数据链路层定义任何特定的协议,它支持所有标准和专用协议</span><br><span class="line">  通信仍然发生在两个节点之间,不过通信的单位却是帧的分组</span><br><span class="line">  一个帧就是封装了来自网络层的数据的分组,并为其附加一个首部,有时再加一个尾部</span><br><span class="line">  在首部主要包含了这个帧的源地址和目的地址</span><br><span class="line">  *注意: 当一个节点接收到一个帧后,就会将其提交给数据链路层，该帧被打开,卸下数据,然后在通过数据链路层重新生成一个新的帧，用于传输*</span><br><span class="line">* 网络层</span><br><span class="line">  在网络层,TCP/IP支持的是网际协议(IP),IP传输的是称为数据报的分组,每个数据报独立传输,不同的数据报可以走不同的路由,也可能不按顺序到达,也可能会重复</span><br><span class="line">  IP不会跟踪记录这些数据报走过的路由,并且在它们到达目的地后,IP也不具有按原顺序重排的能力</span><br><span class="line">  *注意:网络层上的通信是端到端的通信,而数据链路层和物理层的通信是节点到节点的通信*</span><br><span class="line">* 传输层</span><br><span class="line">  传输层和网络层之间一个重要的区别:</span><br><span class="line">  **网络中的所有节点都必须具有网络层,但只有两端的计算机上才具有传输层**</span><br><span class="line">  **网络层负责将一个个数据报独立地从计算机A发送到计算机B,而传输层负责将完整的报文从计算机A发送给计算机B.一个报文可以被分个成若干个数据报,数据报通过网络层传输**</span><br><span class="line"></span><br><span class="line">  TCP/IP传输层有两个传输层协议:</span><br><span class="line">  * 用户数据报协议(UDP)</span><br><span class="line">  * 传输控制协议(TCP)</span><br><span class="line">  * 流控制传输协议(SCTP)</span><br><span class="line">  *注意:传输单位可以是报文段/用户数据报或者分组*</span><br><span class="line">* 应用层</span><br><span class="line">  应用层使用户能够获得网络所提供的服务</span><br><span class="line">  *注意: 应用层的通信与传输层的通信一样,都是端到端的。通信单位是报文*</span><br></pre></td></tr></table></figure>
</li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.smallasa.com/2017/03/20/TCP-IP-模型/" data-id="cjavy9jty000v0coq6dmd677q" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-分布式二阶段和三阶段提交协议" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/03/20/分布式二阶段和三阶段提交协议/" class="article-date">
  <time datetime="2017-03-20T13:03:58.000Z" itemprop="datePublished">2017-03-20</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/other/">other</a>►<a class="article-category-link" href="/categories/other/分布式二阶段和三阶段提交协议/">分布式二阶段和三阶段提交协议</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/03/20/分布式二阶段和三阶段提交协议/">分布式二阶段和三阶段提交协议</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">在分布式系统中,为了保证数据的高可用,通常,我们会将数据保留多个副本(replica),这些副本会放置在不同的物理的机器上.为了对用户提供正确的增,删,改,差等语义,我们需要保证这些放置在不同物理机器上的副本是一致的.</span><br><span class="line"></span><br><span class="line">为了解决这种分布式一致性问题,前人在性能和数据一致性的反反复复权衡过程中总结了许多典型的协议和算法.</span><br><span class="line">其中比较著名的有二阶提交协议(Two Phase Commitment Protocol)和三阶提交协议(Three Phase Commitment Protocol)和Paxos算法</span><br></pre></td></tr></table></figure>
<ol>
<li><p>分布式事务</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">分布式事务是指会涉及到操作多个数据库的事务(其实就是将对同一库事务的概念扩大到了对多个库的事务).目的是为了保证分布式系统中的数据一致性.分布式事务处理的关键是必须有一种方法可以知道事务在任何地方所做的所有动作,提交或回滚事务的决定必须产生统一的结果(全部提交或全部回滚)</span><br><span class="line"></span><br><span class="line">在分布式系统中,各个节点之间在物理上相互独立,通过网络进行沟通和协调.由于存在事务机制,可以保证每个独立节点上的数据操作可以满足ACID.但是,相互独立的节点之间无法准确的知道其他节点中的事务执行情况.所以从理论上讲,两台机器理论上无法达到一致的状态.如果想让分布式部署的多台机器中的数据保持一致性,那么就要保证在所有节点的数据操作,要不全部都执行,要么全部的都不执行.但是,一台机器在执行本地事务的时候无法知道其他机器中的本地事务的执行结果.所以它也就不知道本次事务到底应该commit还是roolback.所以,常规的解决办法就是引入一个&quot;协调者&quot;的组件来统一调度所有分布式节点的执行.</span><br></pre></td></tr></table></figure>
</li>
<li><p>XA规范</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">X/Open组织(即现在的Open Group)定义了分布式事务处理模型.</span><br><span class="line">X/Open DTP模型(1994)包括: 应用程序(AP),事务管理器(TM),资源管理器(RM),通信资源管理器(CRM)四部分.</span><br><span class="line">一般,常见的事务管理器(TM)是交易中间件,常见的资源管理器(RM)是数据库,常见的通信资源管理器(CRM)是消息中间件.</span><br><span class="line"></span><br><span class="line">通常把一个数据库内部的事务处理(如对多个表的操作)作为本地事务看待.</span><br><span class="line">数据库的事务处理对象是本地事务,而分布式事务处理的对象是全局事务.</span><br><span class="line">所谓全局事务,是指分布式事务处理环境中,多个数据库可能需要共同完成一个工作,这个工作即是一个全局事务(例如,一个事务中可能更新几个不同的数据库,对数据库的操作发生在系统的各处但必须全部被提交或回滚).此时一个数据库对自己内部所做操作的提交不仅依赖本身操作是否成功,还要依赖与全局事务相关的其它数据库的操作是否成功.如果任一数据库的任一操作失败,则参与此事务的所有数据库所做的所有操作都必须回滚.一般情况下,某一数据库无法知道其它数据库在做什么,因此,在一个DTP环境中,交易中间件是必需的,由它通知和协调相关数据库的提交或回滚.而一个数据库只将其自己所做的操作(可恢复)影射到全局事务中.</span><br><span class="line"></span><br><span class="line">XA 就是&quot;X/Open DTP&quot;定义的交易中间件与数据库之间的接口规范(即接口函数),交易中间件用它来通知数据库事务的开始,结束以及提交,回滚等.</span><br><span class="line">XA 接口函数由数据库厂商提供</span><br><span class="line"></span><br><span class="line">二阶提交协议和三阶提交协议就是根据这一思想衍生出来的.可以说二阶段提交其实就是实现XA分布式事务的关键(确切地说:两阶段提交主要保证了分布式事务的原子性&quot;即所有结点要么全做要么全不做&quot;)</span><br></pre></td></tr></table></figure>
</li>
<li><p>2PC</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">二阶段提交(Two-phaseCommit)也叫二阶段提交协议(Two-phaseCommit protocol)</span><br><span class="line"></span><br><span class="line">二阶段提交是指在计算机网络以及数据库领域内,为了使基于分布式系统架构下的所有节点在进行事务提交时保持一致性而设计的一种算法(Algorithm).</span><br><span class="line"></span><br><span class="line">在分布式系统中,每个节点虽然可以知晓自己的操作时成功或者失败,却无法知道其他节点的操作的成功或失败.当一个事务跨越多个节点时,为了保持事务的ACID特性,需要引入一个作为&quot;协调者&quot;的组件来统一掌控所有节点(称作参与者)的操作结果,并最终指示这些节点是否要把操作结果进行真正的提交(比如将更新后的数据写入磁盘等等).</span><br><span class="line">因此,二阶段提交的算法思路可以概括为:参与者将操作成败通知协调者,再由协调者根据所有参与者的反馈情报决定各参与者是否要提交操作还是中止操作.</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">二阶提交协议两个阶段: 准备阶段(投票阶段) 和 提交阶段(执行阶段)</span><br><span class="line">1.准备阶段</span><br><span class="line">  事务协调者(事务管理器)给每个参与者(资源管理器)发送Prepare消息,每个参与者要么直接返回失败(如权限验证失败),要么在本地执行事务,写本地的redo和undo日志,但不提交,到达一种&quot;万事俱备,只欠东风&quot;的状态</span><br><span class="line"></span><br><span class="line">  可以进一步将准备阶段分为以下三个步骤:</span><br><span class="line">    1.协调者节点向所有参与者节点询问是否可以执行提交操作(vote),并开始等待各参与者节点的响应</span><br><span class="line">    2.参与者节点执行询问发起的所有事务操作,并将Undo信息和Redo信息写入日志.(注意:若成功这里其实每个参与者已经执行了事务操作)</span><br><span class="line">    3.各参与者节点响应协调者节点发起的询问.如果参与者节点的事务操作实际执行成功,则它返回一个&quot;同意&quot;消息;如果参与者节点的事务操作实际执行失败,则它返回一个&quot;终止&quot;消息</span><br><span class="line"></span><br><span class="line">2.提交阶段</span><br><span class="line">  如果协调者收到了参与者的失败消息或者超时,直接给每个参与者发送回滚(Rollback)消息,否则,发送提交(Commit)消息.参与者根据协调者的指令执行提交或者回滚操作,释放所有事务处理过程中使用的锁资源.(注意:必须在最后阶段释放锁资源)</span><br><span class="line"></span><br><span class="line">  接下来分两种情况分别讨论提交阶段的过程:</span><br><span class="line">    1.当协调者节点从所有参与者节点获得的相应消息都为&quot;同意&quot;时</span><br><span class="line">      1.协调者节点向所有参与者节点发出&quot;正式提交(commit)&quot;的请求</span><br><span class="line">      2.参与者节点正式完成操作,并释放在整个事务期间内占用的资源</span><br><span class="line">      3.参与者节点向协调者节点发送&quot;完成&quot;消息</span><br><span class="line">      4.协调者节点接收到所有参与者节点反馈的&quot;完成&quot;消息后,完成事务</span><br><span class="line"></span><br><span class="line">    2.如果任一参与者节点在第一阶段返回的响应消息为&quot;终止&quot;,或者 协调者节点在第一阶段的询问超时之前无法获取所有参与者节点的响应消息</span><br><span class="line">      1.协调者节点向所有参与者节点发出&quot;回滚操作(rollback)&quot;的请求</span><br><span class="line">      2.参与者节点利用之前写入的Undo信息执行回滚,并释放在整个事务期间内占用的资源</span><br><span class="line">      3.参与者节点向协调者节点发送&quot;回滚完成&quot;消息</span><br><span class="line">      4.协调者节点接收到所有参与者节点反馈的&quot;回滚完成&quot;消息后,取消事务</span><br><span class="line">  不管最后结果如何,第二阶段都会结束当前事务</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">二阶段提交看起来确实能够提供原子性的操作,但是不幸的事,二阶段提交还是有几个缺点的:</span><br><span class="line">  1.同步阻塞问题</span><br><span class="line">    执行过程中,所有参与节点都是事务阻塞型的.当参与者占有公共资源时,其他第三方节点访问公共资源不得不处于阻塞状态</span><br><span class="line">  2.单点故障</span><br><span class="line">    由于协调者的重要性,一旦协调者发生故障,参与者会一直阻塞下去.尤其在第二阶段,协调者发生故障,那么所有的参与者还都处于锁定事务资源的状态中,而无法继续完成事务操作(如果是协调者挂掉,可以重新选举一个协调者,但是无法解决因为协调者宕机导致的参与者处于阻塞状态的问题)</span><br><span class="line">  3.数据不一致</span><br><span class="line">    在二阶段提交的阶段二中,当协调者向参与者发送commit请求之后,发生了局部网络异常或者在发送commit请求过程中协调者发生了故障,这会导致只有一部分参与者接受到了commit请求.而在这部分参与者接到commit请求之后就会执行commit操作,但是其他部分未接到commit请求的机器则无法执行事务提交.于是整个分布式系统便出现了数据不一致性的现象</span><br><span class="line">  4.二阶段无法解决的问题</span><br><span class="line">    协调者再发出commit消息之后宕机,而唯一接收到这条消息的参与者同时也宕机了.那么即使协调者通过选举协议产生了新的协调者,这条事务的状态也是不确定的,没人知道事务是否被已经提交</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">由于二阶段提交存在着诸如同步阻塞,单点问题,脑裂等缺陷,所以,研究者们在二阶段提交的基础上做了改进,提出了三阶段提交.</span><br></pre></td></tr></table></figure>
</li>
<li><p>3PC</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line">三阶段提交(Three-phase commit),也叫三阶段提交协议(Three-phase commit protocol),是二阶段提交(2PC)的改进版</span><br><span class="line"></span><br><span class="line">与两阶段提交不同的是,三阶段提交有两个改动点:</span><br><span class="line">  1.引入超时机制.同时在协调者和参与者中都引入超时机制</span><br><span class="line">  2.在第一阶段和第二阶段中插入一个准备阶段.保证了在最后提交阶段之前各参与节点的状态是一致的</span><br><span class="line">也就是说,除了引入超时机制之外,3PC把2PC的准备阶段再次一分为二,这样三阶段提交就有CanCommit,PreCommit,DoCommit三个阶段</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">1.CanCommit阶段</span><br><span class="line">  3PC的CanCommit阶段其实和2PC的准备阶段很像.协调者向参与者发送commit请求,参与者如果可以提交就返回Yes响应,否则返回No响应</span><br><span class="line">    1.事务询问</span><br><span class="line">      协调者向参与者发送CanCommit请求.询问是否可以执行事务提交操作.然后开始等待参与者的响应</span><br><span class="line">    2.响应反馈</span><br><span class="line">      参与者接到CanCommit请求之后,正常情况下,如果其自身认为可以顺利执行事务,则返回Yes响应,并进入预备状态.否则反馈No</span><br><span class="line">2.PreCommit阶段</span><br><span class="line">  协调者根据参与者的反应情况来决定是否可以执行事务的PreCommit操作.根据响应情况,有以下两种可能:</span><br><span class="line">  1.假如协调者从所有的参与者获得的反馈都是Yes响应,那么就会执行事务的预执行</span><br><span class="line">    1.发送预提交请求</span><br><span class="line">      协调者向参与者发送PreCommit请求,并进入Prepared阶段</span><br><span class="line">    2.事务预提交</span><br><span class="line">      参与者接收到PreCommit请求后,会执行事务操作,并将undo和redo信息记录到事务日志中</span><br><span class="line">    3.响应反馈</span><br><span class="line">      如果参与者成功的执行了事务操作,则返回ACK响应,同时开始等待最终指令</span><br><span class="line">  2.假如有任何一个参与者向协调者发送了No响应,或者等待超时之后,协调者都没有接到参与者的响应,那么就执行事务的中断</span><br><span class="line">    1.发送中断请求</span><br><span class="line">      协调者向所有参与者发送abort请求</span><br><span class="line">    2.中断事务</span><br><span class="line">      参与者收到来自协调者的abort请求之后(或超时之后,仍未收到协调者的请求)执行事务的中断</span><br><span class="line">3.doCommit阶段</span><br><span class="line">  该阶段进行真正的事务提交,也可以分为以下两种情况:</span><br><span class="line">  1.执行提交</span><br><span class="line">    协调者接收到参与者发送的ACK响应</span><br><span class="line">    1.发送提交请求</span><br><span class="line">      协调接收到参与者发送的ACK响应,那么他将从预提交状态进入到提交状态.并向所有参与者发送doCommit请求</span><br><span class="line">    2.事务提交</span><br><span class="line">      参与者接收到doCommit请求之后,执行正式的事务提交.并在完成事务提交之后释放所有事务资源</span><br><span class="line">    3.响应反馈</span><br><span class="line">      事务提交完之后,向协调者发送Ack响应</span><br><span class="line">    4.完成事务</span><br><span class="line">      协调者接收到所有参与者的ack响应之后,完成事务</span><br><span class="line">  2.中断事务</span><br><span class="line">    协调者没有接收到参与者发送的ACK响应(可能是接受者发送的不是ACK响应,也可能响应超时),那么就会执行中断事务</span><br><span class="line">    1.发送中断请求</span><br><span class="line">      协调者向所有参与者发送abort请求</span><br><span class="line">    2.事务回滚</span><br><span class="line">      参与者接收到abort请求之后,利用其在阶段二记录的undo信息来执行事务的回滚操作,并在完成回滚之后释放所有的事务资源</span><br><span class="line">    3.反馈结果</span><br><span class="line">      参与者完成事务回滚之后,向协调者发送ACK消息</span><br><span class="line">    4.中断事务</span><br><span class="line">      协调者接收到参与者反馈的ACK消息之后,执行事务的中断</span><br><span class="line"></span><br><span class="line">  注意: 在doCommit阶段,如果参与者无法及时接收到来自协调者的doCommit或者rebort请求时,会在等待超时之后,继续进行事务的提交(其实这个应该是基于概率来决定的,当进入第三阶段时,说明参与者在第二阶段已经收到了PreCommit请求,那么协调者产生PreCommit请求的前提条件是它在第二阶段开始之前,收到所有参与者的CanCommit响应都是Yes.一旦参与者收到了PreCommit,意味他知道大家其实都同意修改了.所以,当进入第三阶段时,由于网络超时等原因,虽然参与者没有收到commit或者abort响应,但是他有理由相信:成功提交的几率很大)</span><br></pre></td></tr></table></figure>
</li>
<li><p>2PC与3PC区别</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">相对于2PC,3PC主要解决的单点故障问题,并减少阻塞,因为一旦参与者无法及时收到来自协调者的信息之后,他会默认执行commit.而不会一直持有事务资源并处于阻塞状态.但是这种机制也会导致数据一致性问题,因为,由于网络原因,协调者发送的abort响应没有及时被参与者接收到,那么参与者在等待超时之后执行了commit操作.这样就和其他接到abort命令并执行回滚的参与者之间存在数据不一致的情况.</span><br><span class="line"></span><br><span class="line">了解了2PC和3PC之后,我们可以发现,无论是二阶段提交还是三阶段提交都无法彻底解决分布式的一致性问题</span><br></pre></td></tr></table></figure>
</li>
<li><p>一阶段提交</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">不像两阶段提交那样复杂,一阶段提交非常直白,就是从应用程序向数据库发出提交请求,到数据库完成提交或回滚之后,将结果返回给应用程序的过程.</span><br><span class="line">一阶段提交不需要&quot;协调者&quot;角色,各节点之间不存在协调操作,因此其事务执行时间比两阶段提交要短,但是提交的&quot;危险期&quot;是每一个事务的实际提交时间.</span><br><span class="line">相比于两阶段提交,一阶段提交出现在&quot;不一致&quot;的概率就变大了.但是我们必须注意到:只有当基础设施出现问题的时候(如网络中断,宕机等),一阶段提交才可能会出现&quot;不一致&quot;的情况,相比它的性能优势,很多团队都会选择这一方案</span><br></pre></td></tr></table></figure>
</li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.smallasa.com/2017/03/20/分布式二阶段和三阶段提交协议/" data-id="cjavy9k9100ce0coqapys9ncv" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  


  <nav id="page-nav">
    
    <a class="extend prev" rel="prev" href="/page/15/">&laquo; 上一页</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/14/">14</a><a class="page-number" href="/page/15/">15</a><span class="page-number current">16</span><a class="page-number" href="/page/17/">17</a><a class="page-number" href="/page/18/">18</a><span class="space">&hellip;</span><a class="page-number" href="/page/29/">29</a><a class="extend next" rel="next" href="/page/17/">下一页 &raquo;</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">分类</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/AliCloud/">AliCloud</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/AliCloud/SDK/">SDK</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/AliCloud/SDK/Python-SDK/">Python SDK</a></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Android/">Android</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Android/Android-install/">Android install</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Android/Android-install/Android-studio-install/">Android studio install</a></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Development/">Development</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Development/Doc/">Doc</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Development/Doc/HTTP-严格传输安全HSTS/">HTTP 严格传输安全HSTS</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Development/Doc/HTTP协议/">HTTP协议</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Development/Doc/TCP-协议详解/">TCP 协议详解</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Development/Doc/TCP与socket区别/">TCP与socket区别</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Development/Doc/linux-文件描述符与打开文件之间的关系/">linux 文件描述符与打开文件之间的关系</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Development/Doc/linux-文件系统inode/">linux 文件系统inode</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Development/Doc/一次完整的HTTP请求/">一次完整的HTTP请求</a></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Disk/">Disk</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Disk/disk-io-performance/">disk io performance</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Disk/disk-iostat/">disk iostat</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Distributed-storage/">Distributed storage</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Distributed-storage/GlusterFS/">GlusterFS</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Distributed-storage/GlusterFS/GlusterFS-architecture/">GlusterFS architecture</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Distributed-storage/GlusterFS/GlusterFS-info/">GlusterFS info</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Distributed-storage/GlusterFS/GlusterFS-install/">GlusterFS install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Distributed-storage/GlusterFS/GlusterFS-workflow/">GlusterFS workflow</a></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/HA/">HA</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/HA/DRBD/">DRBD</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/HA/DRBD/DRBD-install/">DRBD install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/HA/keepalived/">keepalived</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/HA/keepalived/keepalived-install/">keepalived install</a></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/IDE/">IDE</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/IDE/Intellij/">Intellij</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/IDE/Intellij/Intellij-setting/">Intellij setting</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/IDE/vim/">vim</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/IDE/vim/vim-shortcut-key/">vim shortcut key</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/IDE/vim/vim-vimrc/">vim vimrc</a></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Kernel/">Kernel</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Kernel/kernel-memory/">kernel memory</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Kernel/kernel-memory/kernel-共享内存/">kernel 共享内存</a></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/">Monitor</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/ganglia/">ganglia</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/ganglia/ganglia-install/">ganglia install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/hmonitor/">hmonitor</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/hmonitor/hmonitor-install/">hmonitor install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/htmonitor/">htmonitor</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/htmonitor/htmonitor-install/">htmonitor install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/smokeping/">smokeping</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/smokeping/smokeping-install/">smokeping install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/zabbix/">zabbix</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/zabbix/monitor/">monitor</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/zabbix/monitor/zabbix-monitor-cpu/">zabbix monitor cpu</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/zabbix/monitor/zabbix-monitor-mem/">zabbix monitor mem</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/zabbix/zabbix-auto-discover/">zabbix auto discover</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/zabbix/zabbix-grafana-install/">zabbix grafana install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/zabbix/zabbix-install/">zabbix install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/zabbix/zabbix-install-distributed/">zabbix install distributed</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/zabbix/zabbix-item-and-tigger/">zabbix item and tigger</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/zabbix/zabbix-java-gateway/">zabbix java gateway</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/zabbix/zabbix-modify-login-user-passwd/">zabbix modify login user passwd</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/zabbix/zabbix-optimization/">zabbix optimization</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/zabbix/zabbix-proxy-install/">zabbix proxy install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/zabbix/zabbix-server-support-chinese/">zabbix server support chinese</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/zabbix/zabbix-windows-agent/">zabbix windows agent</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/树莓派/">树莓派</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/树莓派/树莓派-GSM-语音短信报警/">树莓派 GSM 语音短信报警</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/监控/">监控</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Monitor/监控/监控知识体系/">监控知识体系</a></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/">Python</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-Framework/">Python Framework</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-Framework/Python-Django/">Python Django</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-Framework/Python-Django-setting/">Python Django setting</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-Framework/Python-tornado-install/">Python tornado install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-Learn/">Python Learn</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-Learn/python-上下文管理器/">python 上下文管理器</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-Learn/python-内存管理/">python 内存管理</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-Learn/python-函数编程/">python 函数编程</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-Learn/python-变量/">python 变量</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-Learn/python-对象使用/">python 对象使用</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-Learn/python-对象的属性/">python 对象的属性</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-Learn/python-对象编程/">python 对象编程</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-Learn/python-数据类型/">python 数据类型</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-Learn/python-流程控制/">python 流程控制</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-Learn/python-爬虫/">python 爬虫</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-Learn/python-特殊方法/">python 特殊方法</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-Learn/python-特殊说明/">python 特殊说明</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-Learn/python-装饰器/">python 装饰器</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-Learn/python-过程编程/">python 过程编程</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-Learn/python-进阶/">python 进阶</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-Learn/python-闭包/">python 闭包</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-install/">Python install</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-install/python-error-info/">python error info</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-install/python-pip-source-image/">python pip source image</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-install/python-pip-use/">python pip use</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-install/python-pyenv-install/">python pyenv install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-install/python-setup-py/">python setup.py</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-install/python-source-install/">python source install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-install/python-virtualenv/">python virtualenv</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-library/">Python library</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-library/MySQLdb/">MySQLdb</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-library/memory-profiler/">memory_profiler</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-library/time-datetime-calendar/">time datetime calendar</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-modules/">Python modules</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-modules/python-modules-path/">python modules path</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-modules/python-modules-pylint-and-ipython/">python modules pylint and ipython</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-other/">Python other</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Python/Python-other/python-import-and-reload/">python import and reload</a></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Ruby/">Ruby</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Ruby/Ruby-install/">Ruby install</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Ruby/Ruby-install/Ruby-install/">Ruby install</a></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/TCP-IP/">TCP.IP</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/TCP-IP/TCP-状态/">TCP 状态</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/TCP-IP/TCP-IP模型/">TCP/IP模型</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/TCP-IP/Wireshark-use/">Wireshark use</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/WeChat/">WeChat</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/WeChat/WeChat-enterprise/">WeChat enterprise</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/WeChat/WeChat-enterprise/WeChat-enterprise-API/">WeChat enterprise API</a></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/">automation</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/automation/git/">git</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/automation/git/git-command/">git command</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/git/git-error/">git error</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/git/git-gitlab/">git gitlab</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/git/git-gitolite/">git gitolite</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/git/git-gogs/">git gogs</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/git/git-gogs-source-install/">git gogs source install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/git/git-init/">git init</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/git/git-workflow/">git workflow</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/jenkins/">jenkins</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/automation/jenkins/jenkins-info/">jenkins info</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/jenkins/jenkins-install/">jenkins install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/kvm/">kvm</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/automation/kvm/kvm-install/">kvm install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/maven/">maven</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/automation/maven/maven-install/">maven install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/nexus/">nexus</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/automation/nexus/nexus-install/">nexus install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/nexus/nexus-proxy-maven/">nexus proxy maven</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/rpm/">rpm</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/automation/rpm/rpm-package-build/">rpm package build</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/rpm/rpmbuild-spec/">rpmbuild spec</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/salt/">salt</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/automation/salt/salt-advanced-topic/">salt advanced topic</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/salt/salt-highstate/">salt highstate</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/salt/salt-info/">salt info</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/salt/salt-install/">salt install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/salt/salt-install-HA/">salt install HA</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/salt/salt-install-distributed/">salt install distributed</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/salt/salt-install-standard/">salt install standard</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/salt/salt-jinja2-grain-pillar-module/">salt jinja2 grain pillar module</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/salt/salt-manage-event-reactor/">salt manage event reactor</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/salt/salt-manage-grains/">salt manage grains</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/salt/salt-manage-job/">salt manage job</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/salt/salt-manage-module/">salt manage module</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/salt/salt-manage-pillar/">salt manage pillar</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/salt/salt-manage-return/">salt manage return</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/salt/salt-manage-states/">salt manage states</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/salt/salt-manage-target/">salt manage target</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/salt/salt-master-syndic-install/">salt master syndic install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/salt/salt-master-conf/">salt master.conf</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/salt/salt-minion-conf/">salt minion.conf</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/salt/salt-raet/">salt raet</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/salt/salt-state-module/">salt state module</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/salt/salt-syndic-conf/">salt syndic.conf</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/salt/salt-write-module-code/">salt write module code</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/svn/">svn</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/automation/svn/svn-auto-update/">svn auto update</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/automation/yum/">yum</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/automation/yum/yum-server-install/">yum server install</a></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/">database</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/database/Mongo/">Mongo</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/database/Mongo/mongo-auth/">mongo auth</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Mongo/mongo-error/">mongo error</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Mongo/mongo-replication-auth-install/">mongo replication auth install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Mongo/mongo-replication-standard-install/">mongo replication standard install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Mongo/mongo-standard-install/">mongo standard install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Mysql/">Mysql</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/database/Mysql/mysql-command/">mysql command</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Mysql/mysql-error-info/">mysql error info</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Mysql/mysql-explain/">mysql explain</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Mysql/mysql-grant/">mysql grant</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Mysql/mysql-index-options/">mysql index options</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Mysql/mysql-innodb-buffer-pool-flush/">mysql innodb buffer pool flush</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Mysql/mysql-master-slave/">mysql master slave</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Mysql/mysql-master-slave-switch/">mysql master slave switch</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Mysql/mysql-partition/">mysql partition</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Mysql/mysql-select-join/">mysql select join</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Mysql/mysql-slow-log/">mysql slow log</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Mysql/mysql-standard/">mysql standard</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Mysql/mysql-table-size/">mysql table size</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Mysql/mysql-use-memory-as-disk/">mysql use memory as disk</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Postgresql/">Postgresql</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/database/Postgresql/postgresql-book-use/">postgresql book use</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Postgresql/postgresql-master-slave-info/">postgresql master slave info</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Postgresql/postgresql-master-slave/">postgresql master/slave</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Postgresql/postgresql-plugin-install/">postgresql plugin install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Postgresql/postgresql-standard/">postgresql standard</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Postgresql/postgresql-tablespace-database-schema-table-user-role-relation/">postgresql tablespace database schema table user role relation</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Postgresql/postgresql-yum-install/">postgresql yum install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Postgresql/postgresql-常用命令/">postgresql 常用命令</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Postgresql/postgresql-数据库对象/">postgresql 数据库对象</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Postgresql/postgresql-数据库管理/">postgresql 数据库管理</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Redis/">Redis</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/database/Redis/redis-error/">redis error</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Redis/redis-install/">redis install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Redis/redis-redis-trib-rb/">redis redis-trib.rb</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Redis/redis-status/">redis status</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/Redis/redis-use/">redis use</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/influxDB/">influxDB</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/database/influxDB/influxDB-install/">influxDB install</a></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/golang/">golang</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/golang/go-env/">go env</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/">hadoop</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/RabbitMQ/">RabbitMQ</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/RabbitMQ/RabbitMQ-cluster/">RabbitMQ cluster</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/RabbitMQ/RabbitMQ-high-availability/">RabbitMQ high availability</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/RabbitMQ/RabbitMQ-info/">RabbitMQ info</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/RabbitMQ/RabbitMQ-install/">RabbitMQ install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/RabbitMQ/RabbitMQ-python-pika/">RabbitMQ python pika</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/RabbitMQ/RabbitMQ-user-and-grant/">RabbitMQ user and grant</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/RabbitMQ/RabbitMQ-working-principle/">RabbitMQ working principle</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/beats/">beats</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/beats/beats-install/">beats install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/datax/">datax</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/datax/datax-info/">datax info</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/datax/datax-install/">datax install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/datax/datax-job/">datax job</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/elasticsearch/">elasticsearch</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/elasticsearch/elasticsearch-backup-and-restore/">elasticsearch backup and restore</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/elasticsearch/elasticsearch-command/">elasticsearch command</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/elasticsearch/elasticsearch-core-component/">elasticsearch core component</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/elasticsearch/elasticsearch-exploring-your-cluster/">elasticsearch exploring your cluster</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/elasticsearch/elasticsearch-exploring-your-data/">elasticsearch exploring your data</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/elasticsearch/elasticsearch-four-search-type/">elasticsearch four search type</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/elasticsearch/elasticsearch-full-cluster-restart-upgrade/">elasticsearch full cluster restart upgrade</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/elasticsearch/elasticsearch-install/">elasticsearch install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/elasticsearch/elasticsearch-modifying-your-data/">elasticsearch modifying your data</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/elasticsearch/elasticsearch-rolling-upgrades/">elasticsearch rolling upgrades</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/elasticsearch/elasticsearch-safe-restart/">elasticsearch safe restart</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/elasticsearch/elasticsearch-shard/">elasticsearch shard</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/elasticsearch/how-to-tune-for-indexing-speed/">how to tune for indexing speed</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/elasticsearch/how-to-tune-for-search-speed/">how to tune for search speed</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/flume/">flume</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/flume/flume-info/">flume info</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/flume/flume-install/">flume install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/grafana/">grafana</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/grafana/grafana-install/">grafana install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/hadoop/">hadoop</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/hadoop/hadoop-简介/">hadoop 简介</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/kafka/">kafka</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/kafka/kafka-add-topic-partition/">kafka add topic partition</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/kafka/kafka-add-topic-replicats/">kafka add topic replicats</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/kafka/kafka-broker-config/">kafka broker config</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/kafka/kafka-high-throughput/">kafka high throughput</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/kafka/kafka-info/">kafka info</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/kafka/kafka-install/">kafka install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/kafka/kafka-manage-web/">kafka manage web</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/kafka/kafka-migrate-and-scale/">kafka migrate and scale</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/kafka/kafka-offset-monitor/">kafka offset monitor</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/kafka/kafka-optimize/">kafka optimize</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/kafka/kafka-use/">kafka use</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/kafka/kafka-web-console/">kafka web console</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/kafka/kafka-with-zookeeper/">kafka with zookeeper</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/kibana/">kibana</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/kibana/kibana-install/">kibana install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/logstash/">logstash</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/logstash/logstash-config-file/">logstash config file</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/logstash/logstash-filter-grok/">logstash filter grok</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/logstash/logstash-info/">logstash info</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/logstash/logstash-install/">logstash install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/mycat/">mycat</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/mycat/mycat-jvm-optimize/">mycat jvm optimize</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/mycat/mycat-web-install/">mycat web install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/nsq/">nsq</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/nsq/nsq-command/">nsq command</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/nsq/nsq-info/">nsq info</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/nsq/nsq-install/">nsq install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/zookeeper/">zookeeper</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/zookeeper/zookeeper-install/">zookeeper install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/zookeeper/zookeeper-monitor/">zookeeper monitor</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/zookeeper/zookeeper-optimize/">zookeeper optimize</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/zookeeper/zookeeper-use/">zookeeper use</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/zookeeper/zookeeper-zab-protocol/">zookeeper zab protocol</a></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/java/">java</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/java/java-env/">java env</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/java/java-jvm-optimize/">java jvm optimize</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/java/java-jvm-opts/">java jvm opts</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/java/java-jvm-原理/">java jvm 原理</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/java/java-learn/">java learn</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/java/java-learn/java-学习笔记/">java 学习笔记</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/java/java-log4j/">java log4j</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/java/java-performance-analysis/">java performance analysis</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/java/java-performance-analysis/jps/">jps</a></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/k8s/">k8s</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/k8s/k8s-dashboard-install/">k8s dashboard install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/k8s/k8s-install/">k8s install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/k8s/k8s-registry-install/">k8s registry install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/node/">node</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/node/node-install/">node install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/other/">other</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/other/ACID/">ACID</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/other/分布式二阶段和三阶段提交协议/">分布式二阶段和三阶段提交协议</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/other/开源许可协议/">开源许可协议</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/other/网络带宽/">网络带宽</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/">system service</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/Atlassian/">Atlassian</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/Atlassian/confluence-https/">confluence https</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/Atlassian/confluence-install/">confluence install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/Atlassian/confluence-reset-passwd/">confluence reset passwd</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/Atlassian/confluence-update/">confluence update</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/Atlassian/jira-https/">jira https</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/Atlassian/jira-install/">jira install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/Atlassian/jira-update/">jira update</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/Atlassian/mariadb-install/">mariadb install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/CentOS/">CentOS</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/CentOS/Base-env/">Base env</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/CentOS/linux-common-use-scripts/">linux common use scripts</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/CentOS/linux-history-info-setting/">linux history info setting</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/CentOS/linux-login-info/">linux login info</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/CentOS/linux-nginx-install/">linux nginx install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/CentOS/linux-skill/">linux skill</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/CentOS/linux-system-init/">linux system init</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/CentOS/linux-内存插槽-内存信息/">linux 内存插槽 内存信息</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/CentOS/linux-扩容swap分区/">linux 扩容swap分区</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/CentOS/linux-物理CPU-CPU核数-逻辑CPU/">linux 物理CPU CPU核数 逻辑CPU</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/CentOS/linux-磁盘系统block区别/">linux 磁盘系统block区别</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/CentOS/linux-设置-包含头文件路径-和-动态库链接路径/">linux 设置 包含头文件路径 和 动态库链接路径</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/CentOS/make提高源码编译速度/">make提高源码编译速度</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/NFS/">NFS</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/NFS/nfs-exports-command/">nfs exports command</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/NFS/nfs-install/">nfs install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/Samba/">Samba</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/Samba/samba-conf/">samba conf</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/Samba/samba-install/">samba install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/command/">command</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/command/grep/">grep</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/command/linux/">linux</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/command/pigz/">pigz</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/command/sed/">sed</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/command/split/">split</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/command/tr/">tr</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/haproxy/">haproxy</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/haproxy/haproxy-install/">haproxy install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/nginx/">nginx</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/nginx/nginx-install/">nginx install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/nginx/nginx-location/">nginx location</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/nginx/nginx-rewrite/">nginx rewrite</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/nginx/nginx-status/">nginx status</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/ntpd/">ntpd</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/ntpd/ntpd-install/">ntpd install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/openssl/">openssl</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/openssl/openssl-certificate/">openssl certificate</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/openvpn/">openvpn</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/openvpn/openvpn-install/">openvpn install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/rsync/">rsync</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/rsync/rsync-install/">rsync install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/supersord/">supersord</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/supersord/supersord-install/">supersord install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/vsftpd/">vsftpd</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/vsftpd/ftp-proxy/">ftp proxy</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/vsftpd/vsftpd-error/">vsftpd error</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/vsftpd/vsftpd-info/">vsftpd info</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/vsftpd/vsftpd-install/">vsftpd install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/windows/">windows</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/windows/cygwin-install/">cygwin install</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/windows/ipsec-set/">ipsec set</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system-service/windows/windows-modify-hosts/">windows modify hosts</a></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/web/">web</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/web/SSL/">SSL</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/web/SSL/SSL-certificate/">SSL certificate</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/web/angular/">angular</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/web/angular/angular-install/">angular install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/web/hexo/">hexo</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/web/hexo/hexo-install/">hexo install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/web/sass/">sass</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/web/sass/sass-install/">sass install</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/web/xml/">xml</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/web/xml/xml-format/">xml format</a></li></ul></li></ul></li></ul>
    </div>
  </div>


  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">归档</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/01/">一月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/11/">十一月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/10/">十月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/09/">九月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/08/">八月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/07/">七月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/06/">六月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/05/">五月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/04/">四月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/03/">三月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/02/">二月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/01/">一月 2017</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">最新文章</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2020/01/01/hello-everyone/">Hello Everyone</a>
          </li>
        
          <li>
            <a href="/2017/11/28/kafka-web-console/">kafka web console</a>
          </li>
        
          <li>
            <a href="/2017/11/27/svn-auto-update/">svn auto update</a>
          </li>
        
          <li>
            <a href="/2017/11/15/salt-manage-event-reactor/">salt manage event reactor</a>
          </li>
        
          <li>
            <a href="/2017/11/15/salt-manage-job/">salt manage job</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2017 penn<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>



  </div>
</body>
</html>